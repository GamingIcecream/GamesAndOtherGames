var pc=n=>{throw TypeError(n)};var zt=(n,e,t)=>e.has(n)?pc("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t);var xo,So,ko,Co;import{A as dc,p as uc,q as hc,G as fc,s as mc,L as Do,v as gc,x as vc,y as Lo,z as yc,O as Ft,V as ue,B as z,M as St,P as bc,C as qt,W as ct,D as wc,E as Pi,R as xc,N as Io,H as Sc,U as Xn,S as kt,I as kc,J as Cc,K as Ro,Q as Bo,X as _c,Y as Ec,Z as Tc,_ as Pc,$ as Ac,a0 as Mc,a1 as Ai,a2 as pt,a3 as Oc,a4 as we,a5 as Ct,a6 as U,a7 as Dc,a8 as Lc,a9 as Ic,aa as Rc,ab as Bc,ac as Wn,ad as jc,ae as Mi,af as Zn,ag as _t,ah as Nc,ai as jo,aj as Oi,ak as Di,al as Ht,am as Uc,an as zc,ao as Gn,ap as No,aq as Fc,ar as Yn,as as Ue,at as Uo,au as qc,av as Hc,aw as Me,ax as zo,ay as Vt,az as Li,aA as rt,aB as Vc,aC as Xc,aD as Wc,aE as Et,aF as Tt,aG as Fo,aH as Zc,aI as Gc,o as j,c as N,a as S,b as W,d as pe,t as me,u as B,k as Be,g as K,j as de,e as fe,F as Ce,h as Fe,aJ as $,f as ae,aK as qo,aL as Kn,T as Xt,w as Wt,m as Ho,i as Vo,aM as Qn,aN as Yc,aO as Jn,aP as Kc,aQ as Xo,aR as $n,aS as Qc,n as Jc}from"./SkeletonUtils-B_bGocrk.js";import{G as Wo,E as $c,T as Zo}from"./tween.esm-CqKbpIa_.js";function ep(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in n)){const r=Object.getOwnPropertyDescriptor(i,o);r&&Object.defineProperty(n,o,r.get?r:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}var Z=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Go(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function tp(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var o=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:function(){return n[i]}})}),t}var Ii={exports:{}};/*!
* matter-js 0.19.0 by @liabru
* http://brm.io/matter-js/
* License MIT
* 
* The MIT License (MIT)
* 
* Copyright (c) Liam Brummitt and contributors.
* 
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to deal
* in the Software without restriction, including without limitation the rights
* to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
* 
* The above copyright notice and this permission notice shall be included in
* all copies or substantial portions of the Software.
* 
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
* THE SOFTWARE.
*/var xb=Ii.exports;(function(n,e){(function(t,i){n.exports=i()})(Z,function(){return function(t){var i={};function o(r){if(i[r])return i[r].exports;var s=i[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=t,o.c=i,o.d=function(r,s,a){o.o(r,s)||Object.defineProperty(r,s,{enumerable:!0,get:a})},o.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},o.t=function(r,s){if(s&1&&(r=o(r)),s&8||s&4&&typeof r=="object"&&r&&r.__esModule)return r;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:r}),s&2&&typeof r!="string")for(var c in r)o.d(a,c,(function(u){return r[u]}).bind(null,c));return a},o.n=function(r){var s=r&&r.__esModule?function(){return r.default}:function(){return r};return o.d(s,"a",s),s},o.o=function(r,s){return Object.prototype.hasOwnProperty.call(r,s)},o.p="",o(o.s=20)}([function(t,i){var o={};t.exports=o,function(){o._baseDelta=1e3/60,o._nextId=0,o._seed=0,o._nowStartTime=+new Date,o._warnedOnce={},o._decomp=null,o.extend=function(s,a){var c,u,d;typeof a=="boolean"?(c=2,d=a):(c=1,d=!0);for(var f=c;f<arguments.length;f++){var p=arguments[f];if(p)for(var l in p)d&&p[l]&&p[l].constructor===Object&&(!s[l]||s[l].constructor===Object)?(s[l]=s[l]||{},o.extend(s[l],d,p[l])):s[l]=p[l]}return s},o.clone=function(s,a){return o.extend({},a,s)},o.keys=function(s){if(Object.keys)return Object.keys(s);var a=[];for(var c in s)a.push(c);return a},o.values=function(s){var a=[];if(Object.keys){for(var c=Object.keys(s),u=0;u<c.length;u++)a.push(s[c[u]]);return a}for(var d in s)a.push(s[d]);return a},o.get=function(s,a,c,u){a=a.split(".").slice(c,u);for(var d=0;d<a.length;d+=1)s=s[a[d]];return s},o.set=function(s,a,c,u,d){var f=a.split(".").slice(u,d);return o.get(s,a,0,-1)[f[f.length-1]]=c,c},o.shuffle=function(s){for(var a=s.length-1;a>0;a--){var c=Math.floor(o.random()*(a+1)),u=s[a];s[a]=s[c],s[c]=u}return s},o.choose=function(s){return s[Math.floor(o.random()*s.length)]},o.isElement=function(s){return typeof HTMLElement<"u"?s instanceof HTMLElement:!!(s&&s.nodeType&&s.nodeName)},o.isArray=function(s){return Object.prototype.toString.call(s)==="[object Array]"},o.isFunction=function(s){return typeof s=="function"},o.isPlainObject=function(s){return typeof s=="object"&&s.constructor===Object},o.isString=function(s){return toString.call(s)==="[object String]"},o.clamp=function(s,a,c){return s<a?a:s>c?c:s},o.sign=function(s){return s<0?-1:1},o.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-o._nowStartTime},o.random=function(s,a){return s=typeof s<"u"?s:0,a=typeof a<"u"?a:1,s+r()*(a-s)};var r=function(){return o._seed=(o._seed*9301+49297)%233280,o._seed/233280};o.colorToNumber=function(s){return s=s.replace("#",""),s.length==3&&(s=s.charAt(0)+s.charAt(0)+s.charAt(1)+s.charAt(1)+s.charAt(2)+s.charAt(2)),parseInt(s,16)},o.logLevel=1,o.log=function(){console&&o.logLevel>0&&o.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},o.info=function(){console&&o.logLevel>0&&o.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},o.warn=function(){console&&o.logLevel>0&&o.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},o.warnOnce=function(){var s=Array.prototype.slice.call(arguments).join(" ");o._warnedOnce[s]||(o.warn(s),o._warnedOnce[s]=!0)},o.deprecated=function(s,a,c){s[a]=o.chain(function(){o.warnOnce("\u{1F505} deprecated \u{1F505}",c)},s[a])},o.nextId=function(){return o._nextId++},o.indexOf=function(s,a){if(s.indexOf)return s.indexOf(a);for(var c=0;c<s.length;c++)if(s[c]===a)return c;return-1},o.map=function(s,a){if(s.map)return s.map(a);for(var c=[],u=0;u<s.length;u+=1)c.push(a(s[u]));return c},o.topologicalSort=function(s){var a=[],c=[],u=[];for(var d in s)!c[d]&&!u[d]&&o._topologicalSort(d,c,u,s,a);return a},o._topologicalSort=function(s,a,c,u,d){var f=u[s]||[];c[s]=!0;for(var p=0;p<f.length;p+=1){var l=f[p];c[l]||a[l]||o._topologicalSort(l,a,c,u,d)}c[s]=!1,a[s]=!0,d.push(s)},o.chain=function(){for(var s=[],a=0;a<arguments.length;a+=1){var c=arguments[a];c._chained?s.push.apply(s,c._chained):s.push(c)}var u=function(){for(var d,f=new Array(arguments.length),p=0,l=arguments.length;p<l;p++)f[p]=arguments[p];for(p=0;p<s.length;p+=1){var m=s[p].apply(d,f);typeof m<"u"&&(d=m)}return d};return u._chained=s,u},o.chainPathBefore=function(s,a,c){return o.set(s,a,o.chain(c,o.get(s,a)))},o.chainPathAfter=function(s,a,c){return o.set(s,a,o.chain(o.get(s,a),c))},o.setDecomp=function(s){o._decomp=s},o.getDecomp=function(){var s=o._decomp;try{!s&&typeof window<"u"&&(s=window.decomp),!s&&typeof Z<"u"&&(s=Z.decomp)}catch{s=null}return s}}()},function(t,i){var o={};t.exports=o,function(){o.create=function(r){var s={min:{x:0,y:0},max:{x:0,y:0}};return r&&o.update(s,r),s},o.update=function(r,s,a){r.min.x=1/0,r.max.x=-1/0,r.min.y=1/0,r.max.y=-1/0;for(var c=0;c<s.length;c++){var u=s[c];u.x>r.max.x&&(r.max.x=u.x),u.x<r.min.x&&(r.min.x=u.x),u.y>r.max.y&&(r.max.y=u.y),u.y<r.min.y&&(r.min.y=u.y)}a&&(a.x>0?r.max.x+=a.x:r.min.x+=a.x,a.y>0?r.max.y+=a.y:r.min.y+=a.y)},o.contains=function(r,s){return s.x>=r.min.x&&s.x<=r.max.x&&s.y>=r.min.y&&s.y<=r.max.y},o.overlaps=function(r,s){return r.min.x<=s.max.x&&r.max.x>=s.min.x&&r.max.y>=s.min.y&&r.min.y<=s.max.y},o.translate=function(r,s){r.min.x+=s.x,r.max.x+=s.x,r.min.y+=s.y,r.max.y+=s.y},o.shift=function(r,s){var a=r.max.x-r.min.x,c=r.max.y-r.min.y;r.min.x=s.x,r.max.x=s.x+a,r.min.y=s.y,r.max.y=s.y+c}}()},function(t,i){var o={};t.exports=o,function(){o.create=function(r,s){return{x:r||0,y:s||0}},o.clone=function(r){return{x:r.x,y:r.y}},o.magnitude=function(r){return Math.sqrt(r.x*r.x+r.y*r.y)},o.magnitudeSquared=function(r){return r.x*r.x+r.y*r.y},o.rotate=function(r,s,a){var c=Math.cos(s),u=Math.sin(s);a||(a={});var d=r.x*c-r.y*u;return a.y=r.x*u+r.y*c,a.x=d,a},o.rotateAbout=function(r,s,a,c){var u=Math.cos(s),d=Math.sin(s);c||(c={});var f=a.x+((r.x-a.x)*u-(r.y-a.y)*d);return c.y=a.y+((r.x-a.x)*d+(r.y-a.y)*u),c.x=f,c},o.normalise=function(r){var s=o.magnitude(r);return s===0?{x:0,y:0}:{x:r.x/s,y:r.y/s}},o.dot=function(r,s){return r.x*s.x+r.y*s.y},o.cross=function(r,s){return r.x*s.y-r.y*s.x},o.cross3=function(r,s,a){return(s.x-r.x)*(a.y-r.y)-(s.y-r.y)*(a.x-r.x)},o.add=function(r,s,a){return a||(a={}),a.x=r.x+s.x,a.y=r.y+s.y,a},o.sub=function(r,s,a){return a||(a={}),a.x=r.x-s.x,a.y=r.y-s.y,a},o.mult=function(r,s){return{x:r.x*s,y:r.y*s}},o.div=function(r,s){return{x:r.x/s,y:r.y/s}},o.perp=function(r,s){return s=s===!0?-1:1,{x:s*-r.y,y:s*r.x}},o.neg=function(r){return{x:-r.x,y:-r.y}},o.angle=function(r,s){return Math.atan2(s.y-r.y,s.x-r.x)},o._temp=[o.create(),o.create(),o.create(),o.create(),o.create(),o.create()]}()},function(t,i,o){var r={};t.exports=r;var s=o(2),a=o(0);(function(){r.create=function(c,u){for(var d=[],f=0;f<c.length;f++){var p=c[f],l={x:p.x,y:p.y,index:f,body:u,isInternal:!1};d.push(l)}return d},r.fromPath=function(c,u){var d=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,f=[];return c.replace(d,function(p,l,m){f.push({x:parseFloat(l),y:parseFloat(m)})}),r.create(f,u)},r.centre=function(c){for(var u=r.area(c,!0),d={x:0,y:0},f,p,l,m=0;m<c.length;m++)l=(m+1)%c.length,f=s.cross(c[m],c[l]),p=s.mult(s.add(c[m],c[l]),f),d=s.add(d,p);return s.div(d,6*u)},r.mean=function(c){for(var u={x:0,y:0},d=0;d<c.length;d++)u.x+=c[d].x,u.y+=c[d].y;return s.div(u,c.length)},r.area=function(c,u){for(var d=0,f=c.length-1,p=0;p<c.length;p++)d+=(c[f].x-c[p].x)*(c[f].y+c[p].y),f=p;return u?d/2:Math.abs(d)/2},r.inertia=function(c,u){for(var d=0,f=0,p=c,l,m,h=0;h<p.length;h++)m=(h+1)%p.length,l=Math.abs(s.cross(p[m],p[h])),d+=l*(s.dot(p[m],p[m])+s.dot(p[m],p[h])+s.dot(p[h],p[h])),f+=l;return u/6*(d/f)},r.translate=function(c,u,d){d=typeof d<"u"?d:1;var f=c.length,p=u.x*d,l=u.y*d,m;for(m=0;m<f;m++)c[m].x+=p,c[m].y+=l;return c},r.rotate=function(c,u,d){if(u!==0){var f=Math.cos(u),p=Math.sin(u),l=d.x,m=d.y,h=c.length,g,v,b,_;for(_=0;_<h;_++)g=c[_],v=g.x-l,b=g.y-m,g.x=l+(v*f-b*p),g.y=m+(v*p+b*f);return c}},r.contains=function(c,u){for(var d=u.x,f=u.y,p=c.length,l=c[p-1],m,h=0;h<p;h++){if(m=c[h],(d-l.x)*(m.y-l.y)+(f-l.y)*(l.x-m.x)>0)return!1;l=m}return!0},r.scale=function(c,u,d,f){if(u===1&&d===1)return c;f=f||r.centre(c);for(var p,l,m=0;m<c.length;m++)p=c[m],l=s.sub(p,f),c[m].x=f.x+l.x*u,c[m].y=f.y+l.y*d;return c},r.chamfer=function(c,u,d,f,p){typeof u=="number"?u=[u]:u=u||[8],d=typeof d<"u"?d:-1,f=f||2,p=p||14;for(var l=[],m=0;m<c.length;m++){var h=c[m-1>=0?m-1:c.length-1],g=c[m],v=c[(m+1)%c.length],b=u[m<u.length?m:u.length-1];if(b===0){l.push(g);continue}var _=s.normalise({x:g.y-h.y,y:h.x-g.x}),E=s.normalise({x:v.y-g.y,y:g.x-v.x}),y=Math.sqrt(2*Math.pow(b,2)),w=s.mult(a.clone(_),b),T=s.normalise(s.mult(s.add(_,E),.5)),C=s.sub(g,s.mult(T,y)),M=d;d===-1&&(M=Math.pow(b,.32)*1.75),M=a.clamp(M,f,p),M%2===1&&(M+=1);for(var L=Math.acos(s.dot(_,E)),x=L/M,D=0;D<M;D++)l.push(s.add(s.rotate(w,x*D),C))}return l},r.clockwiseSort=function(c){var u=r.mean(c);return c.sort(function(d,f){return s.angle(u,d)-s.angle(u,f)}),c},r.isConvex=function(c){var u=0,d=c.length,f,p,l,m;if(d<3)return null;for(f=0;f<d;f++)if(p=(f+1)%d,l=(f+2)%d,m=(c[p].x-c[f].x)*(c[l].y-c[p].y),m-=(c[p].y-c[f].y)*(c[l].x-c[p].x),m<0?u|=1:m>0&&(u|=2),u===3)return!1;return u!==0?!0:null},r.hull=function(c){var u=[],d=[],f,p;for(c=c.slice(0),c.sort(function(l,m){var h=l.x-m.x;return h!==0?h:l.y-m.y}),p=0;p<c.length;p+=1){for(f=c[p];d.length>=2&&s.cross3(d[d.length-2],d[d.length-1],f)<=0;)d.pop();d.push(f)}for(p=c.length-1;p>=0;p-=1){for(f=c[p];u.length>=2&&s.cross3(u[u.length-2],u[u.length-1],f)<=0;)u.pop();u.push(f)}return u.pop(),d.pop(),u.concat(d)}})()},function(t,i,o){var r={};t.exports=r;var s=o(3),a=o(2),c=o(7),u=o(0),d=o(1),f=o(11);(function(){r._timeCorrection=!0,r._inertiaScale=4,r._nextCollidingGroupId=1,r._nextNonCollidingGroupId=-1,r._nextCategory=1,r._baseDelta=1e3/60,r.create=function(l){var m={id:u.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:s.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},h=u.extend(m,l);return p(h,l),h},r.nextGroup=function(l){return l?r._nextNonCollidingGroupId--:r._nextCollidingGroupId++},r.nextCategory=function(){return r._nextCategory=r._nextCategory<<1,r._nextCategory};var p=function(l,m){m=m||{},r.set(l,{bounds:l.bounds||d.create(l.vertices),positionPrev:l.positionPrev||a.clone(l.position),anglePrev:l.anglePrev||l.angle,vertices:l.vertices,parts:l.parts||[l],isStatic:l.isStatic,isSleeping:l.isSleeping,parent:l.parent||l}),s.rotate(l.vertices,l.angle,l.position),f.rotate(l.axes,l.angle),d.update(l.bounds,l.vertices,l.velocity),r.set(l,{axes:m.axes||l.axes,area:m.area||l.area,mass:m.mass||l.mass,inertia:m.inertia||l.inertia});var h=l.isStatic?"#14151f":u.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),g=l.isStatic?"#555":"#ccc",v=l.isStatic&&l.render.fillStyle===null?1:0;l.render.fillStyle=l.render.fillStyle||h,l.render.strokeStyle=l.render.strokeStyle||g,l.render.lineWidth=l.render.lineWidth||v,l.render.sprite.xOffset+=-(l.bounds.min.x-l.position.x)/(l.bounds.max.x-l.bounds.min.x),l.render.sprite.yOffset+=-(l.bounds.min.y-l.position.y)/(l.bounds.max.y-l.bounds.min.y)};r.set=function(l,m,h){var g;typeof m=="string"&&(g=m,m={},m[g]=h);for(g in m)if(Object.prototype.hasOwnProperty.call(m,g))switch(h=m[g],g){case"isStatic":r.setStatic(l,h);break;case"isSleeping":c.set(l,h);break;case"mass":r.setMass(l,h);break;case"density":r.setDensity(l,h);break;case"inertia":r.setInertia(l,h);break;case"vertices":r.setVertices(l,h);break;case"position":r.setPosition(l,h);break;case"angle":r.setAngle(l,h);break;case"velocity":r.setVelocity(l,h);break;case"angularVelocity":r.setAngularVelocity(l,h);break;case"speed":r.setSpeed(l,h);break;case"angularSpeed":r.setAngularSpeed(l,h);break;case"parts":r.setParts(l,h);break;case"centre":r.setCentre(l,h);break;default:l[g]=h}},r.setStatic=function(l,m){for(var h=0;h<l.parts.length;h++){var g=l.parts[h];g.isStatic=m,m?(g._original={restitution:g.restitution,friction:g.friction,mass:g.mass,inertia:g.inertia,density:g.density,inverseMass:g.inverseMass,inverseInertia:g.inverseInertia},g.restitution=0,g.friction=1,g.mass=g.inertia=g.density=1/0,g.inverseMass=g.inverseInertia=0,g.positionPrev.x=g.position.x,g.positionPrev.y=g.position.y,g.anglePrev=g.angle,g.angularVelocity=0,g.speed=0,g.angularSpeed=0,g.motion=0):g._original&&(g.restitution=g._original.restitution,g.friction=g._original.friction,g.mass=g._original.mass,g.inertia=g._original.inertia,g.density=g._original.density,g.inverseMass=g._original.inverseMass,g.inverseInertia=g._original.inverseInertia,g._original=null)}},r.setMass=function(l,m){var h=l.inertia/(l.mass/6);l.inertia=h*(m/6),l.inverseInertia=1/l.inertia,l.mass=m,l.inverseMass=1/l.mass,l.density=l.mass/l.area},r.setDensity=function(l,m){r.setMass(l,m*l.area),l.density=m},r.setInertia=function(l,m){l.inertia=m,l.inverseInertia=1/l.inertia},r.setVertices=function(l,m){m[0].body===l?l.vertices=m:l.vertices=s.create(m,l),l.axes=f.fromVertices(l.vertices),l.area=s.area(l.vertices),r.setMass(l,l.density*l.area);var h=s.centre(l.vertices);s.translate(l.vertices,h,-1),r.setInertia(l,r._inertiaScale*s.inertia(l.vertices,l.mass)),s.translate(l.vertices,l.position),d.update(l.bounds,l.vertices,l.velocity)},r.setParts=function(l,m,h){var g;for(m=m.slice(0),l.parts.length=0,l.parts.push(l),l.parent=l,g=0;g<m.length;g++){var v=m[g];v!==l&&(v.parent=l,l.parts.push(v))}if(l.parts.length!==1){if(h=typeof h<"u"?h:!0,h){var b=[];for(g=0;g<m.length;g++)b=b.concat(m[g].vertices);s.clockwiseSort(b);var _=s.hull(b),E=s.centre(_);r.setVertices(l,_),s.translate(l.vertices,E)}var y=r._totalProperties(l);l.area=y.area,l.parent=l,l.position.x=y.centre.x,l.position.y=y.centre.y,l.positionPrev.x=y.centre.x,l.positionPrev.y=y.centre.y,r.setMass(l,y.mass),r.setInertia(l,y.inertia),r.setPosition(l,y.centre)}},r.setCentre=function(l,m,h){h?(l.positionPrev.x+=m.x,l.positionPrev.y+=m.y,l.position.x+=m.x,l.position.y+=m.y):(l.positionPrev.x=m.x-(l.position.x-l.positionPrev.x),l.positionPrev.y=m.y-(l.position.y-l.positionPrev.y),l.position.x=m.x,l.position.y=m.y)},r.setPosition=function(l,m,h){var g=a.sub(m,l.position);h?(l.positionPrev.x=l.position.x,l.positionPrev.y=l.position.y,l.velocity.x=g.x,l.velocity.y=g.y,l.speed=a.magnitude(g)):(l.positionPrev.x+=g.x,l.positionPrev.y+=g.y);for(var v=0;v<l.parts.length;v++){var b=l.parts[v];b.position.x+=g.x,b.position.y+=g.y,s.translate(b.vertices,g),d.update(b.bounds,b.vertices,l.velocity)}},r.setAngle=function(l,m,h){var g=m-l.angle;h?(l.anglePrev=l.angle,l.angularVelocity=g,l.angularSpeed=Math.abs(g)):l.anglePrev+=g;for(var v=0;v<l.parts.length;v++){var b=l.parts[v];b.angle+=g,s.rotate(b.vertices,g,l.position),f.rotate(b.axes,g),d.update(b.bounds,b.vertices,l.velocity),v>0&&a.rotateAbout(b.position,g,l.position,b.position)}},r.setVelocity=function(l,m){var h=l.deltaTime/r._baseDelta;l.positionPrev.x=l.position.x-m.x*h,l.positionPrev.y=l.position.y-m.y*h,l.velocity.x=(l.position.x-l.positionPrev.x)/h,l.velocity.y=(l.position.y-l.positionPrev.y)/h,l.speed=a.magnitude(l.velocity)},r.getVelocity=function(l){var m=r._baseDelta/l.deltaTime;return{x:(l.position.x-l.positionPrev.x)*m,y:(l.position.y-l.positionPrev.y)*m}},r.getSpeed=function(l){return a.magnitude(r.getVelocity(l))},r.setSpeed=function(l,m){r.setVelocity(l,a.mult(a.normalise(r.getVelocity(l)),m))},r.setAngularVelocity=function(l,m){var h=l.deltaTime/r._baseDelta;l.anglePrev=l.angle-m*h,l.angularVelocity=(l.angle-l.anglePrev)/h,l.angularSpeed=Math.abs(l.angularVelocity)},r.getAngularVelocity=function(l){return(l.angle-l.anglePrev)*r._baseDelta/l.deltaTime},r.getAngularSpeed=function(l){return Math.abs(r.getAngularVelocity(l))},r.setAngularSpeed=function(l,m){r.setAngularVelocity(l,u.sign(r.getAngularVelocity(l))*m)},r.translate=function(l,m,h){r.setPosition(l,a.add(l.position,m),h)},r.rotate=function(l,m,h,g){if(!h)r.setAngle(l,l.angle+m,g);else{var v=Math.cos(m),b=Math.sin(m),_=l.position.x-h.x,E=l.position.y-h.y;r.setPosition(l,{x:h.x+(_*v-E*b),y:h.y+(_*b+E*v)},g),r.setAngle(l,l.angle+m,g)}},r.scale=function(l,m,h,g){var v=0,b=0;g=g||l.position;for(var _=0;_<l.parts.length;_++){var E=l.parts[_];s.scale(E.vertices,m,h,g),E.axes=f.fromVertices(E.vertices),E.area=s.area(E.vertices),r.setMass(E,l.density*E.area),s.translate(E.vertices,{x:-E.position.x,y:-E.position.y}),r.setInertia(E,r._inertiaScale*s.inertia(E.vertices,E.mass)),s.translate(E.vertices,{x:E.position.x,y:E.position.y}),_>0&&(v+=E.area,b+=E.inertia),E.position.x=g.x+(E.position.x-g.x)*m,E.position.y=g.y+(E.position.y-g.y)*h,d.update(E.bounds,E.vertices,l.velocity)}l.parts.length>1&&(l.area=v,l.isStatic||(r.setMass(l,l.density*v),r.setInertia(l,b))),l.circleRadius&&(m===h?l.circleRadius*=m:l.circleRadius=null)},r.update=function(l,m){m=(typeof m<"u"?m:1e3/60)*l.timeScale;var h=m*m,g=r._timeCorrection?m/(l.deltaTime||m):1,v=1-l.frictionAir*(m/u._baseDelta),b=(l.position.x-l.positionPrev.x)*g,_=(l.position.y-l.positionPrev.y)*g;l.velocity.x=b*v+l.force.x/l.mass*h,l.velocity.y=_*v+l.force.y/l.mass*h,l.positionPrev.x=l.position.x,l.positionPrev.y=l.position.y,l.position.x+=l.velocity.x,l.position.y+=l.velocity.y,l.deltaTime=m,l.angularVelocity=(l.angle-l.anglePrev)*v*g+l.torque/l.inertia*h,l.anglePrev=l.angle,l.angle+=l.angularVelocity;for(var E=0;E<l.parts.length;E++){var y=l.parts[E];s.translate(y.vertices,l.velocity),E>0&&(y.position.x+=l.velocity.x,y.position.y+=l.velocity.y),l.angularVelocity!==0&&(s.rotate(y.vertices,l.angularVelocity,l.position),f.rotate(y.axes,l.angularVelocity),E>0&&a.rotateAbout(y.position,l.angularVelocity,l.position,y.position)),d.update(y.bounds,y.vertices,l.velocity)}},r.updateVelocities=function(l){var m=r._baseDelta/l.deltaTime,h=l.velocity;h.x=(l.position.x-l.positionPrev.x)*m,h.y=(l.position.y-l.positionPrev.y)*m,l.speed=Math.sqrt(h.x*h.x+h.y*h.y),l.angularVelocity=(l.angle-l.anglePrev)*m,l.angularSpeed=Math.abs(l.angularVelocity)},r.applyForce=function(l,m,h){var g={x:m.x-l.position.x,y:m.y-l.position.y};l.force.x+=h.x,l.force.y+=h.y,l.torque+=g.x*h.y-g.y*h.x},r._totalProperties=function(l){for(var m={mass:0,area:0,inertia:0,centre:{x:0,y:0}},h=l.parts.length===1?0:1;h<l.parts.length;h++){var g=l.parts[h],v=g.mass!==1/0?g.mass:1;m.mass+=v,m.area+=g.area,m.inertia+=g.inertia,m.centre=a.add(m.centre,a.mult(g.position,v))}return m.centre=a.div(m.centre,m.mass),m}})()},function(t,i,o){var r={};t.exports=r;var s=o(0);(function(){r.on=function(a,c,u){for(var d=c.split(" "),f,p=0;p<d.length;p++)f=d[p],a.events=a.events||{},a.events[f]=a.events[f]||[],a.events[f].push(u);return u},r.off=function(a,c,u){if(!c){a.events={};return}typeof c=="function"&&(u=c,c=s.keys(a.events).join(" "));for(var d=c.split(" "),f=0;f<d.length;f++){var p=a.events[d[f]],l=[];if(u&&p)for(var m=0;m<p.length;m++)p[m]!==u&&l.push(p[m]);a.events[d[f]]=l}},r.trigger=function(a,c,u){var d,f,p,l,m=a.events;if(m&&s.keys(m).length>0){u||(u={}),d=c.split(" ");for(var h=0;h<d.length;h++)if(f=d[h],p=m[f],p){l=s.clone(u,!1),l.name=f,l.source=a;for(var g=0;g<p.length;g++)p[g].apply(a,[l])}}}})()},function(t,i,o){var r={};t.exports=r;var s=o(5),a=o(0),c=o(1),u=o(4);(function(){r.create=function(d){return a.extend({id:a.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},d)},r.setModified=function(d,f,p,l){if(d.isModified=f,f&&d.cache&&(d.cache.allBodies=null,d.cache.allConstraints=null,d.cache.allComposites=null),p&&d.parent&&r.setModified(d.parent,f,p,l),l)for(var m=0;m<d.composites.length;m++){var h=d.composites[m];r.setModified(h,f,p,l)}},r.add=function(d,f){var p=[].concat(f);s.trigger(d,"beforeAdd",{object:f});for(var l=0;l<p.length;l++){var m=p[l];switch(m.type){case"body":if(m.parent!==m){a.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}r.addBody(d,m);break;case"constraint":r.addConstraint(d,m);break;case"composite":r.addComposite(d,m);break;case"mouseConstraint":r.addConstraint(d,m.constraint);break}}return s.trigger(d,"afterAdd",{object:f}),d},r.remove=function(d,f,p){var l=[].concat(f);s.trigger(d,"beforeRemove",{object:f});for(var m=0;m<l.length;m++){var h=l[m];switch(h.type){case"body":r.removeBody(d,h,p);break;case"constraint":r.removeConstraint(d,h,p);break;case"composite":r.removeComposite(d,h,p);break;case"mouseConstraint":r.removeConstraint(d,h.constraint);break}}return s.trigger(d,"afterRemove",{object:f}),d},r.addComposite=function(d,f){return d.composites.push(f),f.parent=d,r.setModified(d,!0,!0,!1),d},r.removeComposite=function(d,f,p){var l=a.indexOf(d.composites,f);if(l!==-1&&r.removeCompositeAt(d,l),p)for(var m=0;m<d.composites.length;m++)r.removeComposite(d.composites[m],f,!0);return d},r.removeCompositeAt=function(d,f){return d.composites.splice(f,1),r.setModified(d,!0,!0,!1),d},r.addBody=function(d,f){return d.bodies.push(f),r.setModified(d,!0,!0,!1),d},r.removeBody=function(d,f,p){var l=a.indexOf(d.bodies,f);if(l!==-1&&r.removeBodyAt(d,l),p)for(var m=0;m<d.composites.length;m++)r.removeBody(d.composites[m],f,!0);return d},r.removeBodyAt=function(d,f){return d.bodies.splice(f,1),r.setModified(d,!0,!0,!1),d},r.addConstraint=function(d,f){return d.constraints.push(f),r.setModified(d,!0,!0,!1),d},r.removeConstraint=function(d,f,p){var l=a.indexOf(d.constraints,f);if(l!==-1&&r.removeConstraintAt(d,l),p)for(var m=0;m<d.composites.length;m++)r.removeConstraint(d.composites[m],f,!0);return d},r.removeConstraintAt=function(d,f){return d.constraints.splice(f,1),r.setModified(d,!0,!0,!1),d},r.clear=function(d,f,p){if(p)for(var l=0;l<d.composites.length;l++)r.clear(d.composites[l],f,!0);return f?d.bodies=d.bodies.filter(function(m){return m.isStatic}):d.bodies.length=0,d.constraints.length=0,d.composites.length=0,r.setModified(d,!0,!0,!1),d},r.allBodies=function(d){if(d.cache&&d.cache.allBodies)return d.cache.allBodies;for(var f=[].concat(d.bodies),p=0;p<d.composites.length;p++)f=f.concat(r.allBodies(d.composites[p]));return d.cache&&(d.cache.allBodies=f),f},r.allConstraints=function(d){if(d.cache&&d.cache.allConstraints)return d.cache.allConstraints;for(var f=[].concat(d.constraints),p=0;p<d.composites.length;p++)f=f.concat(r.allConstraints(d.composites[p]));return d.cache&&(d.cache.allConstraints=f),f},r.allComposites=function(d){if(d.cache&&d.cache.allComposites)return d.cache.allComposites;for(var f=[].concat(d.composites),p=0;p<d.composites.length;p++)f=f.concat(r.allComposites(d.composites[p]));return d.cache&&(d.cache.allComposites=f),f},r.get=function(d,f,p){var l,m;switch(p){case"body":l=r.allBodies(d);break;case"constraint":l=r.allConstraints(d);break;case"composite":l=r.allComposites(d).concat(d);break}return l?(m=l.filter(function(h){return h.id.toString()===f.toString()}),m.length===0?null:m[0]):null},r.move=function(d,f,p){return r.remove(d,f),r.add(p,f),d},r.rebase=function(d){for(var f=r.allBodies(d).concat(r.allConstraints(d)).concat(r.allComposites(d)),p=0;p<f.length;p++)f[p].id=a.nextId();return d},r.translate=function(d,f,p){for(var l=p?r.allBodies(d):d.bodies,m=0;m<l.length;m++)u.translate(l[m],f);return d},r.rotate=function(d,f,p,l){for(var m=Math.cos(f),h=Math.sin(f),g=l?r.allBodies(d):d.bodies,v=0;v<g.length;v++){var b=g[v],_=b.position.x-p.x,E=b.position.y-p.y;u.setPosition(b,{x:p.x+(_*m-E*h),y:p.y+(_*h+E*m)}),u.rotate(b,f)}return d},r.scale=function(d,f,p,l,m){for(var h=m?r.allBodies(d):d.bodies,g=0;g<h.length;g++){var v=h[g],b=v.position.x-l.x,_=v.position.y-l.y;u.setPosition(v,{x:l.x+b*f,y:l.y+_*p}),u.scale(v,f,p)}return d},r.bounds=function(d){for(var f=r.allBodies(d),p=[],l=0;l<f.length;l+=1){var m=f[l];p.push(m.bounds.min,m.bounds.max)}return c.create(p)}})()},function(t,i,o){var r={};t.exports=r;var s=o(4),a=o(5),c=o(0);(function(){r._motionWakeThreshold=.18,r._motionSleepThreshold=.08,r._minBias=.9,r.update=function(u,d){for(var f=d/c._baseDelta,p=r._motionSleepThreshold,l=0;l<u.length;l++){var m=u[l],h=s.getSpeed(m),g=s.getAngularSpeed(m),v=h*h+g*g;if(m.force.x!==0||m.force.y!==0){r.set(m,!1);continue}var b=Math.min(m.motion,v),_=Math.max(m.motion,v);m.motion=r._minBias*b+(1-r._minBias)*_,m.sleepThreshold>0&&m.motion<p?(m.sleepCounter+=1,m.sleepCounter>=m.sleepThreshold/f&&r.set(m,!0)):m.sleepCounter>0&&(m.sleepCounter-=1)}},r.afterCollisions=function(u){for(var d=r._motionSleepThreshold,f=0;f<u.length;f++){var p=u[f];if(p.isActive){var l=p.collision,m=l.bodyA.parent,h=l.bodyB.parent;if(!(m.isSleeping&&h.isSleeping||m.isStatic||h.isStatic)&&(m.isSleeping||h.isSleeping)){var g=m.isSleeping&&!m.isStatic?m:h,v=g===m?h:m;!g.isStatic&&v.motion>d&&r.set(g,!1)}}}},r.set=function(u,d){var f=u.isSleeping;d?(u.isSleeping=!0,u.sleepCounter=u.sleepThreshold,u.positionImpulse.x=0,u.positionImpulse.y=0,u.positionPrev.x=u.position.x,u.positionPrev.y=u.position.y,u.anglePrev=u.angle,u.speed=0,u.angularSpeed=0,u.motion=0,f||a.trigger(u,"sleepStart")):(u.isSleeping=!1,u.sleepCounter=0,f&&a.trigger(u,"sleepEnd"))}})()},function(t,i,o){var r={};t.exports=r;var s=o(3),a=o(9);(function(){var c=[],u={overlap:0,axis:null},d={overlap:0,axis:null};r.create=function(f,p){return{pair:null,collided:!1,bodyA:f,bodyB:p,parentA:f.parent,parentB:p.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},r.collides=function(f,p,l){if(r._overlapAxes(u,f.vertices,p.vertices,f.axes),u.overlap<=0||(r._overlapAxes(d,p.vertices,f.vertices,p.axes),d.overlap<=0))return null;var m=l&&l.table[a.id(f,p)],h;m?h=m.collision:(h=r.create(f,p),h.collided=!0,h.bodyA=f.id<p.id?f:p,h.bodyB=f.id<p.id?p:f,h.parentA=h.bodyA.parent,h.parentB=h.bodyB.parent),f=h.bodyA,p=h.bodyB;var g;u.overlap<d.overlap?g=u:g=d;var v=h.normal,b=h.supports,_=g.axis,E=_.x,y=_.y;E*(p.position.x-f.position.x)+y*(p.position.y-f.position.y)<0?(v.x=E,v.y=y):(v.x=-E,v.y=-y),h.tangent.x=-v.y,h.tangent.y=v.x,h.depth=g.overlap,h.penetration.x=v.x*h.depth,h.penetration.y=v.y*h.depth;var w=r._findSupports(f,p,v,1),T=0;if(s.contains(f.vertices,w[0])&&(b[T++]=w[0]),s.contains(f.vertices,w[1])&&(b[T++]=w[1]),T<2){var C=r._findSupports(p,f,v,-1);s.contains(p.vertices,C[0])&&(b[T++]=C[0]),T<2&&s.contains(p.vertices,C[1])&&(b[T++]=C[1])}return T===0&&(b[T++]=w[0]),b.length=T,h},r._overlapAxes=function(f,p,l,m){var h=p.length,g=l.length,v=p[0].x,b=p[0].y,_=l[0].x,E=l[0].y,y=m.length,w=Number.MAX_VALUE,T=0,C,M,L,x,D,A;for(D=0;D<y;D++){var I=m[D],O=I.x,P=I.y,k=v*O+b*P,R=_*O+E*P,V=k,X=R;for(A=1;A<h;A+=1)x=p[A].x*O+p[A].y*P,x>V?V=x:x<k&&(k=x);for(A=1;A<g;A+=1)x=l[A].x*O+l[A].y*P,x>X?X=x:x<R&&(R=x);if(M=V-R,L=X-k,C=M<L?M:L,C<w&&(w=C,T=D,C<=0))break}f.axis=m[T],f.overlap=w},r._projectToAxis=function(f,p,l){for(var m=p[0].x*l.x+p[0].y*l.y,h=m,g=1;g<p.length;g+=1){var v=p[g].x*l.x+p[g].y*l.y;v>h?h=v:v<m&&(m=v)}f.min=m,f.max=h},r._findSupports=function(f,p,l,m){var h=p.vertices,g=h.length,v=f.position.x,b=f.position.y,_=l.x*m,E=l.y*m,y=Number.MAX_VALUE,w,T,C,M,L;for(L=0;L<g;L+=1)T=h[L],M=_*(v-T.x)+E*(b-T.y),M<y&&(y=M,w=T);return C=h[(g+w.index-1)%g],y=_*(v-C.x)+E*(b-C.y),T=h[(w.index+1)%g],_*(v-T.x)+E*(b-T.y)<y?(c[0]=w,c[1]=T,c):(c[0]=w,c[1]=C,c)}})()},function(t,i,o){var r={};t.exports=r;var s=o(16);(function(){r.create=function(a,c){var u=a.bodyA,d=a.bodyB,f={id:r.id(u,d),bodyA:u,bodyB:d,collision:a,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:u.isSensor||d.isSensor,timeCreated:c,timeUpdated:c,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return r.update(f,a,c),f},r.update=function(a,c,u){var d=a.contacts,f=c.supports,p=a.activeContacts,l=c.parentA,m=c.parentB,h=l.vertices.length;a.isActive=!0,a.timeUpdated=u,a.collision=c,a.separation=c.depth,a.inverseMass=l.inverseMass+m.inverseMass,a.friction=l.friction<m.friction?l.friction:m.friction,a.frictionStatic=l.frictionStatic>m.frictionStatic?l.frictionStatic:m.frictionStatic,a.restitution=l.restitution>m.restitution?l.restitution:m.restitution,a.slop=l.slop>m.slop?l.slop:m.slop,c.pair=a,p.length=0;for(var g=0;g<f.length;g++){var v=f[g],b=v.body===l?v.index:h+v.index,_=d[b];_?p.push(_):p.push(d[b]=s.create(v))}},r.setActive=function(a,c,u){c?(a.isActive=!0,a.timeUpdated=u):(a.isActive=!1,a.activeContacts.length=0)},r.id=function(a,c){return a.id<c.id?"A"+a.id+"B"+c.id:"A"+c.id+"B"+a.id}})()},function(t,i,o){var r={};t.exports=r;var s=o(3),a=o(2),c=o(7),u=o(1),d=o(11),f=o(0);(function(){r._warming=.4,r._torqueDampen=1,r._minLength=1e-6,r.create=function(p){var l=p;l.bodyA&&!l.pointA&&(l.pointA={x:0,y:0}),l.bodyB&&!l.pointB&&(l.pointB={x:0,y:0});var m=l.bodyA?a.add(l.bodyA.position,l.pointA):l.pointA,h=l.bodyB?a.add(l.bodyB.position,l.pointB):l.pointB,g=a.magnitude(a.sub(m,h));l.length=typeof l.length<"u"?l.length:g,l.id=l.id||f.nextId(),l.label=l.label||"Constraint",l.type="constraint",l.stiffness=l.stiffness||(l.length>0?1:.7),l.damping=l.damping||0,l.angularStiffness=l.angularStiffness||0,l.angleA=l.bodyA?l.bodyA.angle:l.angleA,l.angleB=l.bodyB?l.bodyB.angle:l.angleB,l.plugin={};var v={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return l.length===0&&l.stiffness>.1?(v.type="pin",v.anchors=!1):l.stiffness<.9&&(v.type="spring"),l.render=f.extend(v,l.render),l},r.preSolveAll=function(p){for(var l=0;l<p.length;l+=1){var m=p[l],h=m.constraintImpulse;m.isStatic||h.x===0&&h.y===0&&h.angle===0||(m.position.x+=h.x,m.position.y+=h.y,m.angle+=h.angle)}},r.solveAll=function(p,l){for(var m=f.clamp(l/f._baseDelta,0,1),h=0;h<p.length;h+=1){var g=p[h],v=!g.bodyA||g.bodyA&&g.bodyA.isStatic,b=!g.bodyB||g.bodyB&&g.bodyB.isStatic;(v||b)&&r.solve(p[h],m)}for(h=0;h<p.length;h+=1)g=p[h],v=!g.bodyA||g.bodyA&&g.bodyA.isStatic,b=!g.bodyB||g.bodyB&&g.bodyB.isStatic,!v&&!b&&r.solve(p[h],m)},r.solve=function(p,l){var m=p.bodyA,h=p.bodyB,g=p.pointA,v=p.pointB;if(!(!m&&!h)){m&&!m.isStatic&&(a.rotate(g,m.angle-p.angleA,g),p.angleA=m.angle),h&&!h.isStatic&&(a.rotate(v,h.angle-p.angleB,v),p.angleB=h.angle);var b=g,_=v;if(m&&(b=a.add(m.position,g)),h&&(_=a.add(h.position,v)),!(!b||!_)){var E=a.sub(b,_),y=a.magnitude(E);y<r._minLength&&(y=r._minLength);var w=(y-p.length)/y,T=p.stiffness>=1||p.length===0,C=T?p.stiffness*l:p.stiffness*l*l,M=p.damping*l,L=a.mult(E,w*C),x=(m?m.inverseMass:0)+(h?h.inverseMass:0),D=(m?m.inverseInertia:0)+(h?h.inverseInertia:0),A=x+D,I,O,P,k,R;if(M>0){var V=a.create();P=a.div(E,y),R=a.sub(h&&a.sub(h.position,h.positionPrev)||V,m&&a.sub(m.position,m.positionPrev)||V),k=a.dot(P,R)}m&&!m.isStatic&&(O=m.inverseMass/x,m.constraintImpulse.x-=L.x*O,m.constraintImpulse.y-=L.y*O,m.position.x-=L.x*O,m.position.y-=L.y*O,M>0&&(m.positionPrev.x-=M*P.x*k*O,m.positionPrev.y-=M*P.y*k*O),I=a.cross(g,L)/A*r._torqueDampen*m.inverseInertia*(1-p.angularStiffness),m.constraintImpulse.angle-=I,m.angle-=I),h&&!h.isStatic&&(O=h.inverseMass/x,h.constraintImpulse.x+=L.x*O,h.constraintImpulse.y+=L.y*O,h.position.x+=L.x*O,h.position.y+=L.y*O,M>0&&(h.positionPrev.x+=M*P.x*k*O,h.positionPrev.y+=M*P.y*k*O),I=a.cross(v,L)/A*r._torqueDampen*h.inverseInertia*(1-p.angularStiffness),h.constraintImpulse.angle+=I,h.angle+=I)}}},r.postSolveAll=function(p){for(var l=0;l<p.length;l++){var m=p[l],h=m.constraintImpulse;if(!(m.isStatic||h.x===0&&h.y===0&&h.angle===0)){c.set(m,!1);for(var g=0;g<m.parts.length;g++){var v=m.parts[g];s.translate(v.vertices,h),g>0&&(v.position.x+=h.x,v.position.y+=h.y),h.angle!==0&&(s.rotate(v.vertices,h.angle,m.position),d.rotate(v.axes,h.angle),g>0&&a.rotateAbout(v.position,h.angle,m.position,v.position)),u.update(v.bounds,v.vertices,m.velocity)}h.angle*=r._warming,h.x*=r._warming,h.y*=r._warming}}},r.pointAWorld=function(p){return{x:(p.bodyA?p.bodyA.position.x:0)+(p.pointA?p.pointA.x:0),y:(p.bodyA?p.bodyA.position.y:0)+(p.pointA?p.pointA.y:0)}},r.pointBWorld=function(p){return{x:(p.bodyB?p.bodyB.position.x:0)+(p.pointB?p.pointB.x:0),y:(p.bodyB?p.bodyB.position.y:0)+(p.pointB?p.pointB.y:0)}}})()},function(t,i,o){var r={};t.exports=r;var s=o(2),a=o(0);(function(){r.fromVertices=function(c){for(var u={},d=0;d<c.length;d++){var f=(d+1)%c.length,p=s.normalise({x:c[f].y-c[d].y,y:c[d].x-c[f].x}),l=p.y===0?1/0:p.x/p.y;l=l.toFixed(3).toString(),u[l]=p}return a.values(u)},r.rotate=function(c,u){if(u!==0)for(var d=Math.cos(u),f=Math.sin(u),p=0;p<c.length;p++){var l=c[p],m;m=l.x*d-l.y*f,l.y=l.x*f+l.y*d,l.x=m}}})()},function(t,i,o){var r={};t.exports=r;var s=o(3),a=o(0),c=o(4),u=o(1),d=o(2);(function(){r.rectangle=function(f,p,l,m,h){h=h||{};var g={label:"Rectangle Body",position:{x:f,y:p},vertices:s.fromPath("L 0 0 L "+l+" 0 L "+l+" "+m+" L 0 "+m)};if(h.chamfer){var v=h.chamfer;g.vertices=s.chamfer(g.vertices,v.radius,v.quality,v.qualityMin,v.qualityMax),delete h.chamfer}return c.create(a.extend({},g,h))},r.trapezoid=function(f,p,l,m,h,g){g=g||{},h*=.5;var v=(1-h*2)*l,b=l*h,_=b+v,E=_+b,y;h<.5?y="L 0 0 L "+b+" "+-m+" L "+_+" "+-m+" L "+E+" 0":y="L 0 0 L "+_+" "+-m+" L "+E+" 0";var w={label:"Trapezoid Body",position:{x:f,y:p},vertices:s.fromPath(y)};if(g.chamfer){var T=g.chamfer;w.vertices=s.chamfer(w.vertices,T.radius,T.quality,T.qualityMin,T.qualityMax),delete g.chamfer}return c.create(a.extend({},w,g))},r.circle=function(f,p,l,m,h){m=m||{};var g={label:"Circle Body",circleRadius:l};h=h||25;var v=Math.ceil(Math.max(10,Math.min(h,l)));return v%2===1&&(v+=1),r.polygon(f,p,v,l,a.extend({},g,m))},r.polygon=function(f,p,l,m,h){if(h=h||{},l<3)return r.circle(f,p,m,h);for(var g=2*Math.PI/l,v="",b=g*.5,_=0;_<l;_+=1){var E=b+_*g,y=Math.cos(E)*m,w=Math.sin(E)*m;v+="L "+y.toFixed(3)+" "+w.toFixed(3)+" "}var T={label:"Polygon Body",position:{x:f,y:p},vertices:s.fromPath(v)};if(h.chamfer){var C=h.chamfer;T.vertices=s.chamfer(T.vertices,C.radius,C.quality,C.qualityMin,C.qualityMax),delete h.chamfer}return c.create(a.extend({},T,h))},r.fromVertices=function(f,p,l,m,h,g,v,b){var _=a.getDecomp(),E,y,w,T,C,M,L,x,D,A,I;for(E=!!(_&&_.quickDecomp),m=m||{},w=[],h=typeof h<"u"?h:!1,g=typeof g<"u"?g:.01,v=typeof v<"u"?v:10,b=typeof b<"u"?b:.01,a.isArray(l[0])||(l=[l]),A=0;A<l.length;A+=1)if(M=l[A],T=s.isConvex(M),C=!T,C&&!E&&a.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),T||!E)T?M=s.clockwiseSort(M):M=s.hull(M),w.push({position:{x:f,y:p},vertices:M});else{var O=M.map(function(re){return[re.x,re.y]});_.makeCCW(O),g!==!1&&_.removeCollinearPoints(O,g),b!==!1&&_.removeDuplicatePoints&&_.removeDuplicatePoints(O,b);var P=_.quickDecomp(O);for(L=0;L<P.length;L++){var k=P[L],R=k.map(function(re){return{x:re[0],y:re[1]}});v>0&&s.area(R)<v||w.push({position:s.centre(R),vertices:R})}}for(L=0;L<w.length;L++)w[L]=c.create(a.extend(w[L],m));if(h){var V=5;for(L=0;L<w.length;L++){var X=w[L];for(x=L+1;x<w.length;x++){var G=w[x];if(u.overlaps(X.bounds,G.bounds)){var F=X.vertices,se=G.vertices;for(D=0;D<X.vertices.length;D++)for(I=0;I<G.vertices.length;I++){var Y=d.magnitudeSquared(d.sub(F[(D+1)%F.length],se[I])),J=d.magnitudeSquared(d.sub(F[D],se[(I+1)%se.length]));Y<V&&J<V&&(F[D].isInternal=!0,se[I].isInternal=!0)}}}}}return w.length>1?(y=c.create(a.extend({parts:w.slice(0)},m)),c.setPosition(y,{x:f,y:p}),y):w[0]}})()},function(t,i,o){var r={};t.exports=r;var s=o(0),a=o(8);(function(){r.create=function(c){var u={bodies:[],pairs:null};return s.extend(u,c)},r.setBodies=function(c,u){c.bodies=u.slice(0)},r.clear=function(c){c.bodies=[]},r.collisions=function(c){var u=[],d=c.pairs,f=c.bodies,p=f.length,l=r.canCollide,m=a.collides,h,g;for(f.sort(r._compareBoundsX),h=0;h<p;h++){var v=f[h],b=v.bounds,_=v.bounds.max.x,E=v.bounds.max.y,y=v.bounds.min.y,w=v.isStatic||v.isSleeping,T=v.parts.length,C=T===1;for(g=h+1;g<p;g++){var M=f[g],L=M.bounds;if(L.min.x>_)break;if(!(E<L.min.y||y>L.max.y)&&!(w&&(M.isStatic||M.isSleeping))&&l(v.collisionFilter,M.collisionFilter)){var x=M.parts.length;if(C&&x===1){var D=m(v,M,d);D&&u.push(D)}else for(var A=T>1?1:0,I=x>1?1:0,O=A;O<T;O++)for(var P=v.parts[O],b=P.bounds,k=I;k<x;k++){var R=M.parts[k],L=R.bounds;if(!(b.min.x>L.max.x||b.max.x<L.min.x||b.max.y<L.min.y||b.min.y>L.max.y)){var D=m(P,R,d);D&&u.push(D)}}}}}return u},r.canCollide=function(c,u){return c.group===u.group&&c.group!==0?c.group>0:(c.mask&u.category)!==0&&(u.mask&c.category)!==0},r._compareBoundsX=function(c,u){return c.bounds.min.x-u.bounds.min.x}})()},function(t,i,o){var r={};t.exports=r;var s=o(0);(function(){r.create=function(a){var c={};return a||s.log("Mouse.create: element was undefined, defaulting to document.body","warn"),c.element=a||document.body,c.absolute={x:0,y:0},c.position={x:0,y:0},c.mousedownPosition={x:0,y:0},c.mouseupPosition={x:0,y:0},c.offset={x:0,y:0},c.scale={x:1,y:1},c.wheelDelta=0,c.button=-1,c.pixelRatio=parseInt(c.element.getAttribute("data-pixel-ratio"),10)||1,c.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},c.mousemove=function(u){var d=r._getRelativeMousePosition(u,c.element,c.pixelRatio),f=u.changedTouches;f&&(c.button=0,u.preventDefault()),c.absolute.x=d.x,c.absolute.y=d.y,c.position.x=c.absolute.x*c.scale.x+c.offset.x,c.position.y=c.absolute.y*c.scale.y+c.offset.y,c.sourceEvents.mousemove=u},c.mousedown=function(u){var d=r._getRelativeMousePosition(u,c.element,c.pixelRatio),f=u.changedTouches;f?(c.button=0,u.preventDefault()):c.button=u.button,c.absolute.x=d.x,c.absolute.y=d.y,c.position.x=c.absolute.x*c.scale.x+c.offset.x,c.position.y=c.absolute.y*c.scale.y+c.offset.y,c.mousedownPosition.x=c.position.x,c.mousedownPosition.y=c.position.y,c.sourceEvents.mousedown=u},c.mouseup=function(u){var d=r._getRelativeMousePosition(u,c.element,c.pixelRatio),f=u.changedTouches;f&&u.preventDefault(),c.button=-1,c.absolute.x=d.x,c.absolute.y=d.y,c.position.x=c.absolute.x*c.scale.x+c.offset.x,c.position.y=c.absolute.y*c.scale.y+c.offset.y,c.mouseupPosition.x=c.position.x,c.mouseupPosition.y=c.position.y,c.sourceEvents.mouseup=u},c.mousewheel=function(u){c.wheelDelta=Math.max(-1,Math.min(1,u.wheelDelta||-u.detail)),u.preventDefault()},r.setElement(c,c.element),c},r.setElement=function(a,c){a.element=c,c.addEventListener("mousemove",a.mousemove),c.addEventListener("mousedown",a.mousedown),c.addEventListener("mouseup",a.mouseup),c.addEventListener("mousewheel",a.mousewheel),c.addEventListener("DOMMouseScroll",a.mousewheel),c.addEventListener("touchmove",a.mousemove),c.addEventListener("touchstart",a.mousedown),c.addEventListener("touchend",a.mouseup)},r.clearSourceEvents=function(a){a.sourceEvents.mousemove=null,a.sourceEvents.mousedown=null,a.sourceEvents.mouseup=null,a.sourceEvents.mousewheel=null,a.wheelDelta=0},r.setOffset=function(a,c){a.offset.x=c.x,a.offset.y=c.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y},r.setScale=function(a,c){a.scale.x=c.x,a.scale.y=c.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y},r._getRelativeMousePosition=function(a,c,u){var d=c.getBoundingClientRect(),f=document.documentElement||document.body.parentNode||document.body,p=window.pageXOffset!==void 0?window.pageXOffset:f.scrollLeft,l=window.pageYOffset!==void 0?window.pageYOffset:f.scrollTop,m=a.changedTouches,h,g;return m?(h=m[0].pageX-d.left-p,g=m[0].pageY-d.top-l):(h=a.pageX-d.left-p,g=a.pageY-d.top-l),{x:h/(c.clientWidth/(c.width||c.clientWidth)*u),y:g/(c.clientHeight/(c.height||c.clientHeight)*u)}}})()},function(t,i,o){var r={};t.exports=r;var s=o(0);(function(){r._registry={},r.register=function(a){if(r.isPlugin(a)||s.warn("Plugin.register:",r.toString(a),"does not implement all required fields."),a.name in r._registry){var c=r._registry[a.name],u=r.versionParse(a.version).number,d=r.versionParse(c.version).number;u>d?(s.warn("Plugin.register:",r.toString(c),"was upgraded to",r.toString(a)),r._registry[a.name]=a):u<d?s.warn("Plugin.register:",r.toString(c),"can not be downgraded to",r.toString(a)):a!==c&&s.warn("Plugin.register:",r.toString(a),"is already registered to different plugin object")}else r._registry[a.name]=a;return a},r.resolve=function(a){return r._registry[r.dependencyParse(a).name]},r.toString=function(a){return typeof a=="string"?a:(a.name||"anonymous")+"@"+(a.version||a.range||"0.0.0")},r.isPlugin=function(a){return a&&a.name&&a.version&&a.install},r.isUsed=function(a,c){return a.used.indexOf(c)>-1},r.isFor=function(a,c){var u=a.for&&r.dependencyParse(a.for);return!a.for||c.name===u.name&&r.versionSatisfies(c.version,u.range)},r.use=function(a,c){if(a.uses=(a.uses||[]).concat(c||[]),a.uses.length===0){s.warn("Plugin.use:",r.toString(a),"does not specify any dependencies to install.");return}for(var u=r.dependencies(a),d=s.topologicalSort(u),f=[],p=0;p<d.length;p+=1)if(d[p]!==a.name){var l=r.resolve(d[p]);if(!l){f.push("\u274C "+d[p]);continue}r.isUsed(a,l.name)||(r.isFor(l,a)||(s.warn("Plugin.use:",r.toString(l),"is for",l.for,"but installed on",r.toString(a)+"."),l._warned=!0),l.install?l.install(a):(s.warn("Plugin.use:",r.toString(l),"does not specify an install function."),l._warned=!0),l._warned?(f.push("\u{1F536} "+r.toString(l)),delete l._warned):f.push("\u2705 "+r.toString(l)),a.used.push(l.name))}f.length>0&&s.info(f.join("  "))},r.dependencies=function(a,c){var u=r.dependencyParse(a),d=u.name;if(c=c||{},!(d in c)){a=r.resolve(a)||a,c[d]=s.map(a.uses||[],function(p){r.isPlugin(p)&&r.register(p);var l=r.dependencyParse(p),m=r.resolve(p);return m&&!r.versionSatisfies(m.version,l.range)?(s.warn("Plugin.dependencies:",r.toString(m),"does not satisfy",r.toString(l),"used by",r.toString(u)+"."),m._warned=!0,a._warned=!0):m||(s.warn("Plugin.dependencies:",r.toString(p),"used by",r.toString(u),"could not be resolved."),a._warned=!0),l.name});for(var f=0;f<c[d].length;f+=1)r.dependencies(c[d][f],c);return c}},r.dependencyParse=function(a){if(s.isString(a)){var c=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return c.test(a)||s.warn("Plugin.dependencyParse:",a,"is not a valid dependency string."),{name:a.split("@")[0],range:a.split("@")[1]||"*"}}return{name:a.name,range:a.range||a.version}},r.versionParse=function(a){var c=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;c.test(a)||s.warn("Plugin.versionParse:",a,"is not a valid version or range.");var u=c.exec(a),d=Number(u[4]),f=Number(u[5]),p=Number(u[6]);return{isRange:!!(u[1]||u[2]),version:u[3],range:a,operator:u[1]||u[2]||"",major:d,minor:f,patch:p,parts:[d,f,p],prerelease:u[7],number:d*1e8+f*1e4+p}},r.versionSatisfies=function(a,c){c=c||"*";var u=r.versionParse(c),d=r.versionParse(a);if(u.isRange){if(u.operator==="*"||a==="*")return!0;if(u.operator===">")return d.number>u.number;if(u.operator===">=")return d.number>=u.number;if(u.operator==="~")return d.major===u.major&&d.minor===u.minor&&d.patch>=u.patch;if(u.operator==="^")return u.major>0?d.major===u.major&&d.number>=u.number:u.minor>0?d.minor===u.minor&&d.patch>=u.patch:d.patch===u.patch}return a===c||a==="*"}})()},function(t,i){var o={};t.exports=o,function(){o.create=function(r){return{vertex:r,normalImpulse:0,tangentImpulse:0}}}()},function(t,i,o){var r={};t.exports=r;var s=o(7),a=o(18),c=o(13),u=o(19),d=o(5),f=o(6),p=o(10),l=o(0),m=o(4);(function(){r.create=function(h){h=h||{};var g={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},v=l.extend(g,h);return v.world=h.world||f.create({label:"World"}),v.pairs=h.pairs||u.create(),v.detector=h.detector||c.create(),v.grid={buckets:[]},v.world.gravity=v.gravity,v.broadphase=v.grid,v.metrics={},v},r.update=function(h,g){var v=l.now(),b=h.world,_=h.detector,E=h.pairs,y=h.timing,w=y.timestamp,T;g=typeof g<"u"?g:l._baseDelta,g*=y.timeScale,y.timestamp+=g,y.lastDelta=g;var C={timestamp:y.timestamp,delta:g};d.trigger(h,"beforeUpdate",C);var M=f.allBodies(b),L=f.allConstraints(b);for(b.isModified&&(c.setBodies(_,M),f.setModified(b,!1,!1,!0)),h.enableSleeping&&s.update(M,g),r._bodiesApplyGravity(M,h.gravity),g>0&&r._bodiesUpdate(M,g),p.preSolveAll(M),T=0;T<h.constraintIterations;T++)p.solveAll(L,g);p.postSolveAll(M),_.pairs=h.pairs;var x=c.collisions(_);u.update(E,x,w),h.enableSleeping&&s.afterCollisions(E.list),E.collisionStart.length>0&&d.trigger(h,"collisionStart",{pairs:E.collisionStart});var D=l.clamp(20/h.positionIterations,0,1);for(a.preSolvePosition(E.list),T=0;T<h.positionIterations;T++)a.solvePosition(E.list,g,D);for(a.postSolvePosition(M),p.preSolveAll(M),T=0;T<h.constraintIterations;T++)p.solveAll(L,g);for(p.postSolveAll(M),a.preSolveVelocity(E.list),T=0;T<h.velocityIterations;T++)a.solveVelocity(E.list,g);return r._bodiesUpdateVelocities(M),E.collisionActive.length>0&&d.trigger(h,"collisionActive",{pairs:E.collisionActive}),E.collisionEnd.length>0&&d.trigger(h,"collisionEnd",{pairs:E.collisionEnd}),r._bodiesClearForces(M),d.trigger(h,"afterUpdate",C),h.timing.lastElapsed=l.now()-v,h},r.merge=function(h,g){if(l.extend(h,g),g.world){h.world=g.world,r.clear(h);for(var v=f.allBodies(h.world),b=0;b<v.length;b++){var _=v[b];s.set(_,!1),_.id=l.nextId()}}},r.clear=function(h){u.clear(h.pairs),c.clear(h.detector)},r._bodiesClearForces=function(h){for(var g=h.length,v=0;v<g;v++){var b=h[v];b.force.x=0,b.force.y=0,b.torque=0}},r._bodiesApplyGravity=function(h,g){var v=typeof g.scale<"u"?g.scale:.001,b=h.length;if(!(g.x===0&&g.y===0||v===0))for(var _=0;_<b;_++){var E=h[_];E.isStatic||E.isSleeping||(E.force.y+=E.mass*g.y*v,E.force.x+=E.mass*g.x*v)}},r._bodiesUpdate=function(h,g){for(var v=h.length,b=0;b<v;b++){var _=h[b];_.isStatic||_.isSleeping||m.update(_,g)}},r._bodiesUpdateVelocities=function(h){for(var g=h.length,v=0;v<g;v++)m.updateVelocities(h[v])}})()},function(t,i,o){var r={};t.exports=r;var s=o(3),a=o(0),c=o(1);(function(){r._restingThresh=2,r._restingThreshTangent=Math.sqrt(6),r._positionDampen=.9,r._positionWarming=.8,r._frictionNormalMultiplier=5,r._frictionMaxStatic=Number.MAX_VALUE,r.preSolvePosition=function(u){var d,f,p,l=u.length;for(d=0;d<l;d++)f=u[d],f.isActive&&(p=f.activeContacts.length,f.collision.parentA.totalContacts+=p,f.collision.parentB.totalContacts+=p)},r.solvePosition=function(u,d,f){var p,l,m,h,g,v,b,_,E=r._positionDampen*(f||1),y=a.clamp(d/a._baseDelta,0,1),w=u.length;for(p=0;p<w;p++)l=u[p],!(!l.isActive||l.isSensor)&&(m=l.collision,h=m.parentA,g=m.parentB,v=m.normal,l.separation=v.x*(g.positionImpulse.x+m.penetration.x-h.positionImpulse.x)+v.y*(g.positionImpulse.y+m.penetration.y-h.positionImpulse.y));for(p=0;p<w;p++)l=u[p],!(!l.isActive||l.isSensor)&&(m=l.collision,h=m.parentA,g=m.parentB,v=m.normal,_=l.separation-l.slop*y,(h.isStatic||g.isStatic)&&(_*=2),h.isStatic||h.isSleeping||(b=E/h.totalContacts,h.positionImpulse.x+=v.x*_*b,h.positionImpulse.y+=v.y*_*b),g.isStatic||g.isSleeping||(b=E/g.totalContacts,g.positionImpulse.x-=v.x*_*b,g.positionImpulse.y-=v.y*_*b))},r.postSolvePosition=function(u){for(var d=r._positionWarming,f=u.length,p=s.translate,l=c.update,m=0;m<f;m++){var h=u[m],g=h.positionImpulse,v=g.x,b=g.y,_=h.velocity;if(h.totalContacts=0,v!==0||b!==0){for(var E=0;E<h.parts.length;E++){var y=h.parts[E];p(y.vertices,g),l(y.bounds,y.vertices,_),y.position.x+=v,y.position.y+=b}h.positionPrev.x+=v,h.positionPrev.y+=b,v*_.x+b*_.y<0?(g.x=0,g.y=0):(g.x*=d,g.y*=d)}}},r.preSolveVelocity=function(u){var d=u.length,f,p;for(f=0;f<d;f++){var l=u[f];if(!(!l.isActive||l.isSensor)){var m=l.activeContacts,h=m.length,g=l.collision,v=g.parentA,b=g.parentB,_=g.normal,E=g.tangent;for(p=0;p<h;p++){var y=m[p],w=y.vertex,T=y.normalImpulse,C=y.tangentImpulse;if(T!==0||C!==0){var M=_.x*T+E.x*C,L=_.y*T+E.y*C;v.isStatic||v.isSleeping||(v.positionPrev.x+=M*v.inverseMass,v.positionPrev.y+=L*v.inverseMass,v.anglePrev+=v.inverseInertia*((w.x-v.position.x)*L-(w.y-v.position.y)*M)),b.isStatic||b.isSleeping||(b.positionPrev.x-=M*b.inverseMass,b.positionPrev.y-=L*b.inverseMass,b.anglePrev-=b.inverseInertia*((w.x-b.position.x)*L-(w.y-b.position.y)*M))}}}}},r.solveVelocity=function(u,d){var f=d/a._baseDelta,p=f*f,l=p*f,m=-r._restingThresh*f,h=r._restingThreshTangent,g=r._frictionNormalMultiplier*f,v=r._frictionMaxStatic,b=u.length,_,E,y,w;for(y=0;y<b;y++){var T=u[y];if(!(!T.isActive||T.isSensor)){var C=T.collision,M=C.parentA,L=C.parentB,x=M.velocity,D=L.velocity,A=C.normal.x,I=C.normal.y,O=C.tangent.x,P=C.tangent.y,k=T.activeContacts,R=k.length,V=1/R,X=M.inverseMass+L.inverseMass,G=T.friction*T.frictionStatic*g;for(x.x=M.position.x-M.positionPrev.x,x.y=M.position.y-M.positionPrev.y,D.x=L.position.x-L.positionPrev.x,D.y=L.position.y-L.positionPrev.y,M.angularVelocity=M.angle-M.anglePrev,L.angularVelocity=L.angle-L.anglePrev,w=0;w<R;w++){var F=k[w],se=F.vertex,Y=se.x-M.position.x,J=se.y-M.position.y,re=se.x-L.position.x,ge=se.y-L.position.y,le=x.x-J*M.angularVelocity,Fn=x.y+Y*M.angularVelocity,Ci=D.x-ge*L.angularVelocity,qn=D.y+re*L.angularVelocity,_o=le-Ci,Eo=Fn-qn,Hn=A*_o+I*Eo,Je=O*_o+P*Eo,To=T.separation+Hn,Vn=Math.min(To,1);Vn=To<0?0:Vn;var Po=Vn*G;Je<-Po||Je>Po?(E=Je>0?Je:-Je,_=T.friction*(Je>0?1:-1)*l,_<-E?_=-E:_>E&&(_=E)):(_=Je,E=v);var Ao=Y*I-J*A,Mo=re*I-ge*A,Oo=V/(X+M.inverseInertia*Ao*Ao+L.inverseInertia*Mo*Mo),_i=(1+T.restitution)*Hn*Oo;if(_*=Oo,Hn<m)F.normalImpulse=0;else{var lc=F.normalImpulse;F.normalImpulse+=_i,F.normalImpulse>0&&(F.normalImpulse=0),_i=F.normalImpulse-lc}if(Je<-h||Je>h)F.tangentImpulse=0;else{var cc=F.tangentImpulse;F.tangentImpulse+=_,F.tangentImpulse<-E&&(F.tangentImpulse=-E),F.tangentImpulse>E&&(F.tangentImpulse=E),_=F.tangentImpulse-cc}var Ei=A*_i+O*_,Ti=I*_i+P*_;M.isStatic||M.isSleeping||(M.positionPrev.x+=Ei*M.inverseMass,M.positionPrev.y+=Ti*M.inverseMass,M.anglePrev+=(Y*Ti-J*Ei)*M.inverseInertia),L.isStatic||L.isSleeping||(L.positionPrev.x-=Ei*L.inverseMass,L.positionPrev.y-=Ti*L.inverseMass,L.anglePrev-=(re*Ti-ge*Ei)*L.inverseInertia)}}}}})()},function(t,i,o){var r={};t.exports=r;var s=o(9),a=o(0);(function(){r.create=function(c){return a.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},c)},r.update=function(c,u,d){var f=c.list,p=f.length,l=c.table,m=u.length,h=c.collisionStart,g=c.collisionEnd,v=c.collisionActive,b,_,E,y;for(h.length=0,g.length=0,v.length=0,y=0;y<p;y++)f[y].confirmedActive=!1;for(y=0;y<m;y++)b=u[y],E=b.pair,E?(E.isActive?v.push(E):h.push(E),s.update(E,b,d),E.confirmedActive=!0):(E=s.create(b,d),l[E.id]=E,h.push(E),f.push(E));var w=[];for(p=f.length,y=0;y<p;y++)E=f[y],E.confirmedActive||(s.setActive(E,!1,d),g.push(E),!E.collision.bodyA.isSleeping&&!E.collision.bodyB.isSleeping&&w.push(y));for(y=0;y<w.length;y++)_=w[y]-y,E=f[_],f.splice(_,1),delete l[E.id]},r.clear=function(c){return c.table={},c.list.length=0,c.collisionStart.length=0,c.collisionActive.length=0,c.collisionEnd.length=0,c}})()},function(t,i,o){var r=t.exports=o(21);r.Axes=o(11),r.Bodies=o(12),r.Body=o(4),r.Bounds=o(1),r.Collision=o(8),r.Common=o(0),r.Composite=o(6),r.Composites=o(22),r.Constraint=o(10),r.Contact=o(16),r.Detector=o(13),r.Engine=o(17),r.Events=o(5),r.Grid=o(23),r.Mouse=o(14),r.MouseConstraint=o(24),r.Pair=o(9),r.Pairs=o(19),r.Plugin=o(15),r.Query=o(25),r.Render=o(26),r.Resolver=o(18),r.Runner=o(27),r.SAT=o(28),r.Sleeping=o(7),r.Svg=o(29),r.Vector=o(2),r.Vertices=o(3),r.World=o(30),r.Engine.run=r.Runner.run,r.Common.deprecated(r.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(t,i,o){var r={};t.exports=r;var s=o(15),a=o(0);(function(){r.name="matter-js",r.version="0.19.0",r.uses=[],r.used=[],r.use=function(){s.use(r,Array.prototype.slice.call(arguments))},r.before=function(c,u){return c=c.replace(/^Matter./,""),a.chainPathBefore(r,c,u)},r.after=function(c,u){return c=c.replace(/^Matter./,""),a.chainPathAfter(r,c,u)}})()},function(t,i,o){var r={};t.exports=r;var s=o(6),a=o(10),c=o(0),u=o(4),d=o(12),f=c.deprecated;(function(){r.stack=function(p,l,m,h,g,v,b){for(var _=s.create({label:"Stack"}),E=p,y=l,w,T=0,C=0;C<h;C++){for(var M=0,L=0;L<m;L++){var x=b(E,y,L,C,w,T);if(x){var D=x.bounds.max.y-x.bounds.min.y,A=x.bounds.max.x-x.bounds.min.x;D>M&&(M=D),u.translate(x,{x:A*.5,y:D*.5}),E=x.bounds.max.x+g,s.addBody(_,x),w=x,T+=1}else E+=g}y+=M+v,E=p}return _},r.chain=function(p,l,m,h,g,v){for(var b=p.bodies,_=1;_<b.length;_++){var E=b[_-1],y=b[_],w=E.bounds.max.y-E.bounds.min.y,T=E.bounds.max.x-E.bounds.min.x,C=y.bounds.max.y-y.bounds.min.y,M=y.bounds.max.x-y.bounds.min.x,L={bodyA:E,pointA:{x:T*l,y:w*m},bodyB:y,pointB:{x:M*h,y:C*g}},x=c.extend(L,v);s.addConstraint(p,a.create(x))}return p.label+=" Chain",p},r.mesh=function(p,l,m,h,g){var v=p.bodies,b,_,E,y,w;for(b=0;b<m;b++){for(_=1;_<l;_++)E=v[_-1+b*l],y=v[_+b*l],s.addConstraint(p,a.create(c.extend({bodyA:E,bodyB:y},g)));if(b>0)for(_=0;_<l;_++)E=v[_+(b-1)*l],y=v[_+b*l],s.addConstraint(p,a.create(c.extend({bodyA:E,bodyB:y},g))),h&&_>0&&(w=v[_-1+(b-1)*l],s.addConstraint(p,a.create(c.extend({bodyA:w,bodyB:y},g)))),h&&_<l-1&&(w=v[_+1+(b-1)*l],s.addConstraint(p,a.create(c.extend({bodyA:w,bodyB:y},g))))}return p.label+=" Mesh",p},r.pyramid=function(p,l,m,h,g,v,b){return r.stack(p,l,m,h,g,v,function(_,E,y,w,T,C){var M=Math.min(h,Math.ceil(m/2)),L=T?T.bounds.max.x-T.bounds.min.x:0;if(!(w>M)){w=M-w;var x=w,D=m-1-w;if(!(y<x||y>D)){C===1&&u.translate(T,{x:(y+(m%2===1?1:-1))*L,y:0});var A=T?y*L:0;return b(p+A+y*g,E,y,w,T,C)}}})},r.newtonsCradle=function(p,l,m,h,g){for(var v=s.create({label:"Newtons Cradle"}),b=0;b<m;b++){var _=1.9,E=d.circle(p+b*(h*_),l+g,h,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),y=a.create({pointA:{x:p+b*(h*_),y:l},bodyB:E});s.addBody(v,E),s.addConstraint(v,y)}return v},f(r,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),r.car=function(p,l,m,h,g){var v=u.nextGroup(!0),b=20,_=-m*.5+b,E=m*.5-b,y=0,w=s.create({label:"Car"}),T=d.rectangle(p,l,m,h,{collisionFilter:{group:v},chamfer:{radius:h*.5},density:2e-4}),C=d.circle(p+_,l+y,g,{collisionFilter:{group:v},friction:.8}),M=d.circle(p+E,l+y,g,{collisionFilter:{group:v},friction:.8}),L=a.create({bodyB:T,pointB:{x:_,y},bodyA:C,stiffness:1,length:0}),x=a.create({bodyB:T,pointB:{x:E,y},bodyA:M,stiffness:1,length:0});return s.addBody(w,T),s.addBody(w,C),s.addBody(w,M),s.addConstraint(w,L),s.addConstraint(w,x),w},f(r,"car","Composites.car \u27A4 moved to car example"),r.softBody=function(p,l,m,h,g,v,b,_,E,y){E=c.extend({inertia:1/0},E),y=c.extend({stiffness:.2,render:{type:"line",anchors:!1}},y);var w=r.stack(p,l,m,h,g,v,function(T,C){return d.circle(T,C,_,E)});return r.mesh(w,m,h,b,y),w.label="Soft Body",w},f(r,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},function(t,i,o){var r={};t.exports=r;var s=o(9),a=o(0),c=a.deprecated;(function(){r.create=function(u){var d={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return a.extend(d,u)},r.update=function(u,d,f,p){var l,m,h,g=f.world,v=u.buckets,b,_,E=!1;for(l=0;l<d.length;l++){var y=d[l];if(!(y.isSleeping&&!p)&&!(g.bounds&&(y.bounds.max.x<g.bounds.min.x||y.bounds.min.x>g.bounds.max.x||y.bounds.max.y<g.bounds.min.y||y.bounds.min.y>g.bounds.max.y))){var w=r._getRegion(u,y);if(!y.region||w.id!==y.region.id||p){(!y.region||p)&&(y.region=w);var T=r._regionUnion(w,y.region);for(m=T.startCol;m<=T.endCol;m++)for(h=T.startRow;h<=T.endRow;h++){_=r._getBucketId(m,h),b=v[_];var C=m>=w.startCol&&m<=w.endCol&&h>=w.startRow&&h<=w.endRow,M=m>=y.region.startCol&&m<=y.region.endCol&&h>=y.region.startRow&&h<=y.region.endRow;!C&&M&&M&&b&&r._bucketRemoveBody(u,b,y),(y.region===w||C&&!M||p)&&(b||(b=r._createBucket(v,_)),r._bucketAddBody(u,b,y))}y.region=w,E=!0}}}E&&(u.pairsList=r._createActivePairsList(u))},c(r,"update","Grid.update \u27A4 replaced by Matter.Detector"),r.clear=function(u){u.buckets={},u.pairs={},u.pairsList=[]},c(r,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),r._regionUnion=function(u,d){var f=Math.min(u.startCol,d.startCol),p=Math.max(u.endCol,d.endCol),l=Math.min(u.startRow,d.startRow),m=Math.max(u.endRow,d.endRow);return r._createRegion(f,p,l,m)},r._getRegion=function(u,d){var f=d.bounds,p=Math.floor(f.min.x/u.bucketWidth),l=Math.floor(f.max.x/u.bucketWidth),m=Math.floor(f.min.y/u.bucketHeight),h=Math.floor(f.max.y/u.bucketHeight);return r._createRegion(p,l,m,h)},r._createRegion=function(u,d,f,p){return{id:u+","+d+","+f+","+p,startCol:u,endCol:d,startRow:f,endRow:p}},r._getBucketId=function(u,d){return"C"+u+"R"+d},r._createBucket=function(u,d){var f=u[d]=[];return f},r._bucketAddBody=function(u,d,f){var p=u.pairs,l=s.id,m=d.length,h;for(h=0;h<m;h++){var g=d[h];if(!(f.id===g.id||f.isStatic&&g.isStatic)){var v=l(f,g),b=p[v];b?b[2]+=1:p[v]=[f,g,1]}}d.push(f)},r._bucketRemoveBody=function(u,d,f){var p=u.pairs,l=s.id,m;d.splice(a.indexOf(d,f),1);var h=d.length;for(m=0;m<h;m++){var g=p[l(f,d[m])];g&&(g[2]-=1)}},r._createActivePairsList=function(u){var d,f=u.pairs,p=a.keys(f),l=p.length,m=[],h;for(h=0;h<l;h++)d=f[p[h]],d[2]>0?m.push(d):delete f[p[h]];return m}})()},function(t,i,o){var r={};t.exports=r;var s=o(3),a=o(7),c=o(14),u=o(5),d=o(13),f=o(10),p=o(6),l=o(0),m=o(1);(function(){r.create=function(h,g){var v=(h?h.mouse:null)||(g?g.mouse:null);v||(h&&h.render&&h.render.canvas?v=c.create(h.render.canvas):g&&g.element?v=c.create(g.element):(v=c.create(),l.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var b=f.create({label:"Mouse Constraint",pointA:v.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),_={type:"mouseConstraint",mouse:v,element:null,body:null,constraint:b,collisionFilter:{category:1,mask:4294967295,group:0}},E=l.extend(_,g);return u.on(h,"beforeUpdate",function(){var y=p.allBodies(h.world);r.update(E,y),r._triggerEvents(E)}),E},r.update=function(h,g){var v=h.mouse,b=h.constraint,_=h.body;if(v.button===0){if(b.bodyB)a.set(b.bodyB,!1),b.pointA=v.position;else for(var E=0;E<g.length;E++)if(_=g[E],m.contains(_.bounds,v.position)&&d.canCollide(_.collisionFilter,h.collisionFilter))for(var y=_.parts.length>1?1:0;y<_.parts.length;y++){var w=_.parts[y];if(s.contains(w.vertices,v.position)){b.pointA=v.position,b.bodyB=h.body=_,b.pointB={x:v.position.x-_.position.x,y:v.position.y-_.position.y},b.angleB=_.angle,a.set(_,!1),u.trigger(h,"startdrag",{mouse:v,body:_});break}}}else b.bodyB=h.body=null,b.pointB=null,_&&u.trigger(h,"enddrag",{mouse:v,body:_})},r._triggerEvents=function(h){var g=h.mouse,v=g.sourceEvents;v.mousemove&&u.trigger(h,"mousemove",{mouse:g}),v.mousedown&&u.trigger(h,"mousedown",{mouse:g}),v.mouseup&&u.trigger(h,"mouseup",{mouse:g}),c.clearSourceEvents(g)}})()},function(t,i,o){var r={};t.exports=r;var s=o(2),a=o(8),c=o(1),u=o(12),d=o(3);(function(){r.collides=function(f,p){for(var l=[],m=p.length,h=f.bounds,g=a.collides,v=c.overlaps,b=0;b<m;b++){var _=p[b],E=_.parts.length,y=E===1?0:1;if(v(_.bounds,h))for(var w=y;w<E;w++){var T=_.parts[w];if(v(T.bounds,h)){var C=g(T,f);if(C){l.push(C);break}}}}return l},r.ray=function(f,p,l,m){m=m||1e-100;for(var h=s.angle(p,l),g=s.magnitude(s.sub(p,l)),v=(l.x+p.x)*.5,b=(l.y+p.y)*.5,_=u.rectangle(v,b,g,m,{angle:h}),E=r.collides(_,f),y=0;y<E.length;y+=1){var w=E[y];w.body=w.bodyB=w.bodyA}return E},r.region=function(f,p,l){for(var m=[],h=0;h<f.length;h++){var g=f[h],v=c.overlaps(g.bounds,p);(v&&!l||!v&&l)&&m.push(g)}return m},r.point=function(f,p){for(var l=[],m=0;m<f.length;m++){var h=f[m];if(c.contains(h.bounds,p))for(var g=h.parts.length===1?0:1;g<h.parts.length;g++){var v=h.parts[g];if(c.contains(v.bounds,p)&&d.contains(v.vertices,p)){l.push(h);break}}}return l}})()},function(t,i,o){var r={};t.exports=r;var s=o(4),a=o(0),c=o(6),u=o(1),d=o(5),f=o(2),p=o(14);(function(){var l,m;typeof window<"u"&&(l=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(y){window.setTimeout(function(){y(a.now())},1e3/60)},m=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),r._goodFps=30,r._goodDelta=1e3/60,r.create=function(y){var w={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!y.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},T=a.extend(w,y);return T.canvas&&(T.canvas.width=T.options.width||T.canvas.width,T.canvas.height=T.options.height||T.canvas.height),T.mouse=y.mouse,T.engine=y.engine,T.canvas=T.canvas||v(T.options.width,T.options.height),T.context=T.canvas.getContext("2d"),T.textures={},T.bounds=T.bounds||{min:{x:0,y:0},max:{x:T.canvas.width,y:T.canvas.height}},T.controller=r,T.options.showBroadphase=!1,T.options.pixelRatio!==1&&r.setPixelRatio(T,T.options.pixelRatio),a.isElement(T.element)&&T.element.appendChild(T.canvas),T},r.run=function(y){(function w(T){y.frameRequestId=l(w),h(y,T),r.world(y,T),(y.options.showStats||y.options.showDebug)&&r.stats(y,y.context,T),(y.options.showPerformance||y.options.showDebug)&&r.performance(y,y.context,T)})()},r.stop=function(y){m(y.frameRequestId)},r.setPixelRatio=function(y,w){var T=y.options,C=y.canvas;w==="auto"&&(w=b(C)),T.pixelRatio=w,C.setAttribute("data-pixel-ratio",w),C.width=T.width*w,C.height=T.height*w,C.style.width=T.width+"px",C.style.height=T.height+"px"},r.lookAt=function(y,w,T,C){C=typeof C<"u"?C:!0,w=a.isArray(w)?w:[w],T=T||{x:0,y:0};for(var M={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},L=0;L<w.length;L+=1){var x=w[L],D=x.bounds?x.bounds.min:x.min||x.position||x,A=x.bounds?x.bounds.max:x.max||x.position||x;D&&A&&(D.x<M.min.x&&(M.min.x=D.x),A.x>M.max.x&&(M.max.x=A.x),D.y<M.min.y&&(M.min.y=D.y),A.y>M.max.y&&(M.max.y=A.y))}var I=M.max.x-M.min.x+2*T.x,O=M.max.y-M.min.y+2*T.y,P=y.canvas.height,k=y.canvas.width,R=k/P,V=I/O,X=1,G=1;V>R?G=V/R:X=R/V,y.options.hasBounds=!0,y.bounds.min.x=M.min.x,y.bounds.max.x=M.min.x+I*X,y.bounds.min.y=M.min.y,y.bounds.max.y=M.min.y+O*G,C&&(y.bounds.min.x+=I*.5-I*X*.5,y.bounds.max.x+=I*.5-I*X*.5,y.bounds.min.y+=O*.5-O*G*.5,y.bounds.max.y+=O*.5-O*G*.5),y.bounds.min.x-=T.x,y.bounds.max.x-=T.x,y.bounds.min.y-=T.y,y.bounds.max.y-=T.y,y.mouse&&(p.setScale(y.mouse,{x:(y.bounds.max.x-y.bounds.min.x)/y.canvas.width,y:(y.bounds.max.y-y.bounds.min.y)/y.canvas.height}),p.setOffset(y.mouse,y.bounds.min))},r.startViewTransform=function(y){var w=y.bounds.max.x-y.bounds.min.x,T=y.bounds.max.y-y.bounds.min.y,C=w/y.options.width,M=T/y.options.height;y.context.setTransform(y.options.pixelRatio/C,0,0,y.options.pixelRatio/M,0,0),y.context.translate(-y.bounds.min.x,-y.bounds.min.y)},r.endViewTransform=function(y){y.context.setTransform(y.options.pixelRatio,0,0,y.options.pixelRatio,0,0)},r.world=function(y,w){var T=a.now(),C=y.engine,M=C.world,L=y.canvas,x=y.context,D=y.options,A=y.timing,I=c.allBodies(M),O=c.allConstraints(M),P=D.wireframes?D.wireframeBackground:D.background,k=[],R=[],V,X={timestamp:C.timing.timestamp};if(d.trigger(y,"beforeRender",X),y.currentBackground!==P&&E(y,P),x.globalCompositeOperation="source-in",x.fillStyle="transparent",x.fillRect(0,0,L.width,L.height),x.globalCompositeOperation="source-over",D.hasBounds){for(V=0;V<I.length;V++){var G=I[V];u.overlaps(G.bounds,y.bounds)&&k.push(G)}for(V=0;V<O.length;V++){var F=O[V],se=F.bodyA,Y=F.bodyB,J=F.pointA,re=F.pointB;se&&(J=f.add(se.position,F.pointA)),Y&&(re=f.add(Y.position,F.pointB)),!(!J||!re)&&(u.contains(y.bounds,J)||u.contains(y.bounds,re))&&R.push(F)}r.startViewTransform(y),y.mouse&&(p.setScale(y.mouse,{x:(y.bounds.max.x-y.bounds.min.x)/y.options.width,y:(y.bounds.max.y-y.bounds.min.y)/y.options.height}),p.setOffset(y.mouse,y.bounds.min))}else R=O,k=I,y.options.pixelRatio!==1&&y.context.setTransform(y.options.pixelRatio,0,0,y.options.pixelRatio,0,0);!D.wireframes||C.enableSleeping&&D.showSleeping?r.bodies(y,k,x):(D.showConvexHulls&&r.bodyConvexHulls(y,k,x),r.bodyWireframes(y,k,x)),D.showBounds&&r.bodyBounds(y,k,x),(D.showAxes||D.showAngleIndicator)&&r.bodyAxes(y,k,x),D.showPositions&&r.bodyPositions(y,k,x),D.showVelocity&&r.bodyVelocity(y,k,x),D.showIds&&r.bodyIds(y,k,x),D.showSeparations&&r.separations(y,C.pairs.list,x),D.showCollisions&&r.collisions(y,C.pairs.list,x),D.showVertexNumbers&&r.vertexNumbers(y,k,x),D.showMousePosition&&r.mousePosition(y,y.mouse,x),r.constraints(R,x),D.hasBounds&&r.endViewTransform(y),d.trigger(y,"afterRender",X),A.lastElapsed=a.now()-T},r.stats=function(y,w,T){for(var C=y.engine,M=C.world,L=c.allBodies(M),x=0,D=55,A=44,I=0,O=0,P=0;P<L.length;P+=1)x+=L[P].parts.length;var k={Part:x,Body:L.length,Cons:c.allConstraints(M).length,Comp:c.allComposites(M).length,Pair:C.pairs.list.length};w.fillStyle="#0e0f19",w.fillRect(I,O,D*5.5,A),w.font="12px Arial",w.textBaseline="top",w.textAlign="right";for(var R in k){var V=k[R];w.fillStyle="#aaa",w.fillText(R,I+D,O+8),w.fillStyle="#eee",w.fillText(V,I+D,O+26),I+=D}},r.performance=function(y,w){var T=y.engine,C=y.timing,M=C.deltaHistory,L=C.elapsedHistory,x=C.timestampElapsedHistory,D=C.engineDeltaHistory,A=C.engineElapsedHistory,I=T.timing.lastDelta,O=g(M),P=g(L),k=g(D),R=g(A),V=g(x),X=V/O||0,G=1e3/O||0,F=4,se=12,Y=60,J=34,re=10,ge=69;w.fillStyle="#0e0f19",w.fillRect(0,50,se*4+Y*5+22,J),r.status(w,re,ge,Y,F,M.length,Math.round(G)+" fps",G/r._goodFps,function(le){return M[le]/O-1}),r.status(w,re+se+Y,ge,Y,F,D.length,I.toFixed(2)+" dt",r._goodDelta/I,function(le){return D[le]/k-1}),r.status(w,re+(se+Y)*2,ge,Y,F,A.length,R.toFixed(2)+" ut",1-R/r._goodFps,function(le){return A[le]/R-1}),r.status(w,re+(se+Y)*3,ge,Y,F,L.length,P.toFixed(2)+" rt",1-P/r._goodFps,function(le){return L[le]/P-1}),r.status(w,re+(se+Y)*4,ge,Y,F,x.length,X.toFixed(2)+" x",X*X*X,function(le){return(x[le]/M[le]/X||0)-1})},r.status=function(y,w,T,C,M,L,x,D,A){y.strokeStyle="#888",y.fillStyle="#444",y.lineWidth=1,y.fillRect(w,T+7,C,1),y.beginPath(),y.moveTo(w,T+7-M*a.clamp(.4*A(0),-2,2));for(var I=0;I<C;I+=1)y.lineTo(w+I,T+7-(I<L?M*a.clamp(.4*A(I),-2,2):0));y.stroke(),y.fillStyle="hsl("+a.clamp(25+95*D,0,120)+",100%,60%)",y.fillRect(w,T-7,4,4),y.font="12px Arial",y.textBaseline="middle",y.textAlign="right",y.fillStyle="#eee",y.fillText(x,w+C,T-5)},r.constraints=function(y,w){for(var T=w,C=0;C<y.length;C++){var M=y[C];if(!(!M.render.visible||!M.pointA||!M.pointB)){var L=M.bodyA,x=M.bodyB,D,A;if(L?D=f.add(L.position,M.pointA):D=M.pointA,M.render.type==="pin")T.beginPath(),T.arc(D.x,D.y,3,0,2*Math.PI),T.closePath();else{if(x?A=f.add(x.position,M.pointB):A=M.pointB,T.beginPath(),T.moveTo(D.x,D.y),M.render.type==="spring")for(var I=f.sub(A,D),O=f.perp(f.normalise(I)),P=Math.ceil(a.clamp(M.length/5,12,20)),k,R=1;R<P;R+=1)k=R%2===0?1:-1,T.lineTo(D.x+I.x*(R/P)+O.x*k*4,D.y+I.y*(R/P)+O.y*k*4);T.lineTo(A.x,A.y)}M.render.lineWidth&&(T.lineWidth=M.render.lineWidth,T.strokeStyle=M.render.strokeStyle,T.stroke()),M.render.anchors&&(T.fillStyle=M.render.strokeStyle,T.beginPath(),T.arc(D.x,D.y,3,0,2*Math.PI),T.arc(A.x,A.y,3,0,2*Math.PI),T.closePath(),T.fill())}}},r.bodies=function(y,w,T){var C=T,M=y.engine,L=y.options,x=L.showInternalEdges||!L.wireframes,D,A,I,O;for(I=0;I<w.length;I++)if(D=w[I],!!D.render.visible){for(O=D.parts.length>1?1:0;O<D.parts.length;O++)if(A=D.parts[O],!!A.render.visible){if(L.showSleeping&&D.isSleeping?C.globalAlpha=.5*A.render.opacity:A.render.opacity!==1&&(C.globalAlpha=A.render.opacity),A.render.sprite&&A.render.sprite.texture&&!L.wireframes){var P=A.render.sprite,k=_(y,P.texture);C.translate(A.position.x,A.position.y),C.rotate(A.angle),C.drawImage(k,k.width*-P.xOffset*P.xScale,k.height*-P.yOffset*P.yScale,k.width*P.xScale,k.height*P.yScale),C.rotate(-A.angle),C.translate(-A.position.x,-A.position.y)}else{if(A.circleRadius)C.beginPath(),C.arc(A.position.x,A.position.y,A.circleRadius,0,2*Math.PI);else{C.beginPath(),C.moveTo(A.vertices[0].x,A.vertices[0].y);for(var R=1;R<A.vertices.length;R++)!A.vertices[R-1].isInternal||x?C.lineTo(A.vertices[R].x,A.vertices[R].y):C.moveTo(A.vertices[R].x,A.vertices[R].y),A.vertices[R].isInternal&&!x&&C.moveTo(A.vertices[(R+1)%A.vertices.length].x,A.vertices[(R+1)%A.vertices.length].y);C.lineTo(A.vertices[0].x,A.vertices[0].y),C.closePath()}L.wireframes?(C.lineWidth=1,C.strokeStyle="#bbb",C.stroke()):(C.fillStyle=A.render.fillStyle,A.render.lineWidth&&(C.lineWidth=A.render.lineWidth,C.strokeStyle=A.render.strokeStyle,C.stroke()),C.fill())}C.globalAlpha=1}}},r.bodyWireframes=function(y,w,T){var C=T,M=y.options.showInternalEdges,L,x,D,A,I;for(C.beginPath(),D=0;D<w.length;D++)if(L=w[D],!!L.render.visible)for(I=L.parts.length>1?1:0;I<L.parts.length;I++){for(x=L.parts[I],C.moveTo(x.vertices[0].x,x.vertices[0].y),A=1;A<x.vertices.length;A++)!x.vertices[A-1].isInternal||M?C.lineTo(x.vertices[A].x,x.vertices[A].y):C.moveTo(x.vertices[A].x,x.vertices[A].y),x.vertices[A].isInternal&&!M&&C.moveTo(x.vertices[(A+1)%x.vertices.length].x,x.vertices[(A+1)%x.vertices.length].y);C.lineTo(x.vertices[0].x,x.vertices[0].y)}C.lineWidth=1,C.strokeStyle="#bbb",C.stroke()},r.bodyConvexHulls=function(y,w,T){var C=T,M,L,x,D,A;for(C.beginPath(),x=0;x<w.length;x++)if(M=w[x],!(!M.render.visible||M.parts.length===1)){for(C.moveTo(M.vertices[0].x,M.vertices[0].y),D=1;D<M.vertices.length;D++)C.lineTo(M.vertices[D].x,M.vertices[D].y);C.lineTo(M.vertices[0].x,M.vertices[0].y)}C.lineWidth=1,C.strokeStyle="rgba(255,255,255,0.2)",C.stroke()},r.vertexNumbers=function(y,w,T){var C=T,M,L,x;for(M=0;M<w.length;M++){var D=w[M].parts;for(x=D.length>1?1:0;x<D.length;x++){var A=D[x];for(L=0;L<A.vertices.length;L++)C.fillStyle="rgba(255,255,255,0.2)",C.fillText(M+"_"+L,A.position.x+(A.vertices[L].x-A.position.x)*.8,A.position.y+(A.vertices[L].y-A.position.y)*.8)}}},r.mousePosition=function(y,w,T){var C=T;C.fillStyle="rgba(255,255,255,0.8)",C.fillText(w.position.x+"  "+w.position.y,w.position.x+5,w.position.y-5)},r.bodyBounds=function(y,w,T){var C=T,M=y.engine,L=y.options;C.beginPath();for(var x=0;x<w.length;x++){var D=w[x];if(D.render.visible)for(var A=w[x].parts,I=A.length>1?1:0;I<A.length;I++){var O=A[I];C.rect(O.bounds.min.x,O.bounds.min.y,O.bounds.max.x-O.bounds.min.x,O.bounds.max.y-O.bounds.min.y)}}L.wireframes?C.strokeStyle="rgba(255,255,255,0.08)":C.strokeStyle="rgba(0,0,0,0.1)",C.lineWidth=1,C.stroke()},r.bodyAxes=function(y,w,T){var C=T,M=y.engine,L=y.options,x,D,A,I;for(C.beginPath(),D=0;D<w.length;D++){var O=w[D],P=O.parts;if(O.render.visible)if(L.showAxes)for(A=P.length>1?1:0;A<P.length;A++)for(x=P[A],I=0;I<x.axes.length;I++){var k=x.axes[I];C.moveTo(x.position.x,x.position.y),C.lineTo(x.position.x+k.x*20,x.position.y+k.y*20)}else for(A=P.length>1?1:0;A<P.length;A++)for(x=P[A],I=0;I<x.axes.length;I++)C.moveTo(x.position.x,x.position.y),C.lineTo((x.vertices[0].x+x.vertices[x.vertices.length-1].x)/2,(x.vertices[0].y+x.vertices[x.vertices.length-1].y)/2)}L.wireframes?(C.strokeStyle="indianred",C.lineWidth=1):(C.strokeStyle="rgba(255, 255, 255, 0.4)",C.globalCompositeOperation="overlay",C.lineWidth=2),C.stroke(),C.globalCompositeOperation="source-over"},r.bodyPositions=function(y,w,T){var C=T,M=y.engine,L=y.options,x,D,A,I;for(C.beginPath(),A=0;A<w.length;A++)if(x=w[A],!!x.render.visible)for(I=0;I<x.parts.length;I++)D=x.parts[I],C.arc(D.position.x,D.position.y,3,0,2*Math.PI,!1),C.closePath();for(L.wireframes?C.fillStyle="indianred":C.fillStyle="rgba(0,0,0,0.5)",C.fill(),C.beginPath(),A=0;A<w.length;A++)x=w[A],x.render.visible&&(C.arc(x.positionPrev.x,x.positionPrev.y,2,0,2*Math.PI,!1),C.closePath());C.fillStyle="rgba(255,165,0,0.8)",C.fill()},r.bodyVelocity=function(y,w,T){var C=T;C.beginPath();for(var M=0;M<w.length;M++){var L=w[M];if(L.render.visible){var x=s.getVelocity(L);C.moveTo(L.position.x,L.position.y),C.lineTo(L.position.x+x.x,L.position.y+x.y)}}C.lineWidth=3,C.strokeStyle="cornflowerblue",C.stroke()},r.bodyIds=function(y,w,T){var C=T,M,L;for(M=0;M<w.length;M++)if(w[M].render.visible){var x=w[M].parts;for(L=x.length>1?1:0;L<x.length;L++){var D=x[L];C.font="12px Arial",C.fillStyle="rgba(255,255,255,0.5)",C.fillText(D.id,D.position.x+10,D.position.y-10)}}},r.collisions=function(y,w,T){var C=T,M=y.options,L,x,D,A,I,O,P;for(C.beginPath(),O=0;O<w.length;O++)if(L=w[O],!!L.isActive)for(x=L.collision,P=0;P<L.activeContacts.length;P++){var k=L.activeContacts[P],R=k.vertex;C.rect(R.x-1.5,R.y-1.5,3.5,3.5)}for(M.wireframes?C.fillStyle="rgba(255,255,255,0.7)":C.fillStyle="orange",C.fill(),C.beginPath(),O=0;O<w.length;O++)if(L=w[O],!!L.isActive&&(x=L.collision,L.activeContacts.length>0)){var V=L.activeContacts[0].vertex.x,X=L.activeContacts[0].vertex.y;L.activeContacts.length===2&&(V=(L.activeContacts[0].vertex.x+L.activeContacts[1].vertex.x)/2,X=(L.activeContacts[0].vertex.y+L.activeContacts[1].vertex.y)/2),x.bodyB===x.supports[0].body||x.bodyA.isStatic===!0?C.moveTo(V-x.normal.x*8,X-x.normal.y*8):C.moveTo(V+x.normal.x*8,X+x.normal.y*8),C.lineTo(V,X)}M.wireframes?C.strokeStyle="rgba(255,165,0,0.7)":C.strokeStyle="orange",C.lineWidth=1,C.stroke()},r.separations=function(y,w,T){var C=T,M=y.options,L,x,D,A,I,O,P;for(C.beginPath(),O=0;O<w.length;O++)if(L=w[O],!!L.isActive){x=L.collision,A=x.bodyA,I=x.bodyB;var k=1;!I.isStatic&&!A.isStatic&&(k=.5),I.isStatic&&(k=0),C.moveTo(I.position.x,I.position.y),C.lineTo(I.position.x-x.penetration.x*k,I.position.y-x.penetration.y*k),k=1,!I.isStatic&&!A.isStatic&&(k=.5),A.isStatic&&(k=0),C.moveTo(A.position.x,A.position.y),C.lineTo(A.position.x+x.penetration.x*k,A.position.y+x.penetration.y*k)}M.wireframes?C.strokeStyle="rgba(255,165,0,0.5)":C.strokeStyle="orange",C.stroke()},r.inspector=function(y,w){var T=y.engine,C=y.selected,M=y.render,L=M.options,x;if(L.hasBounds){var D=M.bounds.max.x-M.bounds.min.x,A=M.bounds.max.y-M.bounds.min.y,I=D/M.options.width,O=A/M.options.height;w.scale(1/I,1/O),w.translate(-M.bounds.min.x,-M.bounds.min.y)}for(var P=0;P<C.length;P++){var k=C[P].data;switch(w.translate(.5,.5),w.lineWidth=1,w.strokeStyle="rgba(255,165,0,0.9)",w.setLineDash([1,2]),k.type){case"body":x=k.bounds,w.beginPath(),w.rect(Math.floor(x.min.x-3),Math.floor(x.min.y-3),Math.floor(x.max.x-x.min.x+6),Math.floor(x.max.y-x.min.y+6)),w.closePath(),w.stroke();break;case"constraint":var R=k.pointA;k.bodyA&&(R=k.pointB),w.beginPath(),w.arc(R.x,R.y,10,0,2*Math.PI),w.closePath(),w.stroke();break}w.setLineDash([]),w.translate(-.5,-.5)}y.selectStart!==null&&(w.translate(.5,.5),w.lineWidth=1,w.strokeStyle="rgba(255,165,0,0.6)",w.fillStyle="rgba(255,165,0,0.1)",x=y.selectBounds,w.beginPath(),w.rect(Math.floor(x.min.x),Math.floor(x.min.y),Math.floor(x.max.x-x.min.x),Math.floor(x.max.y-x.min.y)),w.closePath(),w.stroke(),w.fill(),w.translate(-.5,-.5)),L.hasBounds&&w.setTransform(1,0,0,1,0,0)};var h=function(y,w){var T=y.engine,C=y.timing,M=C.historySize,L=T.timing.timestamp;C.delta=w-C.lastTime||r._goodDelta,C.lastTime=w,C.timestampElapsed=L-C.lastTimestamp||0,C.lastTimestamp=L,C.deltaHistory.unshift(C.delta),C.deltaHistory.length=Math.min(C.deltaHistory.length,M),C.engineDeltaHistory.unshift(T.timing.lastDelta),C.engineDeltaHistory.length=Math.min(C.engineDeltaHistory.length,M),C.timestampElapsedHistory.unshift(C.timestampElapsed),C.timestampElapsedHistory.length=Math.min(C.timestampElapsedHistory.length,M),C.engineElapsedHistory.unshift(T.timing.lastElapsed),C.engineElapsedHistory.length=Math.min(C.engineElapsedHistory.length,M),C.elapsedHistory.unshift(C.lastElapsed),C.elapsedHistory.length=Math.min(C.elapsedHistory.length,M)},g=function(y){for(var w=0,T=0;T<y.length;T+=1)w+=y[T];return w/y.length||0},v=function(y,w){var T=document.createElement("canvas");return T.width=y,T.height=w,T.oncontextmenu=function(){return!1},T.onselectstart=function(){return!1},T},b=function(y){var w=y.getContext("2d"),T=window.devicePixelRatio||1,C=w.webkitBackingStorePixelRatio||w.mozBackingStorePixelRatio||w.msBackingStorePixelRatio||w.oBackingStorePixelRatio||w.backingStorePixelRatio||1;return T/C},_=function(y,w){var T=y.textures[w];return T||(T=y.textures[w]=new Image,T.src=w,T)},E=function(y,w){var T=w;/(jpg|gif|png)$/.test(w)&&(T="url("+w+")"),y.canvas.style.background=T,y.canvas.style.backgroundSize="contain",y.currentBackground=w}})()},function(t,i,o){var r={};t.exports=r;var s=o(5),a=o(17),c=o(0);(function(){var u,d;if(typeof window<"u"&&(u=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,d=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!u){var f;u=function(p){f=setTimeout(function(){p(c.now())},1e3/60)},d=function(){clearTimeout(f)}}r.create=function(p){var l={fps:60,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,frameRequestId:null,isFixed:!1,enabled:!0},m=c.extend(l,p);return m.delta=m.delta||1e3/m.fps,m.deltaMin=m.deltaMin||1e3/m.fps,m.deltaMax=m.deltaMax||1e3/(m.fps*.5),m.fps=1e3/m.delta,m},r.run=function(p,l){return typeof p.positionIterations<"u"&&(l=p,p=r.create()),function m(h){p.frameRequestId=u(m),h&&p.enabled&&r.tick(p,l,h)}(),p},r.tick=function(p,l,m){var h=l.timing,g;p.isFixed?g=p.delta:(g=m-p.timePrev||p.delta,p.timePrev=m,p.deltaHistory.push(g),p.deltaHistory=p.deltaHistory.slice(-p.deltaSampleSize),g=Math.min.apply(null,p.deltaHistory),g=g<p.deltaMin?p.deltaMin:g,g=g>p.deltaMax?p.deltaMax:g,p.delta=g);var v={timestamp:h.timestamp};s.trigger(p,"beforeTick",v),p.frameCounter+=1,m-p.counterTimestamp>=1e3&&(p.fps=p.frameCounter*((m-p.counterTimestamp)/1e3),p.counterTimestamp=m,p.frameCounter=0),s.trigger(p,"tick",v),s.trigger(p,"beforeUpdate",v),a.update(l,g),s.trigger(p,"afterUpdate",v),s.trigger(p,"afterTick",v)},r.stop=function(p){d(p.frameRequestId)},r.start=function(p,l){r.run(p,l)}})()},function(t,i,o){var r={};t.exports=r;var s=o(8),a=o(0),c=a.deprecated;(function(){r.collides=function(u,d){return s.collides(u,d)},c(r,"collides","SAT.collides \u27A4 replaced by Collision.collides")})()},function(t,i,o){var r={};t.exports=r;var s=o(1),a=o(0);(function(){r.pathToVertices=function(c,u){typeof window<"u"&&!("SVGPathSeg"in window)&&a.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var d,f,p,l,m,h,g,v,b,_,E=[],y,w,T=0,C=0,M=0;u=u||15;var L=function(D,A,I){var O=I%2===1&&I>1;if(!b||D!=b.x||A!=b.y){b&&O?(y=b.x,w=b.y):(y=0,w=0);var P={x:y+D,y:w+A};(O||!b)&&(b=P),E.push(P),C=y+D,M=w+A}},x=function(D){var A=D.pathSegTypeAsLetter.toUpperCase();if(A!=="Z"){switch(A){case"M":case"L":case"T":case"C":case"S":case"Q":C=D.x,M=D.y;break;case"H":C=D.x;break;case"V":M=D.y;break}L(C,M,D.pathSegType)}};for(r._svgPathToAbsolute(c),p=c.getTotalLength(),h=[],d=0;d<c.pathSegList.numberOfItems;d+=1)h.push(c.pathSegList.getItem(d));for(g=h.concat();T<p;){if(_=c.getPathSegAtLength(T),m=h[_],m!=v){for(;g.length&&g[0]!=m;)x(g.shift());v=m}switch(m.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":l=c.getPointAtLength(T),L(l.x,l.y,0);break}T+=u}for(d=0,f=g.length;d<f;++d)x(g[d]);return E},r._svgPathToAbsolute=function(c){for(var u,d,f,p,l,m,h=c.pathSegList,g=0,v=0,b=h.numberOfItems,_=0;_<b;++_){var E=h.getItem(_),y=E.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(y))"x"in E&&(g=E.x),"y"in E&&(v=E.y);else switch("x1"in E&&(f=g+E.x1),"x2"in E&&(l=g+E.x2),"y1"in E&&(p=v+E.y1),"y2"in E&&(m=v+E.y2),"x"in E&&(g+=E.x),"y"in E&&(v+=E.y),y){case"m":h.replaceItem(c.createSVGPathSegMovetoAbs(g,v),_);break;case"l":h.replaceItem(c.createSVGPathSegLinetoAbs(g,v),_);break;case"h":h.replaceItem(c.createSVGPathSegLinetoHorizontalAbs(g),_);break;case"v":h.replaceItem(c.createSVGPathSegLinetoVerticalAbs(v),_);break;case"c":h.replaceItem(c.createSVGPathSegCurvetoCubicAbs(g,v,f,p,l,m),_);break;case"s":h.replaceItem(c.createSVGPathSegCurvetoCubicSmoothAbs(g,v,l,m),_);break;case"q":h.replaceItem(c.createSVGPathSegCurvetoQuadraticAbs(g,v,f,p),_);break;case"t":h.replaceItem(c.createSVGPathSegCurvetoQuadraticSmoothAbs(g,v),_);break;case"a":h.replaceItem(c.createSVGPathSegArcAbs(g,v,E.r1,E.r2,E.angle,E.largeArcFlag,E.sweepFlag),_);break;case"z":case"Z":g=u,v=d;break}(y=="M"||y=="m")&&(u=g,d=v)}}})()},function(t,i,o){var r={};t.exports=r;var s=o(6),a=o(0);(function(){r.create=s.create,r.add=s.add,r.remove=s.remove,r.clear=s.clear,r.addComposite=s.addComposite,r.addBody=s.addBody,r.addConstraint=s.addConstraint})()}])})})(Ii,Ii.exports);var H=Ii.exports;class ip{constructor(){this.tweens=new Wo}update(e,t){this.tweens.update()}tween(e){e=Object.assign({duration:1e3,easing:$c.Quadratic.InOut},e);var t=new Zo(e.object,this.tweens).to(e.to,e.duration).dynamic(e.dynamic).easing(e.easing).interpolation(e.interpolation).onStart(e.onStart).onUpdate(e.onUpdate).onComplete(e.onComplete);return t}}class Yo{constructor(){}randomNumber(e,t){return Math.random()*(t-e)+e}getVectorFromAngle(e=0,o=1){var i=Math.PI,o=1e3,r=-e*(180/i),s=Math.round(Math.cos((90-r)*(i/180))*o)/o,a=Math.round(Math.sin((90-r)*(i/180))*o)/o;return{x:s,y:a}}getAngleFromVector(e){var t=Math.atan2(e.y,e.x),i=180*t/Math.PI;return this.degreesToRadians((360+Math.round(i))%360)}radiansToDegrees(e){return e*(180/Math.PI)}degreesToRadians(e){return e*(Math.PI/180)}isJSON(e){try{JSON.parse(e)}catch{return!1}return!0}}class np{constructor(){this.reset()}start(){this.pauseTime<=this.startTime&&this.reset(),this.resume()}pause(){this.pauseTime=Date.now()}reset(){var e=Date.now();this.startTime=e,this.pauseTime=e,this.playTime=0}resume(){this.playTime+=Date.now()-this.pauseTime}getPlayTime(){var e=Date.now()-this.startTime-this.playTime;return e}toString(){var e=this.getPlayTime(),t=(e/1e3%1).toFixed(3).slice(-3),i=Math.floor(e/1e3);return i+"."+t}toHTML(e){return"<span>"+e.split("").join("</span><span>")+"</span>"}render(e){e==null&&(e=app.timer.toString());var t=app.document.getElementById("timer");t&&(t.innerHTML=app.timer.toHTML(e))}}const rp={url:"../mp3/theme.mp3",userData:{loop:!0,volume:1}},op={theme:rp};class sp{constructor(e){this.cache={},this.muted=!1,this.listener=new dc,this.loader=new uc(e),this.volume=1,this.queue=[]}load(){var e=this;for(const[t,i]of Object.entries(op))this.loader.load(i.url,function(o){var r=new hc(e.listener);r.name=t,r.setBuffer(o),i.userData&&(r.userData=i.userData,r.userData.loop&&r.setLoop(r.userData.loop),r.userData.volume&&r.setVolume(r.userData.volume)),e.cache[t]=r});window.addEventListener("playAudio",function(t){e.play(t.detail.name,t.detail.queue)}),window.addEventListener("setVolume",function(t){e.setMasterVolume(t.detail)}),window.addEventListener("pointerup",function(t){e.playQueue(t.detail)})}play(e,t=!1){t==!0?this.enqueue(e):this.cache[e]&&this.volume>0&&this.cache[e].play()}enqueue(e){this.queue.push(e)}playQueue(){for(var e=0;e<this.queue.length;e++)this.play(this.queue[e]);this.queue=[]}toggleVolume(){this.muted==!0?(this.muted=!1,this.setMasterVolume(this.volume)):(this.muted=!0,this.volume=this.getMasterVolume(),this.setMasterVolume(0))}mute(e){this.muted=!e,this.toggleVolume()}setMasterVolume(e){e==0&&(e=1e-6),this.volume=e,this.listener.setMasterVolume(e)}getMasterVolume(){return this.volume}}const ap={"background-city":{url:"../glb/background-city.glb"},"background-classic":{url:"../glb/background-classic.glb"},"background-desert":{url:"../glb/background-desert.glb"},"background-forest":{url:"../glb/background-forest.glb"},"background-hell":{url:"../glb/background-hell.glb"},"background-kargoh":{url:"../glb/background-kargoh.glb"},"background-tokyo":{url:"../glb/background-tokyo.glb"},"cube-control":{url:"../glb/cube-control.glb"}};class lp{constructor(e){this.cache={},this.loader=new fc(e)}load(){var e=this;for(const[t,i]of Object.entries(ap))this.loader.load(i.url,function(o){var r=o.scene;r.name=t,r.animations=o.animations,r.userData={...i.userData},e.setShadows(r),e.applyUserData(r),e.cache[t]=r})}clone(e){var t;if(typeof e=="string"){if(this.cache[e])return this.clone(this.cache[e])}else e&&e&&(t=mc(e),t.animations=[...e.animations],this.applyUserData(t));return t}setShadows(e){e.traverse(function(t){t.isMesh&&(t.castShadow=!0)})}applyUserData(e){var o,r;if(e.userData.position&&e.position.set(e.userData.position.x,e.userData.position.y,e.userData.position.z),e.userData.rotation&&e.rotation.set(e.userData.rotation.x,e.userData.rotation.y,e.userData.rotation.z),e.userData.scale&&e.scale.set(e.userData.scale.x,e.userData.scale.y,e.userData.scale.z),e.animations.length>0){var t=((r=(o=e.userData)==null?void 0:o.animation)==null?void 0:r.loop)==!0?Do:gc;e.traverse(function(s){s.frustumCulled=!1}),e.mixer=new vc(e),e.clips=[];for(var i=0;i<e.animations.length;i++)e.clips.push(e.mixer.clipAction(e.animations[i])),e.clips[i].setLoop(t),e.clips[i].reset();e.animation={play:function(){for(var s=0;s<e.clips.length;s++)e.clips[s].play()},reset:function(){for(var s=0;s<e.clips.length;s++)e.clips[s].reset()},update:function(s=1/60){e.mixer.update(s)}},t==Do&&e.animation.play()}}}const cp={};class pp{constructor(e){this.cache={},this.loader=new Lo(e)}load(){var e=this;for(const[t,i]of Object.entries(cp))this.loader.load(i.url,function(o){e.cache[t]=o,e.cache[t].name=t,e.cache[t].magFilter=i.magFilter||1006})}generateCheckered(){var e=document.createElement("canvas"),t=e.getContext("2d"),i=new Texture(e);e.width=16,e.height=16,t.fillColor="rgba(0, 0, 0, 0.5)";for(var o=0;o<2;o++)for(var r=0;r<e.height/2;r++)for(var s=0;s<e.width/2;s++)t.rect(s*2+o,r*2+o,1,1);return t.fill(),i.needsUpdate=!0,i.wrapS=RepeatWrapping,i.wrapT=RepeatWrapping,i}}class dp{constructor(){this.manager=new yc,this.models=new lp(this.manager),this.textures=new pp(this.manager),this.audio=new sp(this.manager)}update(e){}load(e=function(){}){this.manager.onLoad=e,this.manager.onProgress=this.loadProgress,this.audio.load(),this.models.load(),this.textures.load()}loadProgress(e,t,i){var o=Math.ceil(t/i*100);window.dispatchEvent(new CustomEvent("updateLoading",{detail:{urls:e,index:t,max:i,percent:o}}))}}class up{constructor(){this.actions=[],this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.speed=1,this.running=!1}add(e=()=>{},t=-1){this.actions.push({rate:1/t,sum:1/t,alpha:0,callback:e})}update(e){if(this.running==!0&&(requestAnimationFrame(e),this.actions.length>0))for(var t=this.getDelta(),i=this.actions[0].sum/this.actions[0].rate,o=this.actions.length-1;o>=0;o--)this.actions[o].sum+=t,(this.actions[o].sum>=this.actions[o].rate||this.actions[o].rate==-1)&&(this.actions[o].sum%=this.actions[o].rate,this.actions[o].callback({delta:this.actions[o].rate==-1?t:this.actions[o].rate,alpha:o==0?0:i}))}start(){this.startTime=this.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0;var e=(function(){this.update(e)}).bind(this);e()}stop(){this.getElapsedTime(),this.running=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.running){const t=this.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e*this.speed}now(){return(typeof performance>"u"?Date:performance).now()}}class hp extends Ft{constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new ue(.5,.5),this.addEventListener("removed",function(){this.traverse(function(t){t.element instanceof Element&&t.element.parentNode!==null&&t.element.parentNode.removeChild(t.element)})})}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this.center=e.center,this}}const Pt=new z,Ko=new St,Qo=new St,Jo=new z,$o=new z;class fp{constructor(e={}){const t=this;let i,o,r,s;const a={objects:new WeakMap},c=e.element!==void 0?e.element:document.createElement("div");c.style.overflow="hidden",this.domElement=c,this.getSize=function(){return{width:i,height:o}},this.render=function(m,h){m.matrixWorldAutoUpdate===!0&&m.updateMatrixWorld(),h.parent===null&&h.matrixWorldAutoUpdate===!0&&h.updateMatrixWorld(),Ko.copy(h.matrixWorldInverse),Qo.multiplyMatrices(h.projectionMatrix,Ko),d(m,m,h),l(m)},this.setSize=function(m,h){i=m,o=h,r=i/2,s=o/2,c.style.width=m+"px",c.style.height=h+"px"};function u(m){m.isCSS2DObject&&(m.element.style.display="none");for(let h=0,g=m.children.length;h<g;h++)u(m.children[h])}function d(m,h,g){if(m.visible===!1){u(m);return}if(m.isCSS2DObject){Pt.setFromMatrixPosition(m.matrixWorld),Pt.applyMatrix4(Qo);const v=Pt.z>=-1&&Pt.z<=1&&m.layers.test(g.layers)===!0,b=m.element;b.style.display=v===!0?"":"none",v===!0&&(m.onBeforeRender(t,h,g),b.style.transform="translate("+-100*m.center.x+"%,"+-100*m.center.y+"%)translate("+(Pt.x*r+r)+"px,"+(-Pt.y*s+s)+"px)",b.parentNode!==c&&c.appendChild(b),m.onAfterRender(t,h,g));const _={distanceToCameraSquared:f(g,m)};a.objects.set(m,_)}for(let v=0,b=m.children.length;v<b;v++)d(m.children[v],h,g)}function f(m,h){return Jo.setFromMatrixPosition(m.matrixWorld),$o.setFromMatrixPosition(h.matrixWorld),Jo.distanceToSquared($o)}function p(m){const h=[];return m.traverseVisible(function(g){g.isCSS2DObject&&h.push(g)}),h}function l(m){const h=p(m).sort(function(v,b){if(v.renderOrder!==b.renderOrder)return b.renderOrder-v.renderOrder;const _=a.objects.get(v).distanceToCameraSquared,E=a.objects.get(b).distanceToCameraSquared;return _-E}),g=h.length;for(let v=0,b=h.length;v<b;v++)h[v].element.style.zIndex=g-v}}}class lt extends bc{constructor(e,t,i,o){super(),this.renderScene=t,this.renderCamera=i,this.selectedObjects=o!==void 0?o:[],this.visibleEdgeColor=new qt(1,1,1),this.hiddenEdgeColor=new qt(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,this._visibilityCache=new Map,this.resolution=e!==void 0?new ue(e.x,e.y):new ue(256,256);const r=Math.round(this.resolution.x/this.downSampleRatio),s=Math.round(this.resolution.y/this.downSampleRatio);this.renderTargetMaskBuffer=new ct(this.resolution.x,this.resolution.y),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new wc,this.depthMaterial.side=Pi,this.depthMaterial.depthPacking=xc,this.depthMaterial.blending=Io,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=Pi,this.prepareMaskMaterial.fragmentShader=d(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new ct(this.resolution.x,this.resolution.y),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new ct(r,s),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new ct(r,s),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new ct(Math.round(r/2),Math.round(s/2)),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new ct(r,s),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new ct(Math.round(r/2),Math.round(s/2)),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1;const a=4,c=4;this.separableBlurMaterial1=this.getSeperableBlurMaterial(a),this.separableBlurMaterial1.uniforms.texSize.value.set(r,s),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(c),this.separableBlurMaterial2.uniforms.texSize.value.set(Math.round(r/2),Math.round(s/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=c,this.overlayMaterial=this.getOverlayMaterial();const u=Sc;this.copyUniforms=Xn.clone(u.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new kt({uniforms:this.copyUniforms,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader,blending:Io,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new qt,this.oldClearAlpha=1,this.fsQuad=new kc(null),this.tempPulseColor1=new qt,this.tempPulseColor2=new qt,this.textureMatrix=new St;function d(f,p){const l=p.isPerspectiveCamera?"perspective":"orthographic";return f.replace(/DEPTH_TO_VIEW_Z/g,l+"DepthToViewZ")}}dispose(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose(),this.depthMaterial.dispose(),this.prepareMaskMaterial.dispose(),this.edgeDetectionMaterial.dispose(),this.separableBlurMaterial1.dispose(),this.separableBlurMaterial2.dispose(),this.overlayMaterial.dispose(),this.materialCopy.dispose(),this.fsQuad.dispose()}setSize(e,t){this.renderTargetMaskBuffer.setSize(e,t),this.renderTargetDepthBuffer.setSize(e,t);let i=Math.round(e/this.downSampleRatio),o=Math.round(t/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(i,o),this.renderTargetBlurBuffer1.setSize(i,o),this.renderTargetEdgeBuffer1.setSize(i,o),this.separableBlurMaterial1.uniforms.texSize.value.set(i,o),i=Math.round(i/2),o=Math.round(o/2),this.renderTargetBlurBuffer2.setSize(i,o),this.renderTargetEdgeBuffer2.setSize(i,o),this.separableBlurMaterial2.uniforms.texSize.value.set(i,o)}changeVisibilityOfSelectedObjects(e){const t=this._visibilityCache;function i(o){o.isMesh&&(e===!0?o.visible=t.get(o):(t.set(o,o.visible),o.visible=e))}for(let o=0;o<this.selectedObjects.length;o++)this.selectedObjects[o].traverse(i)}changeVisibilityOfNonSelectedObjects(e){const t=this._visibilityCache,i=[];function o(s){s.isMesh&&i.push(s)}for(let s=0;s<this.selectedObjects.length;s++)this.selectedObjects[s].traverse(o);function r(s){if(s.isMesh||s.isSprite||s.isTransformControls){let a=!1;for(let c=0;c<i.length;c++)if(i[c].id===s.id){a=!0;break}if(a===!1){const c=s.visible;(e===!1||t.get(s)===!0)&&(s.visible=e),t.set(s,c)}}else(s.isPoints||s.isLine)&&(e===!0?s.visible=t.get(s):(t.set(s,s.visible),s.visible=e))}this.renderScene.traverse(r)}updateTextureMatrix(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)}render(e,t,i,o,r){if(this.selectedObjects.length>0){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const s=e.autoClear;e.autoClear=!1,r&&e.state.buffers.stencil.setTest(!1),e.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1);const a=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,e.setRenderTarget(this.renderTargetDepthBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this._visibilityCache.clear(),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,e.setRenderTarget(this.renderTargetMaskBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this._visibilityCache.clear(),this.renderScene.background=a,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,e.setRenderTarget(this.renderTargetMaskDownSampleBuffer),e.clear(),this.fsQuad.render(e),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){const c=.625+Math.cos(performance.now()*.01/this.pulsePeriod)*.75/2;this.tempPulseColor1.multiplyScalar(c),this.tempPulseColor2.multiplyScalar(c)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=lt.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,e.setRenderTarget(this.renderTargetBlurBuffer1),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=lt.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=lt.BlurDirectionX,e.setRenderTarget(this.renderTargetBlurBuffer2),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=lt.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer2),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,r&&e.state.buffers.stencil.setTest(!0),e.setRenderTarget(i),this.fsQuad.render(e),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=s}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=i.texture,e.setRenderTarget(null),this.fsQuad.render(e))}getPrepareMaskMaterial(){return new kt({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new ue(.5,.5)},textureMatrix:{value:null}},vertexShader:`#include <morphtarget_pars_vertex>
				#include <skinning_pars_vertex>

				varying vec4 projTexCoord;
				varying vec4 vPosition;
				uniform mat4 textureMatrix;

				void main() {

					#include <skinbase_vertex>
					#include <begin_vertex>
					#include <morphtarget_vertex>
					#include <skinning_vertex>
					#include <project_vertex>

					vPosition = mvPosition;

					vec4 worldPosition = vec4( transformed, 1.0 );

					#ifdef USE_INSTANCING

						worldPosition = instanceMatrix * worldPosition;

					#endif
					
					worldPosition = modelMatrix * worldPosition;

					projTexCoord = textureMatrix * worldPosition;

				}`,fragmentShader:`#include <packing>
				varying vec4 vPosition;
				varying vec4 projTexCoord;
				uniform sampler2D depthTexture;
				uniform vec2 cameraNearFar;

				void main() {

					float depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));
					float viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );
					float depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;
					gl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);

				}`})}getEdgeDetectionMaterial(){return new kt({uniforms:{maskTexture:{value:null},texSize:{value:new ue(.5,.5)},visibleEdgeColor:{value:new z(1,1,1)},hiddenEdgeColor:{value:new z(1,1,1)}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;

				uniform sampler2D maskTexture;
				uniform vec2 texSize;
				uniform vec3 visibleEdgeColor;
				uniform vec3 hiddenEdgeColor;

				void main() {
					vec2 invSize = 1.0 / texSize;
					vec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);
					vec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);
					vec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);
					vec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);
					vec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);
					float diff1 = (c1.r - c2.r)*0.5;
					float diff2 = (c3.r - c4.r)*0.5;
					float d = length( vec2(diff1, diff2) );
					float a1 = min(c1.g, c2.g);
					float a2 = min(c3.g, c4.g);
					float visibilityFactor = min(a1, a2);
					vec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;
					gl_FragColor = vec4(edgeColor, 1.0) * vec4(d);
				}`})}getSeperableBlurMaterial(e){return new kt({defines:{MAX_RADIUS:e},uniforms:{colorTexture:{value:null},texSize:{value:new ue(.5,.5)},direction:{value:new ue(.5,.5)},kernelRadius:{value:1}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 texSize;
				uniform vec2 direction;
				uniform float kernelRadius;

				float gaussianPdf(in float x, in float sigma) {
					return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
				}

				void main() {
					vec2 invSize = 1.0 / texSize;
					float sigma = kernelRadius/2.0;
					float weightSum = gaussianPdf(0.0, sigma);
					vec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;
					vec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);
					vec2 uvOffset = delta;
					for( int i = 1; i <= MAX_RADIUS; i ++ ) {
						float x = kernelRadius * float(i) / float(MAX_RADIUS);
						float w = gaussianPdf(x, sigma);
						vec4 sample1 = texture2D( colorTexture, vUv + uvOffset);
						vec4 sample2 = texture2D( colorTexture, vUv - uvOffset);
						diffuseSum += ((sample1 + sample2) * w);
						weightSum += (2.0 * w);
						uvOffset += delta;
					}
					gl_FragColor = diffuseSum/weightSum;
				}`})}getOverlayMaterial(){return new kt({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;

				uniform sampler2D maskTexture;
				uniform sampler2D edgeTexture1;
				uniform sampler2D edgeTexture2;
				uniform sampler2D patternTexture;
				uniform float edgeStrength;
				uniform float edgeGlow;
				uniform bool usePatternTexture;

				void main() {
					vec4 edgeValue1 = texture2D(edgeTexture1, vUv);
					vec4 edgeValue2 = texture2D(edgeTexture2, vUv);
					vec4 maskColor = texture2D(maskTexture, vUv);
					vec4 patternColor = texture2D(patternTexture, 6.0 * vUv);
					float visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;
					vec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;
					vec4 finalColor = edgeStrength * maskColor.r * edgeValue;
					if(usePatternTexture)
						finalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);
					gl_FragColor = finalColor;
				}`,blending:Cc,depthTest:!1,depthWrite:!1,transparent:!0})}}lt.BlurDirectionX=new ue(1,0),lt.BlurDirectionY=new ue(0,1);class mp{constructor(e){this.camera=new Ro(75,window.innerWidth/window.innerHeight,.01,100),this.scene=new Bo,this.canvas=e,this.renderer=new _c({alpha:!0,canvas:e}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.shadowMap.enabled=!1,this.renderer.shadowMap.type=Ec,this.rendererCSS=new fp,this.rendererCSS.domElement.className="rendererCSS",this.rendererCSS.domElement.style.position="absolute",this.rendererCSS.domElement.style.pointerEvents="none",this.rendererCSS.domElement.style.top="0px",this.rendererCSS.domElement.style.left="0px",this.canvas.after(this.rendererCSS.domElement),this.renderPass=new Tc(this.scene,this.camera),this.outputPass=new Pc,this.outlinePass=new lt({x:window.innerWidth,y:window.innerHeight},this.scene,this.camera),this.outlinePass.edgeStrength=3,this.outlinePass.edgeGlow=0,this.outlinePass.edgeThickness=1,this.outlinePass.enabled=!0,this.outlinePass.visibleEdgeColor.set("#000000"),this.outlinePass.hiddenEdgeColor.set("#dc265a"),this.smaaPass=new Ac(window.innerWidth*window.devicePixelRatio,window.innerHeight*window.devicePixelRatio),this.outlinePass.enabled=!1,this.smaaPass.enabled=!1,this.composer=new Mc(this.renderer),this.composer.addPass(this.renderPass),this.composer.addPass(this.outlinePass),this.composer.addPass(this.smaaPass),this.composer.addPass(this.outputPass),window.addEventListener("resize",(function(t){this.resize(t)}).bind(this)),this.resize()}update(e){this.render()}render(){this.composer.render(),this.rendererCSS.render(this.scene,this.camera)}resize(){var e=window.innerWidth,t=window.innerHeight;this.setSize(e,t)}setSize(e,t){this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t),this.rendererCSS.setSize(e,t),this.composer.setSize(e,t)}setCamera(e){this.camera=e,this.renderPass.camera=e,this.outlinePass.renderCamera=e}setScene(e){this.scene=e,this.renderPass.scene=e,this.outlinePass.renderScene=e}setShadows(e=!0){this.renderer.shadowMap.enabled=e,this.scene.traverse(function(t){t.material&&(t.castShadow=e,t.receiveShadow=e,t.material.needsUpdate=!0)})}setPixelRatio(e=1){this.renderer.setPixelRatio(e)}setSelectedObjects(e=[]){this.outlinePass.selectedObjects=e}}var Ri={exports:{}},Sb=Ri.exports;(function(n,e){(function(t,i){i()})(Z,function(){"use strict";function t(u,d){return typeof d>"u"?d={autoBom:!1}:typeof d!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function i(u,d,f){var p=new XMLHttpRequest;p.open("GET",u),p.responseType="blob",p.onload=function(){c(p.response,d,f)},p.onerror=function(){console.error("could not download file")},p.send()}function o(u){var d=new XMLHttpRequest;d.open("HEAD",u,!1);try{d.send()}catch{}return 200<=d.status&&299>=d.status}function r(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(d)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Z=="object"&&Z.global===Z?Z:void 0,a=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(u,d,f){var p=s.URL||s.webkitURL,l=document.createElement("a");d=d||u.name||"download",l.download=d,l.rel="noopener",typeof u=="string"?(l.href=u,l.origin===location.origin?r(l):o(l.href)?i(u,d,f):r(l,l.target="_blank")):(l.href=p.createObjectURL(u),setTimeout(function(){p.revokeObjectURL(l.href)},4e4),setTimeout(function(){r(l)},0))}:"msSaveOrOpenBlob"in navigator?function(u,d,f){if(d=d||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(t(u,f),d);else if(o(u))i(u,d,f);else{var p=document.createElement("a");p.href=u,p.target="_blank",setTimeout(function(){r(p)})}}:function(u,d,f,p){if(p=p||open("","_blank"),p&&(p.document.title=p.document.body.innerText="downloading..."),typeof u=="string")return i(u,d,f);var l=u.type==="application/octet-stream",m=/constructor/i.test(s.HTMLElement)||s.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent);if((h||l&&m||a)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var _=g.result;_=h?_:_.replace(/^data:[^;]*;/,"data:attachment/file;"),p?p.location.href=_:location=_,p=null},g.readAsDataURL(u)}else{var v=s.URL||s.webkitURL,b=v.createObjectURL(u);p?p.location=b:location.href=b,p=null,setTimeout(function(){v.revokeObjectURL(b)},4e4)}});s.saveAs=c.saveAs=c,n.exports=c})})(Ri,Ri.exports);var es=Ri.exports;class gp{constructor(){this.levelPrefix="level_"}getAllLocalStorage(){for(var e={},t=0;t<localStorage.length;t++){var i=localStorage.key(t),o=localStorage.getItem(i);e[i]=o}return e}setAllLocalStorage(e){localStorage.clear(),Object.keys(e).forEach(function(t){localStorage.setItem(t,e[t])})}getListOfLevels(){for(var e=[],t=localStorage.length,i=0;i<t;i++){var o=localStorage.key(i);o.indexOf(this.levelPrefix)>=0&&e.push({key:o,level:JSON.parse(localStorage.getItem(o))})}return e.sort((r,s)=>r.level.name>s.level.name?1:s.level.name>r.level.name?-1:0),e}getLevelData(e){return JSON.parse(localStorage.getItem(e))}setLevelData(e,t){var i=1;if(e==null){for(;localStorage.getItem(this.levelPrefix+i)!=null;)i++;e="level_"+i}return localStorage.setItem(e,JSON.stringify(t)),e}removeLevelData(e){localStorage.removeItem(e)}updateLevelDataName(e,t){var i=this.getLevelData(e);i.name=t,this.setLevelData(e,i)}saveScore(e,t){var i=this.getScores(),o=999999,r=parseInt(t.replace(/[^\d]/g,"")),s=!1,a=i[e];return a!=null&&(a.indexOf(":")>=0&&(a+="0"),o=parseInt(a.replace(/[^\d]/g,""))),r<o&&(s=!0,i[e]=t,localStorage.setItem("scores",JSON.stringify(i))),s}getScores(){var e=localStorage.getItem("scores");return e==null&&(e="{}",localStorage.setItem("scores",e)),JSON.parse(e)}setSettings(e){localStorage.setItem("settings",JSON.stringify(e))}getSettings(e=app){var t=localStorage.getItem("settings"),i={volume:0,quality:10,theme:"bubble",snap:8,skin:{id:466,title:"Smile",url:"../png/smile.png"},motion:!0,stats:!1,debug:!1,peer:this.generateUUID(),connection:"",name:"Player",progress:1},o=i;t!=null&&(o=JSON.parse(t));for(var r in i)o[r]==null&&(o[r]=i[r]);return o}saveLevelToFile(){app.levelEditor.saveLevel();var e=app.level.exportToJSON(app),t=new Blob([JSON.stringify(e)],{type:"application/json"});es.saveAs(t,e.name)}loadLevelFromFile(){var e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("id","theFile"),e.addEventListener("change",i,!1);function t(){var o=document.createEvent("MouseEvents");o.initEvent("click",!0,!1),e.dispatchEvent(o)}function i(o){var r=o.target.files,s=r[0],a=new FileReader;a.onload=function(c){return function(u){var d=c.name.split(".").slice(0,-1).join("."),f=JSON.parse(u.target.result);f.name=d,app.level.clearLevel(app),app.level.importFromJSON(f,app)}}(s),a.readAsText(s)}t()}backupToFile(){var e=app.storage.getAllLocalStorage(),t=new Blob([JSON.stringify(e)],{type:"application/json"});es.saveAs(t,"boxel_3d_backup")}restoreFromFile(){window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:"Restore all data from a file?<br><em>(scores, levels, etc.)</em>",inputs:[{value:"Restore",type:"button",callback:function(){var e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("id","theFile"),e.addEventListener("change",i,!1);function t(){var o=document.createEvent("MouseEvents");o.initEvent("click",!0,!1),e.dispatchEvent(o)}function i(o){var r=o.target.files,s=r[0],a=new FileReader;a.onload=function(){return function(c){var u=JSON.parse(c.target.result);app.storage.setAllLocalStorage(u),window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:"Data restored!",inputs:[{value:"Continue",type:"button"}]}}))}}(s),a.readAsText(s)}t()}},{value:"Cancel",type:"button"}]}}))}backupToChrome(e=!1){window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:"Save all local data to the cloud?<br><em>(scores, levels, etc.)</em>",inputs:[{value:"Backup",type:"button",callback:function(){var t=0;e==!0&&chrome.storage.sync.clear();for(var i=0;i<localStorage.length;i++){var o=localStorage.key(i),r=localStorage.getItem(o),s={};s[o]=r,chrome.storage.sync.set(s,function(){t++,t==localStorage.length&&window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:"Success! Your data was backed up to your account.",inputs:[{value:"Continue",type:"button"}]}}))})}}},{value:"Cancel",type:"button"}]}}))}restoreFromChrome(e=!1){window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:"Restore all data from the cloud?<br><em>(scores, levels, etc.)</em>",inputs:[{value:"Restore",type:"button",callback:function(){chrome.storage.sync.get(null,function(t){e==!0&&localStorage.clear();for(var i=Object.keys(t),o=0;o<i.length;o++){var r=i[o],s=t[r];localStorage.setItem(r,s)}window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:"Success! Your data was restored from your account.",inputs:[{value:"Continue",type:"button"}]}}))})}},{value:"Cancel",type:"button"}]}}))}generateUUID(){return Ai.generateUUID()}}class vp{constructor(){}checkPlayerCollision(e,t){for(var i=e.pairs,o=0;o<i.length;o++)for(var r=i[o],s=[r.bodyA,r.bodyB],a=0;a<s.length;a++){var c=s[(a+0)%2],u=s[(a+1)%2],d=t.level.getObjectByName(c.parent.name),f=t.level.getObjectByName(u.parent.name);if(d!=null&&f!=null&&(d.body.class=="player"&&(t.player.allowJump=!0),u.class!="sensor"&&c.class=="sensor"))if(d.body.class=="tip")f.body.class=="player"&&(app.level.showTip(d.text),d.hide(!0));else if(d.body.class=="bounce"){var p=d.scale.y/2;d.body.isStatic==!1&&d.setForce(p,f,!0),f.body.isStatic==!1&&f.setForce(p,d)}else if(d.body.class=="checkpoint")f.body.class=="player"&&app.player.saveCheckpoint(d.position);else if(d.body.class=="spike")f.body.class=="player"&&app.player.kill();else if(d.body.class=="shrink")f.body.class=="player"&&(app.player.shrink(),d.hide(!0));else if(d.body.class=="grow")f.body.class=="player"&&(app.player.grow(),d.hide(!0));else if(d.body.class=="resize")f.isStatic()==!1&&f.setScale(d.scale,!1);else if(d.body.class=="direction"){var p=f.calculateForceDirection(d.body,f.body);f.setForceDirection(p,!1)}else d.body.class=="gravity"?f.body.class=="player"&&app.updateGravity(d.body.angle):d.body.class=="grapple"?f.body.class=="player"&&app.player.setMode("grapple",!1):d.body.class=="finish"?f.body.class=="player"&&app.player.finish():d.body.class=="reset"?f.body.class=="player"&&app.player.reset():d.body.class=="control"&&f.body.class=="player"&&app.player.setMode("control",!1)}}}class yp extends pt{constructor(){super()}init(){this.setTheme("background-city")}update(e,t,i=!1){this.target&&(i==!0?this.position.copy(this.target.position):(this.position.y=this.target.position.y,this.position.x=this.target.position.x-this.target.position.x%this.scale.x))}setTarget(e){this.target=e}setTheme(e){if(this.theme!=e){var t=app.assets.models.clone(e);if(t){this.clear(),this.theme=e,this.scale.set(1280,1280,1280);var i=4,o=new Ft;t.traverse((function(r){if(r.isMesh){for(var s=new Oc(r.geometry,r.material,i),a=0;a<i;a++)o.position.set(a-i*.5+.5,0,0),o.updateMatrix(),s.setMatrixAt(a,o.matrix);this.add(s)}}).bind(this))}}}animateScale(e){app.animation.tween({object:this.scale,to:{x:1280*e,y:1280*e},duration:250}).start()}}const Zt=new z;function ze(n,e,t,i,o,r){const s=2*Math.PI*o/4,a=Math.max(r-2*o,0),c=Math.PI/4;Zt.copy(e),Zt[i]=0,Zt.normalize();const u=.5*s/(s+a),d=1-Zt.angleTo(n)/c;return Math.sign(Zt[t])===1?d*u:a/(s+a)+u+u*(1-d)}class ts extends we{constructor(e=1,t=1,i=1,o=2,r=.1){if(o=o*2+1,r=Math.min(e/2,t/2,i/2,r),super(1,1,1,o,o,o),o===1)return;const s=this.toNonIndexed();this.index=null,this.attributes.position=s.attributes.position,this.attributes.normal=s.attributes.normal,this.attributes.uv=s.attributes.uv;const a=new z,c=new z,u=new z(e,t,i).divideScalar(2).subScalar(r),d=this.attributes.position.array,f=this.attributes.normal.array,p=this.attributes.uv.array,l=d.length/6,m=new z,h=.5/o;for(let g=0,v=0;g<d.length;g+=3,v+=2)switch(a.fromArray(d,g),c.copy(a),c.x-=Math.sign(c.x)*h,c.y-=Math.sign(c.y)*h,c.z-=Math.sign(c.z)*h,c.normalize(),d[g+0]=u.x*Math.sign(a.x)+c.x*r,d[g+1]=u.y*Math.sign(a.y)+c.y*r,d[g+2]=u.z*Math.sign(a.z)+c.z*r,f[g+0]=c.x,f[g+1]=c.y,f[g+2]=c.z,Math.floor(g/l)){case 0:m.set(1,0,0),p[v+0]=ze(m,c,"z","y",r,i),p[v+1]=1-ze(m,c,"y","z",r,t);break;case 1:m.set(-1,0,0),p[v+0]=1-ze(m,c,"z","y",r,i),p[v+1]=1-ze(m,c,"y","z",r,t);break;case 2:m.set(0,1,0),p[v+0]=1-ze(m,c,"x","z",r,e),p[v+1]=ze(m,c,"z","x",r,i);break;case 3:m.set(0,-1,0),p[v+0]=1-ze(m,c,"x","z",r,e),p[v+1]=1-ze(m,c,"z","x",r,i);break;case 4:m.set(0,0,1),p[v+0]=1-ze(m,c,"x","y",r,e),p[v+1]=1-ze(m,c,"y","x",r,t);break;case 5:m.set(0,0,-1),p[v+0]=ze(m,c,"x","y",r,e),p[v+1]=1-ze(m,c,"y","x",r,t);break}}}class bp extends pt{constructor(){super()}addCube(e={}){e.x=e.x==null?0:e.x,e.y=e.y==null?0:e.y,e.z=e.z==null?0:e.z,e.scaleX=e.scaleX==null?1:e.scaleX,e.scaleY=e.scaleY==null?1:e.scaleY,e.scaleZ=e.scaleZ==null?1:e.scaleZ,e.segments=e.segments==null?1:e.segments,e.radius=e.radius==null?0:e.radius,e.color=e.color==null?"#620460":e.color,e.opacity=e.opacity==null?1:e.opacity;var t=new ts(e.scaleX,e.scaleY,e.scaleZ,e.segments,e.radius),i=new Ct({color:e.color,transparent:!0}),o=new U(t,i);o.castShadow=!0,o.receiveShadow=!0,o.position.set(e.x,e.y,e.z),o.material.colorOrigin=e.color,o.material.opacity=e.opacity,this.add(o)}addCone(e={}){e.x=e.x==null?0:e.x,e.y=e.y==null?0:e.y,e.z=e.z==null?0:e.z,e.scaleX=e.scaleX==null?1:e.scaleX,e.scaleY=e.scaleY==null?1:e.scaleY,e.scaleZ=e.scaleZ==null?1:e.scaleZ,e.rotationX=e.rotationX==null?0:e.rotationX,e.rotationY=e.rotationY==null?0:e.rotationY,e.rotationZ=e.rotationZ==null?0:e.rotationZ,e.segments=e.segments==null?4:e.segments,e.color=e.color==null?"#620460":e.color,e.opacity=e.opacity==null?1:e.opacity;var t=new Dc(e.scaleX/2*1.5,e.scaleY,e.segments),i=new Ct({color:e.color,flatShading:!0}),o=new U(t,i);o.castShadow=!0,o.receiveShadow=!0,o.position.set(e.x,e.y,e.z),o.material.colorOrigin=e.color,o.material.opacity=e.opacity,o.rotation.x=e.rotationX,o.rotation.y=e.rotationY+45*Math.PI/180,o.rotation.z=e.rotationZ,this.add(o)}addExtrusion(e={}){e.position=e.position==null?{x:0,y:0,z:0}:e.position,e.scale=e.scale==null?{x:1,y:1,z:1}:e.scale,e.rotation=e.rotation==null?{x:0,y:0,z:0}:e.rotation,e.points=e.points==null?[{x:0,y:0},{x:1,y:0},{x:1,y:1},{x:0,y:1}]:e.points,e.depth=e.depth==null?1:e.depth,e.color=e.color==null?"#620460":e.color;for(var t=new Lc,i=0;i<e.points.length;i++){var o=e.points[i];i==0?t.moveTo(o.x,o.y):t.lineTo(o.x,o.y)}var r={steps:1,depth:e.depth,bevelEnabled:!1},s=new Ic(t,r),a=new Ct({color:e.color}),c=new U(s,a);c.position.set(e.position.x,e.position.y,e.position.z),c.scale.set(e.scale.x,e.scale.y,e.scale.z),c.rotation.set(e.rotation.x,e.rotation.y,e.rotation.z),c.castShadow=!0,c.receiveShadow=!0,this.add(c)}setColors(e,t=!0){for(var i=this.children.length,o=0;o<i;o++){var r=this.children[o];r.material.color.set(e),t==!0&&(r.material.colorOrigin=e)}}setOpacities(e){for(var t=this.children.length,i=0;i<t;i++){var o=this.children[i];o.material.opacity=e}}resetColors(){for(var e=this.children.length,t=0;t<e;t++){var i=this.children[t],o=i.material.colorOrigin;i.material.color.set(o)}}removeAllShapes(){for(var e=this.children.length,t=0;t<e;t++){var i=this.children[0];this.remove(i)}}}class Te extends U{constructor(e={}){super(),e.x=e.x==null?0:e.x,e.y=e.y==null?0:e.y,e.z=e.z==null?0:e.z,e.scaleX=e.scaleX==null?1:e.scaleX,e.scaleY=e.scaleY==null?1:e.scaleY,e.scaleZ=e.scaleZ==null?1:e.scaleZ,e.segments=e.segments==null?1:e.segments,e.radius=e.radius==null?0:e.radius,e.angle=e.angle==null?0:e.angle,e.color=e.color==null?"#620460":e.color,e.debug=e.debug!=null,this.shapes=new bp,this.shapes.addCube(e),this.setColors(e.color),this.add(this.shapes),this.hitbox=H.Bodies.rectangle(0,0,e.scaleX,e.scaleY,{class:"hitbox"}),this.body=H.Body.create({parts:[this.hitbox],friction:0,frictionAir:0,frictionStatic:0,restitution:0,slop:0,timeScale:1,name:this.uuid,class:"cube"}),this.helper=new pt,this.helper.visible=e.debug,this.addHelper(this.hitbox),this.name=this.uuid,this.isCube=!0,this.setPosition({x:e.x,y:e.y,z:e.z}),this.setRotation(e.angle),this.setScale({x:e.scaleX,y:e.scaleY,z:e.scaleZ}),this.setMode(),this.setForceDirection()}update(e,t){e&&(this.position.x=this.body.positionPrev.x+(this.body.position.x-this.body.positionPrev.x)*t,this.position.y=-(this.body.positionPrev.y+(this.body.position.y-this.body.positionPrev.y)*t),this.rotation.z=-(this.body.anglePrev+(this.body.angle-this.body.anglePrev)*t)),this.position.y<-1e3&&(this.getClass()=="player"&&this.isStatic()==!1?this.kill():app.level.removeObject(this,app)),this.updateHelper()}updateHelper(){this.helper&&this.helper.visible==!0&&(this.helper.position.x=this.body.position.x,this.helper.position.y=-this.body.position.y,this.helper.position.z=this.position.z,this.helper.rotation.z=-this.body.anglePrev,this.helper.scale.copy(this.scale).multiplyScalar(1))}addHelper(e,t){t==null&&(t={}),t.position==null&&(t.position={x:0,y:0}),t.color==null&&(t.color="#00ff00");var i=e.bounds.max.x-e.bounds.min.x,o=e.bounds.max.y-e.bounds.min.y,r=i,s=new we(i,o,r),a=new Rc(s,new Ct({color:t.color,wireframe:!0}));this.helper.add(a),s.translate(t.position.x,t.position.y,0)}setColors(e){this.color=e,this.shapes.setColors(e)}setPosition(e={},t=!0){e.x=e.x==null?this.position.x:e.x,e.y=e.y==null?this.position.y:e.y,e.z=e.z==null?this.position.z:e.z,this.position.set(e.x,e.y,e.z),H.Body.setPosition(this.body,{x:e.x,y:-e.y}),t==!0&&this.setPositionOrigin(e)}setPositionOrigin(e){this.positionOrigin==null&&(this.positionOrigin={}),this.positionOrigin.x=e.x,this.positionOrigin.y=e.y,this.positionOrigin.z=e.z}getPosition(){return this.position}setRotation(e,t=!0){this.rotation.z=e,H.Body.setAngle(this.body,-e),t==!0&&this.setRotationOrigin(e)}setRotationOrigin(e){this.rotationOrigin=e}getRotation(e="radians"){var t=this.rotation.z;return e=="degrees"&&(t=Math.round(this.rotation.z*(180/Math.PI))),t}getRotationOrigin(){return this.rotationOrigin}setScale(e={},t=!0){e.x=e.x==null?this.scale.x:e.x,e.y=e.y==null?this.scale.y:e.y,e.z=e.z==null?this.scale.z:e.z;var i=this.rotation.z;this.setRotation(0,!1),this.setBodyScale(e.x/this.scale.x,e.y/this.scale.y),this.scale.x=e.x,this.scale.y=e.y,this.scale.z=e.z,this.setRotation(i,!1),t==!0&&this.setScaleOrigin({x:e.x,y:e.y,z:e.z})}setBodyScale(e,t){H.Body.scale(this.body,e,t)}getScale(){return this.scale}getScaleOrigin(){return this.scaleOrigin}setScaleOrigin(e){this.scaleOrigin==null&&(this.scaleOrigin={}),this.scaleOrigin.x=e.x,this.scaleOrigin.y=e.y,this.scaleOrigin.z=e.z}setForceDirection(e={x:0,y:0},t=!0){this.force=e,t==!0&&this.setForceDirectionOrigin(e)}setForceDirectionOrigin(e){this.forceOrigin=e}getForce(){return this.force}calculateForceDirection(e,t){var i={x:25e-5*t.mass,y:0};return i=H.Vector.rotate(i,e.angle),i}resetToOrigin(){this.hide(!1),this.setPosition(this.positionOrigin,!1),this.setRotation(this.rotationOrigin,!1),this.setScale({x:this.scaleOrigin.x,y:this.scaleOrigin.y,z:this.scaleOrigin.z},!1),this.setForceDirection(this.forceOrigin,!1),this.setStatic(this.isStaticOrigin,!1),this.setFriction(this.frictionOrigin,!1),this.setMode(this.modeOrigin,!1),H.Body.setVelocity(this.body,{x:0,y:0}),H.Body.setAngularVelocity(this.body,0)}setStatic(e=!0,t=!0){H.Body.setStatic(this.body,e),t==!0&&this.setStaticOrigin(e)}setStaticOrigin(e){this.isStaticOrigin=e}toggleStatic(){var e=!this.body.isStatic;return this.setStatic(e),e}isStatic(){return this.body.isStatic}setFriction(e=.1,t=!0){this.body.friction=parseFloat(e),t==!0&&this.setFrictionOrigin(e)}setFrictionOrigin(e){this.frictionOrigin=parseFloat(e)}getFriction(){return this.body.friction}setMode(e,t=!0){e=e??"default",this.mode=e,t==!0&&this.setModeOrigin(e),window.dispatchEvent(new CustomEvent("setMode",{detail:e}))}setModeOrigin(e){this.modeOrigin=e}getClass(){return this.body.class}setText(e){e!=null&&(this.text=e)}getText(){return this.text}select(e=!0){this.selected=e,e==!0?(this.shapes.setColors("#ffffff",!1),this.shapes.setOpacities(.9),H.Body.setVelocity(this.body,{x:0,y:0}),H.Body.setAngularVelocity(this.body,0)):(this.shapes.resetColors(),this.shapes.setOpacities(1))}isSelected(){return this.selected}setForce(e,t,i=!1){var o=this.body.positionPrev.x,r=this.body.position.x,s=this.body.positionPrev.y,a=this.body.position.y,c=t.body.angle,u=Math.atan2(a-s,r-o);i==!0&&(c=this.body.angle,u=this.body.angle+Math.PI/2,e*=-1*app.loop.speed);var d=Math.cos(u),f=Math.sin(u),p=-Math.sin(c),l=Math.cos(c),m=d*p+f*l,h=d-2*m*p,g=f-2*m*l;return m<0&&(Math.abs(h)==1||Math.abs(g)==1)&&(e*=-1),H.Body.setVelocity(this.body,{x:h*e,y:g*e}),e}getVelocity(e=this){return{x:e.body.position.x-e.body.positionPrev.x,y:e.body.position.y-e.body.positionPrev.y}}freeze(e=!0){this.body.collisionFilter.category=e==!0?0:1,H.Sleeping.set(this.body,e)}hide(e=!0){this.visible=!e,this.freeze(e)}isFrozen(){return this.body.collisionFilter.category==0}addLight(e,t,i,o=!1){this.light==null&&(this.light=new Bc(e,t,i),this.light.position.set(0,0,0),this.light.castShadow=o,this.add(this.light))}toJSON(){var e={class:this.body.class,position:{x:this.position.x,y:this.position.y,z:this.position.z},rotation:{x:this.rotation.x,y:this.rotation.y,z:this.rotation.z},scale:{x:this.scale.x,y:this.scale.y,z:this.scale.z}};return this.body.isStatic==!1&&(e.isStatic=!1,e.friction=this.body.friction),this.body.class=="tip"&&this.text!=null&&(e.text=this.text),e}}const is=new Wn,Bi=new z;class ns extends jc{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],i=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(i),this.setAttribute("position",new Mi(e,3)),this.setAttribute("uv",new Mi(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,i=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),i.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const i=new Zn(t,6,1);return this.setAttribute("instanceStart",new _t(i,3,0)),this.setAttribute("instanceEnd",new _t(i,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const i=new Zn(t,6,1);return this.setAttribute("instanceColorStart",new _t(i,3,0)),this.setAttribute("instanceColorEnd",new _t(i,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new Nc(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Wn);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),is.setFromBufferAttribute(t),this.boundingBox.union(is))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new jo),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const i=this.boundingSphere.center;this.boundingBox.getCenter(i);let o=0;for(let r=0,s=e.count;r<s;r++)Bi.fromBufferAttribute(e,r),o=Math.max(o,i.distanceToSquared(Bi)),Bi.fromBufferAttribute(t,r),o=Math.max(o,i.distanceToSquared(Bi));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}Oi.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new ue(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}},Di.line={uniforms:Xn.merge([Oi.common,Oi.fog,Oi.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 tmpFwd = normalize( mix( start.xyz, end.xyz, 0.5 ) );
				vec3 worldUp = normalize( cross( worldDir, tmpFwd ) );
				vec3 worldFwd = cross( worldDir, worldUp );
				worldPos = position.y < 0.5 ? start: end;

				// height offset
				float hw = linewidth * 0.5;
				worldPos.xyz += position.x < 0.0 ? hw * worldUp : - hw * worldUp;

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// cap extension
					worldPos.xyz += position.y < 0.5 ? - hw * worldDir : hw * worldDir;

					// add width to the box
					worldPos.xyz += worldFwd * hw;

					// endcaps
					if ( position.y > 1.0 || position.y < 0.0 ) {

						worldPos.xyz -= worldFwd * 2.0 * hw;

					}

				#endif

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class er extends kt{constructor(e){super({type:"LineMaterial",uniforms:Xn.clone(Di.line.uniforms),vertexShader:Di.line.vertexShader,fragmentShader:Di.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,this.setValues(e)}get color(){return this.uniforms.diffuse.value}set color(e){this.uniforms.diffuse.value=e}get worldUnits(){return"WORLD_UNITS"in this.defines}set worldUnits(e){e===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}get linewidth(){return this.uniforms.linewidth.value}set linewidth(e){this.uniforms.linewidth&&(this.uniforms.linewidth.value=e)}get dashed(){return"USE_DASH"in this.defines}set dashed(e){e===!0!==this.dashed&&(this.needsUpdate=!0),e===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}get dashScale(){return this.uniforms.dashScale.value}set dashScale(e){this.uniforms.dashScale.value=e}get dashSize(){return this.uniforms.dashSize.value}set dashSize(e){this.uniforms.dashSize.value=e}get dashOffset(){return this.uniforms.dashOffset.value}set dashOffset(e){this.uniforms.dashOffset.value=e}get gapSize(){return this.uniforms.gapSize.value}set gapSize(e){this.uniforms.gapSize.value=e}get opacity(){return this.uniforms.opacity.value}set opacity(e){this.uniforms&&(this.uniforms.opacity.value=e)}get resolution(){return this.uniforms.resolution.value}set resolution(e){this.uniforms.resolution.value.copy(e)}get alphaToCoverage(){return"USE_ALPHA_TO_COVERAGE"in this.defines}set alphaToCoverage(e){this.defines&&(e===!0!==this.alphaToCoverage&&(this.needsUpdate=!0),e===!0?this.defines.USE_ALPHA_TO_COVERAGE="":delete this.defines.USE_ALPHA_TO_COVERAGE)}}const tr=new Ht,rs=new z,os=new z,xe=new Ht,Se=new Ht,qe=new Ht,ir=new z,nr=new St,ke=new Uc,ss=new z,ji=new Wn,Ni=new jo,He=new Ht;let Ve,dt;function as(n,e,t){return He.set(0,0,-e,1).applyMatrix4(n.projectionMatrix),He.multiplyScalar(1/He.w),He.x=dt/t.width,He.y=dt/t.height,He.applyMatrix4(n.projectionMatrixInverse),He.multiplyScalar(1/He.w),Math.abs(Math.max(He.x,He.y))}function wp(n,e){const t=n.matrixWorld,i=n.geometry,o=i.attributes.instanceStart,r=i.attributes.instanceEnd,s=Math.min(i.instanceCount,o.count);for(let a=0,c=s;a<c;a++){ke.start.fromBufferAttribute(o,a),ke.end.fromBufferAttribute(r,a),ke.applyMatrix4(t);const u=new z,d=new z;Ve.distanceSqToSegment(ke.start,ke.end,d,u),d.distanceTo(u)<dt*.5&&e.push({point:d,pointOnLine:u,distance:Ve.origin.distanceTo(d),object:n,face:null,faceIndex:a,uv:null,uv1:null})}}function xp(n,e,t){const i=e.projectionMatrix,o=n.material.resolution,r=n.matrixWorld,s=n.geometry,a=s.attributes.instanceStart,c=s.attributes.instanceEnd,u=Math.min(s.instanceCount,a.count),d=-e.near;Ve.at(1,qe),qe.w=1,qe.applyMatrix4(e.matrixWorldInverse),qe.applyMatrix4(i),qe.multiplyScalar(1/qe.w),qe.x*=o.x/2,qe.y*=o.y/2,qe.z=0,ir.copy(qe),nr.multiplyMatrices(e.matrixWorldInverse,r);for(let f=0,p=u;f<p;f++){if(xe.fromBufferAttribute(a,f),Se.fromBufferAttribute(c,f),xe.w=1,Se.w=1,xe.applyMatrix4(nr),Se.applyMatrix4(nr),xe.z>d&&Se.z>d)continue;if(xe.z>d){const v=xe.z-Se.z,b=(xe.z-d)/v;xe.lerp(Se,b)}else if(Se.z>d){const v=Se.z-xe.z,b=(Se.z-d)/v;Se.lerp(xe,b)}xe.applyMatrix4(i),Se.applyMatrix4(i),xe.multiplyScalar(1/xe.w),Se.multiplyScalar(1/Se.w),xe.x*=o.x/2,xe.y*=o.y/2,Se.x*=o.x/2,Se.y*=o.y/2,ke.start.copy(xe),ke.start.z=0,ke.end.copy(Se),ke.end.z=0;const l=ke.closestPointToPointParameter(ir,!0);ke.at(l,ss);const m=Ai.lerp(xe.z,Se.z,l),h=m>=-1&&m<=1,g=ir.distanceTo(ss)<dt*.5;if(h&&g){ke.start.fromBufferAttribute(a,f),ke.end.fromBufferAttribute(c,f),ke.start.applyMatrix4(r),ke.end.applyMatrix4(r);const v=new z,b=new z;Ve.distanceSqToSegment(ke.start,ke.end,b,v),t.push({point:b,pointOnLine:v,distance:Ve.origin.distanceTo(b),object:n,face:null,faceIndex:f,uv:null,uv1:null})}}}class Sp extends U{constructor(e=new ns,t=new er({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,i=e.attributes.instanceEnd,o=new Float32Array(2*t.count);for(let s=0,a=0,c=t.count;s<c;s++,a+=2)rs.fromBufferAttribute(t,s),os.fromBufferAttribute(i,s),o[a]=a===0?0:o[a-1],o[a+1]=o[a]+rs.distanceTo(os);const r=new Zn(o,2,1);return e.setAttribute("instanceDistanceStart",new _t(r,1,0)),e.setAttribute("instanceDistanceEnd",new _t(r,1,1)),this}raycast(e,t){const i=this.material.worldUnits,o=e.camera;o===null&&!i&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const r=e.params.Line2!==void 0&&e.params.Line2.threshold||0;Ve=e.ray;const s=this.matrixWorld,a=this.geometry,c=this.material;dt=c.linewidth+r,a.boundingSphere===null&&a.computeBoundingSphere(),Ni.copy(a.boundingSphere).applyMatrix4(s);let u;if(i)u=dt*.5;else{const f=Math.max(o.near,Ni.distanceToPoint(Ve.origin));u=as(o,f,c.resolution)}if(Ni.radius+=u,Ve.intersectsSphere(Ni)===!1)return;a.boundingBox===null&&a.computeBoundingBox(),ji.copy(a.boundingBox).applyMatrix4(s);let d;if(i)d=dt*.5;else{const f=Math.max(o.near,ji.distanceToPoint(Ve.origin));d=as(o,f,c.resolution)}ji.expandByScalar(d),Ve.intersectsBox(ji)!==!1&&(i?wp(this,t):xp(this,o,t))}onBeforeRender(e){const t=this.material.uniforms;t&&t.resolution&&(e.getViewport(tr),this.material.uniforms.resolution.value.set(tr.z,tr.w))}}class ls extends ns{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,i=new Float32Array(2*t);for(let o=0;o<t;o+=3)i[2*o]=e[o],i[2*o+1]=e[o+1],i[2*o+2]=e[o+2],i[2*o+3]=e[o+3],i[2*o+4]=e[o+4],i[2*o+5]=e[o+5];return super.setPositions(i),this}setColors(e){const t=e.length-3,i=new Float32Array(2*t);for(let o=0;o<t;o+=3)i[2*o]=e[o],i[2*o+1]=e[o+1],i[2*o+2]=e[o+2],i[2*o+3]=e[o+3],i[2*o+4]=e[o+4],i[2*o+5]=e[o+5];return super.setColors(i),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class kp extends Sp{constructor(e=new ls,t=new er({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}class Cp extends pt{constructor(){super(),this.radius=4}addJoints(e,t,i){for(var o=e.position,r=i,s=Math.sqrt(Math.pow(o.x-r.x,2)+Math.pow(o.y-r.y,2)),a=4,c=Math.ceil(s/(this.radius*2)/a),u=16/a,d=1/a,f=1;f<=a;f++){var p=f==a,l=f/a,m={x:o.x+(r.x-o.x)*l,y:o.y+(r.y-o.y)*l};f>1&&(e=this.children[this.children.length-1].body);var h={bodyA:e,bodyB:t,isLastJoint:p,minLength:u,position:m,radius:this.radius,spacing:c,speed:d,texture:this.texture},g=new _p(h);this.add(g)}}removeJoints(){for(var e=this.children.length,t=e-1;t>=0;){var i=this.children[t];i.removeConstraint(),i.removeBody(),this.remove(i),t--}}resetToOrigin(){this.removeJoints()}updateJoints(){for(var e=0;e<this.children.length;e++){var t=[],i=this.children[e],o=i.constraint.bodyA.position,r=i.constraint.bodyB.position;i.shrink(),i.line2!=null&&(t.push(o.x,-o.y,0),t.push(r.x+i.offset.x,-(r.y+i.offset.y),0),i.line2Geometry.setPositions(t),i.line2.computeLineDistances()),i.circleMesh!=null&&i.circleMesh.position.set(r.x,-r.y,0)}}}class _p extends pt{constructor(e){super(),this.addLineMesh(e),this.addBody(e),this.addConstraint(e)}addLineMesh(e){this.speed=e.speed,this.minLength=e.minLength,this.line2Geometry=new ls,this.line2Material=new er({color:"#ffffff",dashed:!1,linewidth:4,dashScale:1,dashSize:8,gapSize:2}),this.line2=new kp(this.line2Geometry,this.line2Material),this.add(this.line2)}addCircleMesh(e){this.circle=new zc(e.radius,12),this.circleMaterial=new Gn({color:"#ffffff",opacity:1,transparent:!0}),this.circleMesh=new U(this.circle,this.circleMaterial),this.add(this.circleMesh)}removeCircleMesh(){this.remove(this.circleMesh)}addBody(e){this.part=H.Bodies.circle(e.position.x,e.position.y,e.radius,{isSensor:!0}),this.body=H.Body.create({parts:[this.part],friction:0,frictionAir:0,frictionStatic:0,restitution:0}),H.World.add(app.engine.world,this.body)}removeBody(){H.World.remove(app.engine.world,this.body)}addConstraint(e){var t=this.body,i={x:0,y:0};e.isLastJoint==!0&&(this.removeBody(),this.removeCircleMesh(),t=e.bodyB,i={x:-(t.position.x-e.position.x),y:-(t.position.y-e.position.y)}),this.offset=i,this.constraint=H.Constraint.create({bodyA:e.bodyA,bodyB:t,mass:0,pointB:i,stiffness:1.5,shrink:!0}),H.World.add(app.engine.world,this.constraint)}removeConstraint(){H.World.remove(app.engine.world,this.constraint)}shrink(){this.constraint.shrink==!0&&(this.constraint.length>this.minLength?this.constraint.length-=this.speed:(this.constraint.length=this.minLength,this.constraint.shrink=!1))}}class rr extends Te{constructor(e={}){super(e),this.body.class="player",this.setScale({x:16,y:16,z:16}),this.setStatic(!1),this.setColors("#dc265a"),this.setMode("jump"),this.util=new Yo,this.mass=5,this.allowJump=!1,this.addLight("#dc265a",16e3,500,!1),this.controls={left:0,right:0,acceleration:.5,speed:4},this.rope=new Cp,this.skin={url:""},this.plane=new U(new No(1e3,1e3),new Ct({visible:!1,side:Pi})),this.add(this.plane)}setScale(e={},t=!0){super.setScale(e,t)}jump(){if((this.mode=="jump"||this.mode=="control")&&this.allowJump==!0){this.allowJump=!1;var e=app.engine.world.gravity,t=Math.PI/2-H.Vector.angle({x:0,y:0},e),i=this.body.velocity,o=1,r=Math.PI/20,s=.025,a={x:-(e.x*s*this.body.mass),y:-(e.y*s*this.body.mass)};i=H.Vector.rotate(i,t),i.y=0,o=i.x>=0?1:-1,r*=o,i=H.Vector.rotate(i,-t),this.body.speed<this.controls.speed*.25&&(r=0),H.Body.setVelocity(this.body,i),H.Body.setAngularVelocity(this.body,r),H.Body.applyForce(this.body,this.body.position,a)}}setControls(e,t){this.controls[e]=t}updateControls(){if(this.mode=="control"){var e=app.engine.world.gravity,t=this.controls.left+this.controls.right,i={x:e.y*t,y:-e.x*t},o=this.body.velocity,r=H.Vector.dot(o,i),s=4,a=r+this.controls.acceleration,c=Math.max(r,Math.min(a,s)),u=c-r;o.x+=i.x*u,o.y+=i.y*u,H.Body.setVelocity(this.body,o)}}addRope(e){if(this.mode=="grapple"&&this.isFrozen()==!1){var t=4,i=400,o=e.x-this.position.x,r=e.y-this.position.y,s=Math.sqrt(o*o+r*r),a={x:this.position.x,y:-this.position.y},c={x:this.position.x+(e.x-this.position.x)*i/s,y:-(this.position.y+(e.y-this.position.y)*i/s)};this.removeRope();for(var u=0;u<i;u+=t){var d=u/i,f={x:a.x+(c.x-a.x)*d,y:a.y+(c.y-a.y)*d},p=H.Query.point(app.engine.world.bodies,f);if(p.length>0&&p[0].class!="player"){var l=app.level.getObjectByName(p[0].name);if(l.visible==!0&&l.position.z==0){app.level.add(this.rope),this.rope.addJoints(this.body,p[0],f),this.updateRope();break}}}}}updateForce(){this.body.speed<this.controls.speed&&H.Body.applyForce(this.body,this.body.position,{x:this.force.x*app.loop.speed,y:this.force.y*app.loop.speed})}updateRope(){this.rope.updateJoints()}removeRope(){this.rope.removeJoints(),app.level.remove(this.rope)}kill(){if(this.isFrozen()==!1){this.freeze(!0),this.visible=!1,this.killTimeout=setTimeout((function(){this.restart()}).bind(this),1e3);for(var e=4,t=4,i=4,o={x:this.scale.x/t,y:this.scale.y/e,z:this.scale.z/i},r=-e/2;r<e/2;r++)for(var s=-t/2;s<t/2;s++){var a=this.util.randomNumber(0,360*(Math.PI/180)),c={color:this.color,position:{x:this.position.x+s*o.x+o.x/2,y:this.position.y+r*o.y+o.y/2,z:0},rotation:{x:0,y:0,z:a},scale:{x:o.x,y:o.y,z:o.z},isStatic:!1,friction:0},u=app.level.entityFactory.createObject("cube");app.level.setObjectProperties(u,c),app.level.addObject(u,app),u.isParticle=!0,u.setColors(this.color),H.Body.setVelocity(u.body,this.body.velocity)}}window.dispatchEvent(new CustomEvent("playerKill",{detail:{player:this}}))}cancelRestart(){clearTimeout(this.killTimeout)}saveCheckpoint(e){this.checkpoint==null&&(this.checkpoint={}),this.checkpoint.x=e.x,this.checkpoint.y=e.y,this.checkpoint.z=e.z}removeCheckpoint(){this.checkpoint=null}setPositionToCheckpoint(){this.checkpoint!=null&&this.setPosition({x:this.position.x=this.checkpoint.x,y:this.position.y=this.checkpoint.y,z:this.position.z=this.checkpoint.z},!1)}respawn(e=!1){(this.isFrozen()==!0||e==!0)&&(app.level.removeParticles(app),this.resetToOrigin(),this.setPositionToCheckpoint(),window.dispatchEvent(new CustomEvent("playerRespawn",{detail:{player:this}})))}restart(){app.level.retryLevel(app,!0),window.dispatchEvent(new CustomEvent("playerRestart",{detail:{player:this}}))}finish(){if(app.play==!0){var e=app.level.name,t=app.timer.toString(),i=app.storage.saveScore(e,t),o="Finished!<br>Score: "+t;app.timer.render(t),i==!0&&(o+="<br><em>New record!</em>"),app.play=!1,window.dispatchEvent(new CustomEvent("levelFinish",{detail:{time:t,level:e}})),window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:o,inputs:[{value:"Retry",type:"button",callback:function(){app.level.retryLevel(app),window.dispatchEvent(new CustomEvent("closePopup"))}},{value:"Continue",type:"button",callback:function(){app.level.exitLevel(app),window.dispatchEvent(new CustomEvent("closePopup"))}}]}}))}}shrink(){this.setScale({x:this.scale.x/2,y:this.scale.y/2,z:this.scale.z/2},!1)}grow(){this.setScale({x:this.scale.x*2,y:this.scale.y*2,z:this.scale.z*2},!1)}renderSpeed(e){var t=this.body.speed,i=10,o=0,r=o+"%;";t>i&&(t=i),o=t/i*100,r="width: calc("+o+"% - 8px)",e.document.getElementById("speed")&&e.document.getElementById("speed").setAttribute("style",r)}setSkin(e={},t=app){this.addTexture(e)}reset(){app.updateGravity(),this.setForceDirection(),this.setScale({x:this.scaleOrigin.x,y:this.scaleOrigin.y,z:this.scaleOrigin.z},!1),this.setMode(this.modeOrigin,!1),this.controls.left=this.controls.right=0}addTexture(e){if(e.url){e.url=e.url.replace("img/png/skins/","../png/");var t=new Lo;t.load(e.url,(function(i){i.colorSpace=Fc,this.remove(this.skin),this.shapes.visible=!1;var o=new ts(1,1,1,1,.1),r=new Ct({map:i,transparent:!0,opacity:1});this.shapes.setOpacities(0),this.skin=new U(o,r),this.skin.url=e.url,this.add(this.skin)}).bind(this),void 0,(function(i){console.error("An error happened: ",i)}).bind(this))}}}const kb=new ue;class Ep extends Te{constructor(e={}){super(e),this.body.class="tip",this.text="Do not touch the spikes!",this.hitbox.isSensor=!0,this.hitbox.class="sensor",this.setScale({x:16,y:16,z:16}),this.shapes.removeAllShapes(),this.shapes.setOpacities(.5),this.addShapes(e)}addShapes(e){var t=e.scaleZ*.2;this.shapes.addCube({color:"#0287ef",z:-(t*.5),scaleZ:t*4}),this.shapes.addCube({y:t*1,z:t*2,scaleX:t,scaleY:t*2,scaleZ:t,color:"#fff"}),this.shapes.addCube({y:-(t*1.5),z:t*2,scaleX:t,scaleY:t,scaleZ:t,color:"#fff"})}}class Tp extends Te{constructor(e={}){super(e),this.body.class="bounce";var t={x:0,y:.6},i={x:e.scaleX*.6,y:e.scaleY*.2};this.sensor=H.Bodies.rectangle(t.x,-t.y,i.x,i.y,{isSensor:!0,density:0,class:"sensor"}),H.Body.setParts(this.body,[this.hitbox,this.sensor]),this.addHelper(this.sensor,{position:t,color:"#ffff00"}),this.setScale({x:16,y:16,z:16}),this.shapes.removeAllShapes(),this.addShapes(e)}addShapes(e){var t=e.scaleZ*.2;this.shapes.addCube({y:t*2,scaleX:t*5,scaleY:t*1,scaleZ:t*5,color:"#0287ef"}),this.shapes.addCube({y:t*1,scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#ffffff"}),this.shapes.addCube({y:-(t*1),scaleY:t*3,scaleZ:t*5,color:"#0287ef"})}}class Pp extends Te{constructor(e={}){super(e),this.body.class="checkpoint",this.hitbox.isSensor=!0,this.sensor=H.Bodies.rectangle(0,0,e.scaleX,e.scaleY,{isSensor:!0,density:0,class:"sensor"}),H.Body.setParts(this.body,[this.hitbox,this.sensor]),this.setScale({x:16,y:16,z:16}),this.shapes.removeAllShapes(),this.addShapes(e)}addShapes(e){var t=e.scaleZ*.2;this.shapes.addCube({scaleX:t,scaleY:t,scaleZ:t,color:"#fff"}),this.shapes.addCube({x:t*0,y:-(t*2),z:t*2,scaleX:t*5,scaleY:t*1,scaleZ:t*1,color:"#0287ef"}),this.shapes.addCube({x:t*0,y:-(t*2),z:-(t*2),scaleX:t*5,scaleY:t*1,scaleZ:t*1,color:"#0287ef"}),this.shapes.addCube({x:t*0,y:t*2,z:t*2,scaleX:t*5,scaleY:t*1,scaleZ:t*1,color:"#0287ef"}),this.shapes.addCube({x:t*0,y:t*2,z:-(t*2),scaleX:t*5,scaleY:t*1,scaleZ:t*1,color:"#0287ef"}),this.shapes.addCube({x:-(t*2),y:-(t*2),z:0,scaleX:t*1,scaleY:t*1,scaleZ:t*5,color:"#0287ef"}),this.shapes.addCube({x:-(t*2),y:t*2,z:0,scaleX:t*1,scaleY:t*1,scaleZ:t*5,color:"#0287ef"}),this.shapes.addCube({x:t*2,y:-(t*2),z:0,scaleX:t*1,scaleY:t*1,scaleZ:t*5,color:"#0287ef"}),this.shapes.addCube({x:t*2,y:t*2,z:0,scaleX:t*1,scaleY:t*1,scaleZ:t*5,color:"#0287ef"}),this.shapes.addCube({x:t*2,y:0,z:t*2,scaleX:t*1,scaleY:t*5,scaleZ:t*1,color:"#0287ef"}),this.shapes.addCube({x:t*2,y:0,z:-(t*2),scaleX:t*1,scaleY:t*5,scaleZ:t*1,color:"#0287ef"}),this.shapes.addCube({x:-(t*2),y:0,z:t*2,scaleX:t*1,scaleY:t*5,scaleZ:t*1,color:"#0287ef"}),this.shapes.addCube({x:-(t*2),y:0,z:-(t*2),scaleX:t*1,scaleY:t*5,scaleZ:t*1,color:"#0287ef"})}}class Ap extends Te{constructor(e={}){super(e),this.body.class="spike";var t={x:0,y:.6},i={x:e.scaleX*.6,y:e.scaleY*.2};this.sensor=H.Bodies.rectangle(t.x,-t.y,i.x,i.y,{isSensor:!0,density:0,class:"sensor"}),H.Body.setParts(this.body,[this.hitbox,this.sensor]),this.addHelper(this.sensor,{position:t,color:"#ff0000"}),this.setScale({x:16,y:16,z:16}),this.shapes.removeAllShapes(),this.addShapes(e),this.setColors(e.color)}addShapes(e){var t=e.scaleZ*.25;this.shapes.addCone({x:-(t*1),y:t*0,z:t*1,scaleX:t*2,scaleY:t*4}),this.shapes.addCone({x:-(t*1),y:t*0,z:-(t*1),scaleX:t*2,scaleY:t*4}),this.shapes.addCone({x:t*1,y:t*0,z:t*1,scaleX:t*2,scaleY:t*4}),this.shapes.addCone({x:t*1,y:t*0,z:-(t*1),scaleX:t*2,scaleY:t*4})}}class Mp extends Te{constructor(e={}){super(e),this.body.class="shrink",this.hitbox.isSensor=!0,this.sensor=H.Bodies.rectangle(0,0,e.scaleX,e.scaleY,{isSensor:!0,density:0,class:"sensor"}),H.Body.setParts(this.body,[this.hitbox,this.sensor]),this.setScale({x:16,y:16,z:16}),this.shapes.removeAllShapes(),this.addShapes(e)}addShapes(e){var t=e.scaleZ*.2;this.shapes.addCube({x:-(t*1),y:t*1,z:t*1,scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#dc265a"}),this.shapes.addCube({x:t*1,y:t*1,z:t*1,scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#dc265a"}),this.shapes.addCube({x:-(t*1),y:-(t*1),z:t*1,scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#dc265a"}),this.shapes.addCube({x:t*1,y:-(t*1),z:t*1,scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#dc265a"}),this.shapes.addCube({x:-(t*1),y:t*1,z:-(t*1),scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#dc265a"}),this.shapes.addCube({x:t*1,y:t*1,z:-(t*1),scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#dc265a"}),this.shapes.addCube({x:-(t*1),y:-(t*1),z:-(t*1),scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#dc265a"}),this.shapes.addCube({x:t*1,y:-(t*1),z:-(t*1),scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#dc265a"})}}class Op extends Te{constructor(e={}){super(e),this.body.class="grow",this.hitbox.isSensor=!0,this.sensor=H.Bodies.rectangle(0,0,e.scaleX,e.scaleY,{isSensor:!0,density:0,class:"sensor"}),H.Body.setParts(this.body,[this.hitbox,this.sensor]),this.setScale({x:16,y:16,z:16}),this.shapes.removeAllShapes(),this.addShapes(e)}addShapes(e){var t=e.scaleZ*.2;this.shapes.addCube({scaleX:t*3,scaleY:t*3,scaleZ:t*3,color:"#dc265a"}),this.shapes.addCube({x:-(t*2),y:t*2,z:t*2,scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#dc265a"}),this.shapes.addCube({x:t*2,y:t*2,z:t*2,scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#dc265a"}),this.shapes.addCube({x:-(t*2),y:-(t*2),z:t*2,scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#dc265a"}),this.shapes.addCube({x:t*2,y:-(t*2),z:t*2,scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#dc265a"}),this.shapes.addCube({x:-(t*2),y:t*2,z:-(t*2),scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#dc265a"}),this.shapes.addCube({x:t*2,y:t*2,z:-(t*2),scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#dc265a"}),this.shapes.addCube({x:-(t*2),y:-(t*2),z:-(t*2),scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#dc265a"}),this.shapes.addCube({x:t*2,y:-(t*2),z:-(t*2),scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#dc265a"})}}class Dp extends Te{constructor(e={}){super(e),this.body.class="resize",this.hitbox.isSensor=!0,this.sensor=H.Bodies.rectangle(0,0,e.scaleX,e.scaleY,{isSensor:!0,density:0,class:"sensor"}),H.Body.setParts(this.body,[this.hitbox,this.sensor]),this.setScale({x:16,y:16,z:16}),this.shapes.removeAllShapes(),this.addShapes(e)}addShapes(e){var t=e.scaleZ*.2;this.shapes.addCube({scaleX:t*3,scaleY:t*3,scaleZ:t*3,color:"#0287ef"}),this.shapes.addCube({x:-(t*2),y:t*2,z:t*2,scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#ffffff"}),this.shapes.addCube({x:t*2,y:t*2,z:t*2,scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#ffffff"}),this.shapes.addCube({x:-(t*2),y:-(t*2),z:t*2,scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#ffffff"}),this.shapes.addCube({x:t*2,y:-(t*2),z:t*2,scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#ffffff"}),this.shapes.addCube({x:-(t*2),y:t*2,z:-(t*2),scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#ffffff"}),this.shapes.addCube({x:t*2,y:t*2,z:-(t*2),scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#ffffff"}),this.shapes.addCube({x:-(t*2),y:-(t*2),z:-(t*2),scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#ffffff"}),this.shapes.addCube({x:t*2,y:-(t*2),z:-(t*2),scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#ffffff"})}}class Lp extends Te{constructor(e={}){super(e),this.body.class="direction",this.sensor=H.Bodies.rectangle(0,0,e.scaleX,e.scaleY,{isSensor:!0,density:0,class:"sensor"}),H.Body.setParts(this.body,[this.hitbox,this.sensor]),this.setScale({x:16,y:16,z:16}),this.shapes.removeAllShapes(),this.addShapes(e)}addShapes(e){var t=e.scaleZ*.2;this.shapes.addCube({x:0,y:0,z:-(t*.5),scaleX:1,scaleY:1,scaleZ:t*4,color:"#0287ef"}),this.shapes.addExtrusion({position:{x:-.5,y:-.5,z:t*1.5},points:[{x:t,y:t},{x:t*4,y:.5},{x:t,y:t*4},{x:.4,y:.5}],depth:t,color:"#fff"})}}class Ip extends Te{constructor(e={}){super(e),this.body.class="gravity",this.hitbox.isSensor=!0,this.hitbox.class="sensor",this.setScale({x:16,y:16,z:16}),this.shapes.removeAllShapes(),this.shapes.setOpacities(.5),this.addShapes(e)}addShapes(e){var t=e.scaleZ/9;this.shapes.addCube({x:0,y:0,z:-(t*.5),scaleX:1,scaleY:1,scaleZ:t*6,color:"#0287ef"}),this.shapes.addCube({x:0,y:-(t*3),z:t*3,scaleX:t*7,scaleY:t*1,scaleZ:t*1,color:"#fff"}),this.shapes.addCube({x:0,y:t*3,z:t*3,scaleX:t*5,scaleY:t*1,scaleZ:t*1,color:"#fff"}),this.shapes.addCube({x:0,y:-(t*1),z:t*3,scaleX:t*5,scaleY:t*1,scaleZ:t*1,color:"#fff"}),this.shapes.addCube({x:-(t*2),y:t*1,z:t*3,scaleX:t*1,scaleY:t*3,scaleZ:t*1,color:"#fff"}),this.shapes.addCube({x:t*2,y:t*1,z:t*3,scaleX:t*1,scaleY:t*3,scaleZ:t*1,color:"#fff"})}}class Rp extends Te{constructor(e={}){super(e),this.body.class="grapple",this.sensor=H.Bodies.rectangle(0,0,e.scaleX,e.scaleY,{isSensor:!0,density:0,class:"sensor"}),H.Body.setParts(this.body,[this.hitbox,this.sensor]),this.setScale({x:16,y:16,z:16}),this.shapes.removeAllShapes(),this.addShapes(e)}addShapes(e){var t=e.scaleZ/8;this.shapes.addCube({x:0,y:0,z:-t,scaleX:1,scaleY:1,scaleZ:t*7,color:"#0287ef"}),this.shapes.addExtrusion({position:{x:0,y:0,z:t*3},points:[{x:0,y:0},{x:0,y:-(t*3)},{x:-(t*3),y:-(t*3)},{x:-(t*3),y:0}],depth:t,color:"#fff"}),this.shapes.addExtrusion({position:{x:0,y:0,z:t*3},points:[{x:-(t*1),y:0},{x:0,y:-(t*1)},{x:t*2,y:t*1},{x:t*1,y:t*2}],depth:t,color:"#fff"}),this.shapes.addExtrusion({position:{x:0,y:0,z:t*3},points:[{x:0,y:t*3},{x:t*3,y:t*3},{x:t*3,y:0}],depth:t,color:"#fff"})}}class Bp extends Te{constructor(e={}){super(e),this.body.class="finish",this.sensor=H.Bodies.rectangle(0,0,e.scaleX,e.scaleY,{isSensor:!0,density:0,class:"sensor"}),H.Body.setParts(this.body,[this.hitbox,this.sensor]),this.setScale({x:16,y:16,z:16}),this.shapes.removeAllShapes(),this.addShapes(e)}addShapes(e){for(var t=3,i=e.scaleZ*(1/t),o=-Math.floor(t/2),r=Math.ceil(t/2),s=0,a="#ffffff",c=o;c<r;c++)for(var u=o;u<r;u++)for(var d=o;d<r;d++)a=s%2==0?null:"#ffffff",this.shapes.addCube({x:i*d,y:i*u,z:i*c,scaleX:i*1,scaleY:i*1,scaleZ:i*1,color:a}),s++}}class jp extends Te{constructor(e={}){super(e),this.body.class="reset",this.hitbox.isSensor=!0,this.sensor=H.Bodies.rectangle(0,0,e.scaleX,e.scaleY,{isSensor:!0,density:0,class:"sensor"}),H.Body.setParts(this.body,[this.hitbox,this.sensor]),this.setScale({x:16,y:16,z:16}),this.shapes.removeAllShapes(),this.addShapes(e)}addShapes(e){for(var t=3,i=e.scaleZ*(1/t),o=-Math.floor(t/2),r=Math.ceil(t/2),s=0,a="#0287ef",c=o;c<r;c++)for(var u=o;u<r;u++)for(var d=o;d<r;d++)s%2!=0&&(c==0&&u==0?a="#ffffff":a="#0287ef",this.shapes.addCube({x:i*d,y:i*u,z:i*c,scaleX:i*1,scaleY:i*1,scaleZ:i*1,color:a})),s++}}class Np extends Te{constructor(e={}){super(e),this.body.class="control",this.hitbox.isSensor=!0,this.sensor=H.Bodies.rectangle(0,0,e.scaleX,e.scaleY,{isSensor:!0,density:0,class:"sensor"}),H.Body.setParts(this.body,[this.hitbox,this.sensor]),this.setScale({x:16,y:16,z:16}),this.shapes.removeAllShapes(),this.add(e.model)}}class Up{constructor(){this.color="#620460"}createObject(e,t){var i;switch(t==null&&(t={color:this.color}),e){case"player":i=new rr(t);break;case"tip":i=new Ep(t);break;case"bounce":i=new Tp(t);break;case"checkpoint":i=new Pp(t);break;case"spike":i=new Ap(t);break;case"shrink":i=new Mp(t);break;case"grow":i=new Op(t);break;case"resize":i=new Dp(t);break;case"direction":i=new Lp(t);break;case"gravity":i=new Ip(t);break;case"grapple":i=new Rp(t);break;case"finish":i=new Bp(t);break;case"reset":i=new jp(t);break;case"control":t.model=app.assets.models.clone("cube-control"),i=new Np(t);break;default:i=new Te(t)}return i}}const zp=[{title:"Easy Peasy",url:"../svg/button-pack-easy-peasy.svg",theme:"blue",levels:[{title:"Campaign Level 1",description:"Slip & Slide",label:"1-1"},{title:"Campaign Level 2",description:"Olympic Ramp",label:"1-2"},{title:"Campaign Level 3",description:"Easy Hop",label:"1-3"},{title:"Campaign Level 4",description:"Spike Hurdles",label:"1-4"},{title:"Campaign Level 5",description:"Air Jump",label:"1-5"}]},{title:"Lemon Difficult",url:"../svg/button-pack-lemon-difficult.svg",theme:"orange",levels:[{title:"Campaign Level 6",description:"Secret Agent",label:"2-1"},{title:"Campaign Level 7",description:"Long Boi",label:"2-2"},{title:"Campaign Level 8",description:"Bigger Boi",label:"2-3"},{title:"Campaign Level 9",description:"Spider Box",label:"2-4"},{title:"Campaign Level 10",description:"Rock Climber",label:"2-5"}]},{title:"Zack's Pack",url:"../svg/button-pack-zacks-levels.svg",theme:"green",levels:[{title:"Campaign Level 11",description:"Tippy Tap",label:"3-1"},{title:"Campaign Level 12",description:"Agility Jumps",label:"3-2"},{title:"Campaign Level 13",description:"Zack's Coaster",label:"3-3"},{title:"Campaign Level 14",description:"Simon Says",label:"3-4"},{title:"Campaign Level 15",description:"Wall of Finish",label:"3-5"}]},{title:"Kargoh's Pack",url:"../svg/button-pack-kargohs-levels.svg",theme:"purple",levels:[{title:"Campaign Level 16",description:"Kargoh's World",label:"4-1"},{title:"Campaign Level 17",description:"Kargoh's Bobsled",label:"4-2"},{title:"Campaign Level 18",description:"Kargoh's Plinko",label:"4-3"},{title:"Campaign Level 19",description:"Kargoh's Obstacles",label:"4-4"},{title:"Campaign Level 20",description:"Kargoh's Ramp",label:"4-5"}]},{title:"Gravity Hell",url:"../svg/button-pack-gravity-hell.svg",theme:"red",levels:[{title:"Campaign Level 21",description:"Gravity Loop",label:"5-1"},{title:"Campaign Level 22",description:"Gravity Sewer",label:"5-2"},{title:"Campaign Level 23",description:"Gravity Twist",label:"5-3"},{title:"Campaign Level 24",description:"Gravity Ramps",label:"5-4"},{title:"Campaign Level 25",description:"Gravity Spikes",label:"5-5"}]},{title:"Boxel Classics",url:"../svg/button-pack-boxel-classics.svg",theme:"classic",levels:[{title:"Campaign Level 26",description:"Stairway to Stairs",label:"6-1"},{title:"Campaign Level 27",description:"Extra Hops",label:"6-2"},{title:"Campaign Level 28",description:"Butterfly Knot",label:"6-3"},{title:"Campaign Level 29",description:"Jericho",label:"6-4"},{title:"Campaign Level 30",description:"Rock Climber 2",label:"6-5"}]},{title:"Spider Cube",url:"../svg/button-pack-spider-cube.svg",theme:"pink",levels:[{title:"Campaign Level 31",description:"Escape Room",label:"7-1"},{title:"Campaign Level 32",description:"Spider Room",label:"7-2"},{title:"Campaign Level 33",description:"Kargoh's Spider",label:"7-3"},{title:"Campaign Level 34",description:"Spider Tower",label:"7-4"},{title:"Campaign Level 35",description:"Spider Cave",label:"7-5"}]},{title:"Alpha Testing",url:"../svg/button-level-editor.svg",theme:"blue",description:"Test out levels before they are officially released",levels:[{title:"Campaign Level 36",description:"Small Boi"},{title:"Campaign Level 37",description:"Doppler's Plinko"},{title:"Campaign Level 38",description:"Ping Pong"},{title:"Campaign Level 39",description:"Boxel Nomad"},{title:"Campaign Level 40",description:"Homework"}]},{title:"Community Levels",url:"../svg/button-pack-boxel-classics.svg",theme:"classic",description:"Levels are made by the Boxel Community and are picked by the developer.",links:[{class:"discord",icon:"../svg/discord.svg",target:"_blank",text:"Join the Discord",url:"https://discord.gg/j8fvd4UvbE"}],levels:[{title:"Junsie",description:"Junsie"},{title:"Junsie 2",description:"Junsie 2"},{title:"Metal Machine",description:"Metal Machine"},{title:"0123xrulez",description:"0123xrulez"},{title:"Jack TVYT",description:"Jack TVYT"},{title:"16BitPlayer",description:"16BitPlayer"},{title:"uncoho3",description:"uncoho3"},{title:"Metal Machine 2",description:"Metal Machine 2"},{title:"Vyom",description:"Vyom"},{title:"0123xrulez 2",description:"0123xrulez 2"},{title:"16BitPlayer 2",description:"16BitPlayer 2"},{title:"0123xrulez 3",description:"0123xrulez 3"},{title:"Zozo",description:"Zozo"},{title:"Junsie 3",description:"Junsie 3"},{title:"! __kf",description:"! __kf"},{title:"Ice Dodo",description:"Ice Dodo"},{title:"Kllixto",description:"Kllixto"},{title:"Mountain Climb",description:"Mountain Climb"},{title:"The Arcadium",description:"The Arcadium"},{title:"The Box Escape",description:"The Box Escape"},{title:"Average level attempt",description:"Average level attempt"},{title:"Speed Spider",description:"Speed Spider"},{title:"Dancing on nothing",description:"Dancing on nothing"},{title:"Strawberry Jam",description:"Strawberry Jam"},{title:"Up, Down, and Through",description:"Up, Down, and Through"}]}],Xe={packs:zp},Fp={model:"background-city",color:"#ffffff"},qp={model:"background-classic",color:"#620460"},Hp={model:"background-forest",color:"#ffffff"},Vp={model:"background-desert",color:"#c40c4b"},Xp={model:"background-tokyo",color:"#C40C4B"},Wp={model:"background-kargoh",color:"#ffffff"},Zp={model:"background-hell",color:"#8C004A"},Gp={blue:Fp,classic:qp,green:Hp,orange:Vp,pink:Xp,purple:Wp,red:Zp};class Yp extends pt{constructor(){super(),this.name=this.defaultName="My Level",this.entityFactory=new Up}addObject(e,t){e.position.z==0&&(H.World.add(t.engine.world,e.body),this.parent.add(e.helper)),this.add(e)}removeObject(e,t,i=!1){(t.selectedObject!=null&&t.selectedObject.getClass()!="player"||i==!0)&&e!=null&&(H.World.remove(t.engine.world,e.body),this.parent.remove(e.helper),this.remove(e),t.level.deselectLevel(t))}clearLevel(e){var t=e.level.children.length;this.name=this.defaultName,e.player.removeRope();for(var i=0;i<t;i++){var o=e.level.children[0];this.removeObject(o,e,!0)}}removeParticles(e){for(var t=e.level.children.length,i=t-1;i>=0;){var o=e.level.children[i];o.isParticle!=null&&this.removeObject(o,e,!0),i--}}refreshLevel(e){var t=this.exportToJSON(e);this.clearLevel(e),this.importFromJSON(t,e)}refreshObject(e,t){this.removeObject(e,t);var i=this.duplicateObject(e,t);return i}changeObjectType(e,t,i){var o=e;return e.getClass()!="player"&&(e.body.class=t,o=this.refreshObject(e,i)),o}duplicateObject(e,t){var i=e.toJSON(),o=this.entityFactory.createObject(i.class);return this.setObjectProperties(o,i),this.addObject(o,t),o}createNewLevel(e){e.player.setPosition({x:0,y:0,z:0}),e.player.setScale({x:16,y:16,z:16}),e.player.setRotation(0),e.player.setFriction(0),this.clearLevel(e),this.add(e.player);var t=this.entityFactory.createObject("cube",{x:0,y:-64,z:0});t.setScale({x:64,y:16,z:16}),t.setStatic(!0),this.add(t)}deselectLevel(e){e.selectedObject=null;for(var t=0;t<e.level.children.length;t++){var i=e.level.children[t];i.body!=null&&i.select(!1)}}exportToJSON(e){var t={};t.name=this.name,t.children=[];for(var i=0;i<e.level.children.length;i++){var o=e.level.children[i];if(o.type=="Mesh"){var r=o.toJSON();t.children.push(r)}}return t}saveLevelData(e){e.storage.setLevelData(this.key,this.exportToJSON(e))}importFromJSON(e,t){this.name=e.name;for(var i=0;i<e.children.length;i++){var o=t.storage.getSettings(t),r=e.children[i],s=this.entityFactory.createObject(r.class);r.class=="player"&&(s=t.player),s.helper.visible=o.debug,this.setObjectProperties(s,r),this.addObject(s,t)}}resetLevel(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.resetToOrigin()}}retryLevel(e=app,t=!1){e.updateGravity(),e.play=!0,e.level.removeParticles(e),e.player.cancelRestart(),e.resetScene(e),window.dispatchEvent(new CustomEvent("closePopup")),t==!1||e.player.checkpoint==null?(e.timer.reset(),e.player.removeCheckpoint()):e.player.respawn(!0)}exitLevel(e){if(e.timer.reset(),e.player.removeCheckpoint(),e.state=="campaign"){var t=e.storage.getSettings(e),i=parseInt(t.progress);i++,t.progress=i,e.updateSettings(t,e),window.dispatchEvent(new CustomEvent("setPage",{detail:"level-picker"}))}else e.state=="level-editor"&&(e.updateGravity(),e.resetScene(e),app.levelEditor.controlsOrbit.enabled=!0,app.levelEditor.controlsOrbit.reset(),app.background.visible=!1)}setObjectProperties(e,t){e.setPosition({x:t.position.x,y:t.position.y,z:t.position.z}),e.setScale({x:t.scale.x,y:t.scale.y,z:t.scale.z}),e.setRotation(t.rotation.z),e.setStatic(t.isStatic),e.setText(t.text),e.setFriction(t.friction)}showTip(e){app.play=!1,app.timer.pause(),window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:e,inputs:[{type:"button",value:"Continue",callback:function(){app.playLevel(),window.dispatchEvent(new CustomEvent("closePopup"))}}]}}))}showHelpers(e=!0){this.traverse(function(t){t.helper&&(t.helper.visible=e)})}updateHelpers(){this.children.forEach(function(e){e.helper&&e.updateHelper()})}getThemeByTitle(e){var t;return Xe.packs.forEach(function(i){i.levels.forEach(function(o){e==o.title&&(t=Gp[i.theme])})}),t}getDescriptionByTitle(e){var t;return Xe.packs.forEach(function(i){i.levels.forEach(function(o){e==o.title&&(t=o.description)})}),t}}class Kp{constructor(){this.clear()}save(e="Edited level",t){this.history.length=this.historyIndex+1,this.history.push({data:t.level.exportToJSON(t),description:e}),this.historyIndex++}clear(){this.history=[],this.historyIndex=0}undo(e){this.historyIndex>1&&(this.historyIndex--,e.level.clearLevel(e),e.level.importFromJSON(this.history[this.historyIndex].data,e))}redo(e){this.historyIndex<this.history.length-1&&(this.historyIndex++,e.level.clearLevel(e),e.level.importFromJSON(this.history[this.historyIndex].data,e))}}class Qp{constructor(){this.down=new z,this.move=new z,this.offset=new z,this.up=new z,this.drag=!1,this.mode="draw",this.snap=1,this.prevMode=this.mode}mouseDown(e,t){if(this.setTolerance(),t.play==!1)t.levelEditor.mouseDown(e,t);else{var i=t.mouse.getPosition(e,t);t.player.jump(i),t.player.addRope(i)}}mouseMove(e,t){t.play==!1&&t.levelEditor.mouseMove(e,t)}mouseUp(e,t){t.play==!1&&app.state=="level-editor"&&t.levelEditor.mouseUp(e,t),t.player.removeRope()}getPosition(e,t){var i=new Yn,o=new z,r=[];return i.setFromCamera(t.mouse.getMouse(e,t),t.camera),r=i.intersectObject(t.player,!0),r.length>0&&o.copy(r[0].point),o}clickObject(e,t){var i=new Yn,o=new z,r,s=e.clientX/t.window.innerWidth*2-1,a=-(e.clientY/t.window.innerHeight)*2+1;o.set(s,a,0),i.setFromCamera(o,t.camera);for(var c=i.intersectObjects(t.scene.children,!0),u=0;u<c.length;u++){var d=c[u].object;if(d.isMesh&&d.material.visible&&d.traverseAncestors(function(f){r==null&&f.isCube&&(r=f)}),r)break}return r}wheel(e,t){e.preventDefault()}setTolerance(e=.05){this.tolerance=app.camera.position.z*e}setPosition(e,t){e=="down"?(this.down=t,this.move=t,this.drag=!0):e=="move"?this.drag==!0&&(this.move=t):e=="up"&&(this.up=t,this.drag=!1)}setOffset(e){this.offset.x=e.x-this.down.x,this.offset.y=e.y-this.down.y,this.offset.z=e.z-this.down.z}getDragDifference(){return{x:Math.round(this.down.x-this.move.x-this.offset.x),y:Math.round(this.down.y-this.move.y-this.offset.y),z:Math.round(this.down.z-this.move.z-this.offset.z)}}getTolerance(){var e=this.getDragDifference();return Math.abs(e.x+this.offset.x)+Math.abs(e.y+this.offset.y)>this.tolerance}snapToValue(e,t){return Math.round(e/t)*t}setSnap(e){this.snap=e}setMode(e){this.mode=this.prevMode=e}getMode(){return this.mode}getMouse(e,t){return{x:e.clientX/t.window.innerWidth*2-1,y:-(e.clientY/t.window.innerHeight)*2+1,z:.5}}}const ut=new Yn,_e=new z,ot=new z,ce=new Ue,cs={X:new z(1,0,0),Y:new z(0,1,0),Z:new z(0,0,1)},or={type:"change"},ps={type:"mouseDown",mode:null},ds={type:"mouseUp",mode:null},us={type:"objectChange"};class Jp extends Uo{constructor(e,t=null){super(void 0,t);const i=new rd(this);this._root=i;const o=new od;this._gizmo=o,i.add(o);const r=new sd;this._plane=r,i.add(r);const s=this;function a(_,E){let y=E;Object.defineProperty(s,_,{get:function(){return y!==void 0?y:E},set:function(w){y!==w&&(y=w,r[_]=w,o[_]=w,s.dispatchEvent({type:_+"-changed",value:w}),s.dispatchEvent(or))}}),s[_]=E,r[_]=E,o[_]=E}a("camera",e),a("object",void 0),a("enabled",!0),a("axis",null),a("mode","translate"),a("translationSnap",null),a("rotationSnap",null),a("scaleSnap",null),a("space","world"),a("size",1),a("dragging",!1),a("showX",!0),a("showY",!0),a("showZ",!0);const c=new z,u=new z,d=new Ue,f=new Ue,p=new z,l=new Ue,m=new z,h=new z,g=new z,v=0,b=new z;a("worldPosition",c),a("worldPositionStart",u),a("worldQuaternion",d),a("worldQuaternionStart",f),a("cameraPosition",p),a("cameraQuaternion",l),a("pointStart",m),a("pointEnd",h),a("rotationAxis",g),a("rotationAngle",v),a("eye",b),this._offset=new z,this._startNorm=new z,this._endNorm=new z,this._cameraScale=new z,this._parentPosition=new z,this._parentQuaternion=new Ue,this._parentQuaternionInv=new Ue,this._parentScale=new z,this._worldScaleStart=new z,this._worldQuaternionInv=new Ue,this._worldScale=new z,this._positionStart=new z,this._quaternionStart=new Ue,this._scaleStart=new z,this._getPointer=$p.bind(this),this._onPointerDown=td.bind(this),this._onPointerHover=ed.bind(this),this._onPointerMove=id.bind(this),this._onPointerUp=nd.bind(this),t!==null&&this.connect()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.style.touchAction="auto"}getHelper(){return this._root}pointerHover(e){if(this.object===void 0||this.dragging===!0)return;e!==null&&ut.setFromCamera(e,this.camera);const t=sr(this._gizmo.picker[this.mode],ut);t?this.axis=t.object.name:this.axis=null}pointerDown(e){if(!(this.object===void 0||this.dragging===!0||e!=null&&e.button!==0)&&this.axis!==null){e!==null&&ut.setFromCamera(e,this.camera);const t=sr(this._plane,ut,!0);t&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(t.point).sub(this.worldPositionStart)),this.dragging=!0,ps.mode=this.mode,this.dispatchEvent(ps)}}pointerMove(e){const t=this.axis,i=this.mode,o=this.object;let r=this.space;if(i==="scale"?r="local":(t==="E"||t==="XYZE"||t==="XYZ")&&(r="world"),o===void 0||t===null||this.dragging===!1||e!==null&&e.button!==-1)return;e!==null&&ut.setFromCamera(e,this.camera);const s=sr(this._plane,ut,!0);if(s){if(this.pointEnd.copy(s.point).sub(this.worldPositionStart),i==="translate")this._offset.copy(this.pointEnd).sub(this.pointStart),r==="local"&&t!=="XYZ"&&this._offset.applyQuaternion(this._worldQuaternionInv),t.indexOf("X")===-1&&(this._offset.x=0),t.indexOf("Y")===-1&&(this._offset.y=0),t.indexOf("Z")===-1&&(this._offset.z=0),r==="local"&&t!=="XYZ"?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),o.position.copy(this._offset).add(this._positionStart),this.translationSnap&&(r==="local"&&(o.position.applyQuaternion(ce.copy(this._quaternionStart).invert()),t.search("X")!==-1&&(o.position.x=Math.round(o.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(o.position.y=Math.round(o.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(o.position.z=Math.round(o.position.z/this.translationSnap)*this.translationSnap),o.position.applyQuaternion(this._quaternionStart)),r==="world"&&(o.parent&&o.position.add(_e.setFromMatrixPosition(o.parent.matrixWorld)),t.search("X")!==-1&&(o.position.x=Math.round(o.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(o.position.y=Math.round(o.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(o.position.z=Math.round(o.position.z/this.translationSnap)*this.translationSnap),o.parent&&o.position.sub(_e.setFromMatrixPosition(o.parent.matrixWorld))));else if(i==="scale"){if(t.search("XYZ")!==-1){let a=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(a*=-1),ot.set(a,a,a)}else _e.copy(this.pointStart),ot.copy(this.pointEnd),_e.applyQuaternion(this._worldQuaternionInv),ot.applyQuaternion(this._worldQuaternionInv),ot.divide(_e),t.search("X")===-1&&(ot.x=1),t.search("Y")===-1&&(ot.y=1),t.search("Z")===-1&&(ot.z=1);o.scale.copy(this._scaleStart).multiply(ot),this.scaleSnap&&(t.search("X")!==-1&&(o.scale.x=Math.round(o.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Y")!==-1&&(o.scale.y=Math.round(o.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Z")!==-1&&(o.scale.z=Math.round(o.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(i==="rotate"){this._offset.copy(this.pointEnd).sub(this.pointStart);const a=20/this.worldPosition.distanceTo(_e.setFromMatrixPosition(this.camera.matrixWorld));let c=!1;t==="XYZE"?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(_e.copy(this.rotationAxis).cross(this.eye))*a):(t==="X"||t==="Y"||t==="Z")&&(this.rotationAxis.copy(cs[t]),_e.copy(cs[t]),r==="local"&&_e.applyQuaternion(this.worldQuaternion),_e.cross(this.eye),_e.length()===0?c=!0:this.rotationAngle=this._offset.dot(_e.normalize())*a),(t==="E"||c)&&(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),r==="local"&&t!=="E"&&t!=="XYZE"?(o.quaternion.copy(this._quaternionStart),o.quaternion.multiply(ce.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),o.quaternion.copy(ce.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),o.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(or),this.dispatchEvent(us)}}pointerUp(e){e!==null&&e.button!==0||(this.dragging&&this.axis!==null&&(ds.mode=this.mode,this.dispatchEvent(ds)),this.dragging=!1,this.axis=null)}dispose(){this.disconnect(),this.traverse(function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()})}attach(e){return this.object=e,this._root.visible=!0,this}detach(){return this.object=void 0,this.axis=null,this._root.visible=!1,this}reset(){this.enabled&&this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(or),this.dispatchEvent(us),this.pointStart.copy(this.pointEnd))}getRaycaster(){return ut}getMode(){return this.mode}setMode(e){this.mode=e}setTranslationSnap(e){this.translationSnap=e}setRotationSnap(e){this.rotationSnap=e}setScaleSnap(e){this.scaleSnap=e}setSize(e){this.size=e}setSpace(e){this.space=e}}function $p(n){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:n.button};{const e=this.domElement.getBoundingClientRect();return{x:(n.clientX-e.left)/e.width*2-1,y:-(n.clientY-e.top)/e.height*2+1,button:n.button}}}function ed(n){if(this.enabled)switch(n.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(n));break}}function td(n){this.enabled&&(document.pointerLockElement||this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(n)),this.pointerDown(this._getPointer(n)))}function id(n){this.enabled&&this.pointerMove(this._getPointer(n))}function nd(n){this.enabled&&(this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(n)))}function sr(n,e,t){const i=e.intersectObject(n,!0);for(let o=0;o<i.length;o++)if(i[o].object.visible||t)return i[o];return!1}const Ui=new qc,oe=new z(0,1,0),hs=new z(0,0,0),fs=new St,zi=new Ue,Fi=new Ue,We=new z,ms=new St,Gt=new z(1,0,0),ht=new z(0,1,0),Yt=new z(0,0,1),qi=new z,Kt=new z,Qt=new z;class rd extends Ft{constructor(e){super(),this.isTransformControlsRoot=!0,this.controls=e,this.visible=!1}updateMatrixWorld(e){const t=this.controls;t.object!==void 0&&(t.object.updateMatrixWorld(),t.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):t.object.parent.matrixWorld.decompose(t._parentPosition,t._parentQuaternion,t._parentScale),t.object.matrixWorld.decompose(t.worldPosition,t.worldQuaternion,t._worldScale),t._parentQuaternionInv.copy(t._parentQuaternion).invert(),t._worldQuaternionInv.copy(t.worldQuaternion).invert()),t.camera.updateMatrixWorld(),t.camera.matrixWorld.decompose(t.cameraPosition,t.cameraQuaternion,t._cameraScale),t.camera.isOrthographicCamera?t.camera.getWorldDirection(t.eye).negate():t.eye.copy(t.cameraPosition).sub(t.worldPosition).normalize(),super.updateMatrixWorld(e)}}class od extends Ft{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";const e=new Gn({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),t=new Hc({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),i=e.clone();i.opacity=.15;const o=t.clone();o.opacity=.5;const r=e.clone();r.color.setHex(16711680);const s=e.clone();s.color.setHex(65280);const a=e.clone();a.color.setHex(255);const c=e.clone();c.color.setHex(16711680),c.opacity=.5;const u=e.clone();u.color.setHex(65280),u.opacity=.5;const d=e.clone();d.color.setHex(255),d.opacity=.5;const f=e.clone();f.opacity=.25;const p=e.clone();p.color.setHex(16776960),p.opacity=.25,e.clone().color.setHex(16776960);const l=e.clone();l.color.setHex(7895160);const m=new Me(0,.04,.1,12);m.translate(0,.05,0);const h=new we(.08,.08,.08);h.translate(0,.04,0);const g=new zo;g.setAttribute("position",new Mi([0,0,0,1,0,0],3));const v=new Me(.0075,.0075,.5,3);v.translate(0,.25,0);function b(I,O){const P=new Vt(I,.0075,3,64,O*Math.PI*2);return P.rotateY(Math.PI/2),P.rotateX(Math.PI/2),P}function _(){const I=new zo;return I.setAttribute("position",new Mi([0,0,0,1,1,1],3)),I}const E={X:[[new U(m,r),[.5,0,0],[0,0,-Math.PI/2]],[new U(m,r),[-.5,0,0],[0,0,Math.PI/2]],[new U(v,r),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new U(m,s),[0,.5,0]],[new U(m,s),[0,-.5,0],[Math.PI,0,0]],[new U(v,s)]],Z:[[new U(m,a),[0,0,.5],[Math.PI/2,0,0]],[new U(m,a),[0,0,-.5],[-Math.PI/2,0,0]],[new U(v,a),null,[Math.PI/2,0,0]]],XYZ:[[new U(new Li(.1,0),f.clone()),[0,0,0]]],XY:[[new U(new we(.15,.15,.01),d.clone()),[.15,.15,0]]],YZ:[[new U(new we(.15,.15,.01),c.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new U(new we(.15,.15,.01),u.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},y={X:[[new U(new Me(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new U(new Me(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new U(new Me(.2,0,.6,4),i),[0,.3,0]],[new U(new Me(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new U(new Me(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new U(new Me(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new U(new Li(.2,0),i)]],XY:[[new U(new we(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new U(new we(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new U(new we(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]]},w={START:[[new U(new Li(.01,2),o),null,null,null,"helper"]],END:[[new U(new Li(.01,2),o),null,null,null,"helper"]],DELTA:[[new rt(_(),o),null,null,null,"helper"]],X:[[new rt(g,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new rt(g,o.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new rt(g,o.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},T={XYZE:[[new U(b(.5,1),l),null,[0,Math.PI/2,0]]],X:[[new U(b(.5,.5),r)]],Y:[[new U(b(.5,.5),s),null,[0,0,-Math.PI/2]]],Z:[[new U(b(.5,.5),a),null,[0,Math.PI/2,0]]],E:[[new U(b(.75,1),p),null,[0,Math.PI/2,0]]]},C={AXIS:[[new rt(g,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},M={XYZE:[[new U(new Vc(.25,10,8),i)]],X:[[new U(new Vt(.5,.1,4,24),i),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new U(new Vt(.5,.1,4,24),i),[0,0,0],[Math.PI/2,0,0]]],Z:[[new U(new Vt(.5,.1,4,24),i),[0,0,0],[0,0,-Math.PI/2]]],E:[[new U(new Vt(.75,.1,2,24),i)]]},L={X:[[new U(h,r),[.5,0,0],[0,0,-Math.PI/2]],[new U(v,r),[0,0,0],[0,0,-Math.PI/2]],[new U(h,r),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new U(h,s),[0,.5,0]],[new U(v,s)],[new U(h,s),[0,-.5,0],[0,0,Math.PI]]],Z:[[new U(h,a),[0,0,.5],[Math.PI/2,0,0]],[new U(v,a),[0,0,0],[Math.PI/2,0,0]],[new U(h,a),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new U(new we(.15,.15,.01),d),[.15,.15,0]]],YZ:[[new U(new we(.15,.15,.01),c),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new U(new we(.15,.15,.01),u),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new U(new we(.1,.1,.1),f.clone())]]},x={X:[[new U(new Me(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new U(new Me(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new U(new Me(.2,0,.6,4),i),[0,.3,0]],[new U(new Me(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new U(new Me(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new U(new Me(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new U(new we(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new U(new we(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new U(new we(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new U(new we(.2,.2,.2),i),[0,0,0]]]},D={X:[[new rt(g,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new rt(g,o.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new rt(g,o.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function A(I){const O=new Ft;for(const P in I)for(let k=I[P].length;k--;){const R=I[P][k][0].clone(),V=I[P][k][1],X=I[P][k][2],G=I[P][k][3],F=I[P][k][4];R.name=P,R.tag=F,V&&R.position.set(V[0],V[1],V[2]),X&&R.rotation.set(X[0],X[1],X[2]),G&&R.scale.set(G[0],G[1],G[2]),R.updateMatrix();const se=R.geometry.clone();se.applyMatrix4(R.matrix),R.geometry=se,R.renderOrder=1/0,R.position.set(0,0,0),R.rotation.set(0,0,0),R.scale.set(1,1,1),O.add(R)}return O}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=A(E)),this.add(this.gizmo.rotate=A(T)),this.add(this.gizmo.scale=A(L)),this.add(this.picker.translate=A(y)),this.add(this.picker.rotate=A(M)),this.add(this.picker.scale=A(x)),this.add(this.helper.translate=A(w)),this.add(this.helper.rotate=A(C)),this.add(this.helper.scale=A(D)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(e){const t=(this.mode==="scale"?"local":this.space)==="local"?this.worldQuaternion:Fi;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let i=[];i=i.concat(this.picker[this.mode].children),i=i.concat(this.gizmo[this.mode].children),i=i.concat(this.helper[this.mode].children);for(let o=0;o<i.length;o++){const r=i[o];r.visible=!0,r.rotation.set(0,0,0),r.position.copy(this.worldPosition);let s;if(this.camera.isOrthographicCamera?s=(this.camera.top-this.camera.bottom)/this.camera.zoom:s=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),r.scale.set(1,1,1).multiplyScalar(s*this.size/4),r.tag==="helper"){r.visible=!1,r.name==="AXIS"?(r.visible=!!this.axis,this.axis==="X"&&(ce.setFromEuler(Ui.set(0,0,0)),r.quaternion.copy(t).multiply(ce),Math.abs(oe.copy(Gt).applyQuaternion(t).dot(this.eye))>.9&&(r.visible=!1)),this.axis==="Y"&&(ce.setFromEuler(Ui.set(0,0,Math.PI/2)),r.quaternion.copy(t).multiply(ce),Math.abs(oe.copy(ht).applyQuaternion(t).dot(this.eye))>.9&&(r.visible=!1)),this.axis==="Z"&&(ce.setFromEuler(Ui.set(0,Math.PI/2,0)),r.quaternion.copy(t).multiply(ce),Math.abs(oe.copy(Yt).applyQuaternion(t).dot(this.eye))>.9&&(r.visible=!1)),this.axis==="XYZE"&&(ce.setFromEuler(Ui.set(0,Math.PI/2,0)),oe.copy(this.rotationAxis),r.quaternion.setFromRotationMatrix(fs.lookAt(hs,oe,ht)),r.quaternion.multiply(ce),r.visible=this.dragging),this.axis==="E"&&(r.visible=!1)):r.name==="START"?(r.position.copy(this.worldPositionStart),r.visible=this.dragging):r.name==="END"?(r.position.copy(this.worldPosition),r.visible=this.dragging):r.name==="DELTA"?(r.position.copy(this.worldPositionStart),r.quaternion.copy(this.worldQuaternionStart),_e.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),_e.applyQuaternion(this.worldQuaternionStart.clone().invert()),r.scale.copy(_e),r.visible=this.dragging):(r.quaternion.copy(t),this.dragging?r.position.copy(this.worldPositionStart):r.position.copy(this.worldPosition),this.axis&&(r.visible=this.axis.search(r.name)!==-1));continue}r.quaternion.copy(t),this.mode==="translate"||this.mode==="scale"?(r.name==="X"&&Math.abs(oe.copy(Gt).applyQuaternion(t).dot(this.eye))>.99&&(r.scale.set(1e-10,1e-10,1e-10),r.visible=!1),r.name==="Y"&&Math.abs(oe.copy(ht).applyQuaternion(t).dot(this.eye))>.99&&(r.scale.set(1e-10,1e-10,1e-10),r.visible=!1),r.name==="Z"&&Math.abs(oe.copy(Yt).applyQuaternion(t).dot(this.eye))>.99&&(r.scale.set(1e-10,1e-10,1e-10),r.visible=!1),r.name==="XY"&&Math.abs(oe.copy(Yt).applyQuaternion(t).dot(this.eye))<.2&&(r.scale.set(1e-10,1e-10,1e-10),r.visible=!1),r.name==="YZ"&&Math.abs(oe.copy(Gt).applyQuaternion(t).dot(this.eye))<.2&&(r.scale.set(1e-10,1e-10,1e-10),r.visible=!1),r.name==="XZ"&&Math.abs(oe.copy(ht).applyQuaternion(t).dot(this.eye))<.2&&(r.scale.set(1e-10,1e-10,1e-10),r.visible=!1)):this.mode==="rotate"&&(zi.copy(t),oe.copy(this.eye).applyQuaternion(ce.copy(t).invert()),r.name.search("E")!==-1&&r.quaternion.setFromRotationMatrix(fs.lookAt(this.eye,hs,ht)),r.name==="X"&&(ce.setFromAxisAngle(Gt,Math.atan2(-oe.y,oe.z)),ce.multiplyQuaternions(zi,ce),r.quaternion.copy(ce)),r.name==="Y"&&(ce.setFromAxisAngle(ht,Math.atan2(oe.x,oe.z)),ce.multiplyQuaternions(zi,ce),r.quaternion.copy(ce)),r.name==="Z"&&(ce.setFromAxisAngle(Yt,Math.atan2(oe.y,oe.x)),ce.multiplyQuaternions(zi,ce),r.quaternion.copy(ce))),r.visible=r.visible&&(r.name.indexOf("X")===-1||this.showX),r.visible=r.visible&&(r.name.indexOf("Y")===-1||this.showY),r.visible=r.visible&&(r.name.indexOf("Z")===-1||this.showZ),r.visible=r.visible&&(r.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),r.material._color=r.material._color||r.material.color.clone(),r.material._opacity=r.material._opacity||r.material.opacity,r.material.color.copy(r.material._color),r.material.opacity=r.material._opacity,this.enabled&&this.axis&&(r.name===this.axis||this.axis.split("").some(function(a){return r.name===a}))&&(r.material.color.setHex(16776960),r.material.opacity=1)}super.updateMatrixWorld(e)}}class sd extends U{constructor(){super(new No(1e5,1e5,2,2),new Gn({visible:!1,wireframe:!0,side:Pi,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(e){let t=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(t="local"),qi.copy(Gt).applyQuaternion(t==="local"?this.worldQuaternion:Fi),Kt.copy(ht).applyQuaternion(t==="local"?this.worldQuaternion:Fi),Qt.copy(Yt).applyQuaternion(t==="local"?this.worldQuaternion:Fi),oe.copy(Kt),this.mode){case"translate":case"scale":switch(this.axis){case"X":oe.copy(this.eye).cross(qi),We.copy(qi).cross(oe);break;case"Y":oe.copy(this.eye).cross(Kt),We.copy(Kt).cross(oe);break;case"Z":oe.copy(this.eye).cross(Qt),We.copy(Qt).cross(oe);break;case"XY":We.copy(Qt);break;case"YZ":We.copy(qi);break;case"XZ":oe.copy(Qt),We.copy(Kt);break;case"XYZ":case"E":We.set(0,0,0);break}break;case"rotate":default:We.set(0,0,0)}We.length()===0?this.quaternion.copy(this.cameraQuaternion):(ms.lookAt(_e.set(0,0,0),We,oe),this.quaternion.setFromRotationMatrix(ms)),super.updateMatrixWorld(e)}}const gs={type:"change"},ar={type:"start"},vs={type:"end"},Hi=new Xc,ys=new Wc,ad=Math.cos(70*Ai.DEG2RAD),ve=new z,Oe=2*Math.PI,ie={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},lr=1e-6;class ld extends Uo{constructor(e,t=null){super(e,t),this.state=ie.NONE,this.enabled=!0,this.target=new z,this.cursor=new z,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Et.ROTATE,MIDDLE:Et.DOLLY,RIGHT:Et.PAN},this.touches={ONE:Tt.ROTATE,TWO:Tt.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new z,this._lastQuaternion=new Ue,this._lastTargetPosition=new z,this._quat=new Ue().setFromUnitVectors(e.up,new z(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new Fo,this._sphericalDelta=new Fo,this._scale=1,this._panOffset=new z,this._rotateStart=new ue,this._rotateEnd=new ue,this._rotateDelta=new ue,this._panStart=new ue,this._panEnd=new ue,this._panDelta=new ue,this._dollyStart=new ue,this._dollyEnd=new ue,this._dollyDelta=new ue,this._dollyDirection=new z,this._mouse=new ue,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=pd.bind(this),this._onPointerDown=cd.bind(this),this._onPointerUp=dd.bind(this),this._onContextMenu=yd.bind(this),this._onMouseWheel=fd.bind(this),this._onKeyDown=md.bind(this),this._onTouchStart=gd.bind(this),this._onTouchMove=vd.bind(this),this._onMouseDown=ud.bind(this),this._onMouseMove=hd.bind(this),this._interceptControlDown=bd.bind(this),this._interceptControlUp=wd.bind(this),this.domElement!==null&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(gs),this.update(),this.state=ie.NONE}update(e=null){const t=this.object.position;ve.copy(t).sub(this.target),ve.applyQuaternion(this._quat),this._spherical.setFromVector3(ve),this.autoRotate&&this.state===ie.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,o=this.maxAzimuthAngle;isFinite(i)&&isFinite(o)&&(i<-Math.PI?i+=Oe:i>Math.PI&&(i-=Oe),o<-Math.PI?o+=Oe:o>Math.PI&&(o-=Oe),i<=o?this._spherical.theta=Math.max(i,Math.min(o,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(i+o)/2?Math.max(i,this._spherical.theta):Math.min(o,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let r=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const s=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),r=s!=this._spherical.radius}if(ve.setFromSpherical(this._spherical),ve.applyQuaternion(this._quatInverse),t.copy(this.target).add(ve),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let s=null;if(this.object.isPerspectiveCamera){const a=ve.length();s=this._clampDistance(a*this._scale);const c=a-s;this.object.position.addScaledVector(this._dollyDirection,c),this.object.updateMatrixWorld(),r=!!c}else if(this.object.isOrthographicCamera){const a=new z(this._mouse.x,this._mouse.y,0);a.unproject(this.object);const c=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),r=c!==this.object.zoom;const u=new z(this._mouse.x,this._mouse.y,0);u.unproject(this.object),this.object.position.sub(u).add(a),this.object.updateMatrixWorld(),s=ve.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;s!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(s).add(this.object.position):(Hi.origin.copy(this.object.position),Hi.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(Hi.direction))<ad?this.object.lookAt(this.target):(ys.setFromNormalAndCoplanarPoint(this.object.up,this.target),Hi.intersectPlane(ys,this.target))))}else if(this.object.isOrthographicCamera){const s=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),s!==this.object.zoom&&(this.object.updateProjectionMatrix(),r=!0)}return this._scale=1,this._performCursorZoom=!1,r||this._lastPosition.distanceToSquared(this.object.position)>lr||8*(1-this._lastQuaternion.dot(this.object.quaternion))>lr||this._lastTargetPosition.distanceToSquared(this.target)>lr?(this.dispatchEvent(gs),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?Oe/60*this.autoRotateSpeed*e:Oe/60/60*this.autoRotateSpeed}_getZoomScale(e){const t=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){ve.setFromMatrixColumn(t,0),ve.multiplyScalar(-e),this._panOffset.add(ve)}_panUp(e,t){this.screenSpacePanning===!0?ve.setFromMatrixColumn(t,1):(ve.setFromMatrixColumn(t,0),ve.crossVectors(this.object.up,ve)),ve.multiplyScalar(e),this._panOffset.add(ve)}_pan(e,t){const i=this.domElement;if(this.object.isPerspectiveCamera){const o=this.object.position;ve.copy(o).sub(this.target);let r=ve.length();r*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*r/i.clientHeight,this.object.matrix),this._panUp(2*t*r/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const i=this.domElement.getBoundingClientRect(),o=e-i.left,r=t-i.top,s=i.width,a=i.height;this._mouse.x=o/s*2-1,this._mouse.y=-(r/a)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Oe*this._rotateDelta.x/t.clientHeight),this._rotateUp(Oe*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateUp(Oe*this.rotateSpeed/this.domElement.clientHeight):this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateUp(-Oe*this.rotateSpeed/this.domElement.clientHeight):this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateLeft(Oe*this.rotateSpeed/this.domElement.clientHeight):this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateLeft(-Oe*this.rotateSpeed/this.domElement.clientHeight):this._pan(-this.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),o=.5*(e.pageY+t.y);this._rotateStart.set(i,o)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),o=.5*(e.pageY+t.y);this._panStart.set(i,o)}}_handleTouchStartDolly(e){const t=this._getSecondPointerPosition(e),i=e.pageX-t.x,o=e.pageY-t.y,r=Math.sqrt(i*i+o*o);this._dollyStart.set(0,r)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const i=this._getSecondPointerPosition(e),o=.5*(e.pageX+i.x),r=.5*(e.pageY+i.y);this._rotateEnd.set(o,r)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Oe*this._rotateDelta.x/t.clientHeight),this._rotateUp(Oe*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),o=.5*(e.pageY+t.y);this._panEnd.set(i,o)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const t=this._getSecondPointerPosition(e),i=e.pageX-t.x,o=e.pageY-t.y,r=Math.sqrt(i*i+o*o);this._dollyEnd.set(0,r),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const s=(e.pageX+t.x)*.5,a=(e.pageY+t.y)*.5;this._updateZoomParameters(s,a)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId){this._pointers.splice(t,1);return}}_isTrackingPointer(e){for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new ue,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}_customWheelEvent(e){const t=e.deltaMode,i={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(i.deltaY*=10),i}}function cd(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(n)&&(this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n)))}function pd(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function dd(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(vs),this.state=ie.NONE;break;case 1:const e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y});break}}function ud(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Et.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(n),this.state=ie.DOLLY;break;case Et.ROTATE:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=ie.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=ie.ROTATE}break;case Et.PAN:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=ie.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=ie.PAN}break;default:this.state=ie.NONE}this.state!==ie.NONE&&this.dispatchEvent(ar)}function hd(n){switch(this.state){case ie.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(n);break;case ie.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(n);break;case ie.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(n);break}}function fd(n){this.enabled===!1||this.enableZoom===!1||this.state!==ie.NONE||(n.preventDefault(),this.dispatchEvent(ar),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent(vs))}function md(n){this.enabled===!1||this.enablePan===!1||this._handleKeyDown(n)}function gd(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case Tt.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(n),this.state=ie.TOUCH_ROTATE;break;case Tt.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(n),this.state=ie.TOUCH_PAN;break;default:this.state=ie.NONE}break;case 2:switch(this.touches.TWO){case Tt.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(n),this.state=ie.TOUCH_DOLLY_PAN;break;case Tt.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(n),this.state=ie.TOUCH_DOLLY_ROTATE;break;default:this.state=ie.NONE}break;default:this.state=ie.NONE}this.state!==ie.NONE&&this.dispatchEvent(ar)}function vd(n){switch(this._trackPointer(n),this.state){case ie.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(n),this.update();break;case ie.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(n),this.update();break;case ie.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(n),this.update();break;case ie.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=ie.NONE}}function yd(n){this.enabled!==!1&&n.preventDefault()}function bd(n){n.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function wd(n){n.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}class xd{constructor(e,t){this.selectedObjectType="cube",this.controlsTransform=new Jp(e,t),this.controlsTransform.showZ=!0,this.controlsTransform.space="world",this.controlsOrbit=new ld(e,t),this.controlsOrbit.enabled=!1,this.controlsOrbit.mouseButtons={LEFT:2,MIDDLE:2,RIGHT:0},this.controlsOrbit.zoomSpeed=3,this.controlsOrbit.minDistance=10,this.controlsOrbit.maxDistance=1e3;var i=this;this.controlsTransform.addEventListener("mouseDown",function(){i.controlsOrbit.enabled=!1,i.saveSelectedObject()}),this.controlsTransform.addEventListener("mouseUp",function(){i.controlsOrbit.enabled=!0,i.updateSelectedObject()}),this.controlsTransform.addEventListener("objectChange",function(){i.controlsTransform.moved=!0}),this.controlsOrbit.addEventListener("start",function(){i.controlsOrbit.moved=!1}),this.controlsOrbit.addEventListener("change",function(){i.controlsOrbit.moved=!0})}mouseDown(e,t){t.mouse.setPosition("down",t.mouse.getPosition(e,t)),this.controlsTransform.moved=!1,this.controlsTransform.setTranslationSnap(t.mouse.snap),this.controlsTransform.setScaleSnap(t.mouse.snap),this.controlsTransform.setRotationSnap(t.mouse.snap>1?Math.PI/12:null)}mouseMove(e,t){t.mouse.setPosition("move",t.mouse.getPosition(e,t))}mouseUp(e,t){var i=t.mouse.clickObject(e,t);if(t.mouse.setPosition("up",t.mouse.getPosition(e,t)),e.button==2&&(t.mouse.mode="erase"),t.mouse.mode=="draw")if(t.selectedObject==null||i){if(i)this.controlsTransform.moved==!1&&this.controlsOrbit.moved==!1&&(t.level.deselectLevel(t),t.selectedObject=i,t.selectedObject.select(!0),this.controlsTransform.attach(i),t.selectedObject.getClass()!="player"&&window.dispatchEvent(new CustomEvent("selectObjectType",{detail:{type:t.selectedObject.getClass(),checkNull:!1}})),window.dispatchEvent(new CustomEvent("setSelectedObject",{detail:t.selectedObject})));else if(this.controlsOrbit.moved==!1){var o=app.levelEditor.selectedObjectType,r={class:o,isStatic:!0,position:{x:t.mouse.snapToValue(t.mouse.down.x,t.mouse.snap),y:t.mouse.snapToValue(t.mouse.down.y,t.mouse.snap),z:0},rotation:{x:0,y:0,z:0},scale:{x:t.BOX_SIZE,y:t.BOX_SIZE,z:t.BOX_SIZE}};t.level.deselectLevel(t),t.selectedObject=t.level.entityFactory.createObject(o),t.level.setObjectProperties(t.selectedObject,r),t.level.addObject(t.selectedObject,t),t.levelHistory.save("Added "+o,t),t.selectedObject.select(!0),this.controlsTransform.attach(t.selectedObject),window.dispatchEvent(new CustomEvent("setSelectedObject",{detail:t.selectedObject}))}}else this.controlsTransform.moved==!1&&this.controlsOrbit.moved==!1&&(t.level.deselectLevel(app),this.controlsTransform.detach(),window.dispatchEvent(new CustomEvent("setSelectedObject")));else t.mouse.mode=="erase"&&(this.controlsOrbit.moved==!1&&(t.levelEditor.eraseTarget(e,t),t.level.deselectLevel(t),t.levelHistory.save("Erased object",t),this.controlsTransform.detach(),window.dispatchEvent(new CustomEvent("setSelectedObject"))),t.mouse.mode=t.mouse.prevMode)}eraseTarget(e,t){var i=t.mouse.clickObject(e,t);i!=null&&i.getClass()!="player"&&(i.select(!0),t.level.removeObject(i,t,!0))}duplicateSelectedObject(){app.selectedObject&&(app.selectedObject.select(!1),app.selectedObject=app.level.duplicateObject(app.selectedObject,app),app.selectedObject.position.y+=16,app.selectedObject.select(!0),app.levelEditor.controlsTransform.attach(app.selectedObject),app.levelEditor.setMode("translate"),app.levelHistory.save("Duplicated object",app))}deleteSelectedObject(){app.selectedObject&&(app.level.removeObject(app.selectedObject,app),app.levelEditor.controlsTransform.detach(),app.levelHistory.save("Deleted object",app),window.dispatchEvent(new CustomEvent("setSelectedObject")))}saveLevel(){app.levelEditor.controlsTransform.detach(),app.resetScene(app),app.level.deselectLevel(app),app.level.saveLevelData(app)}exitLevel(){app.levelHistory.history.length>2?window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:"Would you like to <em>save</em> your level?",inputs:[{value:"No",type:"button",callback:function(){app.levelEditor.saveAndExitLevelEditor(!1),window.dispatchEvent(new CustomEvent("closePopup"))}},{value:"Yes",type:"button",callback:function(){app.levelEditor.saveAndExitLevelEditor(!0),window.dispatchEvent(new CustomEvent("closePopup"))}}]}})):app.levelEditor.saveAndExitLevelEditor(!1)}saveAndExitLevelEditor(e){app.levelEditor.controlsOrbit.enabled=!1,app.levelEditor.controlsOrbit.reset(),app.levelEditor.controlsTransform.detach(),app.play=!1,e==!0&&app.levelEditor.saveLevel(),app.level.clearLevel(app),app.levelHistory.clear(),app.player.removeCheckpoint(),app.player.setPosition({x:0,y:0,z:0}),app.levelEditor.controlsOrbit.enabled=!1,window.dispatchEvent(new CustomEvent("setPage",{detail:"level-manager"}))}undo(){app.levelEditor.controlsTransform.detach(),app.levelHistory.undo(app),window.dispatchEvent(new CustomEvent("setSelectedObject"))}redo(){app.levelHistory.redo(app),window.dispatchEvent(new CustomEvent("setSelectedObject"))}rewind(){app.level.retryLevel(app),app.level.deselectLevel(app),app.pauseLevel(),window.dispatchEvent(new CustomEvent("setSelectedObject"))}saveSelectedObject(){var e=app.selectedObject;e&&(e.position0=e.position.clone(),e.scale0=e.scale.clone(),e.rotation0=e.rotation.clone())}resetZAxis(){app.selectedObject&&(app.selectedObject.position.z=0,this.updateSelectedObject())}updateSelectedObject(){var e=app.selectedObject;e.position.z==0?e.body.collisionFilter.mask=-1:e.body.collisionFilter.mask=0,e.setPosition(e.getPosition());var t=e.rotation.z;e.setRotation(0,!1),e.setBodyScale(e.scale.x/e.scale0.x,e.scale.y/e.scale0.y),e.setRotation(t,!1),e.setScale(e.getScale()),e.setRotation(e.getRotation()),app.levelHistory.save("Object updated",app)}setMode(e){this.controlsTransform.setMode(e),e=="translate"?(this.controlsTransform.showX=!0,this.controlsTransform.showY=!0,this.controlsTransform.showZ=!0):e=="scale"?(this.controlsTransform.showX=!0,this.controlsTransform.showY=!0,this.controlsTransform.showZ=!0):e=="rotate"&&(this.controlsTransform.showX=!1,this.controlsTransform.showY=!1,this.controlsTransform.showZ=!0)}selectObjectType(e,t=!0){app.selectedObject!=null&&t==!0&&(app.selectedObject=app.level.changeObjectType(app.selectedObject,e,app),app.selectedObject.select(!0),app.levelEditor.controlsTransform.attach(app.selectedObject),app.levelHistory.save("Changed object to "+e,app),window.dispatchEvent(new CustomEvent("setSelectedObject",{detail:app.selectedObject}))),app.levelEditor.selectedObjectType=e}toggleSelectedObjectStaticState(){app.selectedObject.toggleStatic(),app.selectedObject=app.level.refreshObject(app.selectedObject,app),app.selectedObject.select(!0),app.levelEditor.controlsTransform.attach(app.selectedObject),app.levelHistory.save("Updated object state",app),window.dispatchEvent(new CustomEvent("setSelectedObject",{detail:app.selectedObject}))}}let Sd=class extends hp{constructor(n){super(),n=Object.assign({type:"div",class:"CSS2DObject",text:"Hello, World!"},n),this.element=document.createElement(n.type),this.element.className=n.class,this.setText(n.text),this.addEventListener("added",(function(e){e.target.parent.addEventListener("removed",this.removeFromParent.bind(this))}).bind(this))}setText(n){this.element.innerHTML=n}hideText(){this.visible=!1}showText(){this.visible=!0}};class kd{constructor(e){this.network=e,this.players=new pt,this.tweens=new Wo,this.smooth=!0,this.tick=10,this.network.on("peer_open",this.onPeerOpen.bind(this)),this.network.on("peer_close",this.onPeerClose.bind(this)),this.network.on("peer_disconnected",this.onPeerDisconnected.bind(this)),this.network.on("connection_open",this.onConnectionOpen.bind(this)),this.network.on("connection_close",this.onConnectionClose.bind(this)),this.network.on("connection_data",this.onConnectionData.bind(this))}update(e,t){this.isHost()&&this.sendHostDataToGuests(),this.checkHeartbeat()}render(e,t){this.tweens.update()}onPeerOpen(e){if(this.isHost()){var t=app.storage.getSettings();app.player.setText(t.name)}}onPeerClose(e){this.players.clear()}onPeerDisconnected(e){}onConnectionOpen(e){this.isHost()&&this.addPlayerFromConnection(e.connection)}onConnectionClose(e){this.isHost()?this.removePlayerFromConnection(e.connection):this.players.clear()}onConnectionData(e){e.connection.metadata.time=e.data.time,e.data.type=="players"&&(this.isHost()?this.updatePlayerFromGuest(e.data):this.updatePlayersFromHost(e.data))}checkHeartbeat(){this.network.connections.forEach((function(e){var t=this.getTime()-e.metadata.time;t>5e3&&e.close()}).bind(this))}updatePlayerFromGuest(e){var t=this.getPlayer(e.players[0]);this.updatePlayer(t,e.players[0])}updatePlayersFromHost(e){if(e.players.length-1!=this.players.children.length){var t=this.players.children.filter(function(r){return!e.players.some(function(s){return r.uuid===s.uuid})});t.forEach(function(r){r.removeFromParent()})}for(var i=e.players.length-1;i>=0;i--)if(e.players[i].uuid!=app.player.uuid){var o=this.getPlayer(e.players[i]);o==null&&(o=this.addPlayer(e.players[i])),this.updatePlayer(o,e.players[i]),this.sendGuestDataToHost()}}setHost(e){this.host=e}isHost(){return this.host!=null}sendHostDataToGuests(){this.updateLocalPlayer();for(var e={type:"players",players:[this.playerToJSON(app.player)],time:this.getTime()},t=this.players.children.length-1;t>=0;t--){var i=this.players.children[t];e.players.push(this.playerToJSON(i))}this.network.connections.forEach(function(o){o.send(e)})}sendGuestDataToHost(){this.updateLocalPlayer();var e={type:"players",players:[this.playerToJSON(app.player)],time:this.getTime()};this.network.connections.forEach(function(t){t.send(e)})}addPlayerFromConnection(e){return this.addPlayer(e.metadata)}removePlayerFromConnection(e){return this.removePlayer(e.metadata.uuid)}getPlayer(e){var t=this.players.getObjectByProperty("uuid",e.uuid);return t}addPlayer(e){var t=this.getPlayer(e);return t==null&&(t=new rr,t.visible=!1,t.setText(e.name),t.add(new Sd({text:t.text})),t.positionPrev=t.position.clone(),t.positionNext=t.position.clone(),t.rotationPrev=t.rotation.clone(),t.rotationNext=t.rotation.clone(),t.uuid=e.uuid,t.light.removeFromParent(),this.players.add(t)),t}updatePlayer(e,t){e&&(e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.rotationPrev.z=e.rotation.z,e.positionNext.x=t.position.x,e.positionNext.y=t.position.y,e.rotationNext.z=t.rotation.z,e.scale.x=t.scale.x,e.scale.y=t.scale.y,e.scale.z=t.scale.z,e.level=t.level,e.skin.url!=t.skin&&e.addTexture({url:t.skin}),e.visible=app.level.name==e.level,this.tween({object:{alpha:0},to:{alpha:1},duration:1e3/this.tick,onUpdate:(function(i){e.position.x=e.positionPrev.x+(e.positionNext.x-e.positionPrev.x)*(this.smooth==!0?i.alpha:1),e.position.y=e.positionPrev.y+(e.positionNext.y-e.positionPrev.y)*(this.smooth==!0?i.alpha:1),e.rotation.z=e.rotationPrev.z+(e.rotationNext.z-e.rotationPrev.z)*(this.smooth==!0?i.alpha:1)}).bind(this)}).start())}tween(e){var t=new Zo(e.object,this.tweens).to(e.to,e.duration).dynamic(e.dynamic).easing(e.easing).interpolation(e.interpolation).onStart(e.onStart).onUpdate(e.onUpdate).onComplete(e.onComplete);return t}updateLocalPlayer(){app.player.level=app.level.name,app.player.skin.url.startsWith("data:")&&(app.player.skin.url="png/custom.png")}removePlayer(e){var t=this.players.getObjectByProperty("uuid",e);return t&&t.removeFromParent(),t}setTick(e){this.tick=e}playerToJSON(e){return{uuid:e.uuid,position:{x:e.position.x,y:e.position.y,z:0},rotation:{x:0,y:0,z:e.rotation.z},scale:{x:e.scale.x,y:e.scale.y,z:e.scale.z},name:e.text,skin:e.skin.url,level:e.level}}getConnectionByUUID(e){var t;return app.network.connections.forEach(function(i){e==i.metadata.uuid&&(t=i)}),t}closeConnectionByUUID(e){if(this.isHost()){var t=this.getConnectionByUUID(e);t.close()}}getTime(){return new Date().getTime()}}class Cd{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const t of this._parts)e.push(t);return _d(e).buffer}}function _d(n){let e=0;for(const o of n)e+=o.byteLength;const t=new Uint8Array(e);let i=0;for(const o of n){const r=new Uint8Array(o.buffer,o.byteOffset,o.byteLength);t.set(r,i),i+=o.byteLength}return t}function bs(n){return new Ed(n).unpack()}function ws(n){const e=new Td,t=e.pack(n);return t instanceof Promise?t.then(()=>e.getBuffer()):e.getBuffer()}class Ed{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let t;if((t=e^160)<=15)return this.unpack_raw(t);if((t=e^176)<=15)return this.unpack_string(t);if((t=e^144)<=15)return this.unpack_array(t);if((t=e^128)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),t=(e[0]&255)*256+(e[1]&255);return this.index+=2,t}unpack_uint32(){const e=this.read(4),t=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,t}unpack_uint64(){const e=this.read(8),t=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,t}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t}unpack_string(e){const t=this.read(e);let i=0,o="",r,s;for(;i<e;)r=t[i],r<160?(s=r,i++):(r^192)<32?(s=(r&31)<<6|t[i+1]&63,i+=2):(r^224)<16?(s=(r&15)<<12|(t[i+1]&63)<<6|t[i+2]&63,i+=3):(s=(r&7)<<18|(t[i+1]&63)<<12|(t[i+2]&63)<<6|t[i+3]&63,i+=4),o+=String.fromCodePoint(s);return this.index+=e,o}unpack_array(e){const t=new Array(e);for(let i=0;i<e;i++)t[i]=this.unpack();return t}unpack_map(e){const t={};for(let i=0;i<e;i++){const o=this.unpack();t[o]=this.unpack()}return t}unpack_float(){const e=this.unpack_uint32(),t=e>>31,i=(e>>23&255)-127,o=e&8388607|8388608;return(t===0?1:-1)*o*2**(i-23)}unpack_double(){const e=this.unpack_uint32(),t=this.unpack_uint32(),i=e>>31,o=(e>>20&2047)-1023,r=(e&1048575|1048576)*2**(o-20)+t*2**(o-52);return(i===0?1:-1)*r}read(e){const t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")}}class Td{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const t=e.constructor;if(e instanceof Array){const i=this.pack_array(e);if(i instanceof Promise)return i.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const i=e;this.pack_bin(new Uint8Array(i.buffer,i.byteOffset,i.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(i=>{this.pack_bin(new Uint8Array(i)),this._bufferBuilder.flush()});if(t==Object||t.toString().startsWith("class")){const i=this.pack_object(e);if(i instanceof Promise)return i.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${t.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const t=e.length;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this._bufferBuilder.append(218),this.pack_uint16(t);else if(t<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(t);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const t=this._textEncoder.encode(e),i=t.length;if(i<=15)this.pack_uint8(176+i);else if(i<=65535)this._bufferBuilder.append(216),this.pack_uint16(i);else if(i<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(i);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_array(e){const t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this._bufferBuilder.append(220),this.pack_uint16(t);else if(t<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(t);else throw new Error("Invalid length");const i=o=>{if(o<t){const r=this.pack(e[o]);return r instanceof Promise?r.then(()=>i(o+1)):i(o+1)}};return i(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let t=0;e<0&&(t=1,e=-e);const i=Math.floor(Math.log(e)/Math.LN2),o=e/2**i-1,r=Math.floor(o*2**52),s=2**32,a=t<<31|i+1023<<20|r/s&1048575,c=r%s;this._bufferBuilder.append(203),this.pack_int32(a),this.pack_int32(c)}pack_object(e){const t=Object.keys(e),i=t.length;if(i<=15)this.pack_uint8(128+i);else if(i<=65535)this._bufferBuilder.append(222),this.pack_uint16(i);else if(i<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(i);else throw new Error("Invalid length");const o=r=>{if(r<t.length){const s=t[r];if(e.hasOwnProperty(s)){this.pack(s);const a=this.pack(e[s]);if(a instanceof Promise)return a.then(()=>o(r+1))}return o(r+1)}};return o(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const t=e&4294967295;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_uint64(e){const t=e/4294967296,i=e%2**32;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255),this._bufferBuilder.append((i&4278190080)>>>24),this._bufferBuilder.append((i&16711680)>>>16),this._bufferBuilder.append((i&65280)>>>8),this._bufferBuilder.append(i&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const t=Math.floor(e/4294967296),i=e%2**32;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255),this._bufferBuilder.append((i&4278190080)>>>24),this._bufferBuilder.append((i&16711680)>>>16),this._bufferBuilder.append((i&65280)>>>8),this._bufferBuilder.append(i&255)}constructor(){this._bufferBuilder=new Cd,this._textEncoder=new TextEncoder}}let xs=!0,Ss=!0;function Vi(n,e,t){const i=n.match(e);return i&&i.length>=t&&parseInt(i[t],10)}function ft(n,e,t){if(!n.RTCPeerConnection)return;const i=n.RTCPeerConnection.prototype,o=i.addEventListener;i.addEventListener=function(s,a){if(s!==e)return o.apply(this,arguments);const c=u=>{const d=t(u);d&&(a.handleEvent?a.handleEvent(d):a(d))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(a,c),o.apply(this,[s,c])};const r=i.removeEventListener;i.removeEventListener=function(s,a){if(s!==e||!this._eventMap||!this._eventMap[e])return r.apply(this,arguments);if(!this._eventMap[e].has(a))return r.apply(this,arguments);const c=this._eventMap[e].get(a);return this._eventMap[e].delete(a),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,r.apply(this,[s,c])},Object.defineProperty(i,"on"+e,{get(){return this["_on"+e]},set(s){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),s&&this.addEventListener(e,this["_on"+e]=s)},enumerable:!0,configurable:!0})}function Pd(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(xs=n,n?"adapter.js logging disabled":"adapter.js logging enabled")}function Ad(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(Ss=!n,"adapter.js deprecation warnings "+(n?"disabled":"enabled"))}function ks(){if(typeof window=="object"){if(xs)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function cr(n,e){Ss&&console.warn(n+" is deprecated, please use "+e+" instead.")}function Md(n){const e={browser:null,version:null};if(typeof n>"u"||!n.navigator||!n.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:t}=n;if(t.userAgentData&&t.userAgentData.brands){const i=t.userAgentData.brands.find(o=>o.brand==="Chromium");if(i)return{browser:"chrome",version:parseInt(i.version,10)}}if(t.mozGetUserMedia)e.browser="firefox",e.version=Vi(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||n.isSecureContext===!1&&n.webkitRTCPeerConnection)e.browser="chrome",e.version=Vi(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.RTCPeerConnection&&t.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=Vi(t.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=n.RTCRtpTransceiver&&"currentDirection"in n.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function Cs(n){return Object.prototype.toString.call(n)==="[object Object]"}function _s(n){return Cs(n)?Object.keys(n).reduce(function(e,t){const i=Cs(n[t]),o=i?_s(n[t]):n[t],r=i&&!Object.keys(o).length;return o===void 0||r?e:Object.assign(e,{[t]:o})},{}):n}function pr(n,e,t){!e||t.has(e.id)||(t.set(e.id,e),Object.keys(e).forEach(i=>{i.endsWith("Id")?pr(n,n.get(e[i]),t):i.endsWith("Ids")&&e[i].forEach(o=>{pr(n,n.get(o),t)})}))}function Es(n,e,t){const i=t?"outbound-rtp":"inbound-rtp",o=new Map;if(e===null)return o;const r=[];return n.forEach(s=>{s.type==="track"&&s.trackIdentifier===e.id&&r.push(s)}),r.forEach(s=>{n.forEach(a=>{a.type===i&&a.trackId===s.id&&pr(n,a,o)})}),o}const Ts=ks;function Ps(n,e){const t=n&&n.navigator;if(!t.mediaDevices)return;const i=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const c={};return Object.keys(a).forEach(u=>{if(u==="require"||u==="advanced"||u==="mediaSource")return;const d=typeof a[u]=="object"?a[u]:{ideal:a[u]};d.exact!==void 0&&typeof d.exact=="number"&&(d.min=d.max=d.exact);const f=function(p,l){return p?p+l.charAt(0).toUpperCase()+l.slice(1):l==="deviceId"?"sourceId":l};if(d.ideal!==void 0){c.optional=c.optional||[];let p={};typeof d.ideal=="number"?(p[f("min",u)]=d.ideal,c.optional.push(p),p={},p[f("max",u)]=d.ideal,c.optional.push(p)):(p[f("",u)]=d.ideal,c.optional.push(p))}d.exact!==void 0&&typeof d.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[f("",u)]=d.exact):["min","max"].forEach(p=>{d[p]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[f(p,u)]=d[p])})}),a.advanced&&(c.optional=(c.optional||[]).concat(a.advanced)),c},o=function(a,c){if(e.version>=61)return c(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){const u=function(d,f,p){f in d&&!(p in d)&&(d[p]=d[f],delete d[f])};a=JSON.parse(JSON.stringify(a)),u(a.audio,"autoGainControl","googAutoGainControl"),u(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=i(a.audio)}if(a&&typeof a.video=="object"){let u=a.video.facingMode;u=u&&(typeof u=="object"?u:{ideal:u});const d=e.version<66;if(u&&(u.exact==="user"||u.exact==="environment"||u.ideal==="user"||u.ideal==="environment")&&!(t.mediaDevices.getSupportedConstraints&&t.mediaDevices.getSupportedConstraints().facingMode&&!d)){delete a.video.facingMode;let f;if(u.exact==="environment"||u.ideal==="environment"?f=["back","rear"]:(u.exact==="user"||u.ideal==="user")&&(f=["front"]),f)return t.mediaDevices.enumerateDevices().then(p=>{p=p.filter(m=>m.kind==="videoinput");let l=p.find(m=>f.some(h=>m.label.toLowerCase().includes(h)));return!l&&p.length&&f.includes("back")&&(l=p[p.length-1]),l&&(a.video.deviceId=u.exact?{exact:l.deviceId}:{ideal:l.deviceId}),a.video=i(a.video),Ts("chrome: "+JSON.stringify(a)),c(a)})}a.video=i(a.video)}return Ts("chrome: "+JSON.stringify(a)),c(a)},r=function(a){return e.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},s=function(a,c,u){o(a,d=>{t.webkitGetUserMedia(d,c,f=>{u&&u(r(f))})})};if(t.getUserMedia=s.bind(t),t.mediaDevices.getUserMedia){const a=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(c){return o(c,u=>a(u).then(d=>{if(u.audio&&!d.getAudioTracks().length||u.video&&!d.getVideoTracks().length)throw d.getTracks().forEach(f=>{f.stop()}),new DOMException("","NotFoundError");return d},d=>Promise.reject(r(d))))}}}function As(n){n.MediaStream=n.MediaStream||n.webkitMediaStream}function Ms(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("ontrack"in n.RTCPeerConnection.prototype)){Object.defineProperty(n.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});const e=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",i=>{let o;n.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(s=>s.track&&s.track.id===i.track.id):o={track:i.track};const r=new Event("track");r.track=i.track,r.receiver=o,r.transceiver={receiver:o},r.streams=[t.stream],this.dispatchEvent(r)}),t.stream.getTracks().forEach(i=>{let o;n.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(s=>s.track&&s.track.id===i.id):o={track:i};const r=new Event("track");r.track=i,r.receiver=o,r.transceiver={receiver:o},r.streams=[t.stream],this.dispatchEvent(r)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else ft(n,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function Os(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("getSenders"in n.RTCPeerConnection.prototype)&&"createDTMFSender"in n.RTCPeerConnection.prototype){const e=function(o,r){return{track:r,get dtmf(){return this._dtmf===void 0&&(r.kind==="audio"?this._dtmf=o.createDTMFSender(r):this._dtmf=null),this._dtmf},_pc:o}};if(!n.RTCPeerConnection.prototype.getSenders){n.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const o=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(s,a){let c=o.apply(this,arguments);return c||(c=e(this,s),this._senders.push(c)),c};const r=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(s){r.apply(this,arguments);const a=this._senders.indexOf(s);a!==-1&&this._senders.splice(a,1)}}const t=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],t.apply(this,[o]),o.getTracks().forEach(r=>{this._senders.push(e(this,r))})};const i=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],i.apply(this,[o]),o.getTracks().forEach(r=>{const s=this._senders.find(a=>a.track===r);s&&this._senders.splice(this._senders.indexOf(s),1)})}}else if(typeof n=="object"&&n.RTCPeerConnection&&"getSenders"in n.RTCPeerConnection.prototype&&"createDTMFSender"in n.RTCPeerConnection.prototype&&n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)){const e=n.RTCPeerConnection.prototype.getSenders;n.RTCPeerConnection.prototype.getSenders=function(){const t=e.apply(this,[]);return t.forEach(i=>i._pc=this),t},Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Ds(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender&&n.RTCRtpReceiver))return;if(!("getStats"in n.RTCRtpSender.prototype)){const t=n.RTCPeerConnection.prototype.getSenders;t&&(n.RTCPeerConnection.prototype.getSenders=function(){const o=t.apply(this,[]);return o.forEach(r=>r._pc=this),o});const i=n.RTCPeerConnection.prototype.addTrack;i&&(n.RTCPeerConnection.prototype.addTrack=function(){const o=i.apply(this,arguments);return o._pc=this,o}),n.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(r=>Es(r,o.track,!0))}}if(!("getStats"in n.RTCRtpReceiver.prototype)){const t=n.RTCPeerConnection.prototype.getReceivers;t&&(n.RTCPeerConnection.prototype.getReceivers=function(){const i=t.apply(this,[]);return i.forEach(o=>o._pc=this),i}),ft(n,"track",i=>(i.receiver._pc=i.srcElement,i)),n.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>Es(o,i.track,!1))}}if(!("getStats"in n.RTCRtpSender.prototype&&"getStats"in n.RTCRtpReceiver.prototype))return;const e=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof n.MediaStreamTrack){const t=arguments[0];let i,o,r;return this.getSenders().forEach(s=>{s.track===t&&(i?r=!0:i=s)}),this.getReceivers().forEach(s=>(s.track===t&&(o?r=!0:o=s),s.track===t)),r||i&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function Ls(n){n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(r=>this._shimmedLocalStreams[r][0])};const e=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(r,s){if(!s)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const a=e.apply(this,arguments);return this._shimmedLocalStreams[s.id]?this._shimmedLocalStreams[s.id].indexOf(a)===-1&&this._shimmedLocalStreams[s.id].push(a):this._shimmedLocalStreams[s.id]=[s,a],a};const t=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(r){this._shimmedLocalStreams=this._shimmedLocalStreams||{},r.getTracks().forEach(c=>{if(this.getSenders().find(u=>u.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const s=this.getSenders();t.apply(this,arguments);const a=this.getSenders().filter(c=>s.indexOf(c)===-1);this._shimmedLocalStreams[r.id]=[r].concat(a)};const i=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(r){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[r.id],i.apply(this,arguments)};const o=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(r){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},r&&Object.keys(this._shimmedLocalStreams).forEach(s=>{const a=this._shimmedLocalStreams[s].indexOf(r);a!==-1&&this._shimmedLocalStreams[s].splice(a,1),this._shimmedLocalStreams[s].length===1&&delete this._shimmedLocalStreams[s]}),o.apply(this,arguments)}}function Is(n,e){if(!n.RTCPeerConnection)return;if(n.RTCPeerConnection.prototype.addTrack&&e.version>=65)return Ls(n);const t=n.RTCPeerConnection.prototype.getLocalStreams;n.RTCPeerConnection.prototype.getLocalStreams=function(){const u=t.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(d=>this._reverseStreams[d.id])};const i=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(d=>{if(this.getSenders().find(f=>f.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const d=new n.MediaStream(u.getTracks());this._streams[u.id]=d,this._reverseStreams[d.id]=u,u=d}i.apply(this,[u])};const o=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},n.RTCPeerConnection.prototype.addTrack=function(u,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const f=[].slice.call(arguments,1);if(f.length!==1||!f[0].getTracks().find(l=>l===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(l=>l.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const p=this._streams[d.id];if(p)p.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const l=new n.MediaStream([u]);this._streams[d.id]=l,this._reverseStreams[l.id]=d,this.addStream(l)}return this.getSenders().find(l=>l.track===u)};function r(u,d){let f=d.sdp;return Object.keys(u._reverseStreams||[]).forEach(p=>{const l=u._reverseStreams[p],m=u._streams[l.id];f=f.replace(new RegExp(m.id,"g"),l.id)}),new RTCSessionDescription({type:d.type,sdp:f})}function s(u,d){let f=d.sdp;return Object.keys(u._reverseStreams||[]).forEach(p=>{const l=u._reverseStreams[p],m=u._streams[l.id];f=f.replace(new RegExp(l.id,"g"),m.id)}),new RTCSessionDescription({type:d.type,sdp:f})}["createOffer","createAnswer"].forEach(function(u){const d=n.RTCPeerConnection.prototype[u],f={[u](){const p=arguments;return arguments.length&&typeof arguments[0]=="function"?d.apply(this,[l=>{const m=r(this,l);p[0].apply(null,[m])},l=>{p[1]&&p[1].apply(null,l)},arguments[2]]):d.apply(this,arguments).then(l=>r(this,l))}};n.RTCPeerConnection.prototype[u]=f[u]});const a=n.RTCPeerConnection.prototype.setLocalDescription;n.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=s(this,arguments[0]),a.apply(this,arguments))};const c=Object.getOwnPropertyDescriptor(n.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(n.RTCPeerConnection.prototype,"localDescription",{get(){const u=c.get.apply(this);return u.type===""?u:r(this,u)}}),n.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(u._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let d;Object.keys(this._streams).forEach(f=>{this._streams[f].getTracks().find(p=>u.track===p)&&(d=this._streams[f])}),d&&(d.getTracks().length===1?this.removeStream(this._reverseStreams[d.id]):d.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function dr(n,e){!n.RTCPeerConnection&&n.webkitRTCPeerConnection&&(n.RTCPeerConnection=n.webkitRTCPeerConnection),n.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const i=n.RTCPeerConnection.prototype[t],o={[t](){return arguments[0]=new(t==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};n.RTCPeerConnection.prototype[t]=o[t]})}function Rs(n,e){ft(n,"negotiationneeded",t=>{const i=t.target;if(!((e.version<72||i.getConfiguration&&i.getConfiguration().sdpSemantics==="plan-b")&&i.signalingState!=="stable"))return t})}const Bs=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:Rs,shimAddTrackRemoveTrack:Is,shimAddTrackRemoveTrackWithNative:Ls,shimGetSendersWithDtmf:Os,shimGetUserMedia:Ps,shimMediaStream:As,shimOnTrack:Ms,shimPeerConnection:dr,shimSenderReceiverGetStats:Ds},Symbol.toStringTag,{value:"Module"}));function js(n,e){const t=n&&n.navigator,i=n&&n.MediaStreamTrack;if(t.getUserMedia=function(o,r,s){cr("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),t.mediaDevices.getUserMedia(o).then(r,s)},!(e.version>55&&"autoGainControl"in t.mediaDevices.getSupportedConstraints())){const o=function(s,a,c){a in s&&!(c in s)&&(s[c]=s[a],delete s[a])},r=t.mediaDevices.getUserMedia.bind(t.mediaDevices);if(t.mediaDevices.getUserMedia=function(s){return typeof s=="object"&&typeof s.audio=="object"&&(s=JSON.parse(JSON.stringify(s)),o(s.audio,"autoGainControl","mozAutoGainControl"),o(s.audio,"noiseSuppression","mozNoiseSuppression")),r(s)},i&&i.prototype.getSettings){const s=i.prototype.getSettings;i.prototype.getSettings=function(){const a=s.apply(this,arguments);return o(a,"mozAutoGainControl","autoGainControl"),o(a,"mozNoiseSuppression","noiseSuppression"),a}}if(i&&i.prototype.applyConstraints){const s=i.prototype.applyConstraints;i.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),o(a,"autoGainControl","mozAutoGainControl"),o(a,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[a])}}}}function Od(n,e){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&(n.navigator.mediaDevices.getDisplayMedia=function(t){if(!(t&&t.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return t.video===!0?t.video={mediaSource:e}:t.video.mediaSource=e,n.navigator.mediaDevices.getUserMedia(t)})}function Ns(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function ur(n,e){if(typeof n!="object"||!(n.RTCPeerConnection||n.mozRTCPeerConnection))return;!n.RTCPeerConnection&&n.mozRTCPeerConnection&&(n.RTCPeerConnection=n.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(o){const r=n.RTCPeerConnection.prototype[o],s={[o](){return arguments[0]=new(o==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};n.RTCPeerConnection.prototype[o]=s[o]});const t={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[o,r,s]=arguments;return i.apply(this,[o||null]).then(a=>{if(e.version<53&&!r)try{a.forEach(c=>{c.type=t[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;a.forEach((u,d)=>{a.set(d,Object.assign({},u,{type:t[u.type]||u.type}))})}return a}).then(r,s)}}function Us(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender)||n.RTCRtpSender&&"getStats"in n.RTCRtpSender.prototype)return;const e=n.RTCPeerConnection.prototype.getSenders;e&&(n.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(o=>o._pc=this),i});const t=n.RTCPeerConnection.prototype.addTrack;t&&(n.RTCPeerConnection.prototype.addTrack=function(){const i=t.apply(this,arguments);return i._pc=this,i}),n.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function zs(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender)||n.RTCRtpSender&&"getStats"in n.RTCRtpReceiver.prototype)return;const e=n.RTCPeerConnection.prototype.getReceivers;e&&(n.RTCPeerConnection.prototype.getReceivers=function(){const t=e.apply(this,[]);return t.forEach(i=>i._pc=this),t}),ft(n,"track",t=>(t.receiver._pc=t.srcElement,t)),n.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Fs(n){!n.RTCPeerConnection||"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(e){cr("removeStream","removeTrack"),this.getSenders().forEach(t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)})})}function qs(n){n.DataChannel&&!n.RTCDataChannel&&(n.RTCDataChannel=n.DataChannel)}function Hs(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const e=n.RTCPeerConnection.prototype.addTransceiver;e&&(n.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let t=arguments[1]&&arguments[1].sendEncodings;t===void 0&&(t=[]),t=[...t];const i=t.length>0;i&&t.forEach(r=>{if("rid"in r&&!/^[a-z0-9]{0,16}$/i.test(r.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in r&&!(parseFloat(r.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in r&&!(parseFloat(r.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=e.apply(this,arguments);if(i){const{sender:r}=o,s=r.getParameters();(!("encodings"in s)||s.encodings.length===1&&Object.keys(s.encodings[0]).length===0)&&(s.encodings=t,r.sendEncodings=t,this.setParametersPromises.push(r.setParameters(s).then(()=>{delete r.sendEncodings}).catch(()=>{delete r.sendEncodings})))}return o})}function Vs(n){if(!(typeof n=="object"&&n.RTCRtpSender))return;const e=n.RTCRtpSender.prototype.getParameters;e&&(n.RTCRtpSender.prototype.getParameters=function(){const t=e.apply(this,arguments);return"encodings"in t||(t.encodings=[].concat(this.sendEncodings||[{}])),t})}function Xs(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const e=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function Ws(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const e=n.RTCPeerConnection.prototype.createAnswer;n.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const Zs=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:Hs,shimCreateAnswer:Ws,shimCreateOffer:Xs,shimGetDisplayMedia:Od,shimGetParameters:Vs,shimGetUserMedia:js,shimOnTrack:Ns,shimPeerConnection:ur,shimRTCDataChannel:qs,shimReceiverGetStats:zs,shimRemoveStream:Fs,shimSenderGetStats:Us},Symbol.toStringTag,{value:"Module"}));function Gs(n){if(!(typeof n!="object"||!n.RTCPeerConnection)){if("getLocalStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in n.RTCPeerConnection.prototype)){const e=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addStream=function(t){this._localStreams||(this._localStreams=[]),this._localStreams.includes(t)||this._localStreams.push(t),t.getAudioTracks().forEach(i=>e.call(this,i,t)),t.getVideoTracks().forEach(i=>e.call(this,i,t))},n.RTCPeerConnection.prototype.addTrack=function(t,...i){return i&&i.forEach(o=>{this._localStreams?this._localStreams.includes(o)||this._localStreams.push(o):this._localStreams=[o]}),e.apply(this,arguments)}}"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(t===-1)return;this._localStreams.splice(t,1);const i=e.getTracks();this.getSenders().forEach(o=>{i.includes(o.track)&&this.removeTrack(o)})})}}function Ys(n){if(!(typeof n!="object"||!n.RTCPeerConnection)&&("getRemoteStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in n.RTCPeerConnection.prototype))){Object.defineProperty(n.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(t){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=i=>{i.streams.forEach(o=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(o))return;this._remoteStreams.push(o);const r=new Event("addstream");r.stream=o,this.dispatchEvent(r)})})}});const e=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){const t=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(o=>{if(t._remoteStreams||(t._remoteStreams=[]),t._remoteStreams.indexOf(o)>=0)return;t._remoteStreams.push(o);const r=new Event("addstream");r.stream=o,t.dispatchEvent(r)})}),e.apply(t,arguments)}}}function Ks(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const e=n.RTCPeerConnection.prototype,t=e.createOffer,i=e.createAnswer,o=e.setLocalDescription,r=e.setRemoteDescription,s=e.addIceCandidate;e.createOffer=function(c,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=t.apply(this,[d]);return u?(f.then(c,u),Promise.resolve()):f},e.createAnswer=function(c,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=i.apply(this,[d]);return u?(f.then(c,u),Promise.resolve()):f};let a=function(c,u,d){const f=o.apply(this,[c]);return d?(f.then(u,d),Promise.resolve()):f};e.setLocalDescription=a,a=function(c,u,d){const f=r.apply(this,[c]);return d?(f.then(u,d),Promise.resolve()):f},e.setRemoteDescription=a,a=function(c,u,d){const f=s.apply(this,[c]);return d?(f.then(u,d),Promise.resolve()):f},e.addIceCandidate=a}function Qs(n){const e=n&&n.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const t=e.mediaDevices,i=t.getUserMedia.bind(t);e.mediaDevices.getUserMedia=o=>i(Js(o))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(t,i,o){e.mediaDevices.getUserMedia(t).then(i,o)}).bind(e))}function Js(n){return n&&n.video!==void 0?Object.assign({},n,{video:_s(n.video)}):n}function $s(n){if(!n.RTCPeerConnection)return;const e=n.RTCPeerConnection;n.RTCPeerConnection=function(t,i){if(t&&t.iceServers){const o=[];for(let r=0;r<t.iceServers.length;r++){let s=t.iceServers[r];s.urls===void 0&&s.url?(cr("RTCIceServer.url","RTCIceServer.urls"),s=JSON.parse(JSON.stringify(s)),s.urls=s.url,delete s.url,o.push(s)):o.push(t.iceServers[r])}t.iceServers=o}return new e(t,i)},n.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(n.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function ea(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function ta(n){const e=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(t){if(t){typeof t.offerToReceiveAudio<"u"&&(t.offerToReceiveAudio=!!t.offerToReceiveAudio);const i=this.getTransceivers().find(r=>r.receiver.track.kind==="audio");t.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):t.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof t.offerToReceiveVideo<"u"&&(t.offerToReceiveVideo=!!t.offerToReceiveVideo);const o=this.getTransceivers().find(r=>r.receiver.track.kind==="video");t.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):t.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function ia(n){typeof n!="object"||n.AudioContext||(n.AudioContext=n.webkitAudioContext)}const na=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:ia,shimCallbacksAPI:Ks,shimConstraints:Js,shimCreateOfferLegacy:ta,shimGetUserMedia:Qs,shimLocalStreamsAPI:Gs,shimRTCIceServerUrls:$s,shimRemoteStreamsAPI:Ys,shimTrackEventTransceiver:ea},Symbol.toStringTag,{value:"Module"}));var hr={exports:{}},Cb=hr.exports;(function(n){"use strict";const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(t){return t.trim().split(`
`).map(i=>i.trim())},e.splitSections=function(t){return t.split(`
m=`).map((i,o)=>(o>0?"m="+i:i).trim()+`\r
`)},e.getDescription=function(t){const i=e.splitSections(t);return i&&i[0]},e.getMediaSections=function(t){const i=e.splitSections(t);return i.shift(),i},e.matchPrefix=function(t,i){return e.splitLines(t).filter(o=>o.indexOf(i)===0)},e.parseCandidate=function(t){let i;t.indexOf("a=candidate:")===0?i=t.substring(12).split(" "):i=t.substring(10).split(" ");const o={foundation:i[0],component:{1:"rtp",2:"rtcp"}[i[1]]||i[1],protocol:i[2].toLowerCase(),priority:parseInt(i[3],10),ip:i[4],address:i[4],port:parseInt(i[5],10),type:i[7]};for(let r=8;r<i.length;r+=2)switch(i[r]){case"raddr":o.relatedAddress=i[r+1];break;case"rport":o.relatedPort=parseInt(i[r+1],10);break;case"tcptype":o.tcpType=i[r+1];break;case"ufrag":o.ufrag=i[r+1],o.usernameFragment=i[r+1];break;default:o[i[r]]===void 0&&(o[i[r]]=i[r+1]);break}return o},e.writeCandidate=function(t){const i=[];i.push(t.foundation);const o=t.component;o==="rtp"?i.push(1):o==="rtcp"?i.push(2):i.push(o),i.push(t.protocol.toUpperCase()),i.push(t.priority),i.push(t.address||t.ip),i.push(t.port);const r=t.type;return i.push("typ"),i.push(r),r!=="host"&&t.relatedAddress&&t.relatedPort&&(i.push("raddr"),i.push(t.relatedAddress),i.push("rport"),i.push(t.relatedPort)),t.tcpType&&t.protocol.toLowerCase()==="tcp"&&(i.push("tcptype"),i.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(i.push("ufrag"),i.push(t.usernameFragment||t.ufrag)),"candidate:"+i.join(" ")},e.parseIceOptions=function(t){return t.substring(14).split(" ")},e.parseRtpMap=function(t){let i=t.substring(9).split(" ");const o={payloadType:parseInt(i.shift(),10)};return i=i[0].split("/"),o.name=i[0],o.clockRate=parseInt(i[1],10),o.channels=i.length===3?parseInt(i[2],10):1,o.numChannels=o.channels,o},e.writeRtpMap=function(t){let i=t.payloadType;t.preferredPayloadType!==void 0&&(i=t.preferredPayloadType);const o=t.channels||t.numChannels||1;return"a=rtpmap:"+i+" "+t.name+"/"+t.clockRate+(o!==1?"/"+o:"")+`\r
`},e.parseExtmap=function(t){const i=t.substring(9).split(" ");return{id:parseInt(i[0],10),direction:i[0].indexOf("/")>0?i[0].split("/")[1]:"sendrecv",uri:i[1],attributes:i.slice(2).join(" ")}},e.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&t.direction!=="sendrecv"?"/"+t.direction:"")+" "+t.uri+(t.attributes?" "+t.attributes:"")+`\r
`},e.parseFmtp=function(t){const i={};let o;const r=t.substring(t.indexOf(" ")+1).split(";");for(let s=0;s<r.length;s++)o=r[s].trim().split("="),i[o[0].trim()]=o[1];return i},e.writeFmtp=function(t){let i="",o=t.payloadType;if(t.preferredPayloadType!==void 0&&(o=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){const r=[];Object.keys(t.parameters).forEach(s=>{t.parameters[s]!==void 0?r.push(s+"="+t.parameters[s]):r.push(s)}),i+="a=fmtp:"+o+" "+r.join(";")+`\r
`}return i},e.parseRtcpFb=function(t){const i=t.substring(t.indexOf(" ")+1).split(" ");return{type:i.shift(),parameter:i.join(" ")}},e.writeRtcpFb=function(t){let i="",o=t.payloadType;return t.preferredPayloadType!==void 0&&(o=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach(r=>{i+="a=rtcp-fb:"+o+" "+r.type+(r.parameter&&r.parameter.length?" "+r.parameter:"")+`\r
`}),i},e.parseSsrcMedia=function(t){const i=t.indexOf(" "),o={ssrc:parseInt(t.substring(7,i),10)},r=t.indexOf(":",i);return r>-1?(o.attribute=t.substring(i+1,r),o.value=t.substring(r+1)):o.attribute=t.substring(i+1),o},e.parseSsrcGroup=function(t){const i=t.substring(13).split(" ");return{semantics:i.shift(),ssrcs:i.map(o=>parseInt(o,10))}},e.getMid=function(t){const i=e.matchPrefix(t,"a=mid:")[0];if(i)return i.substring(6)},e.parseFingerprint=function(t){const i=t.substring(14).split(" ");return{algorithm:i[0].toLowerCase(),value:i[1].toUpperCase()}},e.getDtlsParameters=function(t,i){return{role:"auto",fingerprints:e.matchPrefix(t+i,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(t,i){let o="a=setup:"+i+`\r
`;return t.fingerprints.forEach(r=>{o+="a=fingerprint:"+r.algorithm+" "+r.value+`\r
`}),o},e.parseCryptoLine=function(t){const i=t.substring(9).split(" ");return{tag:parseInt(i[0],10),cryptoSuite:i[1],keyParams:i[2],sessionParams:i.slice(3)}},e.writeCryptoLine=function(t){return"a=crypto:"+t.tag+" "+t.cryptoSuite+" "+(typeof t.keyParams=="object"?e.writeCryptoKeyParams(t.keyParams):t.keyParams)+(t.sessionParams?" "+t.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(t){if(t.indexOf("inline:")!==0)return null;const i=t.substring(7).split("|");return{keyMethod:"inline",keySalt:i[0],lifeTime:i[1],mkiValue:i[2]?i[2].split(":")[0]:void 0,mkiLength:i[2]?i[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(t){return t.keyMethod+":"+t.keySalt+(t.lifeTime?"|"+t.lifeTime:"")+(t.mkiValue&&t.mkiLength?"|"+t.mkiValue+":"+t.mkiLength:"")},e.getCryptoParameters=function(t,i){return e.matchPrefix(t+i,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(t,i){const o=e.matchPrefix(t+i,"a=ice-ufrag:")[0],r=e.matchPrefix(t+i,"a=ice-pwd:")[0];return o&&r?{usernameFragment:o.substring(12),password:r.substring(10)}:null},e.writeIceParameters=function(t){let i="a=ice-ufrag:"+t.usernameFragment+`\r
a=ice-pwd:`+t.password+`\r
`;return t.iceLite&&(i+=`a=ice-lite\r
`),i},e.parseRtpParameters=function(t){const i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},o=e.splitLines(t)[0].split(" ");i.profile=o[2];for(let s=3;s<o.length;s++){const a=o[s],c=e.matchPrefix(t,"a=rtpmap:"+a+" ")[0];if(c){const u=e.parseRtpMap(c),d=e.matchPrefix(t,"a=fmtp:"+a+" ");switch(u.parameters=d.length?e.parseFmtp(d[0]):{},u.rtcpFeedback=e.matchPrefix(t,"a=rtcp-fb:"+a+" ").map(e.parseRtcpFb),i.codecs.push(u),u.name.toUpperCase()){case"RED":case"ULPFEC":i.fecMechanisms.push(u.name.toUpperCase());break;default:break}}}e.matchPrefix(t,"a=extmap:").forEach(s=>{i.headerExtensions.push(e.parseExtmap(s))});const r=e.matchPrefix(t,"a=rtcp-fb:* ").map(e.parseRtcpFb);return i.codecs.forEach(s=>{r.forEach(a=>{s.rtcpFeedback.find(c=>c.type===a.type&&c.parameter===a.parameter)||s.rtcpFeedback.push(a)})}),i},e.writeRtpDescription=function(t,i){let o="";o+="m="+t+" ",o+=i.codecs.length>0?"9":"0",o+=" "+(i.profile||"UDP/TLS/RTP/SAVPF")+" ",o+=i.codecs.map(s=>s.preferredPayloadType!==void 0?s.preferredPayloadType:s.payloadType).join(" ")+`\r
`,o+=`c=IN IP4 0.0.0.0\r
`,o+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,i.codecs.forEach(s=>{o+=e.writeRtpMap(s),o+=e.writeFmtp(s),o+=e.writeRtcpFb(s)});let r=0;return i.codecs.forEach(s=>{s.maxptime>r&&(r=s.maxptime)}),r>0&&(o+="a=maxptime:"+r+`\r
`),i.headerExtensions&&i.headerExtensions.forEach(s=>{o+=e.writeExtmap(s)}),o},e.parseRtpEncodingParameters=function(t){const i=[],o=e.parseRtpParameters(t),r=o.fecMechanisms.indexOf("RED")!==-1,s=o.fecMechanisms.indexOf("ULPFEC")!==-1,a=e.matchPrefix(t,"a=ssrc:").map(p=>e.parseSsrcMedia(p)).filter(p=>p.attribute==="cname"),c=a.length>0&&a[0].ssrc;let u;const d=e.matchPrefix(t,"a=ssrc-group:FID").map(p=>p.substring(17).split(" ").map(l=>parseInt(l,10)));d.length>0&&d[0].length>1&&d[0][0]===c&&(u=d[0][1]),o.codecs.forEach(p=>{if(p.name.toUpperCase()==="RTX"&&p.parameters.apt){let l={ssrc:c,codecPayloadType:parseInt(p.parameters.apt,10)};c&&u&&(l.rtx={ssrc:u}),i.push(l),r&&(l=JSON.parse(JSON.stringify(l)),l.fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},i.push(l))}}),i.length===0&&c&&i.push({ssrc:c});let f=e.matchPrefix(t,"b=");return f.length&&(f[0].indexOf("b=TIAS:")===0?f=parseInt(f[0].substring(7),10):f[0].indexOf("b=AS:")===0?f=parseInt(f[0].substring(5),10)*1e3*.95-50*40*8:f=void 0,i.forEach(p=>{p.maxBitrate=f})),i},e.parseRtcpParameters=function(t){const i={},o=e.matchPrefix(t,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="cname")[0];o&&(i.cname=o.value,i.ssrc=o.ssrc);const r=e.matchPrefix(t,"a=rtcp-rsize");i.reducedSize=r.length>0,i.compound=r.length===0;const s=e.matchPrefix(t,"a=rtcp-mux");return i.mux=s.length>0,i},e.writeRtcpParameters=function(t){let i="";return t.reducedSize&&(i+=`a=rtcp-rsize\r
`),t.mux&&(i+=`a=rtcp-mux\r
`),t.ssrc!==void 0&&t.cname&&(i+="a=ssrc:"+t.ssrc+" cname:"+t.cname+`\r
`),i},e.parseMsid=function(t){let i;const o=e.matchPrefix(t,"a=msid:");if(o.length===1)return i=o[0].substring(7).split(" "),{stream:i[0],track:i[1]};const r=e.matchPrefix(t,"a=ssrc:").map(s=>e.parseSsrcMedia(s)).filter(s=>s.attribute==="msid");if(r.length>0)return i=r[0].value.split(" "),{stream:i[0],track:i[1]}},e.parseSctpDescription=function(t){const i=e.parseMLine(t),o=e.matchPrefix(t,"a=max-message-size:");let r;o.length>0&&(r=parseInt(o[0].substring(19),10)),isNaN(r)&&(r=65536);const s=e.matchPrefix(t,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substring(12),10),protocol:i.fmt,maxMessageSize:r};const a=e.matchPrefix(t,"a=sctpmap:");if(a.length>0){const c=a[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:r}}},e.writeSctpDescription=function(t,i){let o=[];return t.protocol!=="DTLS/SCTP"?o=["m="+t.kind+" 9 "+t.protocol+" "+i.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+i.port+`\r
`]:o=["m="+t.kind+" 9 "+t.protocol+" "+i.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+i.port+" "+i.protocol+` 65535\r
`],i.maxMessageSize!==void 0&&o.push("a=max-message-size:"+i.maxMessageSize+`\r
`),o.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(t,i,o){let r;const s=i!==void 0?i:2;return t?r=t:r=e.generateSessionId(),`v=0\r
o=`+(o||"thisisadapterortc")+" "+r+" "+s+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(t,i){const o=e.splitLines(t);for(let r=0;r<o.length;r++)switch(o[r]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return o[r].substring(2);default:}return i?e.getDirection(i):"sendrecv"},e.getKind=function(t){return e.splitLines(t)[0].split(" ")[0].substring(2)},e.isRejected=function(t){return t.split(" ",2)[1]==="0"},e.parseMLine=function(t){const i=e.splitLines(t)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},e.parseOLine=function(t){const i=e.matchPrefix(t,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},e.isValidSDP=function(t){if(typeof t!="string"||t.length===0)return!1;const i=e.splitLines(t);for(let o=0;o<i.length;o++)if(i[o].length<2||i[o].charAt(1)!=="=")return!1;return!0},n.exports=e})(hr);var ra=hr.exports;const At=Go(ra),Dd=ep({__proto__:null,default:At},[ra]);function Xi(n){if(!n.RTCIceCandidate||n.RTCIceCandidate&&"foundation"in n.RTCIceCandidate.prototype)return;const e=n.RTCIceCandidate;n.RTCIceCandidate=function(t){if(typeof t=="object"&&t.candidate&&t.candidate.indexOf("a=")===0&&(t=JSON.parse(JSON.stringify(t)),t.candidate=t.candidate.substring(2)),t.candidate&&t.candidate.length){const i=new e(t),o=At.parseCandidate(t.candidate);for(const r in o)r in i||Object.defineProperty(i,r,{value:o[r]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new e(t)},n.RTCIceCandidate.prototype=e.prototype,ft(n,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new n.RTCIceCandidate(t.candidate),writable:"false"}),t))}function fr(n){!n.RTCIceCandidate||n.RTCIceCandidate&&"relayProtocol"in n.RTCIceCandidate.prototype||ft(n,"icecandidate",e=>{if(e.candidate){const t=At.parseCandidate(e.candidate.candidate);t.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e})}function Wi(n,e){if(!n.RTCPeerConnection)return;"sctp"in n.RTCPeerConnection.prototype||Object.defineProperty(n.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const t=function(a){if(!a||!a.sdp)return!1;const c=At.splitSections(a.sdp);return c.shift(),c.some(u=>{const d=At.parseMLine(u);return d&&d.kind==="application"&&d.protocol.indexOf("SCTP")!==-1})},i=function(a){const c=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const u=parseInt(c[1],10);return u!==u?-1:u},o=function(a){let c=65536;return e.browser==="firefox"&&(e.version<57?a===-1?c=16384:c=2147483637:e.version<60?c=e.version===57?65535:65536:c=2147483637),c},r=function(a,c){let u=65536;e.browser==="firefox"&&e.version===57&&(u=65535);const d=At.matchPrefix(a.sdp,"a=max-message-size:");return d.length>0?u=parseInt(d[0].substring(19),10):e.browser==="firefox"&&c!==-1&&(u=2147483637),u},s=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:a}=this.getConfiguration();a==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(t(arguments[0])){const a=i(arguments[0]),c=o(a),u=r(arguments[0],a);let d;c===0&&u===0?d=Number.POSITIVE_INFINITY:c===0||u===0?d=Math.max(c,u):d=Math.min(c,u);const f={};Object.defineProperty(f,"maxMessageSize",{get(){return d}}),this._sctp=f}return s.apply(this,arguments)}}function Zi(n){if(!(n.RTCPeerConnection&&"createDataChannel"in n.RTCPeerConnection.prototype))return;function e(i,o){const r=i.send;i.send=function(){const s=arguments[0],a=s.length||s.size||s.byteLength;if(i.readyState==="open"&&o.sctp&&a>o.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+o.sctp.maxMessageSize+" bytes)");return r.apply(i,arguments)}}const t=n.RTCPeerConnection.prototype.createDataChannel;n.RTCPeerConnection.prototype.createDataChannel=function(){const i=t.apply(this,arguments);return e(i,this),i},ft(n,"datachannel",i=>(e(i.channel,i.target),i))}function mr(n){if(!n.RTCPeerConnection||"connectionState"in n.RTCPeerConnection.prototype)return;const e=n.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(t=>{const i=e[t];e[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=o=>{const r=o.target;if(r._lastConnectionState!==r.connectionState){r._lastConnectionState=r.connectionState;const s=new Event("connectionstatechange",o);r.dispatchEvent(s)}return o},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}})}function gr(n,e){if(!n.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const t=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=i.sdp.split(`
`).filter(r=>r.trim()!=="a=extmap-allow-mixed").join(`
`);n.RTCSessionDescription&&i instanceof n.RTCSessionDescription?arguments[0]=new n.RTCSessionDescription({type:i.type,sdp:o}):i.sdp=o}return t.apply(this,arguments)}}function Gi(n,e){if(!(n.RTCPeerConnection&&n.RTCPeerConnection.prototype))return;const t=n.RTCPeerConnection.prototype.addIceCandidate;!t||t.length===0||(n.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Yi(n,e){if(!(n.RTCPeerConnection&&n.RTCPeerConnection.prototype))return;const t=n.RTCPeerConnection.prototype.setLocalDescription;!t||t.length===0||(n.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return t.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?t.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>t.apply(this,[o]))})}const Ld=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:gr,shimAddIceCandidateNullOrEmpty:Gi,shimConnectionState:mr,shimMaxMessageSize:Wi,shimParameterlessSetLocalDescription:Yi,shimRTCIceCandidate:Xi,shimRTCIceCandidateRelayProtocol:fr,shimSendThrowTypeError:Zi},Symbol.toStringTag,{value:"Module"}));function Id({window:n}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const t=ks,i=Md(n),o={browserDetails:i,commonShim:Ld,extractVersion:Vi,disableLog:Pd,disableWarnings:Ad,sdp:Dd};switch(i.browser){case"chrome":if(!Bs||!dr||!e.shimChrome)return t("Chrome shim is not included in this adapter release."),o;if(i.version===null)return t("Chrome shim can not determine version, not shimming."),o;t("adapter.js shimming chrome."),o.browserShim=Bs,Gi(n,i),Yi(n,i),Ps(n,i),As(n,i),dr(n,i),Ms(n,i),Is(n,i),Os(n,i),Ds(n,i),Rs(n,i),Xi(n,i),fr(n,i),mr(n,i),Wi(n,i),Zi(n,i),gr(n,i);break;case"firefox":if(!Zs||!ur||!e.shimFirefox)return t("Firefox shim is not included in this adapter release."),o;t("adapter.js shimming firefox."),o.browserShim=Zs,Gi(n,i),Yi(n,i),js(n,i),ur(n,i),Ns(n,i),Fs(n,i),Us(n,i),zs(n,i),qs(n,i),Hs(n,i),Vs(n,i),Xs(n,i),Ws(n,i),Xi(n,i),mr(n,i),Wi(n,i),Zi(n,i);break;case"safari":if(!na||!e.shimSafari)return t("Safari shim is not included in this adapter release."),o;t("adapter.js shimming safari."),o.browserShim=na,Gi(n,i),Yi(n,i),$s(n,i),ta(n,i),Ks(n,i),Gs(n,i),Ys(n,i),ea(n,i),Qs(n,i),ia(n,i),Xi(n,i),fr(n,i),Wi(n,i),Zi(n,i),gr(n,i);break;default:t("Unsupported browser!");break}return o}const oa=Id({window:typeof window>"u"?void 0:window});var mt=4294967295;function Rd(n,e,t){var i=t/4294967296,o=t;n.setUint32(e,i),n.setUint32(e+4,o)}function sa(n,e,t){var i=Math.floor(t/4294967296),o=t;n.setUint32(e,i),n.setUint32(e+4,o)}function aa(n,e){var t=n.getInt32(e),i=n.getUint32(e+4);return t*4294967296+i}function Bd(n,e){var t=n.getUint32(e),i=n.getUint32(e+4);return t*4294967296+i}var vr={},yr,br,wr,Ki=(typeof process>"u"||((yr=process==null?void 0:vr)===null||yr===void 0?void 0:yr.TEXT_ENCODING)!=="never")&&typeof TextEncoder<"u"&&typeof TextDecoder<"u";function la(n){for(var e=n.length,t=0,i=0;i<e;){var o=n.charCodeAt(i++);if(o&4294967168)if(!(o&4294965248))t+=2;else{if(o>=55296&&o<=56319&&i<e){var r=n.charCodeAt(i);(r&64512)===56320&&(++i,o=((o&1023)<<10)+(r&1023)+65536)}o&4294901760?t+=4:t+=3}else{t++;continue}}return t}function jd(n,e,t){for(var i=n.length,o=t,r=0;r<i;){var s=n.charCodeAt(r++);if(s&4294967168)if(!(s&4294965248))e[o++]=s>>6&31|192;else{if(s>=55296&&s<=56319&&r<i){var a=n.charCodeAt(r);(a&64512)===56320&&(++r,s=((s&1023)<<10)+(a&1023)+65536)}s&4294901760?(e[o++]=s>>18&7|240,e[o++]=s>>12&63|128,e[o++]=s>>6&63|128):(e[o++]=s>>12&15|224,e[o++]=s>>6&63|128)}else{e[o++]=s;continue}e[o++]=s&63|128}}var Jt=Ki?new TextEncoder:void 0,Nd=Ki?typeof process<"u"&&((br=process==null?void 0:vr)===null||br===void 0?void 0:br.TEXT_ENCODING)!=="force"?200:0:mt;function Ud(n,e,t){e.set(Jt.encode(n),t)}function zd(n,e,t){Jt.encodeInto(n,e.subarray(t))}var Fd=Jt!=null&&Jt.encodeInto?zd:Ud,qd=4096;function ca(n,e,t){for(var i=e,o=i+t,r=[],s="";i<o;){var a=n[i++];if(!(a&128))r.push(a);else if((a&224)===192){var c=n[i++]&63;r.push((a&31)<<6|c)}else if((a&240)===224){var c=n[i++]&63,u=n[i++]&63;r.push((a&31)<<12|c<<6|u)}else if((a&248)===240){var c=n[i++]&63,u=n[i++]&63,d=n[i++]&63,f=(a&7)<<18|c<<12|u<<6|d;f>65535&&(f-=65536,r.push(f>>>10&1023|55296),f=56320|f&1023),r.push(f)}else r.push(a);r.length>=qd&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return r.length>0&&(s+=String.fromCharCode.apply(String,r)),s}var Hd=Ki?new TextDecoder:null,Vd=Ki?typeof process<"u"&&((wr=process==null?void 0:vr)===null||wr===void 0?void 0:wr.TEXT_DECODER)!=="force"?200:0:mt;function Xd(n,e,t){var i=n.subarray(e,e+t);return Hd.decode(i)}var Qi=function(){function n(e,t){this.type=e,this.data=t}return n}(),Wd=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(i[r]=o[r])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ze=function(n){Wd(e,n);function e(t){var i=n.call(this,t)||this,o=Object.create(e.prototype);return Object.setPrototypeOf(i,o),Object.defineProperty(i,"name",{configurable:!0,enumerable:!1,value:e.name}),i}return e}(Error),Zd=-1,Gd=4294967296-1,Yd=17179869184-1;function Kd(n){var e=n.sec,t=n.nsec;if(e>=0&&t>=0&&e<=Yd)if(t===0&&e<=Gd){var i=new Uint8Array(4),o=new DataView(i.buffer);return o.setUint32(0,e),i}else{var r=e/4294967296,s=e&4294967295,i=new Uint8Array(8),o=new DataView(i.buffer);return o.setUint32(0,t<<2|r&3),o.setUint32(4,s),i}else{var i=new Uint8Array(12),o=new DataView(i.buffer);return o.setUint32(0,t),sa(o,4,e),i}}function Qd(n){var e=n.getTime(),t=Math.floor(e/1e3),i=(e-t*1e3)*1e6,o=Math.floor(i/1e9);return{sec:t+o,nsec:i-o*1e9}}function Jd(n){if(n instanceof Date){var e=Qd(n);return Kd(e)}else return null}function $d(n){var e=new DataView(n.buffer,n.byteOffset,n.byteLength);switch(n.byteLength){case 4:{var t=e.getUint32(0),i=0;return{sec:t,nsec:i}}case 8:{var o=e.getUint32(0),r=e.getUint32(4),t=(o&3)*4294967296+r,i=o>>>2;return{sec:t,nsec:i}}case 12:{var t=aa(e,4),i=e.getUint32(0);return{sec:t,nsec:i}}default:throw new Ze("Unrecognized data size for timestamp (expected 4, 8, or 12): ".concat(n.length))}}function eu(n){var e=$d(n);return new Date(e.sec*1e3+e.nsec/1e6)}var tu={type:Zd,encode:Jd,decode:eu},pa=function(){function n(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(tu)}return n.prototype.register=function(e){var t=e.type,i=e.encode,o=e.decode;if(t>=0)this.encoders[t]=i,this.decoders[t]=o;else{var r=1+t;this.builtInEncoders[r]=i,this.builtInDecoders[r]=o}},n.prototype.tryToEncode=function(e,t){for(var i=0;i<this.builtInEncoders.length;i++){var o=this.builtInEncoders[i];if(o!=null){var r=o(e,t);if(r!=null){var s=-1-i;return new Qi(s,r)}}}for(var i=0;i<this.encoders.length;i++){var o=this.encoders[i];if(o!=null){var r=o(e,t);if(r!=null){var s=i;return new Qi(s,r)}}}return e instanceof Qi?e:null},n.prototype.decode=function(e,t,i){var o=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return o?o(e,t,i):new Qi(t,e)},n.defaultCodec=new n,n}();function Ji(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n instanceof ArrayBuffer?new Uint8Array(n):Uint8Array.from(n)}function iu(n){if(n instanceof ArrayBuffer)return new DataView(n);var e=Ji(n);return new DataView(e.buffer,e.byteOffset,e.byteLength)}var nu=100,ru=2048,_b=function(){function n(e,t,i,o,r,s,a,c){e===void 0&&(e=pa.defaultCodec),t===void 0&&(t=void 0),i===void 0&&(i=nu),o===void 0&&(o=ru),r===void 0&&(r=!1),s===void 0&&(s=!1),a===void 0&&(a=!1),c===void 0&&(c=!1),this.extensionCodec=e,this.context=t,this.maxDepth=i,this.initialBufferSize=o,this.sortKeys=r,this.forceFloat32=s,this.ignoreUndefined=a,this.forceIntegerToFloat=c,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return n.prototype.reinitializeState=function(){this.pos=0},n.prototype.encodeSharedRef=function(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)},n.prototype.encode=function(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)},n.prototype.doEncode=function(e,t){if(t>this.maxDepth)throw new Error("Too deep objects in depth ".concat(t));e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.encodeObject(e,t)},n.prototype.ensureBufferSizeToWrite=function(e){var t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(t*2)},n.prototype.resizeBuffer=function(e){var t=new ArrayBuffer(e),i=new Uint8Array(t),o=new DataView(t);i.set(this.bytes),this.view=o,this.bytes=i},n.prototype.encodeNil=function(){this.writeU8(192)},n.prototype.encodeBoolean=function(e){e===!1?this.writeU8(194):this.writeU8(195)},n.prototype.encodeNumber=function(e){Number.isSafeInteger(e)&&!this.forceIntegerToFloat?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))},n.prototype.writeStringHeader=function(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error("Too long string: ".concat(e," bytes in UTF-8"))},n.prototype.encodeString=function(e){var t=5,i=e.length;if(i>Nd){var o=la(e);this.ensureBufferSizeToWrite(t+o),this.writeStringHeader(o),Fd(e,this.bytes,this.pos),this.pos+=o}else{var o=la(e);this.ensureBufferSizeToWrite(t+o),this.writeStringHeader(o),jd(e,this.bytes,this.pos),this.pos+=o}},n.prototype.encodeObject=function(e,t){var i=this.extensionCodec.tryToEncode(e,this.context);if(i!=null)this.encodeExtension(i);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,t);else throw new Error("Unrecognized object: ".concat(Object.prototype.toString.apply(e)))},n.prototype.encodeBinary=function(e){var t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else if(t<4294967296)this.writeU8(198),this.writeU32(t);else throw new Error("Too large binary: ".concat(t));var i=Ji(e);this.writeU8a(i)},n.prototype.encodeArray=function(e,t){var i=e.length;if(i<16)this.writeU8(144+i);else if(i<65536)this.writeU8(220),this.writeU16(i);else if(i<4294967296)this.writeU8(221),this.writeU32(i);else throw new Error("Too large array: ".concat(i));for(var o=0,r=e;o<r.length;o++){var s=r[o];this.doEncode(s,t+1)}},n.prototype.countWithoutUndefined=function(e,t){for(var i=0,o=0,r=t;o<r.length;o++){var s=r[o];e[s]!==void 0&&i++}return i},n.prototype.encodeMap=function(e,t){var i=Object.keys(e);this.sortKeys&&i.sort();var o=this.ignoreUndefined?this.countWithoutUndefined(e,i):i.length;if(o<16)this.writeU8(128+o);else if(o<65536)this.writeU8(222),this.writeU16(o);else if(o<4294967296)this.writeU8(223),this.writeU32(o);else throw new Error("Too large map object: ".concat(o));for(var r=0,s=i;r<s.length;r++){var a=s[r],c=e[a];this.ignoreUndefined&&c===void 0||(this.encodeString(a),this.doEncode(c,t+1))}},n.prototype.encodeExtension=function(e){var t=e.data.length;if(t===1)this.writeU8(212);else if(t===2)this.writeU8(213);else if(t===4)this.writeU8(214);else if(t===8)this.writeU8(215);else if(t===16)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else if(t<4294967296)this.writeU8(201),this.writeU32(t);else throw new Error("Too large extension object: ".concat(t));this.writeI8(e.type),this.writeU8a(e.data)},n.prototype.writeU8=function(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++},n.prototype.writeU8a=function(e){var t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t},n.prototype.writeI8=function(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++},n.prototype.writeU16=function(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2},n.prototype.writeI16=function(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2},n.prototype.writeU32=function(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4},n.prototype.writeI32=function(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4},n.prototype.writeF32=function(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4},n.prototype.writeF64=function(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8},n.prototype.writeU64=function(e){this.ensureBufferSizeToWrite(8),Rd(this.view,this.pos,e),this.pos+=8},n.prototype.writeI64=function(e){this.ensureBufferSizeToWrite(8),sa(this.view,this.pos,e),this.pos+=8},n}();function xr(n){return"".concat(n<0?"-":"","0x").concat(Math.abs(n).toString(16).padStart(2,"0"))}var ou=16,su=16,au=function(){function n(e,t){e===void 0&&(e=ou),t===void 0&&(t=su),this.maxKeyLength=e,this.maxLengthPerKey=t,this.hit=0,this.miss=0,this.caches=[];for(var i=0;i<this.maxKeyLength;i++)this.caches.push([])}return n.prototype.canBeCached=function(e){return e>0&&e<=this.maxKeyLength},n.prototype.find=function(e,t,i){var o=this.caches[i-1];e:for(var r=0,s=o;r<s.length;r++){for(var a=s[r],c=a.bytes,u=0;u<i;u++)if(c[u]!==e[t+u])continue e;return a.str}return null},n.prototype.store=function(e,t){var i=this.caches[e.length-1],o={bytes:e,str:t};i.length>=this.maxLengthPerKey?i[Math.random()*i.length|0]=o:i.push(o)},n.prototype.decode=function(e,t,i){var o=this.find(e,t,i);if(o!=null)return this.hit++,o;this.miss++;var r=ca(e,t,i),s=Uint8Array.prototype.slice.call(e,t,t+i);return this.store(s,r),r},n}(),lu=function(n,e,t,i){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{u(i.next(d))}catch(f){s(f)}}function c(d){try{u(i.throw(d))}catch(f){s(f)}}function u(d){d.done?r(d.value):o(d.value).then(a,c)}u((i=i.apply(n,e||[])).next())})},Sr=function(n,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,o,r,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(d){return c([u,d])}}function c(u){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,o&&(r=u[0]&2?o.return:u[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,u[1])).done)return r;switch(o=0,r&&(u=[u[0]&2,r.value]),u[0]){case 0:case 1:r=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){t.label=u[1];break}if(u[0]===6&&t.label<r[1]){t.label=r[1],r=u;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(u);break}r[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(d){u=[6,d],o=0}finally{i=r=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},da=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=n[r]&&function(s){return new Promise(function(a,c){s=n[r](s),o(a,c,s.done,s.value)})}}function o(r,s,a,c){Promise.resolve(c).then(function(u){r({value:u,done:a})},s)}},Mt=function(n){return this instanceof Mt?(this.v=n,this):new Mt(n)},cu=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,r=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(p){i[p]&&(o[p]=function(l){return new Promise(function(m,h){r.push([p,l,m,h])>1||a(p,l)})})}function a(p,l){try{c(i[p](l))}catch(m){f(r[0][3],m)}}function c(p){p.value instanceof Mt?Promise.resolve(p.value.v).then(u,d):f(r[0][2],p)}function u(p){a("next",p)}function d(p){a("throw",p)}function f(p,l){p(l),r.shift(),r.length&&a(r[0][0],r[0][1])}},pu=function(n){var e=typeof n;return e==="string"||e==="number"},$t=-1,kr=new DataView(new ArrayBuffer(0)),du=new Uint8Array(kr.buffer),Cr=function(){try{kr.getInt8(0)}catch(n){return n.constructor}throw new Error("never reached")}(),ua=new Cr("Insufficient data"),uu=new au,Eb=function(){function n(e,t,i,o,r,s,a,c){e===void 0&&(e=pa.defaultCodec),t===void 0&&(t=void 0),i===void 0&&(i=mt),o===void 0&&(o=mt),r===void 0&&(r=mt),s===void 0&&(s=mt),a===void 0&&(a=mt),c===void 0&&(c=uu),this.extensionCodec=e,this.context=t,this.maxStrLength=i,this.maxBinLength=o,this.maxArrayLength=r,this.maxMapLength=s,this.maxExtLength=a,this.keyDecoder=c,this.totalPos=0,this.pos=0,this.view=kr,this.bytes=du,this.headByte=$t,this.stack=[]}return n.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=$t,this.stack.length=0},n.prototype.setBuffer=function(e){this.bytes=Ji(e),this.view=iu(this.bytes),this.pos=0},n.prototype.appendBuffer=function(e){if(this.headByte===$t&&!this.hasRemaining(1))this.setBuffer(e);else{var t=this.bytes.subarray(this.pos),i=Ji(e),o=new Uint8Array(t.length+i.length);o.set(t),o.set(i,t.length),this.setBuffer(o)}},n.prototype.hasRemaining=function(e){return this.view.byteLength-this.pos>=e},n.prototype.createExtraByteError=function(e){var t=this,i=t.view,o=t.pos;return new RangeError("Extra ".concat(i.byteLength-o," of ").concat(i.byteLength," byte(s) found at buffer[").concat(e,"]"))},n.prototype.decode=function(e){this.reinitializeState(),this.setBuffer(e);var t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t},n.prototype.decodeMulti=function(e){return Sr(this,function(t){switch(t.label){case 0:this.reinitializeState(),this.setBuffer(e),t.label=1;case 1:return this.hasRemaining(1)?[4,this.doDecodeSync()]:[3,3];case 2:return t.sent(),[3,1];case 3:return[2]}})},n.prototype.decodeAsync=function(e){var t,i,o,r;return lu(this,void 0,void 0,function(){var s,a,c,u,d,f,p,l;return Sr(this,function(m){switch(m.label){case 0:s=!1,m.label=1;case 1:m.trys.push([1,6,7,12]),t=da(e),m.label=2;case 2:return[4,t.next()];case 3:if(i=m.sent(),!!i.done)return[3,5];if(c=i.value,s)throw this.createExtraByteError(this.totalPos);this.appendBuffer(c);try{a=this.doDecodeSync(),s=!0}catch(h){if(!(h instanceof Cr))throw h}this.totalPos+=this.pos,m.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return u=m.sent(),o={error:u},[3,12];case 7:return m.trys.push([7,,10,11]),i&&!i.done&&(r=t.return)?[4,r.call(t)]:[3,9];case 8:m.sent(),m.label=9;case 9:return[3,11];case 10:if(o)throw o.error;return[7];case 11:return[7];case 12:if(s){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,a]}throw d=this,f=d.headByte,p=d.pos,l=d.totalPos,new RangeError("Insufficient data in parsing ".concat(xr(f)," at ").concat(l," (").concat(p," in the current buffer)"))}})})},n.prototype.decodeArrayStream=function(e){return this.decodeMultiAsync(e,!0)},n.prototype.decodeStream=function(e){return this.decodeMultiAsync(e,!1)},n.prototype.decodeMultiAsync=function(e,t){return cu(this,arguments,function(){var i,o,r,s,a,c,u,d,f;return Sr(this,function(p){switch(p.label){case 0:i=t,o=-1,p.label=1;case 1:p.trys.push([1,13,14,19]),r=da(e),p.label=2;case 2:return[4,Mt(r.next())];case 3:if(s=p.sent(),!!s.done)return[3,12];if(a=s.value,t&&o===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(a),i&&(o=this.readArraySize(),i=!1,this.complete()),p.label=4;case 4:p.trys.push([4,9,,10]),p.label=5;case 5:return[4,Mt(this.doDecodeSync())];case 6:return[4,p.sent()];case 7:return p.sent(),--o===0?[3,8]:[3,5];case 8:return[3,10];case 9:if(c=p.sent(),!(c instanceof Cr))throw c;return[3,10];case 10:this.totalPos+=this.pos,p.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return u=p.sent(),d={error:u},[3,19];case 14:return p.trys.push([14,,17,18]),s&&!s.done&&(f=r.return)?[4,Mt(f.call(r))]:[3,16];case 15:p.sent(),p.label=16;case 16:return[3,18];case 17:if(d)throw d.error;return[7];case 18:return[7];case 19:return[2]}})})},n.prototype.doDecodeSync=function(){e:for(;;){var e=this.readHeadByte(),t=void 0;if(e>=224)t=e-256;else if(e<192)if(e<128)t=e;else if(e<144){var i=e-128;if(i!==0){this.pushMapState(i),this.complete();continue e}else t={}}else if(e<160){var i=e-144;if(i!==0){this.pushArrayState(i),this.complete();continue e}else t=[]}else{var o=e-160;t=this.decodeUtf8String(o,0)}else if(e===192)t=null;else if(e===194)t=!1;else if(e===195)t=!0;else if(e===202)t=this.readF32();else if(e===203)t=this.readF64();else if(e===204)t=this.readU8();else if(e===205)t=this.readU16();else if(e===206)t=this.readU32();else if(e===207)t=this.readU64();else if(e===208)t=this.readI8();else if(e===209)t=this.readI16();else if(e===210)t=this.readI32();else if(e===211)t=this.readI64();else if(e===217){var o=this.lookU8();t=this.decodeUtf8String(o,1)}else if(e===218){var o=this.lookU16();t=this.decodeUtf8String(o,2)}else if(e===219){var o=this.lookU32();t=this.decodeUtf8String(o,4)}else if(e===220){var i=this.readU16();if(i!==0){this.pushArrayState(i),this.complete();continue e}else t=[]}else if(e===221){var i=this.readU32();if(i!==0){this.pushArrayState(i),this.complete();continue e}else t=[]}else if(e===222){var i=this.readU16();if(i!==0){this.pushMapState(i),this.complete();continue e}else t={}}else if(e===223){var i=this.readU32();if(i!==0){this.pushMapState(i),this.complete();continue e}else t={}}else if(e===196){var i=this.lookU8();t=this.decodeBinary(i,1)}else if(e===197){var i=this.lookU16();t=this.decodeBinary(i,2)}else if(e===198){var i=this.lookU32();t=this.decodeBinary(i,4)}else if(e===212)t=this.decodeExtension(1,0);else if(e===213)t=this.decodeExtension(2,0);else if(e===214)t=this.decodeExtension(4,0);else if(e===215)t=this.decodeExtension(8,0);else if(e===216)t=this.decodeExtension(16,0);else if(e===199){var i=this.lookU8();t=this.decodeExtension(i,1)}else if(e===200){var i=this.lookU16();t=this.decodeExtension(i,2)}else if(e===201){var i=this.lookU32();t=this.decodeExtension(i,4)}else throw new Ze("Unrecognized type byte: ".concat(xr(e)));this.complete();for(var r=this.stack;r.length>0;){var s=r[r.length-1];if(s.type===0)if(s.array[s.position]=t,s.position++,s.position===s.size)r.pop(),t=s.array;else continue e;else if(s.type===1){if(!pu(t))throw new Ze("The type of key must be string or number but "+typeof t);if(t==="__proto__")throw new Ze("The key __proto__ is not allowed");s.key=t,s.type=2;continue e}else if(s.map[s.key]=t,s.readCount++,s.readCount===s.size)r.pop(),t=s.map;else{s.key=null,s.type=1;continue e}}return t}},n.prototype.readHeadByte=function(){return this.headByte===$t&&(this.headByte=this.readU8()),this.headByte},n.prototype.complete=function(){this.headByte=$t},n.prototype.readArraySize=function(){var e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new Ze("Unrecognized array type byte: ".concat(xr(e)))}}},n.prototype.pushMapState=function(e){if(e>this.maxMapLength)throw new Ze("Max length exceeded: map length (".concat(e,") > maxMapLengthLength (").concat(this.maxMapLength,")"));this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})},n.prototype.pushArrayState=function(e){if(e>this.maxArrayLength)throw new Ze("Max length exceeded: array length (".concat(e,") > maxArrayLength (").concat(this.maxArrayLength,")"));this.stack.push({type:0,size:e,array:new Array(e),position:0})},n.prototype.decodeUtf8String=function(e,t){var i;if(e>this.maxStrLength)throw new Ze("Max length exceeded: UTF-8 byte length (".concat(e,") > maxStrLength (").concat(this.maxStrLength,")"));if(this.bytes.byteLength<this.pos+t+e)throw ua;var o=this.pos+t,r;return this.stateIsMapKey()&&!((i=this.keyDecoder)===null||i===void 0)&&i.canBeCached(e)?r=this.keyDecoder.decode(this.bytes,o,e):e>Vd?r=Xd(this.bytes,o,e):r=ca(this.bytes,o,e),this.pos+=t+e,r},n.prototype.stateIsMapKey=function(){if(this.stack.length>0){var e=this.stack[this.stack.length-1];return e.type===1}return!1},n.prototype.decodeBinary=function(e,t){if(e>this.maxBinLength)throw new Ze("Max length exceeded: bin length (".concat(e,") > maxBinLength (").concat(this.maxBinLength,")"));if(!this.hasRemaining(e+t))throw ua;var i=this.pos+t,o=this.bytes.subarray(i,i+e);return this.pos+=t+e,o},n.prototype.decodeExtension=function(e,t){if(e>this.maxExtLength)throw new Ze("Max length exceeded: ext length (".concat(e,") > maxExtLength (").concat(this.maxExtLength,")"));var i=this.view.getInt8(this.pos+t),o=this.decodeBinary(e,t+1);return this.extensionCodec.decode(o,i,this.context)},n.prototype.lookU8=function(){return this.view.getUint8(this.pos)},n.prototype.lookU16=function(){return this.view.getUint16(this.pos)},n.prototype.lookU32=function(){return this.view.getUint32(this.pos)},n.prototype.readU8=function(){var e=this.view.getUint8(this.pos);return this.pos++,e},n.prototype.readI8=function(){var e=this.view.getInt8(this.pos);return this.pos++,e},n.prototype.readU16=function(){var e=this.view.getUint16(this.pos);return this.pos+=2,e},n.prototype.readI16=function(){var e=this.view.getInt16(this.pos);return this.pos+=2,e},n.prototype.readU32=function(){var e=this.view.getUint32(this.pos);return this.pos+=4,e},n.prototype.readI32=function(){var e=this.view.getInt32(this.pos);return this.pos+=4,e},n.prototype.readU64=function(){var e=Bd(this.view,this.pos);return this.pos+=8,e},n.prototype.readI64=function(){var e=aa(this.view,this.pos);return this.pos+=8,e},n.prototype.readF32=function(){var e=this.view.getFloat32(this.pos);return this.pos+=4,e},n.prototype.readF64=function(){var e=this.view.getFloat64(this.pos);return this.pos+=8,e},n}();function gt(n,e,t,i){Object.defineProperty(n,e,{get:t,set:i,enumerable:!0,configurable:!0})}class ha{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const t=[],i=e.byteLength,o=Math.ceil(i/this.chunkedMTU);let r=0,s=0;for(;s<i;){const a=Math.min(i,s+this.chunkedMTU),c=e.slice(s,a),u={__peerData:this._dataCount,n:r,data:c,total:o};t.push(u),s=a,r++}return this._dataCount++,t}}}function hu(n){let e=0;for(const o of n)e+=o.byteLength;const t=new Uint8Array(e);let i=0;for(const o of n)t.set(o,i),i+=o.byteLength;return t}const _r=oa.default||oa,ei=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const n=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(n)?n==="chrome"?e>=this.minChromeVersion:n==="firefox"?e>=this.minFirefoxVersion:n==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return _r.browserDetails.browser}getVersion(){return _r.browserDetails.version||0}isUnifiedPlanSupported(){const n=this.getBrowser(),e=_r.browserDetails.version||0;if(n==="chrome"&&e<this.minChromeVersion)return!1;if(n==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let t,i=!1;try{t=new RTCPeerConnection,t.addTransceiver("audio"),i=!0}catch{}finally{t&&t.close()}return i}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},fu=n=>!n||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(n),fa=()=>Math.random().toString(36).slice(2),ma={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class mu extends ha{noop(){}blobToArrayBuffer(e,t){const i=new FileReader;return i.onload=function(o){o.target&&t(o.target.result)},i.readAsArrayBuffer(e),i}binaryStringToArrayBuffer(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i)&255;return t.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=ma,this.browser=ei.getBrowser(),this.browserVersion=ei.getVersion(),this.pack=ws,this.unpack=bs,this.supports=function(){const t={browser:ei.isBrowserSupported(),webRTC:ei.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;let i;try{i=new RTCPeerConnection(ma),t.audioVideo=!0;let o;try{o=i.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!o.ordered;try{o.binaryType="blob",t.binaryBlob=!ei.isIOS}catch{}}catch{}finally{o&&o.close()}}catch{}finally{i&&i.close()}return t}(),this.validateId=fu,this.randomToken=fa}}const De=new mu,gu="PeerJS: ";var ga;(function(n){n[n.Disabled=0]="Disabled",n[n.Errors=1]="Errors",n[n.Warnings=2]="Warnings",n[n.All=3]="All"})(ga||(ga={}));class vu{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...t){const i=[gu,...t];for(const o in i)i[o]instanceof Error&&(i[o]="("+i[o].name+") "+i[o].message);e>=3?console.log(...i):e>=2?console.warn("WARNING",...i):e>=1&&console.error("ERROR",...i)}constructor(){this._logLevel=0}}var q=new vu,Er={},yu=Object.prototype.hasOwnProperty,Pe="~";function ti(){}Object.create&&(ti.prototype=Object.create(null),new ti().__proto__||(Pe=!1));function bu(n,e,t){this.fn=n,this.context=e,this.once=t||!1}function va(n,e,t,i,o){if(typeof t!="function")throw new TypeError("The listener must be a function");var r=new bu(t,i||n,o),s=Pe?Pe+e:e;return n._events[s]?n._events[s].fn?n._events[s]=[n._events[s],r]:n._events[s].push(r):(n._events[s]=r,n._eventsCount++),n}function $i(n,e){--n._eventsCount===0?n._events=new ti:delete n._events[e]}function Ee(){this._events=new ti,this._eventsCount=0}Ee.prototype.eventNames=function(){var n=[],e,t;if(this._eventsCount===0)return n;for(t in e=this._events)yu.call(e,t)&&n.push(Pe?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},Ee.prototype.listeners=function(n){var e=Pe?Pe+n:n,t=this._events[e];if(!t)return[];if(t.fn)return[t.fn];for(var i=0,o=t.length,r=new Array(o);i<o;i++)r[i]=t[i].fn;return r},Ee.prototype.listenerCount=function(n){var e=Pe?Pe+n:n,t=this._events[e];return t?t.fn?1:t.length:0},Ee.prototype.emit=function(n,e,t,i,o,r){var s=Pe?Pe+n:n;if(!this._events[s])return!1;var a=this._events[s],c=arguments.length,u,d;if(a.fn){switch(a.once&&this.removeListener(n,a.fn,void 0,!0),c){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,e),!0;case 3:return a.fn.call(a.context,e,t),!0;case 4:return a.fn.call(a.context,e,t,i),!0;case 5:return a.fn.call(a.context,e,t,i,o),!0;case 6:return a.fn.call(a.context,e,t,i,o,r),!0}for(d=1,u=new Array(c-1);d<c;d++)u[d-1]=arguments[d];a.fn.apply(a.context,u)}else{var f=a.length,p;for(d=0;d<f;d++)switch(a[d].once&&this.removeListener(n,a[d].fn,void 0,!0),c){case 1:a[d].fn.call(a[d].context);break;case 2:a[d].fn.call(a[d].context,e);break;case 3:a[d].fn.call(a[d].context,e,t);break;case 4:a[d].fn.call(a[d].context,e,t,i);break;default:if(!u)for(p=1,u=new Array(c-1);p<c;p++)u[p-1]=arguments[p];a[d].fn.apply(a[d].context,u)}}return!0},Ee.prototype.on=function(n,e,t){return va(this,n,e,t,!1)},Ee.prototype.once=function(n,e,t){return va(this,n,e,t,!0)},Ee.prototype.removeListener=function(n,e,t,i){var o=Pe?Pe+n:n;if(!this._events[o])return this;if(!e)return $i(this,o),this;var r=this._events[o];if(r.fn)r.fn===e&&(!i||r.once)&&(!t||r.context===t)&&$i(this,o);else{for(var s=0,a=[],c=r.length;s<c;s++)(r[s].fn!==e||i&&!r[s].once||t&&r[s].context!==t)&&a.push(r[s]);a.length?this._events[o]=a.length===1?a[0]:a:$i(this,o)}return this},Ee.prototype.removeAllListeners=function(n){var e;return n?(e=Pe?Pe+n:n,this._events[e]&&$i(this,e)):(this._events=new ti,this._eventsCount=0),this},Ee.prototype.off=Ee.prototype.removeListener,Ee.prototype.addListener=Ee.prototype.on,Ee.prefixed=Pe,Ee.EventEmitter=Ee,Er=Ee;var vt={};gt(vt,"ConnectionType",()=>Ge),gt(vt,"PeerErrorType",()=>he),gt(vt,"BaseConnectionErrorType",()=>ii),gt(vt,"DataConnectionErrorType",()=>ni),gt(vt,"SerializationType",()=>Ot),gt(vt,"SocketEventType",()=>Ye),gt(vt,"ServerMessageType",()=>ye);var Ge;(function(n){n.Data="data",n.Media="media"})(Ge||(Ge={}));var he;(function(n){n.BrowserIncompatible="browser-incompatible",n.Disconnected="disconnected",n.InvalidID="invalid-id",n.InvalidKey="invalid-key",n.Network="network",n.PeerUnavailable="peer-unavailable",n.SslUnavailable="ssl-unavailable",n.ServerError="server-error",n.SocketError="socket-error",n.SocketClosed="socket-closed",n.UnavailableID="unavailable-id",n.WebRTC="webrtc"})(he||(he={}));var ii;(function(n){n.NegotiationFailed="negotiation-failed",n.ConnectionClosed="connection-closed"})(ii||(ii={}));var ni;(function(n){n.NotOpenYet="not-open-yet",n.MessageToBig="message-too-big"})(ni||(ni={}));var Ot;(function(n){n.Binary="binary",n.BinaryUTF8="binary-utf8",n.JSON="json",n.None="raw"})(Ot||(Ot={}));var Ye;(function(n){n.Message="message",n.Disconnected="disconnected",n.Error="error",n.Close="close"})(Ye||(Ye={}));var ye;(function(n){n.Heartbeat="HEARTBEAT",n.Candidate="CANDIDATE",n.Offer="OFFER",n.Answer="ANSWER",n.Open="OPEN",n.Error="ERROR",n.IdTaken="ID-TAKEN",n.InvalidKey="INVALID-KEY",n.Leave="LEAVE",n.Expire="EXPIRE"})(ye||(ye={}));var Tr={};Tr=JSON.parse('{"name":"peerjs","version":"1.5.4","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz St\xFCckler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","So\u0308ren Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","browser-minified-msgpack":"dist/serializer.msgpack.mjs","types":"dist/types.d.ts","engines":{"node":">= 14"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-minified-msgpack":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/MsgPack.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit && tsc -p e2e/tsconfig.json --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"jest","test:watch":"jest --watch","coverage":"jest --coverage --collectCoverageFrom=\\"./lib/**\\"","format":"prettier --write .","format:check":"prettier --check .","semantic-release":"semantic-release","e2e":"wdio run e2e/wdio.local.conf.ts","e2e:bstack":"wdio run e2e/wdio.bstack.conf.ts"},"devDependencies":{"@parcel/config-default":"^2.9.3","@parcel/packager-ts":"^2.9.3","@parcel/transformer-typescript-tsc":"^2.9.3","@parcel/transformer-typescript-types":"^2.9.3","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@swc/core":"^1.3.27","@swc/jest":"^0.2.24","@types/jasmine":"^4.3.4","@wdio/browserstack-service":"^8.11.2","@wdio/cli":"^8.11.2","@wdio/globals":"^8.11.2","@wdio/jasmine-framework":"^8.11.2","@wdio/local-runner":"^8.11.2","@wdio/spec-reporter":"^8.11.2","@wdio/types":"^8.10.4","http-server":"^14.1.1","jest":"^29.3.1","jest-environment-jsdom":"^29.3.1","mock-socket":"^9.0.0","parcel":"^2.9.3","prettier":"^3.0.0","semantic-release":"^21.0.0","ts-node":"^10.9.1","typescript":"^5.0.0","wdio-geckodriver-service":"^5.0.1"},"dependencies":{"@msgpack/msgpack":"^2.8.0","eventemitter3":"^4.0.7","peerjs-js-binarypack":"^2.1.0","webrtc-adapter":"^9.0.0"},"alias":{"process":false,"buffer":false}}');class wu extends Er.EventEmitter{constructor(e,t,i,o,r,s=5e3){super(),this.pingInterval=s,this._disconnected=!0,this._messagesQueue=[];const a=e?"wss://":"ws://";this._baseUrl=a+t+":"+i+o+"peerjs?key="+r}start(e,t){this._id=e;const i=`${this._baseUrl}&id=${e}&token=${t}`;this._socket||!this._disconnected||(this._socket=new WebSocket(i+"&version="+Tr.version),this._disconnected=!1,this._socket.onmessage=o=>{let r;try{r=JSON.parse(o.data),q.log("Server message received:",r)}catch{q.log("Invalid server message",o.data);return}this.emit(Ye.Message,r)},this._socket.onclose=o=>{this._disconnected||(q.log("Socket closed.",o),this._cleanup(),this._disconnected=!0,this.emit(Ye.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),q.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){q.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:ye.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const t of e)this.send(t)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(Ye.Error,"Invalid message");return}if(!this._wsOpen())return;const t=JSON.stringify(e);this._socket.send(t)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class ya{constructor(e){this.connection=e}startConnection(e){const t=this._startPeerConnection();if(this.connection.peerConnection=t,this.connection.type===Ge.Media&&e._stream&&this._addTracksToConnection(e._stream,t),e.originator){const i=this.connection,o={ordered:!!e.reliable},r=t.createDataChannel(i.label,o);i._initializeDataChannel(r),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){q.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const t=this.connection.peer,i=this.connection.connectionId,o=this.connection.type,r=this.connection.provider;q.log("Listening for ICE candidates."),e.onicecandidate=s=>{!s.candidate||!s.candidate.candidate||(q.log(`Received ICE candidates for ${t}:`,s.candidate),r.socket.send({type:ye.Candidate,payload:{candidate:s.candidate,type:o,connectionId:i},dst:t}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":q.log("iceConnectionState is failed, closing connections to "+t),this.connection.emitError(ii.NegotiationFailed,"Negotiation of connection to "+t+" failed."),this.connection.close();break;case"closed":q.log("iceConnectionState is closed, closing connections to "+t),this.connection.emitError(ii.ConnectionClosed,"Connection to "+t+" closed."),this.connection.close();break;case"disconnected":q.log("iceConnectionState changed to disconnected on the connection with "+t);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},q.log("Listening for data channel"),e.ondatachannel=s=>{q.log("Received data channel");const a=s.channel;r.getConnection(t,i)._initializeDataChannel(a)},q.log("Listening for remote stream"),e.ontrack=s=>{q.log("Received remote stream");const a=s.streams[0],c=r.getConnection(t,i);if(c.type===Ge.Media){const u=c;this._addStreamToMediaConnection(a,u)}}}cleanup(){q.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const t=e.signalingState!=="closed";let i=!1;const o=this.connection.dataChannel;o&&(i=!!o.readyState&&o.readyState!=="closed"),(t||i)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const i=await e.createOffer(this.connection.options.constraints);q.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(i.sdp=this.connection.options.sdpTransform(i.sdp)||i.sdp);try{await e.setLocalDescription(i),q.log("Set localDescription:",i,`for:${this.connection.peer}`);let o={sdp:i,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Ge.Data){const r=this.connection;o={...o,label:r.label,reliable:r.reliable,serialization:r.serialization}}t.socket.send({type:ye.Offer,payload:o,dst:this.connection.peer})}catch(o){o!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(t.emitError(he.WebRTC,o),q.log("Failed to setLocalDescription, ",o))}}catch(i){t.emitError(he.WebRTC,i),q.log("Failed to createOffer, ",i)}}async _makeAnswer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const i=await e.createAnswer();q.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(i.sdp=this.connection.options.sdpTransform(i.sdp)||i.sdp);try{await e.setLocalDescription(i),q.log("Set localDescription:",i,`for:${this.connection.peer}`),t.socket.send({type:ye.Answer,payload:{sdp:i,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(o){t.emitError(he.WebRTC,o),q.log("Failed to setLocalDescription, ",o)}}catch(i){t.emitError(he.WebRTC,i),q.log("Failed to create answer, ",i)}}async handleSDP(e,t){t=new RTCSessionDescription(t);const i=this.connection.peerConnection,o=this.connection.provider;q.log("Setting remote description",t);const r=this;try{await i.setRemoteDescription(t),q.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await r._makeAnswer()}catch(s){o.emitError(he.WebRTC,s),q.log("Failed to setRemoteDescription, ",s)}}async handleCandidate(e){q.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),q.log(`Added ICE candidate for:${this.connection.peer}`)}catch(t){this.connection.provider.emitError(he.WebRTC,t),q.log("Failed to handleCandidate, ",t)}}_addTracksToConnection(e,t){if(q.log(`add tracks from stream ${e.id} to peer connection`),!t.addTrack)return q.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(i=>{t.addTrack(i,e)})}_addStreamToMediaConnection(e,t){q.log(`add stream ${e.id} to media connection ${t.connectionId}`),t.addStream(e)}}class ba extends Er.EventEmitter{emitError(e,t){q.error("Error:",t),this.emit("error",new xu(`${e}`,t))}}class xu extends Error{constructor(e,t){typeof t=="string"?super(t):(super(),Object.assign(this,t)),this.type=e}}class wa extends ba{get open(){return this._open}constructor(e,t,i){super(),this.peer=e,this.provider=t,this.options=i,this._open=!1,this.metadata=i.metadata}}const Si=class Si extends wa{get type(){return Ge.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,t,i){super(e,t,i),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Si.ID_PREFIX+De.randomToken(),this._negotiator=new ya(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{q.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{q.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){q.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const t=e.type,i=e.payload;switch(e.type){case ye.Answer:this._negotiator.handleSDP(t,i.sdp),this._open=!0;break;case ye.Candidate:this._negotiator.handleCandidate(i.candidate);break;default:q.warn(`Unrecognized message type:${t} from peer:${this.peer}`);break}}answer(e,t={}){if(this._localStream){q.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,t&&t.sdpTransform&&(this.options.sdpTransform=t.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const i=this.provider._getMessages(this.connectionId);for(const o of i)this.handleMessage(o);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}};xo=new WeakMap,zt(Si,xo,Si.ID_PREFIX="mc_");let en=Si;class Su{constructor(e){this._options=e}_buildRequest(e){const t=this._options.secure?"https":"http",{host:i,port:o,path:r,key:s}=this._options,a=new URL(`${t}://${i}:${o}${r}${s}/${e}`);return a.searchParams.set("ts",`${Date.now()}${Math.random()}`),a.searchParams.set("version",Tr.version),fetch(a.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){q.error("Error retrieving ID",e);let t="";throw this._options.path==="/"&&this._options.host!==De.CLOUD_HOST&&(t=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+t)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let t="";throw this._options.host===De.CLOUD_HOST?t="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":t="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+t)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw q.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}const xt=class xt extends wa{get type(){return Ge.Data}constructor(e,t,i){super(e,t,i),this.connectionId=this.options.connectionId||xt.ID_PREFIX+fa(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new ya(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{q.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=t=>{q.log(`DC#${this.connectionId} dc onmessage:`,t.data)},this.dataChannel.onclose=()=>{q.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,t=!1){if(!this.open){this.emitError(ni.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,t)}async handleMessage(e){const t=e.payload;switch(e.type){case ye.Answer:await this._negotiator.handleSDP(e.type,t.sdp);break;case ye.Candidate:await this._negotiator.handleCandidate(t.candidate);break;default:q.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}};So=new WeakMap,ko=new WeakMap,zt(xt,So,xt.ID_PREFIX="dc_"),zt(xt,ko,xt.MAX_BUFFERED_AMOUNT=8388608);let tn=xt;class Pr extends tn{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",t=>this._handleDataMessage(t))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>tn.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(t){return q.error(`DC#:${this.connectionId} Error when sending:`,t),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Ar extends Pr{close(e){super.close(e),this._chunkedData={}}constructor(e,t,i){super(e,t,i),this.chunker=new ha,this.serialization=Ot.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const t=bs(e),i=t.__peerData;if(i){if(i.type==="close"){this.close();return}this._handleChunk(t);return}this.emit("data",t)}_handleChunk(e){const t=e.__peerData,i=this._chunkedData[t]||{data:[],count:0,total:e.total};if(i.data[e.n]=new Uint8Array(e.data),i.count++,this._chunkedData[t]=i,i.total===i.count){delete this._chunkedData[t];const o=hu(i.data);this._handleDataMessage({data:o})}}_send(e,t){const i=ws(e);if(i instanceof Promise)return this._send_blob(i);if(!t&&i.byteLength>this.chunker.chunkedMTU){this._sendChunks(i);return}this._bufferedSend(i)}async _send_blob(e){const t=await e;if(t.byteLength>this.chunker.chunkedMTU){this._sendChunks(t);return}this._bufferedSend(t)}_sendChunks(e){const t=this.chunker.chunk(e);q.log(`DC#${this.connectionId} Try to send ${t.length} chunks...`);for(const i of t)this.send(i,!0)}}class ku extends Pr{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,t){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=Ot.None}}class Cu extends Pr{_handleDataMessage({data:e}){const t=this.parse(this.decoder.decode(e)),i=t.__peerData;if(i&&i.type==="close"){this.close();return}this.emit("data",t)}_send(e,t){const i=this.encoder.encode(this.stringify(e));if(i.byteLength>=De.chunkedMTU){this.emitError(ni.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(i)}constructor(...e){super(...e),this.serialization=Ot.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}const ki=class ki extends ba{get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[t,i]of this._connections)e[t]=i;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,t){super(),this._serializers={raw:ku,json:Cu,binary:Ar,"binary-utf8":Ar,default:Ar},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let i;if(e&&e.constructor==Object?t=e:e&&(i=e.toString()),t={debug:0,host:De.CLOUD_HOST,port:De.CLOUD_PORT,path:"/",key:ki.DEFAULT_KEY,token:De.randomToken(),config:De.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...t},this._options=t,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==De.CLOUD_HOST?this._options.secure=De.isSecure():this._options.host==De.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&q.setLogFunction(this._options.logFunction),q.logLevel=this._options.debug||0,this._api=new Su(t),this._socket=this._createServerConnection(),!De.supports.audioVideo&&!De.supports.data){this._delayedAbort(he.BrowserIncompatible,"The current browser does not support WebRTC");return}if(i&&!De.validateId(i)){this._delayedAbort(he.InvalidID,`ID "${i}" is invalid`);return}i?this._initialize(i):this._api.retrieveId().then(o=>this._initialize(o)).catch(o=>this._abort(he.ServerError,o))}_createServerConnection(){const e=new wu(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(Ye.Message,t=>{this._handleMessage(t)}),e.on(Ye.Error,t=>{this._abort(he.SocketError,t)}),e.on(Ye.Disconnected,()=>{this.disconnected||(this.emitError(he.Network,"Lost connection to server."),this.disconnect())}),e.on(Ye.Close,()=>{this.disconnected||this._abort(he.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const t=e.type,i=e.payload,o=e.src;switch(t){case ye.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case ye.Error:this._abort(he.ServerError,i.msg);break;case ye.IdTaken:this._abort(he.UnavailableID,`ID "${this.id}" is taken`);break;case ye.InvalidKey:this._abort(he.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case ye.Leave:q.log(`Received leave message from ${o}`),this._cleanupPeer(o),this._connections.delete(o);break;case ye.Expire:this.emitError(he.PeerUnavailable,`Could not connect to peer ${o}`);break;case ye.Offer:{const r=i.connectionId;let s=this.getConnection(o,r);if(s&&(s.close(),q.warn(`Offer received for existing Connection ID:${r}`)),i.type===Ge.Media){const c=new en(o,this,{connectionId:r,_payload:i,metadata:i.metadata});s=c,this._addConnection(o,s),this.emit("call",c)}else if(i.type===Ge.Data){const c=new this._serializers[i.serialization](o,this,{connectionId:r,_payload:i,metadata:i.metadata,label:i.label,serialization:i.serialization,reliable:i.reliable});s=c,this._addConnection(o,s),this.emit("connection",c)}else{q.warn(`Received malformed connection type:${i.type}`);return}const a=this._getMessages(r);for(const c of a)s.handleMessage(c);break}default:{if(!i){q.warn(`You received a malformed message from ${o} of type ${t}`);return}const r=i.connectionId,s=this.getConnection(o,r);s&&s.peerConnection?s.handleMessage(e):r?this._storeMessage(r,e):q.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,t){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(t)}_getMessages(e){const t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]}connect(e,t={}){if(t={serialization:"default",...t},this.disconnected){q.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(he.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const i=new this._serializers[t.serialization](e,this,t);return this._addConnection(e,i),i}call(e,t,i={}){if(this.disconnected){q.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(he.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!t){q.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const o=new en(e,this,{...i,_stream:t});return this._addConnection(e,o),o}_addConnection(e,t){q.log(`add connection ${t.type}:${t.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(t)}_removeConnection(e){const t=this._connections.get(e.peer);if(t){const i=t.indexOf(e);i!==-1&&t.splice(i,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,t){const i=this._connections.get(e);if(!i)return null;for(const o of i)if(o.connectionId===t)return o;return null}_delayedAbort(e,t){setTimeout(()=>{this._abort(e,t)},0)}_abort(e,t){q.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(q.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const t=this._connections.get(e);if(t)for(const i of t)i.close()}disconnect(){if(this.disconnected)return;const e=this.id;q.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)q.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)q.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=t=>{}){this._api.listAllPeers().then(t=>e(t)).catch(t=>this._abort(he.ServerError,t))}};Co=new WeakMap,zt(ki,Co,ki.DEFAULT_KEY="peerjs");let Mr=ki;class _u extends Zc{constructor(){super(),this.connections=new Map}open(e){e==null&&(e=Ai.generateUUID()),this.peer&&this.peer.destroy(),this.peer=new Mr(e),this.addPeerListeners(this.peer)}connect(e,t){var i=this.peer.connect(e,t);this.addConnectionListeners(i),this.dispatchEvent({type:"connection_start",connection:i}),this.connections.clear()}disconnect(){this.peer.disconnect()}destroy(){this.peer.destroy()}addPeerListeners(e){e.on("open",(function(t){this.dispatchEvent({type:"peer_open",id:t})}).bind(this)),e.on("connection",(function(t){this.addConnectionListeners(t),this.dispatchEvent({type:"peer_connection",connection:t})}).bind(this)),e.on("close",(function(){this.connections.clear(),this.dispatchEvent({type:"peer_close",target:this})}).bind(this)),e.on("disconnected",(function(){this.dispatchEvent({type:"peer_disconnected"})}).bind(this)),e.on("error",(function(t){this.dispatchEvent({type:"peer_error",error:t})}).bind(this))}addConnectionListeners(e){e.on("open",(function(){this.connections.set(e.peer,e),this.dispatchEvent({type:"connection_open",connection:e})}).bind(this)),e.on("close",(function(){this.connections.delete(e.peer),this.dispatchEvent({type:"connection_close",connection:e})}).bind(this)),e.on("data",(function(t){this.dispatchEvent({type:"connection_data",connection:e,data:t})}).bind(this)),e.on("error",function(t){this.dispatchEvent({type:"connection_error",connection:e,error:t})})}on(e,t){this.addEventListener(e,t)}off(e,t){this.removeEventListener(e,t)}isOnline(){return this.peer!=null&&this.peer.open==!0}}class Eu{constructor(){this.window=window,this.document=document,this.BOX_SIZE=16,this.screenWidth=this.window.innerWidth,this.screenHeight=this.window.innerHeight,this.engine=H.Engine.create(),this.util=new Yo,this.state="home",this.animation=new ip,this.storage=new gp,this.collision=new vp,this.player=new rr({x:0,y:0,z:0}),this.play=!1,this.fov=75,this.scene=new Bo,this.mouse=new Qp,this.window.Matter={Composite:H.Composite,Bodies:H.Bodies,Body:H.Body},this.timer=new np,this.loop=new up,this.then=new Date().getTime(),this.now=this.then,this.delta=0,this.assets=new dp,this.level=new Yp,this.levelHistory=new Kp,this.scene.add(this.level),this.camera=new Ro(this.fov,this.screenWidth/this.screenHeight,1,2e3),this.camera.tilt=0,this.camera.position.x=0,this.camera.position.y=0,this.camera.position.zDefault=180,this.camera.position.z=this.camera.position.zDefault,this.light=new Gc("#ffffff","#000000",1*Math.PI),this.light.position.set(.25,.5,1),this.scene.add(this.light),this.background=new yp,this.scene.add(this.background),this.network=new _u,this.multiplayer=new kd(this.network),this.scene.add(this.multiplayer.players)}init(e,t=function(){}){this.graphics=new mp(e),this.graphics.setCamera(this.camera),this.graphics.setScene(this.scene),this.graphics.setSelectedObjects([this.player]),this.levelEditor=new xd(this.camera,e),this.scene.add(this.levelEditor.controlsTransform.getHelper()),this.canvas=e,this.canvas.classList.add("hidden"),this.canvas.addEventListener("contextmenu",function(i){i.preventDefault()},!1),this.canvas.addEventListener("pointerdown",(function(i){this.mouse.mouseDown(i,this)}).bind(this),!1),this.canvas.addEventListener("pointermove",(function(i){this.mouse.mouseMove(i,this)}).bind(this),!1),this.canvas.addEventListener("pointerup",(function(i){this.mouse.mouseUp(i,this)}).bind(this),!1),this.canvas.addEventListener("wheel",(function(i){this.mouse.wheel(i,this)}).bind(this),!1),this.window.addEventListener("resize",(function(i){this.resizeWindow(i,this)}).bind(this)),H.Events.on(this.engine,"collisionStart",(function(i){this.collision.checkPlayerCollision(i,this)}).bind(this)),this.assets.load((function(){this.load(t),this.updateSettings(null,this)}).bind(this))}load(e=function(){}){this.assets.audio.play("theme",!0),this.background.setTarget(this.player),this.background.init(),this.resizeWindow(null,this),this.loop.add((function(t){this.updateEngine(t.delta,t.alpha)}).bind(this),60),this.loop.add((function(t){this.updateRender(t.delta,t.alpha)}).bind(this),-1),this.multiplayer.setTick(8),this.loop.add((function(t){this.updateNetwork(t.delta,t.alpha)}).bind(this),8),this.loop.start(),e()}updateEngine(e){this.play==!0&&(this.player.updateControls(),this.player.updateForce(),this.player.renderSpeed(this),this.player.updateRope(),H.Engine.update(this.engine,e*1e3))}updateRender(e,t){if(this.play==!0){for(var i=this.level.children.length-1;i>=0;){var o=this.level.children[i];o.body!=null&&o.isFrozen()==!1&&o.update(e,t),i--}this.updateCamera(this),this.timer.render(),this.background.update(e,t,app.motion==!1),app.animation.update(e,t)}this.multiplayer.render(e,t),this.graphics.update(e)}updateNetwork(e,t){this.multiplayer.update(e,t)}resizeWindow(e,t=app){var i=t.window.innerWidth,o=t.window.innerHeight;t.camera.aspect=i/o,t.camera.updateProjectionMatrix(),t.graphics.setSize(i,o)}resetScene(e=app){app.camera.position.z=app.camera.position.zDefault,e.level.removeParticles(e),e.level.resetLevel(),e.updateRender(null,0),window.dispatchEvent(new CustomEvent("setSelectedObject"))}updateCamera(e){e.camera.position.x=e.player.position.x,e.camera.position.y=e.player.position.y+e.camera.tilt}updateSettings(e,t=app){var i=t.storage.getSettings(t);e==null&&(e=i),Object.keys(i).forEach(function(o){e[o]==null&&(e[o]=i[o])}),t.assets.audio.setMasterVolume(e.volume),t.updateQuality(e.quality,t),t.mouse.setSnap(e.snap),t.player.setSkin(e.skin,t),t.storage.setSettings(e),t.updateCameraMotion(e.motion,t),window.dispatchEvent(new CustomEvent("updateStatsVisibility"))}updateGravity(e){var t=this.util.getVectorFromAngle(e),i=app.engine.world.gravity,o=1;i.x=t.x,i.y=t.y,e!=null&&app.motion==!0?(e*=-1,e<0&&(app.camera.rotation.z=(app.camera.rotation.z-Math.PI*2)%(Math.PI*2)),o=Math.abs((e+Math.PI)%Math.PI)/(Math.PI/2)+1,app.animation.tween({object:app.camera.rotation,to:{z:e},duration:250}).start(),app.background.animateScale(o)):(app.camera.rotation.z=0,app.background.animateScale(1))}updateQuality(e,t=app){e<=0&&(e=1),t.graphics.setPixelRatio(t.window.devicePixelRatio/(10/e))}updateCameraMotion(e,t=app){t.motion=e}exitCampaign(){app.play=!1,app.resetScene(app),app.level.clearLevel(app),app.player.removeCheckpoint(),app.player.setPosition({x:0,y:0,z:0}),window.dispatchEvent(new CustomEvent("setPage",{detail:"level-picker"})),window.dispatchEvent(new CustomEvent("closePopup"))}playLevel(){app.play=!0,app.timer.start()}async playLevelByTitle(e,t){var i=!1;return await fetch("../json/"+e+".json").then(o=>{if(o.ok)return o.json();throw new Error("Something went wrong")}).then(o=>{var r=app.level.getDescriptionByTitle(e);t==null&&(t=app.level.getThemeByTitle(e)),app.level.entityFactory.color=t.color,app.background.setTheme(t.model),app.updateGravity(),app.play=!0,app.timer.reset(),app.level.clearLevel(app),app.level.importFromJSON(o,app),app.background.visible=!0,app.playLevel(),app.resetScene(),i=!0,window.dispatchEvent(new CustomEvent("levelStart",{detail:{title:e,description:r}})),setTimeout(function(){o.author&&window.dispatchEvent(new CustomEvent("setCredit",{detail:{text:"Level by "+o.author}}))},500)}).catch(o=>!1),i}pauseLevel(){app.timer.pause(),app.play=!1}resumeLevel(){app.timer.start(),app.play=!0,window.dispatchEvent(new CustomEvent("closePopup"))}showCanvas(){app.canvas.classList.remove("hidden")}hideCanvas(){app.canvas.classList.add("hidden")}}const nn={__name:"OriginButtonSettings",setup(n){function e(){var i=app.storage.getSettings(app),o=[{label:"Master Volume",name:"volume",type:"range",min:0,max:1,step:.1,value:i.volume,callback:function(r){t("volume",r.target.value)}},{label:"Graphic Quality",name:"quality",type:"range",min:2,max:10,value:i.quality,callback:function(r){t("quality",parseInt(r.target.value))}},{label:"Camera Motion",name:"motion",type:"range",min:0,max:1,value:i.motion==!0?1:0,callback:function(r){t("motion",r.target.value=="1")}},{label:"Show FPS",name:"stats",type:"range",min:0,max:1,value:i.stats==!0?1:0,callback:function(r){t("stats",r.target.value=="1")}},{label:"New UI",name:"theme",type:"range",min:0,max:1,value:i.theme=="bubble"?1:0,callback:function(r){t("theme",r.target.value=="1"?"bubble":"origin"),window.dispatchEvent(new CustomEvent("setTheme"))}}];app.state=="level-manager"||app.state=="level-editor"?o.push({label:"Editor Snap",name:"snap",type:"range",min:0,max:16,step:4,value:i.snap,callback:function(r){var s=Number(r.target.value);s==0&&(s=1),r.target.title=s,t("snap",s)}}):app.state=="campaign"&&(app.timer.pause(),app.play=!1),o.push({type:"button",value:"Close",callback:function(r){app.state=="campaign"&&app.resumeLevel(),window.dispatchEvent(new CustomEvent("closePopup"))}}),window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:'<img src="../svg/gear.svg">',inputs:o}}))}function t(i,o){var r=app.storage.getSettings(app);r[i]=o,app.updateSettings(r)}return(i,o)=>(j(),N("a",{onClick:e,title:"Settings"},o[0]||(o[0]=[S("img",{src:"../svg/gear.svg"},null,-1)])))}},rn=[{version:"0.0.1",revisions:["10 levels","8 block types","3D Level Editor"]},{version:"0.0.2",revisions:["Added timer to campaign"]},{version:"0.0.3",revisions:["Added score saving system"]},{version:"0.0.4",revisions:["Added lighting for player"]},{version:"0.0.5 ",revisions:["Added background artwork"]},{version:"0.0.6",revisions:["Added speedometer","Updated time format from 12:34 to 12.345"]},{version:"0.0.7",revisions:["Added level sharing (file only)","Added level downloading (file only)","Added level 11","Fixed level 6 wall glitch","Fixed old score value from preventing new records"]},{version:"0.1.0",revisions:['Added "MySkins" shop',"Added 3 skins"]},{version:"0.1.1",revisions:["Added keyboard shortcuts (ex: R to restart, ESC to pause/return)"]},{version:"0.1.5",revisions:["Added theme music","Update skin render behavior"]},{version:"0.1.6",revisions:["Update Tip cube behavior - now disappears when selected","Update level 1, 5, 12 & 14","Add final level dialog"]},{version:"0.1.7",revisions:["Add resize block","Remove shrink block","Remove grow block"]},{version:"0.1.8",revisions:["Added option to backup data","Added option to restore data"]},{version:"0.1.9",revisions:["Added gravity cube (experimental)"]},{version:"0.2.0",revisions:["Added gravity cube","Added 5 new levels"]},{version:"0.2.1",revisions:["Added custom skin option to shop"]},{version:"0.2.2",revisions:["All skins are now free"]},{version:"0.3.0",revisions:["Add tester license for everyone","Add Google integration (backup, restore, etc.)"]},{version:"1.0.0",revisions:["Remove licenses, everything is free","Update logo"]},{version:"1.1.0",revisions:["Added grappling hook","Added alpha testing levels"]},{version:"1.1.3",revisions:["Fixed jump bug when pressing 'r'","Fixed duplicate ropes","Updated level 25 finish line","Improved performance","Simplified background artwork"]},{version:"1.1.4",revisions:["Fixed ESC key exploit when finishing level","Updated background"]},{version:"1.1.4.1",revisions:["Added 2 new test levels"]},{version:"1.1.4.2",revisions:["Fixed rope attaching to invisible blocks"]},{version:"1.1.4.4",revisions:["Fixed menu height issue","Update manifest version from 2 to 3"]},{version:"1.1.5",revisions:["Added level 35","Added shortcuts to Level Maker (Undo, Redo, Save, Rotate, Scale, Delete)"]},{version:"1.1.5.1",revisions:["Fixed level 27 slip glitch"]},{version:"1.1.5.2",revisions:["Upgraded physics engine (matter.js) from 0.14.2 to v0.18.0. This can improve performance up to 40%"]},{version:"1.1.6",revisions:["Added level 36","Added free Boxel Golf skin","Fixed level name editor"]},{version:"1.1.6.1",revisions:["Added 5 new community levels"]},{version:"1.1.7",revisions:['Added new "Reset Cube", this resets your scale, gravity direction, and removes the rope mode when touched',"Added 3 new community levels","Updated minimum scale from 16 to 8 (small cubes)"]},{version:"1.1.7.2",revisions:["Added new community levels"]},{version:"1.1.8",revisions:["Added camera rotation when the gravity cube is triggered","Added camera motion option (default on)"]},{version:"1.1.9",revisions:["Added tab buttons for campaign and community levels"]},{version:"1.1.9.1",revisions:["Added new community levels"]},{version:"1.1.9.2",revisions:["Added the option to upload custom skins (.jpg, .png, .webp)"]},{version:"1.2.0",revisions:["Added 3D background","Updated 3D Engine from r116 to r156 (3 years old)","Updated level editor","Updated rope design (white)","Updated all game files","Removed FPS limit"]},{version:"1.2.0.1",revisions:["Updated level editor background"]},{version:"1.2.0.2",revisions:["Reset cube now resets the player direction"]},{version:"1.2.0.3",revisions:['Added "z-axis" option to level editor']},{version:"1.2.0.4",revisions:["Added camera rotation to level editor (right-click)",'Added shortcut to reset selected object z-axis ("0" key)']},{version:"1.2.1",revisions:["Added a new community level","Added a new community Discord link","Update render logic"]},{version:"1.3.0",revisions:["Added FPS option","Updated skins page","Updated audio system","Updated new UI framework (Vue.js)","Removed old UI framework (jQuery)"]},{version:"1.3.1",revisions:["Fix escape shortcut"]},{version:"2.0.0",revisions:["Added new UI","Added option to switch to old UI"]},{version:"2.1.0",revisions:["Added 7 new environments for each level pack","Fixed community level scores"]},{version:"2.1.1",revisions:["Added community level credit","Added community Discord link","Updated level backgrounds"]},{version:"2.1.2",revisions:["Added a new level (Ping Pong)","Fixed the Level Editor tip bug"]},{version:"2.1.3",revisions:["Added a new community level (Kllixto)","Fixed a level picker bug"]},{version:"2.1.4",revisions:["Added the original background artwork"]},{version:"2.1.5",revisions:["Added custom mods","Added controls cube (credit: Charlieee1)","Added new alpha level","Fixed timer showing incorrect time"]},{version:"2.1.6",revisions:["Added buttons for controls","Added debug mode"]},{version:"2.1.7",revisions:['Added shortcut "C" to restart from checkpoint']},{version:"2.1.8",revisions:["Added 3 new community levels","Updated rope collisions"]},{version:"2.1.9",revisions:['Updated community level "The Box Escape"']},{version:"2.1.9.1",revisions:["Fixed invisible rope","Fixed muted audio quietly playing"]},{version:"2.2.0",revisions:["Added multiplayer"]},{version:"2.2.1",revisions:["Improved network performance"]},{version:"2.2.2",revisions:["Added level links to multiplayer chat","Added basic HTML tags to multiplayer chat (ex: h1, strong etc.)","Updated background material","Fixed new record visual bug"]},{version:"2.2.3",revisions:["Added fullscreen button to home screen"]},{version:"2.2.4",revisions:["Added global Matter.js variables for modding","Fixed level export bug"]},{version:"2.2.5",revisions:["Added 5 new community levels",'Fixed "The Arcadium" community level',"Fixed high score UI bug"]},{version:"2.2.6",revisions:["Added new Alpha Testing level","Added more snap options to level editor","Updated resize cube to resize any cube"]}],on=["Welcome!","Is it Christmas yet?","Maybe some day I'll add new levels","Aren't you suppose to be doing homework?","Tip: Drink lots of water!","Made by the creators of Boxel Rebound.","Terraria is a pretty cool game.","Good luck!","Kargoh is my favorite Youtuber.","Fact: I'm bad at Fortnite.","Don't get caught!","3D games are hard to make.","You should make a level during class.","Made with 20 coffee's a day.","Lower the graphics to speed up the game.","I hope you have a great day.","More addicting than TikTok!","I tried doing homework once, didn't like it.","I make levels during my day job.",'"I wish this game had more levels." -Everyone',"Don't share your friend code with strangers!","Nothing in life is free, except for this game.","My score is way better than your score.","Backup your data so you can play on other computers.","If you want to make games for a living, start by making levels.","Are cats better than dogs?","Shoutout to Stack Overflow for all the help!","Now available on the TI-84+ Silver Edition.","I think you are a pretty neat person.","I am glad you are alive today!","Happy Friday! (or whatever day it is)","Share kindness (or Boxel 3D) with someone today.","You might not feel special today, but you are special to me!","01101100 01101111 01101100","Have you tried turning it off and on again?","All bugs have been fixed (lol jk)","(\u256F\xB0\u25A1\xB0)\u256F\uFE35 \u25A0",'<a href="https://chrome.google.com/webstore/detail/tiny-tycoon/bamdkjfjhhnjcgcjmmjdnncpglihepoi">Tiny Tycoon is now available on Google Chrome!<span class="material-symbols-rounded">arrow_selector_tool</span></a>'],Tu={class:"home dashboard"},Pu={class:"wrapper fade-in"},Au={class:"message"},Mu=["innerHTML"],Ou={class:"buttons"},Du={__name:"OriginPageHome",setup(n){var e=W(),t=W(),i=W("Tiny Tycoon is now available on Google Chrome!");async function o(){var h=await fetch("../manifest.json"),g=await h.json();e.value=g,t.value=g.version}function r(){return on[Math.floor(Math.random()*on.length)]}function s(h){chrome.tabs?chrome.tabs.create({url:h}):window.open(h,"_blank")}function a(){window.open("../index.html","_self")}function c(){s("https://chrome.google.com/webstore/detail/tiny-tycoon/bamdkjfjhhnjcgcjmmjdnncpglihepoi")}function u(){return location.href.indexOf("?fullscreen=true")>0}function d(){s(location.href+"?fullscreen=true")}function f(){var h="";navigator.userAgent.indexOf("Edg")!=-1?h="https://microsoftedge.microsoft.com/addons/detail/boxel-3d/gcklngphfijejfnnicbadhghhdifidek":navigator.userAgent.indexOf("Chrome")!=-1?h="https://chromewebstore.google.com/detail/boxel-3d/mjjgmlmpeaikcaajghilhnioimmaibon/reviews":navigator.userAgent.indexOf("Firefox")!=-1&&(h="https://addons.mozilla.org/en-US/firefox/addon/boxel-3d-game/"),s(h)}function p(){var h=[{value:"Backup to file",type:"button",style:"width: 100%",callback:app.storage.backupToFile},{value:"Restore from file",type:"button",style:"width: 100%",callback:app.storage.restoreFromFile},{value:"Close",type:"button"}];chrome.storage&&h.unshift({value:"Backup to Google",type:"button",style:"width: 100%",callback:app.storage.backupToChrome},{value:"Restore from Google",type:"button",style:"width: 100%",callback:app.storage.restoreFromChrome}),window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:'<img src="svg/cloud-check.svg">',inputs:h}}))}function l(){for(var h="",g=rn.length-1;g>=0;g--){var v=rn[g];h+="v"+v.version+`
`,v.revisions.forEach(function(b){h+="- "+b+`
`}),h+=`
`}window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:'<div style="text-align: left;">'+h+"</div>",inputs:[{type:"button",value:"Close"}]}}))}function m(h){var g=document.querySelector(h);g.focus()}return pe(function(){o(),m(".focus")}),(h,g)=>(j(),N("div",Tu,[g[13]||(g[13]=S("div",{class:"background-cubes"},null,-1)),S("a",{class:"version fade-in",onClick:l},"v"+me(B(t)),1),S("div",Pu,[g[11]||(g[11]=S("img",{src:"../svg/logo-white.svg",class:"logo"},null,-1)),S("div",{class:"message-bar",onClick:c},[S("div",Au,[g[3]||(g[3]=S("img",{class:"google-icon",src:"../svg/google-icon.svg"},null,-1)),g[4]||(g[4]=Be()),S("span",{class:"message-text",innerHTML:B(i)},null,8,Mu)])]),S("div",Ou,[u()?K("",!0):(j(),N("a",{key:0,class:"button top-right four",onClick:d,title:"Enable fullscreen"},g[5]||(g[5]=[S("img",{src:"../svg/grow.svg"},null,-1)]))),S("a",{class:"button top-right three",onClick:a,title:"Go back"},g[6]||(g[6]=[S("img",{src:"../svg/back.svg"},null,-1)])),S("a",{class:"button top-right two",onClick:p,title:"Account"},g[7]||(g[7]=[S("img",{src:"../svg/cloud-check.svg"},null,-1)])),de(nn,{class:"button top-right"}),S("a",{class:"button",onClick:g[0]||(g[0]=v=>h.$emit("setPage","level-manager")),tabindex:"0"},g[8]||(g[8]=[S("span",null,"Level Maker",-1),Be(),S("img",{src:"../svg/pencil.svg"},null,-1)])),S("a",{class:"button",onClick:g[1]||(g[1]=v=>h.$emit("setPage","skins")),tabindex:"0"},g[9]||(g[9]=[S("span",null,"Skins",-1),Be(),S("img",{src:"../svg/smile.svg"},null,-1)])),S("a",{class:"button focus",onClick:g[2]||(g[2]=v=>h.$emit("setPage","level-picker")),tabindex:"0"},g[10]||(g[10]=[S("span",null,"Play",-1),Be(),S("img",{src:"../svg/play.svg"},null,-1)]))])]),S("a",{class:"review fade-in",onClick:f},g[12]||(g[12]=[S("img",{src:"../svg/heart.svg"},null,-1),Be("Write a review")]))]))}},Lu={class:"level-picker dashboard"},Iu={class:"wrapper fade-in"},Ru={class:"levels"},Bu={class:"list"},ju={key:0},Nu={key:1,class:"buttons"},Uu=["href","target"],zu=["src"],Fu=["title","onClick"],qu={key:0,class:"index"},Hu={key:1,class:"score"},Vu={class:"title"},Xu={__name:"OriginPageLevelPicker",emits:["setPage"],setup(n,{emit:e}){var t=app.storage.getScores(),i=app.storage.getSettings(),o=parseInt(i.progress),r=p(o-1),s=e;function a(){window.addEventListener("keydown",v)}function c(){window.removeEventListener("keydown",v)}async function u(b){await app.playLevelByTitle(b,{model:"background-classic",color:"#620460"}),s("setPage","campaign"),i.progress=f(b)+1,app.updateSettings(i)}function d(b){return t[b]}function f(b){var _=0,E=-1;return Xe.packs.forEach(function(y){y.levels.forEach(function(w){b==w.title&&(E=_),_++})}),E}function p(b){var _,E=0;return Xe.packs.forEach(function(y){y.levels.forEach(function(w){b==E&&(_=w.title),E++})}),_}function l(b){var _,E=0;return Xe.packs.forEach(function(y){y.levels.forEach(function(w){b==E&&(_=y.theme),E++})}),_}function m(){var b=document.querySelector("[title='"+r+"']");b&&(b.focus(),b.scrollIntoView({behavior:"smooth",block:"center"}))}function h(){s("setPage","home")}function g(b){r=b.target.getAttribute("title")}function v(b){var _=["Space","Enter","ArrowUp","KeyW"];if(_.indexOf(b.code)>-1){b.preventDefault();var E=document.querySelector("[title='"+r+"']");E==document.activeElement&&E.click()}b.code=="Escape"&&(b.preventDefault(),h())}return pe(function(){m(),a()}),fe(function(){c()}),(b,_)=>(j(),N("div",Lu,[_[4]||(_[4]=S("div",{class:"background-cubes"},null,-1)),S("div",Iu,[_[3]||(_[3]=S("h1",null,[Be("Level"),S("strong",null,"Packs")],-1)),S("div",{class:"buttons"},[S("a",{class:"button top-left",onClick:h,title:"Exit to home (ESC)"},_[1]||(_[1]=[S("img",{src:"../svg/home.svg"},null,-1)]))]),S("div",Ru,[S("div",Bu,[(j(!0),N(Ce,null,Fe(B(Xe).packs,(E,y)=>(j(),N(Ce,null,[S("h2",null,me(E.title),1),E.description?(j(),N("p",ju,me(E.description),1)):K("",!0),E.links?(j(),N("div",Nu,[(j(!0),N(Ce,null,Fe(E.links,w=>(j(),N("a",{class:$(["button",w.class]),href:w.url,target:w.target},[S("span",null,me(w.text),1),_[2]||(_[2]=Be()),w.icon?(j(),N("img",{key:0,src:"./"+w.icon},null,8,zu)):K("",!0)],10,Uu))),256))])):K("",!0),(j(!0),N(Ce,null,Fe(E.levels,(w,T)=>(j(),N("div",{class:$(["level",{completed:d(w.title)}]),title:w.title,onClick:C=>u(w.title),tabindex:"0",onFocus:_[0]||(_[0]=C=>g(C))},[w.label?(j(),N("span",qu,me(w.label),1)):K("",!0),d(w.title)?(j(),N("span",Hu,me(B(t)[w.title]),1)):K("",!0),S("span",Vu,me(w.description),1)],42,Fu))),256))],64))),256))])])])]))}},Wu={key:0,class:"controls"},Zu={class:"wasd"},Gu={class:"row"},xa={__name:"OriginControls",setup(n){var e=W({}),t=W(!1);function i(){window.addEventListener("keydown",r),window.addEventListener("keyup",s),window.addEventListener("setMode",c)}function o(){window.removeEventListener("keydown",r),window.removeEventListener("keyup",s),window.removeEventListener("setMode",c)}function r(u){e.value[u.code]=!0}function s(u){e.value[u.code]=!1}function a(u,d){window.dispatchEvent(new KeyboardEvent(u,{code:d})),e.value[d]=u=="keydown"}function c(u){var d=u.detail;d=="control"?t.value=!0:t.value=!1}return pe(function(){i()}),fe(function(){o()}),(u,d)=>B(t)?(j(),N("div",Wu,[S("div",Zu,[S("div",Gu,[S("div",{class:$(["key fade-in",{active:B(e).KeyA||B(e).ArrowLeft}]),onPointerdown:d[0]||(d[0]=f=>a("keydown","KeyA")),onPointerup:d[1]||(d[1]=f=>a("keyup","KeyA")),onPointerout:d[2]||(d[2]=f=>a("keyup","KeyA"))},d[9]||(d[9]=[S("span",{class:"material-symbols-rounded"},"arrow_back",-1)]),34),S("div",{class:$(["key fade-in",{active:B(e).KeyW||B(e).ArrowUp||B(e).Space}]),onPointerdown:d[3]||(d[3]=f=>a("keydown","KeyW")),onPointerup:d[4]||(d[4]=f=>a("keyup","KeyW")),onPointerout:d[5]||(d[5]=f=>a("keyup","KeyW"))},d[10]||(d[10]=[S("span",{class:"material-symbols-rounded"},"arrow_upward",-1)]),34),S("div",{class:$(["key fade-in",{active:B(e).KeyD||B(e).ArrowRight}]),onPointerdown:d[6]||(d[6]=f=>a("keydown","KeyD")),onPointerup:d[7]||(d[7]=f=>a("keyup","KeyD")),onPointerout:d[8]||(d[8]=f=>a("keyup","KeyD"))},d[11]||(d[11]=[S("span",{class:"material-symbols-rounded"},"arrow_forward",-1)]),34)])])])):K("",!0)}},Yu={key:0,class:"stats"},Ku={class:"fps"},Qu={__name:"OriginStats",setup(n){var e=W(!1),t=Date.now(),i=!1,o=0,r=W(0);function s(){window.addEventListener("updateStatsVisibility",f)}function a(){window.removeEventListener("updateStatsVisibility",f)}function c(){if(i==!0){requestAnimationFrame(function(){c()});var p=Date.now();o++,p>t+1e3&&(r.value=Math.round(o*1e3/(p-t)),t=p,o=0)}}function u(){i=!0,c()}function d(){i=!1}function f(){var p=app.storage.getSettings(app);e.value=p.stats}return pe(function(){u(),f(),s()}),fe(function(){d(),a()}),(p,l)=>B(e)?(j(),N("div",Yu,[S("span",Ku,me(B(r))+" FPS",1)])):K("",!0)}},Ju={class:"campaign dashboard"},$u=["innerHTML"],eh={class:"buttons"},th={__name:"OriginPageCampaign",setup(n){var e=W(""),t=W(!0);function i(){window.addEventListener("setCredit",r),window.addEventListener("popupOpened",a),window.addEventListener("popupClosed",c),window.addEventListener("keydown",u),window.addEventListener("keyup",d)}function o(){window.removeEventListener("setCredit",r),window.removeEventListener("popupOpened",a),window.removeEventListener("popupClosed",c),window.removeEventListener("keydown",u),window.removeEventListener("keyup",d)}function r(f){f.detail.text&&(e.value=f.detail.text)}function s(){app.pauseLevel(),window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:"Paused",inputs:[{value:"Exit (E)",type:"button",callback:function(f){app.exitCampaign()}},{value:"Retry (R)",type:"button",callback:function(f){app.level.retryLevel()}},{value:"Play",type:"button",callback:function(f){setTimeout(function(){app.resumeLevel()},100)}}]}}))}function a(){t.value=!1}function c(){t.value=!0}function u(f){if(t.value==!0)if(f.code=="Escape")f.preventDefault(),s();else if(f.code=="KeyE")app.exitCampaign();else if(f.code=="KeyR")app.level.retryLevel();else if(f.code=="KeyC")app.player.restart();else if(f.code=="KeyA"||f.code=="ArrowLeft")app.play==!0&&app.player.setControls("left",-1);else if(f.code=="KeyD"||f.code=="ArrowRight")app.play==!0&&app.player.setControls("right",1);else{var p=["Space","Enter","ArrowUp","KeyW"];p.indexOf(f.code)>-1&&app.player.jump()}}function d(f){f.code=="KeyA"||f.code=="ArrowLeft"?app.player.setControls("left",0):(f.code=="KeyD"||f.code=="ArrowRight")&&app.player.setControls("right",0)}return pe(function(){app.showCanvas(),i()}),fe(function(){app.hideCanvas(),o()}),(f,p)=>(j(),N("div",Ju,[(j(),ae(qo,{to:"body"},[p[0]||(p[0]=S("div",{class:"background-cubes"},null,-1))])),p[2]||(p[2]=S("div",{id:"timer"},null,-1)),B(e)?(j(),N("div",{key:0,id:"credit",class:"fade-in",innerHTML:B(e)},null,8,$u)):K("",!0),p[3]||(p[3]=S("div",{id:"speedometer"},[S("span",{id:"speed"})],-1)),S("div",eh,[S("a",{class:"button top-left",onClick:s,title:"Pause (ESC)"},p[1]||(p[1]=[S("img",{src:"../svg/pause.svg"},null,-1)])),de(nn,{class:"button top-right"})]),de(Qu),de(xa)]))}},ih={class:"level-manager"},nh={class:"row top"},rh={class:"col"},oh={class:"item",title:"Download level"},sh={class:"row left"},ah={class:"col"},lh={class:"list-item"},ch=["value","onInput"],ph=["onClick"],dh=["onClick"],uh=["onClick"],hh={__name:"OriginPageLevelManager",emits:["setPage"],setup(n,{emit:e}){var t=W([]),i=e;function o(){window.addEventListener("keydown",m)}function r(){window.removeEventListener("keydown",m)}function s(){t.value=app.storage.getListOfLevels(),t.value.length<1&&a()}function a(){var h={},g=null;app.level.createNewLevel(app),h=app.level.exportToJSON(app),g=app.storage.setLevelData(null,h),t.value.push({key:g,level:h})}function c(h){var g=h.target.files[0];if(g){var v=new FileReader;v.onload=function(){var b=JSON.parse(v.result);app.level.clearLevel(app),app.level.key=null,app.background.visible=!1,app.level.entityFactory.color="#620460",app.background.setTheme("background-classic"),app.level.clearLevel(app),app.level.importFromJSON(b,app),app.levelHistory.save("Downloaded level",app),app.levelHistory.save("Loaded level",app),app.resetScene(app),app.levelEditor.controlsOrbit.enabled=!0,app.levelEditor.controlsOrbit.reset(),i("setPage","level-editor")},v.readAsText(g)}}function u(h){var g=app.storage.getLevelData(h.key),v=app.storage.getSettings(app);g.name=h.level.name,app.level.entityFactory.color="#620460",app.background.setTheme("background-classic"),app.level.clearLevel(app),app.level.importFromJSON(g,app),app.level.key=h.key,app.level.updateHelpers(),app.updateSettings(v,app),app.background.visible=!1,app.levelHistory.save("Edited level",app),app.resetScene(app),app.levelEditor.controlsOrbit.enabled=!0,app.levelEditor.controlsOrbit.reset(),i("setPage","level-editor")}function d(h,g){h.level.name=g.target.value,app.storage.updateLevelDataName(h.key,h.level.name)}function f(h){u(h),app.resetScene(app),app.storage.saveLevelToFile(),i("setPage","level-manager")}function p(h){window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:"Are you sure you want to <em>delete</em> this level?",inputs:[{value:"Yes",type:"button",callback:function(){var g=t.value.indexOf(h);t.value.splice(g,1),app.storage.removeLevelData(h.key),window.dispatchEvent(new CustomEvent("closePopup"))}},{value:"No",type:"button"}]}}))}function l(){i("setPage","home"),window.dispatchEvent(new CustomEvent("setTheme"))}function m(h){if(h.code=="Escape"||h.code=="KeyE"){if(h.target.value)return;h.preventDefault(),l()}}return pe(function(){s(),o()}),fe(function(){r()}),(h,g)=>(j(),N("div",ih,[S("div",nh,[S("div",rh,[S("a",{class:"item",onClick:a,title:"Add level"},g[0]||(g[0]=[S("img",{src:"../svg/add.svg"},null,-1)])),S("label",oh,[S("input",{onChange:c,class:"hidden",type:"file",accept:"application/JSON"},null,32),g[1]||(g[1]=S("img",{src:"../svg/download.svg"},null,-1))]),S("a",{class:"item",onClick:l,title:"Exit level manager (ESC)"},g[2]||(g[2]=[S("img",{src:"../svg/home.svg"},null,-1)])),de(nn,{class:"item last"})])]),S("div",sh,[S("div",ah,[(j(!0),N(Ce,null,Fe(B(t),(v,b)=>(j(),N("div",lh,[S("input",{type:"text",value:v.level.name,onInput:_=>d(v,_)},null,40,ch),S("a",{onClick:_=>u(v),class:"item",title:"Edit level"},g[3]||(g[3]=[S("img",{src:"../svg/pencil.svg"},null,-1)]),8,ph),S("a",{onClick:_=>f(v),class:"item",title:"Share level"},g[4]||(g[4]=[S("img",{src:"../svg/upload.svg"},null,-1)]),8,dh),S("a",{onClick:_=>p(v),class:"item",title:"Delete level"},g[5]||(g[5]=[S("img",{src:"../svg/trash.svg"},null,-1)]),8,uh)]))),256))])])]))}},Or=[{id:1,title:"Pink",url:"../png/pink.png"},{id:2,title:"Blue",url:"../png/blue.png"},{id:377,title:"Kargoh Krate",url:"../png/krate.png"},{id:680,title:"Custom Skin",url:"../png/custom.png"},{id:563,title:"Monkey",url:"../png/monkey.png"},{id:668,title:"Puppy",url:"../png/puppy.png"},{id:565,title:"Kitty",url:"../png/kitty.png"},{id:466,title:"Smile",url:"../png/smile.png"},{id:476,title:"Love",url:"../png/love.png"},{id:486,title:"Grin",url:"../png/grin.png"},{id:488,title:"Sad Boi",url:"../png/sad.png"},{id:666,title:"Sick",url:"../png/sick.png"},{id:667,title:"Angry",url:"../png/mad.png"},{id:661,title:"Skull",url:"../png/skull.png"},{id:562,title:"Doppler",url:"../png/doppler.png"},{id:557,title:"Kargoh",url:"../png/kargoh.png"},{id:458,title:"USA",url:"../png/usa.png"},{id:462,title:"Australia",url:"../png/au.png"},{id:460,title:"UK",url:"../png/uk.png"},{id:490,title:"Canada",url:"../png/canada.png"},{id:465,title:"Japan",url:"../png/jp.png"},{id:152,title:"Golden Skin",url:"../png/gold.png"},{id:407,title:"Lucky Die",url:"../png/lucky.png"},{id:484,title:"Prism",url:"../png/prism.png"},{id:500,title:"Boxel Golf",url:"../png/boxel-golf.png"}],fh={class:"skins dashboard"},mh={class:"wrapper fade-in"},gh={class:"skin-group"},vh=["id","onClick"],yh={class:"title"},bh={__name:"OriginPageSkins",emits:["setPage"],setup(n,{emit:e}){var t=e;function i(){window.addEventListener("keydown",f)}function o(){window.removeEventListener("keydown",f)}var r=W(app.storage.getSettings());function s(p,l){r.value.skin=p,p.id==680?window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:"Custom Skin",inputs:[{class:"button",type:"file",style:"width: 100%",accept:"image/png, image/jpeg",callback:a},{type:"button",value:"Close"}]}})):(app.player.setSkin({id:p.id,url:p.url}),app.updateSettings(r.value)),u(l.target)}function a(p){var l=p.target.files[0];if(l){var m=new FileReader;m.onloadend=function(){var h={id:680,title:l.name,url:m.result};r.value.skin=h,app.player.setSkin(h,app),app.updateSettings(r.value),window.dispatchEvent(new CustomEvent("closePopup"))},m.readAsDataURL(l)}}function c(p){return p.id==r.value.skin.id}function u(p){p==null&&(p=document.querySelector("[class*='selected']")),p.scrollIntoView({behavior:"smooth",block:"center"})}function d(){t("setPage","home")}function f(p){p.code=="Escape"&&(p.preventDefault(),d())}return pe(function(){u(),i()}),fe(function(){o()}),(p,l)=>(j(),N("div",fh,[l[2]||(l[2]=S("div",{class:"background-cubes"},null,-1)),S("div",mh,[l[1]||(l[1]=S("h1",null,[Be("My"),S("strong",null,"Skins")],-1)),S("div",gh,[(j(!0),N(Ce,null,Fe(B(Or),(m,h)=>(j(),N("div",{class:$(["skin",{selected:c(m)}]),id:m.id,onClick:g=>s(m,g)},[S("div",{class:"image",style:Kn({"background-image":"url("+(c(m)?B(r).skin.url:m.url)+")"})},null,4),S("div",yh,me(m.title),1)],10,vh))),256))]),S("div",{class:"buttons"},[S("a",{class:"button top-left",onClick:d,title:"Exit to home (ESC)"},l[0]||(l[0]=[S("img",{src:"../svg/home.svg"},null,-1)]))])])]))}},wh={key:0,class:"background-cubes"},xh={class:"level-editor"},Sh={class:"row top"},kh={class:"col options-level"},Ch={key:0,class:"row left"},_h={class:"col object-type"},Eh={key:0,class:"col object-options"},Th={class:"slider"},Ph=["value"],Ah={__name:"OriginPageLevelEditor",emits:["setPage"],setup(n,{emit:e}){var t=e,i=W("draw"),o=W(app.levelEditor.selectedObjectType||"cube"),r=W(!0),s=W(),a=W(app.levelEditor.controlsTransform),c=W(!0);function u(){window.addEventListener("setSelectedObject",w),window.addEventListener("selectObjectType",y),window.addEventListener("setTransformMode",C),window.addEventListener("popupOpened",f),window.addEventListener("popupClosed",p),window.addEventListener("keydown",I),window.addEventListener("keyup",O)}function d(){window.removeEventListener("setSelectedObject",w),window.removeEventListener("selectObjectType",y),window.removeEventListener("setTransformMode",C),window.removeEventListener("popupOpened",f),window.removeEventListener("popupClosed",p),window.removeEventListener("keydown",I),window.removeEventListener("keyup",O)}function f(){c.value=!1}function p(){c.value=!0}function l(P){i.value=P,app.mouse.setMode(P)}function m(){app.levelEditor.exitLevel()}function h(){app.levelEditor.saveLevel()}function g(){app.levelEditor.undo()}function v(){app.levelEditor.redo()}function b(){_(),app.levelEditor.rewind(),app.levelEditor.controlsOrbit.target.copy(app.player.position)}function _(){r.value=!0,app.pauseLevel(),app.level.deselectLevel(app),app.levelEditor.controlsOrbit.enabled=!0,app.levelEditor.controlsOrbit.reset(),app.levelEditor.controlsOrbit.target.copy(app.player.position),app.updateCamera(app),app.background.visible=!1,window.dispatchEvent(new CustomEvent("setSelectedObject"))}function E(){r.value=!1,app.level.deselectLevel(app),app.levelEditor.controlsOrbit.enabled=!1,app.levelEditor.controlsOrbit.reset(),app.levelEditor.controlsTransform.detach(),window.dispatchEvent(new CustomEvent("setSelectedObject")),app.playLevel()}function y(P){o.value=P.detail.type,app.levelEditor.selectObjectType(P.detail.type,P.detail.checkNull)}function w(P){s.value=P.detail}function T(){app.levelEditor.toggleSelectedObjectStaticState()}function C(P){a.value.mode=P.detail,app.levelEditor.setMode(P.detail)}function M(P){s.value.setFriction(P.target.value),app.levelHistory.save("Updated object properties",app)}function L(){window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:"Share a tip!",inputs:[{value:app.selectedObject.text,type:"text",callback:A},{value:"Cancel",type:"button"},{value:"Close",type:"button"}]}}))}function x(){app.levelEditor.duplicateSelectedObject(),w({detail:app.selectedObject})}function D(){app.levelEditor.deleteSelectedObject()}function A(P){app.selectedObject.text=P.target.value,app.levelHistory.save("Updated tip",app)}function I(P){if(c.value==!0){var k=["Space","Enter","ArrowUp","KeyW"];if(app.play==!0)if(P.code=="Escape"||P.code=="KeyE")P.preventDefault(),_();else if(P.code=="KeyA"||P.code=="ArrowLeft")app.player.setControls("left",-1);else if(P.code=="KeyD"||P.code=="ArrowRight")app.player.setControls("right",1);else if(P.code=="KeyR")app.level.retryLevel();else if(P.code=="KeyC")app.player.restart();else{var k=["Space","Enter","ArrowUp","KeyW"];k.indexOf(P.code)>-1&&app.player.jump()}else P.code=="Digit0"?app.levelEditor.resetZAxis():P.code=="Escape"||P.code=="KeyE"?(P.preventDefault(),m()):P.code=="KeyD"?x():P.code=="KeyG"?C({detail:"translate"}):P.code=="KeyR"?C({detail:"rotate"}):P.code=="KeyS"?P.ctrlKey==!0?(P.preventDefault(),app.levelEditor.saveLevel()):C({detail:"scale"}):P.code=="KeyT"?C({detail:"translate"}):P.code=="KeyX"?app.levelEditor.deleteSelectedObject():P.code=="KeyZ"&&(P.ctrlKey==!0&&P.shiftKey==!1&&app.levelEditor.undo(),P.ctrlKey==!0&&P.shiftKey==!0&&app.levelEditor.redo())}}function O(P){P.code=="KeyA"||P.code=="ArrowLeft"?app.player.setControls("left",0):(P.code=="KeyD"||P.code=="ArrowRight")&&app.player.setControls("right",0)}return pe(function(){app.canvas.classList.remove("hidden"),u()}),fe(function(){app.canvas.classList.add("hidden"),d()}),(P,k)=>(j(),N(Ce,null,[(j(),ae(qo,{to:"body"},[B(r)==!1?(j(),N("div",wh)):K("",!0)])),S("div",xh,[S("div",Sh,[S("div",kh,[S("a",{class:$(["item",{selected:B(i)=="draw"}]),onClick:k[0]||(k[0]=R=>l("draw")),action:"draw",title:"Draw cubes"},k[18]||(k[18]=[S("img",{src:"../svg/pencil.svg"},null,-1)]),2),S("a",{class:$(["item",{selected:B(i)=="erase"}]),onClick:k[1]||(k[1]=R=>l("erase")),action:"erase",title:"Erase cubes"},k[19]||(k[19]=[S("img",{src:"../svg/eraser.svg"},null,-1)]),2),S("a",{class:"item",onClick:m,title:"Exit level editor (ESC)"},k[20]||(k[20]=[S("img",{src:"../svg/home.svg"},null,-1)])),S("a",{class:"item",onClick:h,title:"Save level (Ctrl + S)"},k[21]||(k[21]=[S("img",{src:"../svg/save.svg"},null,-1)])),S("a",{class:"item",onClick:g,title:"Undo edit (Ctrl + Z)"},k[22]||(k[22]=[S("img",{src:"../svg/undo.svg"},null,-1)])),S("a",{class:"item",onClick:v,title:"Redo edit (Ctrl + Shift + Z)"},k[23]||(k[23]=[S("img",{src:"../svg/redo.svg"},null,-1)])),S("a",{class:"item",onClick:b,title:"Restart level"},k[24]||(k[24]=[S("img",{src:"../svg/rewind.svg"},null,-1)])),S("a",{class:"item",onClick:_,title:"Pause level"},k[25]||(k[25]=[S("img",{src:"../svg/pause.svg"},null,-1)])),S("a",{class:"item",onClick:E,title:"Play level"},k[26]||(k[26]=[S("img",{src:"../svg/play.svg"},null,-1)])),de(nn,{class:"item last"})])]),B(i)=="draw"&&B(r)==!0?(j(),N("div",Ch,[S("div",_h,[S("a",{class:$(["item",{selected:B(o)=="cube"}]),onClick:k[2]||(k[2]=R=>y({detail:{type:"cube"}})),title:"Basic cube"},k[27]||(k[27]=[S("img",{src:"../svg/cube.svg"},null,-1)]),2),S("a",{class:$(["item",{selected:B(o)=="tip"}]),onClick:k[3]||(k[3]=R=>y({detail:{type:"tip"}})),title:"Tip cube"},k[28]||(k[28]=[S("img",{src:"../svg/tip.svg"},null,-1)]),2),S("a",{class:$(["item",{selected:B(o)=="bounce"}]),onClick:k[4]||(k[4]=R=>y({detail:{type:"bounce"}})),title:"Bounce cube"},k[29]||(k[29]=[S("img",{src:"../svg/bounce.svg"},null,-1)]),2),S("a",{class:$(["item",{selected:B(o)=="checkpoint"}]),onClick:k[5]||(k[5]=R=>y({detail:{type:"checkpoint"}})),title:"Checkpoint cube"},k[30]||(k[30]=[S("img",{src:"../svg/checkpoint.svg"},null,-1)]),2),S("a",{class:$(["item",{selected:B(o)=="spike"}]),onClick:k[6]||(k[6]=R=>y({detail:{type:"spike"}})),title:"Spike cube"},k[31]||(k[31]=[S("img",{src:"../svg/spike.svg"},null,-1)]),2),S("a",{class:$(["item",{selected:B(o)=="resize"}]),onClick:k[7]||(k[7]=R=>y({detail:{type:"resize"}})),title:"Resize cube"},k[32]||(k[32]=[S("img",{src:"../svg/grow.svg"},null,-1)]),2),S("a",{class:$(["item",{selected:B(o)=="direction"}]),onClick:k[8]||(k[8]=R=>y({detail:{type:"direction"}})),title:"Direction cube"},k[33]||(k[33]=[S("img",{src:"../svg/direction.svg"},null,-1)]),2),S("a",{class:$(["item",{selected:B(o)=="gravity"}]),onClick:k[9]||(k[9]=R=>y({detail:{type:"gravity"}})),title:"Gravity cube"},k[34]||(k[34]=[S("img",{src:"../svg/gravity.svg"},null,-1)]),2),S("a",{class:$(["item",{selected:B(o)=="grapple"}]),onClick:k[10]||(k[10]=R=>y({detail:{type:"grapple"}})),title:"Grapple cube"},k[35]||(k[35]=[S("img",{src:"../svg/grapple.svg"},null,-1)]),2),S("a",{class:$(["item",{selected:B(o)=="finish"}]),onClick:k[11]||(k[11]=R=>y({detail:{type:"finish"}})),title:"Finish cube"},k[36]||(k[36]=[S("img",{src:"../svg/finish.svg"},null,-1)]),2),S("a",{class:$(["item",{selected:B(o)=="reset"}]),onClick:k[12]||(k[12]=R=>y({detail:{type:"reset"}})),title:"Reset cube"},k[37]||(k[37]=[S("img",{src:"../svg/reset.svg"},null,-1)]),2),S("a",{class:$(["item",{selected:B(o)=="control"}]),onClick:k[13]||(k[13]=R=>y({detail:{type:"control"}})),title:"Control cube"},k[38]||(k[38]=[S("img",{src:"../svg/control.svg"},null,-1)]),2)]),B(s)!=null?(j(),N("div",Eh,[S("a",{class:$(["item",{selected:B(a).mode=="translate"}]),onClick:k[14]||(k[14]=R=>C({detail:"translate"})),title:"Move (T or G)"},k[39]||(k[39]=[S("img",{src:"../svg/move.svg"},null,-1)]),2),S("a",{class:$(["item",{selected:B(a).mode=="scale"}]),onClick:k[15]||(k[15]=R=>C({detail:"scale"})),title:"Scale (S)"},k[40]||(k[40]=[S("img",{src:"../svg/scale-out-x.svg"},null,-1)]),2),S("a",{class:$(["item",{selected:B(a).mode=="rotate"}]),onClick:k[16]||(k[16]=R=>C({detail:"rotate"})),title:"Rotate (R)"},k[41]||(k[41]=[S("img",{src:"../svg/rotate-clockwise.svg"},null,-1)]),2),S("a",{class:$(["item",{selected:B(s).isStatic()}]),onClick:T,title:"Pin"},k[42]||(k[42]=[S("img",{src:"../svg/pin.svg"},null,-1)]),2),S("div",{class:$(["item",{disabled:B(s).isStatic()}])},[k[43]||(k[43]=S("a",{action:"friction",title:"Friction"},[S("img",{src:"../svg/friction.svg"})],-1)),S("div",Th,[S("input",{name:"friction",type:"range",min:"0",max:"1",step:"0.25",value:B(s).body.friction,onChange:k[17]||(k[17]=R=>M(R))},null,40,Ph)])],2),S("a",{class:$(["item",{disabled:B(s).text==null}]),onClick:L,title:"Text"},k[44]||(k[44]=[S("img",{src:"../svg/type.svg"},null,-1)]),2),S("a",{class:"item",onClick:x,title:"Duplicate (D)"},k[45]||(k[45]=[S("img",{src:"../svg/duplicate.svg"},null,-1)])),S("a",{class:"item",onClick:D,title:"Delete (X)"},k[46]||(k[46]=[S("img",{src:"../svg/trash.svg"},null,-1)]))])):K("",!0)])):K("",!0),de(xa)])],64))}},Mh={key:0,class:"dialog"},Oh={class:"wrapper"},Dh=["innerHTML"],Lh={class:"inputs"},Ih=["for"],Rh=["id","type","value","min","max","step","accept","title"],Bh={__name:"OriginPopup",setup(n){var e=W(""),t=W([]),i=W(!1);function o(){window.addEventListener("openPopup",s),window.addEventListener("closePopup",a),window.addEventListener("keydown",d)}function r(){window.removeEventListener("openPopup",s),window.removeEventListener("closePopup",a),window.removeEventListener("keydown",d)}function s(f){i.value=!0,f.detail&&(f.detail.text&&(e.value=f.detail.text),f.detail.inputs&&(t.value=f.detail.inputs,t.value.forEach(function(p){p.type=="file"||p.type=="range"||p.type=="text"?p.event="change":p.event="click"}))),setTimeout(function(){window.dispatchEvent(new CustomEvent("popupOpened"))},100)}function a(){i.value=!1,setTimeout(function(){window.dispatchEvent(new CustomEvent("popupClosed"))},100)}function c(f,p){f==null&&(f=a),f(p)}function u(f){var p=t.value[t.value.length-1];p&&c(p.callback,f)}function d(f){if(i.value==!0&&f.target.type!="text"){var p=["Space","Enter","Escape"];p.indexOf(f.code)>-1&&(f.preventDefault(),u(f))}}return pe(function(){o()}),fe(function(){r()}),(f,p)=>(j(),ae(Xt,{name:"fade-origin-popup"},{default:Wt(()=>[B(i)==!0?(j(),N("div",Mh,[S("div",{class:"background",onClick:u}),S("div",Oh,[S("p",{innerHTML:B(e)},null,8,Dh),S("div",Lh,[(j(!0),N(Ce,null,Fe(B(t),(l,m)=>(j(),N(Ce,null,[l.label?(j(),N("label",{key:0,for:"popup-"+l.type+"-"+m},me(l.label),9,Ih)):K("",!0),S("input",Ho({class:l.class,id:"popup-"+l.type+"-"+m,type:l.type,value:l.value,min:l.min,max:l.max,step:l.step,accept:l.accept,style:l.style,title:l.title||l.value},{[Vo(l.event)]:h=>c(l.callback,h)}),null,16,Rh)],64))),256))])])])):K("",!0)]),_:1}))}},jh={class:"ui-origin"},Nh={__name:"Origin",setup(n){var e=W("home");function t(){window.addEventListener("setPage",o)}function i(){window.removeEventListener("setPage",o)}function o(s){s.detail&&r(s.detail)}function r(s){e.value=s,app.state=s}return pe(function(){t()}),fe(function(){i()}),(s,a)=>(j(),N("div",jh,[B(e)=="home"?(j(),ae(Du,{key:0,onSetPage:r})):K("",!0),B(e)=="level-picker"?(j(),ae(Xu,{key:1,onSetPage:r})):K("",!0),B(e)=="campaign"?(j(),ae(th,{key:2,onSetPage:r})):K("",!0),B(e)=="level-manager"?(j(),ae(hh,{key:3,onSetPage:r})):K("",!0),B(e)=="skins"?(j(),ae(bh,{key:4,onSetPage:r})):K("",!0),B(e)=="level-editor"?(j(),ae(Ah,{key:5,onSetPage:r})):K("",!0),de(Bh)]))}},sn={__name:"BubbleButtonSettings",setup(n){function e(){window.dispatchEvent(new CustomEvent("openSettings"))}return(t,i)=>(j(),N("a",{onClick:e,title:"Settings"},i[0]||(i[0]=[S("span",{class:"material-symbols-rounded"},"settings",-1)])))}},Uh={__name:"BubbleButtonFullscreen",setup(n){function e(){return location.href.includes("?fullscreen=true")}function t(o){chrome.tabs?chrome.tabs.create({url:o}):window.open(o,"_blank")}function i(){t(location.href+"?fullscreen=true")}return(o,r)=>e()==!1?(j(),N("a",{key:0,onClick:i,title:"Fullscreen"},r[0]||(r[0]=[S("span",{class:"material-symbols-rounded"},"fullscreen",-1)]))):K("",!0)}},zh=["onClick"],Fh=["src"],qh=["innerHTML"],Hh=["innerHTML"],Vh=["innerHTML"],Dr={__name:"BubbleCarousel",props:["items","selected"],setup(n){var e=n,t=W();function i(){window.addEventListener("keydown",m)}function o(){window.removeEventListener("keydown",m)}function r(h,g){var v=c(g.target),b=g.isTrusted?"smooth":"instant";f(v,b),t.value=h,window.dispatchEvent(new CustomEvent("itemSelected",{detail:h}))}function s(){var h=document.querySelector(".item[class*='selected']");h&&h.nextElementSibling&&h.nextElementSibling.click()}function a(){var h=document.querySelector(".item[class*='selected']");h&&h.previousElementSibling&&h.previousElementSibling.click()}function c(h){return h==null?null:h.classList.contains("item")?h:c(h.parentNode)}function u(h){var g=d(h.target);g&&(g.scrollLeft+=h.deltaX+h.deltaY)}function d(h){return h==null?null:h.scrollWidth>h.clientWidth?h:d(h.parentNode)}function f(h,g="smooth"){h==null&&(h=document.querySelector("[class*='selected']")),h&&h.scrollIntoView({behavior:g,block:"nearest",inline:"center"})}function p(h){return h.title==null||t.value==null?!1:t.value.title==h.title}function l(){e.selected&&(t.value=e.selected)}function m(h){h.target.value==null&&(h.code=="KeyA"||h.code=="ArrowLeft"?a():(h.code=="KeyD"||h.code=="ArrowRight")&&s())}return Qn(function(){l()}),pe(function(){f(null,"instant"),i()}),fe(function(){o()}),(h,g)=>(j(),N("div",{class:"carousel",onWheelPassive:g[0]||(g[0]=v=>u(v))},[(j(!0),N(Ce,null,Fe(n.items,(v,b)=>(j(),N("div",{class:$(["item",{selected:p(v)}]),onClick:_=>r(v,_)},[S("img",{src:v.url},null,8,Fh),v.label?(j(),N("p",{key:0,class:"label",innerHTML:v.label},null,8,qh)):K("",!0),S("p",{class:"title",innerHTML:v.description||v.title},null,8,Hh),v.tag?(j(),N("p",{key:1,class:"tag",innerHTML:v.tag},null,8,Vh)):K("",!0)],10,zh))),256))],32))}},Xh={class:"page"},Wh={class:"nav"},Zh={class:"content fade-in"},Gh=["innerHTML"],Yh={class:"footer"},Kh={__name:"BubblePageHome",emits:["setPage"],setup(n,{emit:e}){var t=e,i=W(),o=W(),r=W(f()),s=[{title:"Skins",url:"../svg/button-skins.svg",callback:function(){t("setPage","skins")}},{title:"Level Editor",url:"../svg/button-level-editor.svg",callback:function(){window.dispatchEvent(new CustomEvent("setTheme",{detail:"origin"})),setTimeout(function(){window.dispatchEvent(new CustomEvent("setPage",{detail:"level-manager"}))},0)}},{title:"Play",url:"../svg/button-play.svg",callback:function(){t("setPage","level-picker")}}];function a(){window.addEventListener("itemSelected",u)}function c(){window.removeEventListener("itemSelected",u)}function u(v){var b=v.detail;b.callback&&b.callback()}async function d(){var v=await fetch("../manifest.json"),b=await v.json();i.value=b,o.value="v"+b.version}function f(){return on[Math.floor(Math.random()*on.length)]}function p(){for(var v="",b=rn.length-1;b>=0;b--){var _=rn[b];v+="v"+_.version+`
`,_.revisions.forEach(function(E){v+="- "+E+`
`}),v+=`
`}window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:'<div style="font-size: 0.75em; padding-right: 1em; text-align: left;">'+v+"</div>",inputs:[{type:"button",value:"Close"}]}}))}function l(){var v="";navigator.userAgent.indexOf("Edg")!=-1?v="https://microsoftedge.microsoft.com/addons/detail/boxel-3d/gcklngphfijejfnnicbadhghhdifidek":navigator.userAgent.indexOf("Chrome")!=-1?v="https://chromewebstore.google.com/detail/boxel-3d/mjjgmlmpeaikcaajghilhnioimmaibon/reviews":navigator.userAgent.indexOf("Firefox")!=-1&&(v="https://addons.mozilla.org/en-US/firefox/addon/boxel-3d-game/"),h(v)}function m(v){v.preventDefault(v),v.target.href&&h(v.target.href)}function h(v,b="_blank"){chrome.tabs?chrome.tabs.create({url:v}):window.open(v,b)}function g(){window.open("../index.html","_self")}return pe(function(){d(),a()}),fe(function(){c()}),(v,b)=>(j(),N("div",Xh,[b[5]||(b[5]=S("div",{class:"background"},[S("img",{src:"../svg/background-purple.svg"})],-1)),S("div",Wh,[S("a",{class:"button left fade-in",onClick:g},b[1]||(b[1]=[S("span",{class:"material-symbols-rounded"},"undo",-1)])),de(Uh,{class:"button fade-in"}),de(sn,{class:"button fade-in"})]),S("div",Zh,[b[2]||(b[2]=S("h1",null,"BOXEL3D",-1)),S("p",{innerHTML:B(r),onClick:b[0]||(b[0]=_=>m(_))},null,8,Gh),de(Dr,{items:B(s),scrolling:"no"},null,8,["items"])]),S("div",Yh,[S("a",{class:$(["button fade-in",{hidden:B(o)==""}]),onClick:p},[b[3]||(b[3]=S("span",{class:"material-symbols-rounded"},"ink_pen",-1)),Be(" "+me(B(o)),1)],2),S("a",{class:"button right fade-in",onClick:l},b[4]||(b[4]=[S("span",{class:"material-symbols-rounded"},"favorite",-1),Be(" Write a review ")]))])]))}},Qh={class:"page"},Jh={class:"nav"},$h={class:"content fade-in"},ef={__name:"BubblePageSkins",emits:["setPage"],setup(n,{emit:e}){var t=e,i=W();function o(){window.addEventListener("keydown",d),window.addEventListener("itemSelected",a)}function r(){window.removeEventListener("keydown",d),window.removeEventListener("itemSelected",a)}var s=W(app.storage.getSettings());function a(p){var l=p.detail;s.value.skin=l,l.id==680?window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:"Custom Skin",inputs:[{type:"file",label:"Upload",class:"button",style:"width: 100%",accept:"image/png, image/jpeg",callback:c},{type:"button",value:"Close"}]}})):(app.player.setSkin({id:l.id,url:l.url}),app.updateSettings(s.value))}function c(p){var l=p.target.files[0];if(l){var m=new FileReader;m.onloadend=function(){var h={id:680,title:l.name,url:m.result};s.value.skin=h,app.player.setSkin(h,app),app.updateSettings(s.value),window.dispatchEvent(new CustomEvent("closePopup"))},m.readAsDataURL(l)}}function u(){t("setPage","home")}function d(p){if(p.target.value==null){var l=["Space","Enter","ArrowUp","KeyW"];l.indexOf(p.code)>-1&&(p.preventDefault(),u()),(p.code=="Escape"||p.code=="KeyE")&&(p.preventDefault(),u())}}function f(){var p=s.value.skin.id;Or.forEach(function(l){l.id==p&&(i.value=l)})}return Qn(function(){f()}),pe(function(){o()}),fe(function(){r()}),(p,l)=>(j(),N("div",Qh,[l[4]||(l[4]=S("div",{class:"background"},[S("img",{src:"../svg/background-purple.svg"})],-1)),S("div",Jh,[S("a",{class:"button fade-in",onClick:u,title:"Exit to home (ESC)"},l[0]||(l[0]=[S("span",{class:"material-symbols-rounded"},"undo",-1)])),de(sn,{class:"button right fade-in"})]),S("div",$h,[l[1]||(l[1]=S("h1",null,"Skins",-1)),l[2]||(l[2]=S("p",null,"Select your player skin",-1)),de(Dr,{items:B(Or),selected:B(i),class:"hide-titles"},null,8,["items","selected"])]),S("div",{class:"footer"},[S("a",{class:"button center fade-in",onClick:u},l[3]||(l[3]=[S("span",{class:"material-symbols-rounded"},"check_box",-1),Be(" Select ")]))])]))}},tf={class:"page"},nf={class:"nav"},rf={class:"content fade-in"},of=["innerHTML"],sf={__name:"BubblePageLevelPicker",emits:["setPage"],setup(n,{emit:e}){var t=W("Select a level"),i=W([]),o=W(0),r=W(),s=app.storage.getScores(),a=app.storage.getSettings(),c=parseInt(a.progress),u=e;function d(){window.addEventListener("keydown",y),window.addEventListener("itemSelected",h)}function f(){window.removeEventListener("keydown",y),window.removeEventListener("itemSelected",h)}async function p(w){await app.playLevelByTitle(w),u("setPage","campaign"),a.progress=m(w)+1,app.updateSettings(a)}function l(w){return s[w]}function m(w){var T=0,C=-1;return Xe.packs.forEach(function(M){M.levels.forEach(function(L){w==L.title&&(C=T),T++})}),C}function h(w){r.value==w.detail&&v(),r.value=w.detail,g()}function g(){var w=m(r.value.title),T=0;Xe.packs.forEach(function(C){C.levels.forEach(function(M){w==T&&(t.value=C.title,C.links&&C.links.forEach(function(L){t.value+=' <a class="'+L.class+'" href="'+L.url+'" target="'+L.target+'"><img src="'+L.icon+'"> '+L.text+"</a>"})),T++})})}function v(){p(r.value.title)}function b(){var w=c-1,T=0;Xe.packs.forEach(function(C){C.levels.forEach(function(M){(w==T||w==T+1)&&(r.value=M),T++})})}function _(){u("setPage","home")}function E(){i.value=[],Xe.packs.forEach(function(w,T){var C=w.url;w.levels.forEach(function(M,L){var x=l(M.title);x&&(M.tag='<span class="material-symbols-rounded">star</span>'+l(M.title)),M.url=C,M.theme=w.theme,i.value.push(M)})})}function y(w){if(w.target.value==null){var T=["Space","Enter","ArrowUp","KeyW"];T.indexOf(w.code)>-1&&(w.preventDefault(),v()),(w.code=="Escape"||w.code=="KeyE")&&(w.preventDefault(),_())}}return Qn(function(){E(),b(),g()}),pe(function(){d()}),fe(function(){f()}),(w,T)=>(j(),N("div",tf,[T[3]||(T[3]=S("div",{class:"background"},[S("img",{src:"../svg/background-purple.svg"})],-1)),S("div",nf,[S("a",{class:"button fade-in",onClick:_,title:"Exit to home (ESC)"},T[0]||(T[0]=[S("span",{class:"material-symbols-rounded"},"undo",-1)])),de(sn,{class:"button right fade-in"})]),S("div",rf,[T[1]||(T[1]=S("h1",null,"Play",-1)),S("p",{innerHTML:B(t)},null,8,of),(j(),ae(Dr,{items:B(i),selected:B(r),key:B(o)},null,8,["items","selected"]))]),S("div",{class:"footer"},[S("a",{class:"button center fade-in",onClick:v},T[2]||(T[2]=[S("span",{class:"material-symbols-rounded"},"slideshow",-1),Be(" Play ")]))])]))}},af={key:0,class:"controls"},lf={class:"wasd"},cf={class:"row"},pf={__name:"BubbleControls",setup(n){var e=W({}),t=W(!1);function i(){window.addEventListener("keydown",r),window.addEventListener("keyup",s),window.addEventListener("setMode",c)}function o(){window.removeEventListener("keydown",r),window.removeEventListener("keyup",s),window.removeEventListener("setMode",c)}function r(u){u.target.value==null&&(e.value[u.code]=!0)}function s(u){e.value[u.code]=!1}function a(u,d){window.dispatchEvent(new KeyboardEvent(u,{code:d})),e.value[d]=u=="keydown"}function c(u){var d=u.detail;d=="control"?t.value=!0:t.value=!1}return pe(function(){i()}),fe(function(){o()}),(u,d)=>B(t)?(j(),N("div",af,[S("div",lf,[S("div",cf,[S("div",{class:$(["key fade-in",{active:B(e).KeyA||B(e).ArrowLeft}]),onPointerdown:d[0]||(d[0]=f=>a("keydown","KeyA")),onPointerup:d[1]||(d[1]=f=>a("keyup","KeyA")),onPointerout:d[2]||(d[2]=f=>a("keyup","KeyA"))},d[9]||(d[9]=[S("span",{class:"material-symbols-rounded"},"arrow_back",-1)]),34),S("div",{class:$(["key fade-in",{active:B(e).KeyW||B(e).ArrowUp||B(e).Space}]),onPointerdown:d[3]||(d[3]=f=>a("keydown","KeyW")),onPointerup:d[4]||(d[4]=f=>a("keyup","KeyW")),onPointerout:d[5]||(d[5]=f=>a("keyup","KeyW"))},d[10]||(d[10]=[S("span",{class:"material-symbols-rounded"},"arrow_upward",-1)]),34),S("div",{class:$(["key fade-in",{active:B(e).KeyD||B(e).ArrowRight}]),onPointerdown:d[6]||(d[6]=f=>a("keydown","KeyD")),onPointerup:d[7]||(d[7]=f=>a("keyup","KeyD")),onPointerout:d[8]||(d[8]=f=>a("keyup","KeyD"))},d[11]||(d[11]=[S("span",{class:"material-symbols-rounded"},"arrow_forward",-1)]),34)])])])):K("",!0)}},df={key:0,class:"stats button left fade-in disabled"},uf={class:"fps"},hf={__name:"BubbleStats",setup(n){var e=W(!1),t=Date.now(),i=!1,o=0,r=W(0);function s(){window.addEventListener("updateStatsVisibility",f)}function a(){window.removeEventListener("updateStatsVisibility",f)}function c(){if(i==!0){requestAnimationFrame(function(){c()});var p=Date.now();o++,p>t+1e3&&(r.value=Math.round(o*1e3/(p-t)),t=p,o=0)}}function u(){i=!0,c()}function d(){i=!1}function f(){var p=app.storage.getSettings(app);e.value=p.stats}return pe(function(){u(),f(),s()}),fe(function(){d(),a()}),(p,l)=>B(e)?(j(),N("a",df,[l[0]||(l[0]=S("span",{class:"material-symbols-rounded"},"speed",-1)),S("span",uf,me(B(r))+" FPS",1)])):K("",!0)}},ff={class:"page"},mf={class:"nav"},gf={key:0,class:"record"},vf=["innerHTML"],yf={class:"footer"},bf=["innerHTML"],wf={__name:"BubblePageCampaign",setup(n){var e=W(""),t=W(!0),i=W();function o(){window.addEventListener("setCredit",s),window.addEventListener("popupOpened",c),window.addEventListener("popupClosed",u),window.addEventListener("beforeSettingsOpened",d),window.addEventListener("beforeSettingsClosed",f),window.addEventListener("keydown",p),window.addEventListener("keyup",l)}function r(){window.removeEventListener("setCredit",s),window.removeEventListener("popupOpened",c),window.removeEventListener("popupClosed",u),window.removeEventListener("beforeSettingsOpened",d),window.removeEventListener("beforeSettingsClosed",f),window.removeEventListener("keydown",p),window.removeEventListener("keyup",l)}function s(h){h.detail.text&&(e.value=h.detail.text)}function a(){app.pauseLevel(),window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:"Paused",inputs:[{value:"Exit (E)",type:"button",callback:function(h){app.exitCampaign()}},{value:"Retry (R)",type:"button",callback:function(h){app.level.retryLevel()}},{value:"Play",type:"button",callback:function(h){setTimeout(function(){app.resumeLevel()},100)}}]}}))}function c(){t.value=!1}function u(){t.value=!0,m()}function d(){app.pauseLevel()}function f(){app.resumeLevel()}function p(h){if(t.value==!0&&h.target.value==null)if(h.code=="Escape")h.preventDefault(),a();else if(h.code=="KeyE")app.exitCampaign();else if(h.code=="KeyR")app.level.retryLevel();else if(h.code=="KeyC")app.player.restart();else if(h.code=="KeyA"||h.code=="ArrowLeft")app.play==!0&&app.player.setControls("left",-1);else if(h.code=="KeyD"||h.code=="ArrowRight")app.play==!0&&app.player.setControls("right",1);else{var g=["Space","Enter","ArrowUp","KeyW"];g.indexOf(h.code)>-1&&app.player.jump()}}function l(h){h.code=="KeyA"||h.code=="ArrowLeft"?app.player.setControls("left",0):(h.code=="KeyD"||h.code=="ArrowRight")&&app.player.setControls("right",0)}function m(){var h=app.level.name,g=app.storage.getScores()[h];g&&(i.value=app.timer.toHTML(g))}return pe(function(){app.showCanvas(),m(),o()}),fe(function(){app.hideCanvas(),r()}),(h,g)=>(j(),N("div",ff,[S("div",mf,[S("div",{class:"score fade-in",onClick:g[0]||(g[0]=v=>a())},[g[2]||(g[2]=S("div",{class:"current"},[S("span",{class:"material-symbols-rounded"},"pause_circle"),S("div",{id:"timer"})],-1)),B(i)?(j(),N("div",gf,[g[1]||(g[1]=S("span",{class:"material-symbols-rounded"},"star",-1)),S("div",{innerHTML:B(i)},null,8,vf)])):K("",!0)]),de(sn,{class:"button right fade-in"})]),S("div",yf,[de(hf),B(e)?(j(),N("div",{key:0,id:"credit",class:"credit button fade-in disabled",innerHTML:B(e)},null,8,bf)):K("",!0),de(pf)])]))}};var Sa={},ri={},Lr={},oi={},Ir={};Object.defineProperty(Ir,"__esModule",{value:!0});var Tb=Ir.default=new Uint16Array('\u1D41<\xD5\u0131\u028A\u049D\u057B\u05D0\u0675\u06DE\u07A2\u07D6\u080F\u0A4A\u0A91\u0DA1\u0E6D\u0F09\u0F26\u10CA\u1228\u12E1\u1415\u149D\u14C3\u14DF\u1525\0\0\0\0\0\0\u156B\u16CD\u198D\u1C12\u1DDD\u1F7E\u2060\u21B0\u228D\u23C0\u23FB\u2442\u2824\u2912\u2D08\u2E48\u2FCE\u3016\u32BA\u3639\u37AC\u38FE\u3A28\u3A71\u3AE0\u3B2E\u0800EMabcfglmnoprstu\\bfms\x7F\x84\x8B\x90\x95\x98\xA6\xB3\xB9\xC8\xCFlig\u803B\xC6\u40C6P\u803B&\u4026cute\u803B\xC1\u40C1reve;\u4102\u0100iyx}rc\u803B\xC2\u40C2;\u4410r;\uC000\u{1D504}rave\u803B\xC0\u40C0pha;\u4391acr;\u4100d;\u6A53\u0100gp\x9D\xA1on;\u4104f;\uC000\u{1D538}plyFunction;\u6061ing\u803B\xC5\u40C5\u0100cs\xBE\xC3r;\uC000\u{1D49C}ign;\u6254ilde\u803B\xC3\u40C3ml\u803B\xC4\u40C4\u0400aceforsu\xE5\xFB\xFE\u0117\u011C\u0122\u0127\u012A\u0100cr\xEA\xF2kslash;\u6216\u0176\xF6\xF8;\u6AE7ed;\u6306y;\u4411\u0180crt\u0105\u010B\u0114ause;\u6235noullis;\u612Ca;\u4392r;\uC000\u{1D505}pf;\uC000\u{1D539}eve;\u42D8c\xF2\u0113mpeq;\u624E\u0700HOacdefhilorsu\u014D\u0151\u0156\u0180\u019E\u01A2\u01B5\u01B7\u01BA\u01DC\u0215\u0273\u0278\u027Ecy;\u4427PY\u803B\xA9\u40A9\u0180cpy\u015D\u0162\u017Aute;\u4106\u0100;i\u0167\u0168\u62D2talDifferentialD;\u6145leys;\u612D\u0200aeio\u0189\u018E\u0194\u0198ron;\u410Cdil\u803B\xC7\u40C7rc;\u4108nint;\u6230ot;\u410A\u0100dn\u01A7\u01ADilla;\u40B8terDot;\u40B7\xF2\u017Fi;\u43A7rcle\u0200DMPT\u01C7\u01CB\u01D1\u01D6ot;\u6299inus;\u6296lus;\u6295imes;\u6297o\u0100cs\u01E2\u01F8kwiseContourIntegral;\u6232eCurly\u0100DQ\u0203\u020FoubleQuote;\u601Duote;\u6019\u0200lnpu\u021E\u0228\u0247\u0255on\u0100;e\u0225\u0226\u6237;\u6A74\u0180git\u022F\u0236\u023Aruent;\u6261nt;\u622FourIntegral;\u622E\u0100fr\u024C\u024E;\u6102oduct;\u6210nterClockwiseContourIntegral;\u6233oss;\u6A2Fcr;\uC000\u{1D49E}p\u0100;C\u0284\u0285\u62D3ap;\u624D\u0580DJSZacefios\u02A0\u02AC\u02B0\u02B4\u02B8\u02CB\u02D7\u02E1\u02E6\u0333\u048D\u0100;o\u0179\u02A5trahd;\u6911cy;\u4402cy;\u4405cy;\u440F\u0180grs\u02BF\u02C4\u02C7ger;\u6021r;\u61A1hv;\u6AE4\u0100ay\u02D0\u02D5ron;\u410E;\u4414l\u0100;t\u02DD\u02DE\u6207a;\u4394r;\uC000\u{1D507}\u0100af\u02EB\u0327\u0100cm\u02F0\u0322ritical\u0200ADGT\u0300\u0306\u0316\u031Ccute;\u40B4o\u0174\u030B\u030D;\u42D9bleAcute;\u42DDrave;\u4060ilde;\u42DCond;\u62C4ferentialD;\u6146\u0470\u033D\0\0\0\u0342\u0354\0\u0405f;\uC000\u{1D53B}\u0180;DE\u0348\u0349\u034D\u40A8ot;\u60DCqual;\u6250ble\u0300CDLRUV\u0363\u0372\u0382\u03CF\u03E2\u03F8ontourIntegra\xEC\u0239o\u0274\u0379\0\0\u037B\xBB\u0349nArrow;\u61D3\u0100eo\u0387\u03A4ft\u0180ART\u0390\u0396\u03A1rrow;\u61D0ightArrow;\u61D4e\xE5\u02CAng\u0100LR\u03AB\u03C4eft\u0100AR\u03B3\u03B9rrow;\u67F8ightArrow;\u67FAightArrow;\u67F9ight\u0100AT\u03D8\u03DErrow;\u61D2ee;\u62A8p\u0241\u03E9\0\0\u03EFrrow;\u61D1ownArrow;\u61D5erticalBar;\u6225n\u0300ABLRTa\u0412\u042A\u0430\u045E\u047F\u037Crrow\u0180;BU\u041D\u041E\u0422\u6193ar;\u6913pArrow;\u61F5reve;\u4311eft\u02D2\u043A\0\u0446\0\u0450ightVector;\u6950eeVector;\u695Eector\u0100;B\u0459\u045A\u61BDar;\u6956ight\u01D4\u0467\0\u0471eeVector;\u695Fector\u0100;B\u047A\u047B\u61C1ar;\u6957ee\u0100;A\u0486\u0487\u62A4rrow;\u61A7\u0100ct\u0492\u0497r;\uC000\u{1D49F}rok;\u4110\u0800NTacdfglmopqstux\u04BD\u04C0\u04C4\u04CB\u04DE\u04E2\u04E7\u04EE\u04F5\u0521\u052F\u0536\u0552\u055D\u0560\u0565G;\u414AH\u803B\xD0\u40D0cute\u803B\xC9\u40C9\u0180aiy\u04D2\u04D7\u04DCron;\u411Arc\u803B\xCA\u40CA;\u442Dot;\u4116r;\uC000\u{1D508}rave\u803B\xC8\u40C8ement;\u6208\u0100ap\u04FA\u04FEcr;\u4112ty\u0253\u0506\0\0\u0512mallSquare;\u65FBerySmallSquare;\u65AB\u0100gp\u0526\u052Aon;\u4118f;\uC000\u{1D53C}silon;\u4395u\u0100ai\u053C\u0549l\u0100;T\u0542\u0543\u6A75ilde;\u6242librium;\u61CC\u0100ci\u0557\u055Ar;\u6130m;\u6A73a;\u4397ml\u803B\xCB\u40CB\u0100ip\u056A\u056Fsts;\u6203onentialE;\u6147\u0280cfios\u0585\u0588\u058D\u05B2\u05CCy;\u4424r;\uC000\u{1D509}lled\u0253\u0597\0\0\u05A3mallSquare;\u65FCerySmallSquare;\u65AA\u0370\u05BA\0\u05BF\0\0\u05C4f;\uC000\u{1D53D}All;\u6200riertrf;\u6131c\xF2\u05CB\u0600JTabcdfgorst\u05E8\u05EC\u05EF\u05FA\u0600\u0612\u0616\u061B\u061D\u0623\u066C\u0672cy;\u4403\u803B>\u403Emma\u0100;d\u05F7\u05F8\u4393;\u43DCreve;\u411E\u0180eiy\u0607\u060C\u0610dil;\u4122rc;\u411C;\u4413ot;\u4120r;\uC000\u{1D50A};\u62D9pf;\uC000\u{1D53E}eater\u0300EFGLST\u0635\u0644\u064E\u0656\u065B\u0666qual\u0100;L\u063E\u063F\u6265ess;\u62DBullEqual;\u6267reater;\u6AA2ess;\u6277lantEqual;\u6A7Eilde;\u6273cr;\uC000\u{1D4A2};\u626B\u0400Aacfiosu\u0685\u068B\u0696\u069B\u069E\u06AA\u06BE\u06CARDcy;\u442A\u0100ct\u0690\u0694ek;\u42C7;\u405Eirc;\u4124r;\u610ClbertSpace;\u610B\u01F0\u06AF\0\u06B2f;\u610DizontalLine;\u6500\u0100ct\u06C3\u06C5\xF2\u06A9rok;\u4126mp\u0144\u06D0\u06D8ownHum\xF0\u012Fqual;\u624F\u0700EJOacdfgmnostu\u06FA\u06FE\u0703\u0707\u070E\u071A\u071E\u0721\u0728\u0744\u0778\u078B\u078F\u0795cy;\u4415lig;\u4132cy;\u4401cute\u803B\xCD\u40CD\u0100iy\u0713\u0718rc\u803B\xCE\u40CE;\u4418ot;\u4130r;\u6111rave\u803B\xCC\u40CC\u0180;ap\u0720\u072F\u073F\u0100cg\u0734\u0737r;\u412AinaryI;\u6148lie\xF3\u03DD\u01F4\u0749\0\u0762\u0100;e\u074D\u074E\u622C\u0100gr\u0753\u0758ral;\u622Bsection;\u62C2isible\u0100CT\u076C\u0772omma;\u6063imes;\u6062\u0180gpt\u077F\u0783\u0788on;\u412Ef;\uC000\u{1D540}a;\u4399cr;\u6110ilde;\u4128\u01EB\u079A\0\u079Ecy;\u4406l\u803B\xCF\u40CF\u0280cfosu\u07AC\u07B7\u07BC\u07C2\u07D0\u0100iy\u07B1\u07B5rc;\u4134;\u4419r;\uC000\u{1D50D}pf;\uC000\u{1D541}\u01E3\u07C7\0\u07CCr;\uC000\u{1D4A5}rcy;\u4408kcy;\u4404\u0380HJacfos\u07E4\u07E8\u07EC\u07F1\u07FD\u0802\u0808cy;\u4425cy;\u440Cppa;\u439A\u0100ey\u07F6\u07FBdil;\u4136;\u441Ar;\uC000\u{1D50E}pf;\uC000\u{1D542}cr;\uC000\u{1D4A6}\u0580JTaceflmost\u0825\u0829\u082C\u0850\u0863\u09B3\u09B8\u09C7\u09CD\u0A37\u0A47cy;\u4409\u803B<\u403C\u0280cmnpr\u0837\u083C\u0841\u0844\u084Dute;\u4139bda;\u439Bg;\u67EAlacetrf;\u6112r;\u619E\u0180aey\u0857\u085C\u0861ron;\u413Ddil;\u413B;\u441B\u0100fs\u0868\u0970t\u0500ACDFRTUVar\u087E\u08A9\u08B1\u08E0\u08E6\u08FC\u092F\u095B\u0390\u096A\u0100nr\u0883\u088FgleBracket;\u67E8row\u0180;BR\u0899\u089A\u089E\u6190ar;\u61E4ightArrow;\u61C6eiling;\u6308o\u01F5\u08B7\0\u08C3bleBracket;\u67E6n\u01D4\u08C8\0\u08D2eeVector;\u6961ector\u0100;B\u08DB\u08DC\u61C3ar;\u6959loor;\u630Aight\u0100AV\u08EF\u08F5rrow;\u6194ector;\u694E\u0100er\u0901\u0917e\u0180;AV\u0909\u090A\u0910\u62A3rrow;\u61A4ector;\u695Aiangle\u0180;BE\u0924\u0925\u0929\u62B2ar;\u69CFqual;\u62B4p\u0180DTV\u0937\u0942\u094CownVector;\u6951eeVector;\u6960ector\u0100;B\u0956\u0957\u61BFar;\u6958ector\u0100;B\u0965\u0966\u61BCar;\u6952ight\xE1\u039Cs\u0300EFGLST\u097E\u098B\u0995\u099D\u09A2\u09ADqualGreater;\u62DAullEqual;\u6266reater;\u6276ess;\u6AA1lantEqual;\u6A7Dilde;\u6272r;\uC000\u{1D50F}\u0100;e\u09BD\u09BE\u62D8ftarrow;\u61DAidot;\u413F\u0180npw\u09D4\u0A16\u0A1Bg\u0200LRlr\u09DE\u09F7\u0A02\u0A10eft\u0100AR\u09E6\u09ECrrow;\u67F5ightArrow;\u67F7ightArrow;\u67F6eft\u0100ar\u03B3\u0A0Aight\xE1\u03BFight\xE1\u03CAf;\uC000\u{1D543}er\u0100LR\u0A22\u0A2CeftArrow;\u6199ightArrow;\u6198\u0180cht\u0A3E\u0A40\u0A42\xF2\u084C;\u61B0rok;\u4141;\u626A\u0400acefiosu\u0A5A\u0A5D\u0A60\u0A77\u0A7C\u0A85\u0A8B\u0A8Ep;\u6905y;\u441C\u0100dl\u0A65\u0A6FiumSpace;\u605Flintrf;\u6133r;\uC000\u{1D510}nusPlus;\u6213pf;\uC000\u{1D544}c\xF2\u0A76;\u439C\u0480Jacefostu\u0AA3\u0AA7\u0AAD\u0AC0\u0B14\u0B19\u0D91\u0D97\u0D9Ecy;\u440Acute;\u4143\u0180aey\u0AB4\u0AB9\u0ABEron;\u4147dil;\u4145;\u441D\u0180gsw\u0AC7\u0AF0\u0B0Eative\u0180MTV\u0AD3\u0ADF\u0AE8ediumSpace;\u600Bhi\u0100cn\u0AE6\u0AD8\xEB\u0AD9eryThi\xEE\u0AD9ted\u0100GL\u0AF8\u0B06reaterGreate\xF2\u0673essLes\xF3\u0A48Line;\u400Ar;\uC000\u{1D511}\u0200Bnpt\u0B22\u0B28\u0B37\u0B3Areak;\u6060BreakingSpace;\u40A0f;\u6115\u0680;CDEGHLNPRSTV\u0B55\u0B56\u0B6A\u0B7C\u0BA1\u0BEB\u0C04\u0C5E\u0C84\u0CA6\u0CD8\u0D61\u0D85\u6AEC\u0100ou\u0B5B\u0B64ngruent;\u6262pCap;\u626DoubleVerticalBar;\u6226\u0180lqx\u0B83\u0B8A\u0B9Bement;\u6209ual\u0100;T\u0B92\u0B93\u6260ilde;\uC000\u2242\u0338ists;\u6204reater\u0380;EFGLST\u0BB6\u0BB7\u0BBD\u0BC9\u0BD3\u0BD8\u0BE5\u626Fqual;\u6271ullEqual;\uC000\u2267\u0338reater;\uC000\u226B\u0338ess;\u6279lantEqual;\uC000\u2A7E\u0338ilde;\u6275ump\u0144\u0BF2\u0BFDownHump;\uC000\u224E\u0338qual;\uC000\u224F\u0338e\u0100fs\u0C0A\u0C27tTriangle\u0180;BE\u0C1A\u0C1B\u0C21\u62EAar;\uC000\u29CF\u0338qual;\u62ECs\u0300;EGLST\u0C35\u0C36\u0C3C\u0C44\u0C4B\u0C58\u626Equal;\u6270reater;\u6278ess;\uC000\u226A\u0338lantEqual;\uC000\u2A7D\u0338ilde;\u6274ested\u0100GL\u0C68\u0C79reaterGreater;\uC000\u2AA2\u0338essLess;\uC000\u2AA1\u0338recedes\u0180;ES\u0C92\u0C93\u0C9B\u6280qual;\uC000\u2AAF\u0338lantEqual;\u62E0\u0100ei\u0CAB\u0CB9verseElement;\u620CghtTriangle\u0180;BE\u0CCB\u0CCC\u0CD2\u62EBar;\uC000\u29D0\u0338qual;\u62ED\u0100qu\u0CDD\u0D0CuareSu\u0100bp\u0CE8\u0CF9set\u0100;E\u0CF0\u0CF3\uC000\u228F\u0338qual;\u62E2erset\u0100;E\u0D03\u0D06\uC000\u2290\u0338qual;\u62E3\u0180bcp\u0D13\u0D24\u0D4Eset\u0100;E\u0D1B\u0D1E\uC000\u2282\u20D2qual;\u6288ceeds\u0200;EST\u0D32\u0D33\u0D3B\u0D46\u6281qual;\uC000\u2AB0\u0338lantEqual;\u62E1ilde;\uC000\u227F\u0338erset\u0100;E\u0D58\u0D5B\uC000\u2283\u20D2qual;\u6289ilde\u0200;EFT\u0D6E\u0D6F\u0D75\u0D7F\u6241qual;\u6244ullEqual;\u6247ilde;\u6249erticalBar;\u6224cr;\uC000\u{1D4A9}ilde\u803B\xD1\u40D1;\u439D\u0700Eacdfgmoprstuv\u0DBD\u0DC2\u0DC9\u0DD5\u0DDB\u0DE0\u0DE7\u0DFC\u0E02\u0E20\u0E22\u0E32\u0E3F\u0E44lig;\u4152cute\u803B\xD3\u40D3\u0100iy\u0DCE\u0DD3rc\u803B\xD4\u40D4;\u441Eblac;\u4150r;\uC000\u{1D512}rave\u803B\xD2\u40D2\u0180aei\u0DEE\u0DF2\u0DF6cr;\u414Cga;\u43A9cron;\u439Fpf;\uC000\u{1D546}enCurly\u0100DQ\u0E0E\u0E1AoubleQuote;\u601Cuote;\u6018;\u6A54\u0100cl\u0E27\u0E2Cr;\uC000\u{1D4AA}ash\u803B\xD8\u40D8i\u016C\u0E37\u0E3Cde\u803B\xD5\u40D5es;\u6A37ml\u803B\xD6\u40D6er\u0100BP\u0E4B\u0E60\u0100ar\u0E50\u0E53r;\u603Eac\u0100ek\u0E5A\u0E5C;\u63DEet;\u63B4arenthesis;\u63DC\u0480acfhilors\u0E7F\u0E87\u0E8A\u0E8F\u0E92\u0E94\u0E9D\u0EB0\u0EFCrtialD;\u6202y;\u441Fr;\uC000\u{1D513}i;\u43A6;\u43A0usMinus;\u40B1\u0100ip\u0EA2\u0EADncareplan\xE5\u069Df;\u6119\u0200;eio\u0EB9\u0EBA\u0EE0\u0EE4\u6ABBcedes\u0200;EST\u0EC8\u0EC9\u0ECF\u0EDA\u627Aqual;\u6AAFlantEqual;\u627Cilde;\u627Eme;\u6033\u0100dp\u0EE9\u0EEEuct;\u620Fortion\u0100;a\u0225\u0EF9l;\u621D\u0100ci\u0F01\u0F06r;\uC000\u{1D4AB};\u43A8\u0200Ufos\u0F11\u0F16\u0F1B\u0F1FOT\u803B"\u4022r;\uC000\u{1D514}pf;\u611Acr;\uC000\u{1D4AC}\u0600BEacefhiorsu\u0F3E\u0F43\u0F47\u0F60\u0F73\u0FA7\u0FAA\u0FAD\u1096\u10A9\u10B4\u10BEarr;\u6910G\u803B\xAE\u40AE\u0180cnr\u0F4E\u0F53\u0F56ute;\u4154g;\u67EBr\u0100;t\u0F5C\u0F5D\u61A0l;\u6916\u0180aey\u0F67\u0F6C\u0F71ron;\u4158dil;\u4156;\u4420\u0100;v\u0F78\u0F79\u611Cerse\u0100EU\u0F82\u0F99\u0100lq\u0F87\u0F8Eement;\u620Builibrium;\u61CBpEquilibrium;\u696Fr\xBB\u0F79o;\u43A1ght\u0400ACDFTUVa\u0FC1\u0FEB\u0FF3\u1022\u1028\u105B\u1087\u03D8\u0100nr\u0FC6\u0FD2gleBracket;\u67E9row\u0180;BL\u0FDC\u0FDD\u0FE1\u6192ar;\u61E5eftArrow;\u61C4eiling;\u6309o\u01F5\u0FF9\0\u1005bleBracket;\u67E7n\u01D4\u100A\0\u1014eeVector;\u695Dector\u0100;B\u101D\u101E\u61C2ar;\u6955loor;\u630B\u0100er\u102D\u1043e\u0180;AV\u1035\u1036\u103C\u62A2rrow;\u61A6ector;\u695Biangle\u0180;BE\u1050\u1051\u1055\u62B3ar;\u69D0qual;\u62B5p\u0180DTV\u1063\u106E\u1078ownVector;\u694FeeVector;\u695Cector\u0100;B\u1082\u1083\u61BEar;\u6954ector\u0100;B\u1091\u1092\u61C0ar;\u6953\u0100pu\u109B\u109Ef;\u611DndImplies;\u6970ightarrow;\u61DB\u0100ch\u10B9\u10BCr;\u611B;\u61B1leDelayed;\u69F4\u0680HOacfhimoqstu\u10E4\u10F1\u10F7\u10FD\u1119\u111E\u1151\u1156\u1161\u1167\u11B5\u11BB\u11BF\u0100Cc\u10E9\u10EEHcy;\u4429y;\u4428FTcy;\u442Ccute;\u415A\u0280;aeiy\u1108\u1109\u110E\u1113\u1117\u6ABCron;\u4160dil;\u415Erc;\u415C;\u4421r;\uC000\u{1D516}ort\u0200DLRU\u112A\u1134\u113E\u1149ownArrow\xBB\u041EeftArrow\xBB\u089AightArrow\xBB\u0FDDpArrow;\u6191gma;\u43A3allCircle;\u6218pf;\uC000\u{1D54A}\u0272\u116D\0\0\u1170t;\u621Aare\u0200;ISU\u117B\u117C\u1189\u11AF\u65A1ntersection;\u6293u\u0100bp\u118F\u119Eset\u0100;E\u1197\u1198\u628Fqual;\u6291erset\u0100;E\u11A8\u11A9\u6290qual;\u6292nion;\u6294cr;\uC000\u{1D4AE}ar;\u62C6\u0200bcmp\u11C8\u11DB\u1209\u120B\u0100;s\u11CD\u11CE\u62D0et\u0100;E\u11CD\u11D5qual;\u6286\u0100ch\u11E0\u1205eeds\u0200;EST\u11ED\u11EE\u11F4\u11FF\u627Bqual;\u6AB0lantEqual;\u627Dilde;\u627FTh\xE1\u0F8C;\u6211\u0180;es\u1212\u1213\u1223\u62D1rset\u0100;E\u121C\u121D\u6283qual;\u6287et\xBB\u1213\u0580HRSacfhiors\u123E\u1244\u1249\u1255\u125E\u1271\u1276\u129F\u12C2\u12C8\u12D1ORN\u803B\xDE\u40DEADE;\u6122\u0100Hc\u124E\u1252cy;\u440By;\u4426\u0100bu\u125A\u125C;\u4009;\u43A4\u0180aey\u1265\u126A\u126Fron;\u4164dil;\u4162;\u4422r;\uC000\u{1D517}\u0100ei\u127B\u1289\u01F2\u1280\0\u1287efore;\u6234a;\u4398\u0100cn\u128E\u1298kSpace;\uC000\u205F\u200ASpace;\u6009lde\u0200;EFT\u12AB\u12AC\u12B2\u12BC\u623Cqual;\u6243ullEqual;\u6245ilde;\u6248pf;\uC000\u{1D54B}ipleDot;\u60DB\u0100ct\u12D6\u12DBr;\uC000\u{1D4AF}rok;\u4166\u0AE1\u12F7\u130E\u131A\u1326\0\u132C\u1331\0\0\0\0\0\u1338\u133D\u1377\u1385\0\u13FF\u1404\u140A\u1410\u0100cr\u12FB\u1301ute\u803B\xDA\u40DAr\u0100;o\u1307\u1308\u619Fcir;\u6949r\u01E3\u1313\0\u1316y;\u440Eve;\u416C\u0100iy\u131E\u1323rc\u803B\xDB\u40DB;\u4423blac;\u4170r;\uC000\u{1D518}rave\u803B\xD9\u40D9acr;\u416A\u0100di\u1341\u1369er\u0100BP\u1348\u135D\u0100ar\u134D\u1350r;\u405Fac\u0100ek\u1357\u1359;\u63DFet;\u63B5arenthesis;\u63DDon\u0100;P\u1370\u1371\u62C3lus;\u628E\u0100gp\u137B\u137Fon;\u4172f;\uC000\u{1D54C}\u0400ADETadps\u1395\u13AE\u13B8\u13C4\u03E8\u13D2\u13D7\u13F3rrow\u0180;BD\u1150\u13A0\u13A4ar;\u6912ownArrow;\u61C5ownArrow;\u6195quilibrium;\u696Eee\u0100;A\u13CB\u13CC\u62A5rrow;\u61A5own\xE1\u03F3er\u0100LR\u13DE\u13E8eftArrow;\u6196ightArrow;\u6197i\u0100;l\u13F9\u13FA\u43D2on;\u43A5ing;\u416Ecr;\uC000\u{1D4B0}ilde;\u4168ml\u803B\xDC\u40DC\u0480Dbcdefosv\u1427\u142C\u1430\u1433\u143E\u1485\u148A\u1490\u1496ash;\u62ABar;\u6AEBy;\u4412ash\u0100;l\u143B\u143C\u62A9;\u6AE6\u0100er\u1443\u1445;\u62C1\u0180bty\u144C\u1450\u147Aar;\u6016\u0100;i\u144F\u1455cal\u0200BLST\u1461\u1465\u146A\u1474ar;\u6223ine;\u407Ceparator;\u6758ilde;\u6240ThinSpace;\u600Ar;\uC000\u{1D519}pf;\uC000\u{1D54D}cr;\uC000\u{1D4B1}dash;\u62AA\u0280cefos\u14A7\u14AC\u14B1\u14B6\u14BCirc;\u4174dge;\u62C0r;\uC000\u{1D51A}pf;\uC000\u{1D54E}cr;\uC000\u{1D4B2}\u0200fios\u14CB\u14D0\u14D2\u14D8r;\uC000\u{1D51B};\u439Epf;\uC000\u{1D54F}cr;\uC000\u{1D4B3}\u0480AIUacfosu\u14F1\u14F5\u14F9\u14FD\u1504\u150F\u1514\u151A\u1520cy;\u442Fcy;\u4407cy;\u442Ecute\u803B\xDD\u40DD\u0100iy\u1509\u150Drc;\u4176;\u442Br;\uC000\u{1D51C}pf;\uC000\u{1D550}cr;\uC000\u{1D4B4}ml;\u4178\u0400Hacdefos\u1535\u1539\u153F\u154B\u154F\u155D\u1560\u1564cy;\u4416cute;\u4179\u0100ay\u1544\u1549ron;\u417D;\u4417ot;\u417B\u01F2\u1554\0\u155BoWidt\xE8\u0AD9a;\u4396r;\u6128pf;\u6124cr;\uC000\u{1D4B5}\u0BE1\u1583\u158A\u1590\0\u15B0\u15B6\u15BF\0\0\0\0\u15C6\u15DB\u15EB\u165F\u166D\0\u1695\u169B\u16B2\u16B9\0\u16BEcute\u803B\xE1\u40E1reve;\u4103\u0300;Ediuy\u159C\u159D\u15A1\u15A3\u15A8\u15AD\u623E;\uC000\u223E\u0333;\u623Frc\u803B\xE2\u40E2te\u80BB\xB4\u0306;\u4430lig\u803B\xE6\u40E6\u0100;r\xB2\u15BA;\uC000\u{1D51E}rave\u803B\xE0\u40E0\u0100ep\u15CA\u15D6\u0100fp\u15CF\u15D4sym;\u6135\xE8\u15D3ha;\u43B1\u0100ap\u15DFc\u0100cl\u15E4\u15E7r;\u4101g;\u6A3F\u0264\u15F0\0\0\u160A\u0280;adsv\u15FA\u15FB\u15FF\u1601\u1607\u6227nd;\u6A55;\u6A5Clope;\u6A58;\u6A5A\u0380;elmrsz\u1618\u1619\u161B\u161E\u163F\u164F\u1659\u6220;\u69A4e\xBB\u1619sd\u0100;a\u1625\u1626\u6221\u0461\u1630\u1632\u1634\u1636\u1638\u163A\u163C\u163E;\u69A8;\u69A9;\u69AA;\u69AB;\u69AC;\u69AD;\u69AE;\u69AFt\u0100;v\u1645\u1646\u621Fb\u0100;d\u164C\u164D\u62BE;\u699D\u0100pt\u1654\u1657h;\u6222\xBB\xB9arr;\u637C\u0100gp\u1663\u1667on;\u4105f;\uC000\u{1D552}\u0380;Eaeiop\u12C1\u167B\u167D\u1682\u1684\u1687\u168A;\u6A70cir;\u6A6F;\u624Ad;\u624Bs;\u4027rox\u0100;e\u12C1\u1692\xF1\u1683ing\u803B\xE5\u40E5\u0180cty\u16A1\u16A6\u16A8r;\uC000\u{1D4B6};\u402Amp\u0100;e\u12C1\u16AF\xF1\u0288ilde\u803B\xE3\u40E3ml\u803B\xE4\u40E4\u0100ci\u16C2\u16C8onin\xF4\u0272nt;\u6A11\u0800Nabcdefiklnoprsu\u16ED\u16F1\u1730\u173C\u1743\u1748\u1778\u177D\u17E0\u17E6\u1839\u1850\u170D\u193D\u1948\u1970ot;\u6AED\u0100cr\u16F6\u171Ek\u0200ceps\u1700\u1705\u170D\u1713ong;\u624Cpsilon;\u43F6rime;\u6035im\u0100;e\u171A\u171B\u623Dq;\u62CD\u0176\u1722\u1726ee;\u62BDed\u0100;g\u172C\u172D\u6305e\xBB\u172Drk\u0100;t\u135C\u1737brk;\u63B6\u0100oy\u1701\u1741;\u4431quo;\u601E\u0280cmprt\u1753\u175B\u1761\u1764\u1768aus\u0100;e\u010A\u0109ptyv;\u69B0s\xE9\u170Cno\xF5\u0113\u0180ahw\u176F\u1771\u1773;\u43B2;\u6136een;\u626Cr;\uC000\u{1D51F}g\u0380costuvw\u178D\u179D\u17B3\u17C1\u17D5\u17DB\u17DE\u0180aiu\u1794\u1796\u179A\xF0\u0760rc;\u65EFp\xBB\u1371\u0180dpt\u17A4\u17A8\u17ADot;\u6A00lus;\u6A01imes;\u6A02\u0271\u17B9\0\0\u17BEcup;\u6A06ar;\u6605riangle\u0100du\u17CD\u17D2own;\u65BDp;\u65B3plus;\u6A04e\xE5\u1444\xE5\u14ADarow;\u690D\u0180ako\u17ED\u1826\u1835\u0100cn\u17F2\u1823k\u0180lst\u17FA\u05AB\u1802ozenge;\u69EBriangle\u0200;dlr\u1812\u1813\u1818\u181D\u65B4own;\u65BEeft;\u65C2ight;\u65B8k;\u6423\u01B1\u182B\0\u1833\u01B2\u182F\0\u1831;\u6592;\u65914;\u6593ck;\u6588\u0100eo\u183E\u184D\u0100;q\u1843\u1846\uC000=\u20E5uiv;\uC000\u2261\u20E5t;\u6310\u0200ptwx\u1859\u185E\u1867\u186Cf;\uC000\u{1D553}\u0100;t\u13CB\u1863om\xBB\u13CCtie;\u62C8\u0600DHUVbdhmptuv\u1885\u1896\u18AA\u18BB\u18D7\u18DB\u18EC\u18FF\u1905\u190A\u1910\u1921\u0200LRlr\u188E\u1890\u1892\u1894;\u6557;\u6554;\u6556;\u6553\u0280;DUdu\u18A1\u18A2\u18A4\u18A6\u18A8\u6550;\u6566;\u6569;\u6564;\u6567\u0200LRlr\u18B3\u18B5\u18B7\u18B9;\u655D;\u655A;\u655C;\u6559\u0380;HLRhlr\u18CA\u18CB\u18CD\u18CF\u18D1\u18D3\u18D5\u6551;\u656C;\u6563;\u6560;\u656B;\u6562;\u655Fox;\u69C9\u0200LRlr\u18E4\u18E6\u18E8\u18EA;\u6555;\u6552;\u6510;\u650C\u0280;DUdu\u06BD\u18F7\u18F9\u18FB\u18FD;\u6565;\u6568;\u652C;\u6534inus;\u629Flus;\u629Eimes;\u62A0\u0200LRlr\u1919\u191B\u191D\u191F;\u655B;\u6558;\u6518;\u6514\u0380;HLRhlr\u1930\u1931\u1933\u1935\u1937\u1939\u193B\u6502;\u656A;\u6561;\u655E;\u653C;\u6524;\u651C\u0100ev\u0123\u1942bar\u803B\xA6\u40A6\u0200ceio\u1951\u1956\u195A\u1960r;\uC000\u{1D4B7}mi;\u604Fm\u0100;e\u171A\u171Cl\u0180;bh\u1968\u1969\u196B\u405C;\u69C5sub;\u67C8\u016C\u1974\u197El\u0100;e\u1979\u197A\u6022t\xBB\u197Ap\u0180;Ee\u012F\u1985\u1987;\u6AAE\u0100;q\u06DC\u06DB\u0CE1\u19A7\0\u19E8\u1A11\u1A15\u1A32\0\u1A37\u1A50\0\0\u1AB4\0\0\u1AC1\0\0\u1B21\u1B2E\u1B4D\u1B52\0\u1BFD\0\u1C0C\u0180cpr\u19AD\u19B2\u19DDute;\u4107\u0300;abcds\u19BF\u19C0\u19C4\u19CA\u19D5\u19D9\u6229nd;\u6A44rcup;\u6A49\u0100au\u19CF\u19D2p;\u6A4Bp;\u6A47ot;\u6A40;\uC000\u2229\uFE00\u0100eo\u19E2\u19E5t;\u6041\xEE\u0693\u0200aeiu\u19F0\u19FB\u1A01\u1A05\u01F0\u19F5\0\u19F8s;\u6A4Don;\u410Ddil\u803B\xE7\u40E7rc;\u4109ps\u0100;s\u1A0C\u1A0D\u6A4Cm;\u6A50ot;\u410B\u0180dmn\u1A1B\u1A20\u1A26il\u80BB\xB8\u01ADptyv;\u69B2t\u8100\xA2;e\u1A2D\u1A2E\u40A2r\xE4\u01B2r;\uC000\u{1D520}\u0180cei\u1A3D\u1A40\u1A4Dy;\u4447ck\u0100;m\u1A47\u1A48\u6713ark\xBB\u1A48;\u43C7r\u0380;Ecefms\u1A5F\u1A60\u1A62\u1A6B\u1AA4\u1AAA\u1AAE\u65CB;\u69C3\u0180;el\u1A69\u1A6A\u1A6D\u42C6q;\u6257e\u0261\u1A74\0\0\u1A88rrow\u0100lr\u1A7C\u1A81eft;\u61BAight;\u61BB\u0280RSacd\u1A92\u1A94\u1A96\u1A9A\u1A9F\xBB\u0F47;\u64C8st;\u629Birc;\u629Aash;\u629Dnint;\u6A10id;\u6AEFcir;\u69C2ubs\u0100;u\u1ABB\u1ABC\u6663it\xBB\u1ABC\u02EC\u1AC7\u1AD4\u1AFA\0\u1B0Aon\u0100;e\u1ACD\u1ACE\u403A\u0100;q\xC7\xC6\u026D\u1AD9\0\0\u1AE2a\u0100;t\u1ADE\u1ADF\u402C;\u4040\u0180;fl\u1AE8\u1AE9\u1AEB\u6201\xEE\u1160e\u0100mx\u1AF1\u1AF6ent\xBB\u1AE9e\xF3\u024D\u01E7\u1AFE\0\u1B07\u0100;d\u12BB\u1B02ot;\u6A6Dn\xF4\u0246\u0180fry\u1B10\u1B14\u1B17;\uC000\u{1D554}o\xE4\u0254\u8100\xA9;s\u0155\u1B1Dr;\u6117\u0100ao\u1B25\u1B29rr;\u61B5ss;\u6717\u0100cu\u1B32\u1B37r;\uC000\u{1D4B8}\u0100bp\u1B3C\u1B44\u0100;e\u1B41\u1B42\u6ACF;\u6AD1\u0100;e\u1B49\u1B4A\u6AD0;\u6AD2dot;\u62EF\u0380delprvw\u1B60\u1B6C\u1B77\u1B82\u1BAC\u1BD4\u1BF9arr\u0100lr\u1B68\u1B6A;\u6938;\u6935\u0270\u1B72\0\0\u1B75r;\u62DEc;\u62DFarr\u0100;p\u1B7F\u1B80\u61B6;\u693D\u0300;bcdos\u1B8F\u1B90\u1B96\u1BA1\u1BA5\u1BA8\u622Arcap;\u6A48\u0100au\u1B9B\u1B9Ep;\u6A46p;\u6A4Aot;\u628Dr;\u6A45;\uC000\u222A\uFE00\u0200alrv\u1BB5\u1BBF\u1BDE\u1BE3rr\u0100;m\u1BBC\u1BBD\u61B7;\u693Cy\u0180evw\u1BC7\u1BD4\u1BD8q\u0270\u1BCE\0\0\u1BD2re\xE3\u1B73u\xE3\u1B75ee;\u62CEedge;\u62CFen\u803B\xA4\u40A4earrow\u0100lr\u1BEE\u1BF3eft\xBB\u1B80ight\xBB\u1BBDe\xE4\u1BDD\u0100ci\u1C01\u1C07onin\xF4\u01F7nt;\u6231lcty;\u632D\u0980AHabcdefhijlorstuwz\u1C38\u1C3B\u1C3F\u1C5D\u1C69\u1C75\u1C8A\u1C9E\u1CAC\u1CB7\u1CFB\u1CFF\u1D0D\u1D7B\u1D91\u1DAB\u1DBB\u1DC6\u1DCDr\xF2\u0381ar;\u6965\u0200glrs\u1C48\u1C4D\u1C52\u1C54ger;\u6020eth;\u6138\xF2\u1133h\u0100;v\u1C5A\u1C5B\u6010\xBB\u090A\u016B\u1C61\u1C67arow;\u690Fa\xE3\u0315\u0100ay\u1C6E\u1C73ron;\u410F;\u4434\u0180;ao\u0332\u1C7C\u1C84\u0100gr\u02BF\u1C81r;\u61CAtseq;\u6A77\u0180glm\u1C91\u1C94\u1C98\u803B\xB0\u40B0ta;\u43B4ptyv;\u69B1\u0100ir\u1CA3\u1CA8sht;\u697F;\uC000\u{1D521}ar\u0100lr\u1CB3\u1CB5\xBB\u08DC\xBB\u101E\u0280aegsv\u1CC2\u0378\u1CD6\u1CDC\u1CE0m\u0180;os\u0326\u1CCA\u1CD4nd\u0100;s\u0326\u1CD1uit;\u6666amma;\u43DDin;\u62F2\u0180;io\u1CE7\u1CE8\u1CF8\u40F7de\u8100\xF7;o\u1CE7\u1CF0ntimes;\u62C7n\xF8\u1CF7cy;\u4452c\u026F\u1D06\0\0\u1D0Arn;\u631Eop;\u630D\u0280lptuw\u1D18\u1D1D\u1D22\u1D49\u1D55lar;\u4024f;\uC000\u{1D555}\u0280;emps\u030B\u1D2D\u1D37\u1D3D\u1D42q\u0100;d\u0352\u1D33ot;\u6251inus;\u6238lus;\u6214quare;\u62A1blebarwedg\xE5\xFAn\u0180adh\u112E\u1D5D\u1D67ownarrow\xF3\u1C83arpoon\u0100lr\u1D72\u1D76ef\xF4\u1CB4igh\xF4\u1CB6\u0162\u1D7F\u1D85karo\xF7\u0F42\u026F\u1D8A\0\0\u1D8Ern;\u631Fop;\u630C\u0180cot\u1D98\u1DA3\u1DA6\u0100ry\u1D9D\u1DA1;\uC000\u{1D4B9};\u4455l;\u69F6rok;\u4111\u0100dr\u1DB0\u1DB4ot;\u62F1i\u0100;f\u1DBA\u1816\u65BF\u0100ah\u1DC0\u1DC3r\xF2\u0429a\xF2\u0FA6angle;\u69A6\u0100ci\u1DD2\u1DD5y;\u445Fgrarr;\u67FF\u0900Dacdefglmnopqrstux\u1E01\u1E09\u1E19\u1E38\u0578\u1E3C\u1E49\u1E61\u1E7E\u1EA5\u1EAF\u1EBD\u1EE1\u1F2A\u1F37\u1F44\u1F4E\u1F5A\u0100Do\u1E06\u1D34o\xF4\u1C89\u0100cs\u1E0E\u1E14ute\u803B\xE9\u40E9ter;\u6A6E\u0200aioy\u1E22\u1E27\u1E31\u1E36ron;\u411Br\u0100;c\u1E2D\u1E2E\u6256\u803B\xEA\u40EAlon;\u6255;\u444Dot;\u4117\u0100Dr\u1E41\u1E45ot;\u6252;\uC000\u{1D522}\u0180;rs\u1E50\u1E51\u1E57\u6A9Aave\u803B\xE8\u40E8\u0100;d\u1E5C\u1E5D\u6A96ot;\u6A98\u0200;ils\u1E6A\u1E6B\u1E72\u1E74\u6A99nters;\u63E7;\u6113\u0100;d\u1E79\u1E7A\u6A95ot;\u6A97\u0180aps\u1E85\u1E89\u1E97cr;\u4113ty\u0180;sv\u1E92\u1E93\u1E95\u6205et\xBB\u1E93p\u01001;\u1E9D\u1EA4\u0133\u1EA1\u1EA3;\u6004;\u6005\u6003\u0100gs\u1EAA\u1EAC;\u414Bp;\u6002\u0100gp\u1EB4\u1EB8on;\u4119f;\uC000\u{1D556}\u0180als\u1EC4\u1ECE\u1ED2r\u0100;s\u1ECA\u1ECB\u62D5l;\u69E3us;\u6A71i\u0180;lv\u1EDA\u1EDB\u1EDF\u43B5on\xBB\u1EDB;\u43F5\u0200csuv\u1EEA\u1EF3\u1F0B\u1F23\u0100io\u1EEF\u1E31rc\xBB\u1E2E\u0269\u1EF9\0\0\u1EFB\xED\u0548ant\u0100gl\u1F02\u1F06tr\xBB\u1E5Dess\xBB\u1E7A\u0180aei\u1F12\u1F16\u1F1Als;\u403Dst;\u625Fv\u0100;D\u0235\u1F20D;\u6A78parsl;\u69E5\u0100Da\u1F2F\u1F33ot;\u6253rr;\u6971\u0180cdi\u1F3E\u1F41\u1EF8r;\u612Fo\xF4\u0352\u0100ah\u1F49\u1F4B;\u43B7\u803B\xF0\u40F0\u0100mr\u1F53\u1F57l\u803B\xEB\u40EBo;\u60AC\u0180cip\u1F61\u1F64\u1F67l;\u4021s\xF4\u056E\u0100eo\u1F6C\u1F74ctatio\xEE\u0559nential\xE5\u0579\u09E1\u1F92\0\u1F9E\0\u1FA1\u1FA7\0\0\u1FC6\u1FCC\0\u1FD3\0\u1FE6\u1FEA\u2000\0\u2008\u205Allingdotse\xF1\u1E44y;\u4444male;\u6640\u0180ilr\u1FAD\u1FB3\u1FC1lig;\u8000\uFB03\u0269\u1FB9\0\0\u1FBDg;\u8000\uFB00ig;\u8000\uFB04;\uC000\u{1D523}lig;\u8000\uFB01lig;\uC000fj\u0180alt\u1FD9\u1FDC\u1FE1t;\u666Dig;\u8000\uFB02ns;\u65B1of;\u4192\u01F0\u1FEE\0\u1FF3f;\uC000\u{1D557}\u0100ak\u05BF\u1FF7\u0100;v\u1FFC\u1FFD\u62D4;\u6AD9artint;\u6A0D\u0100ao\u200C\u2055\u0100cs\u2011\u2052\u03B1\u201A\u2030\u2038\u2045\u2048\0\u2050\u03B2\u2022\u2025\u2027\u202A\u202C\0\u202E\u803B\xBD\u40BD;\u6153\u803B\xBC\u40BC;\u6155;\u6159;\u615B\u01B3\u2034\0\u2036;\u6154;\u6156\u02B4\u203E\u2041\0\0\u2043\u803B\xBE\u40BE;\u6157;\u615C5;\u6158\u01B6\u204C\0\u204E;\u615A;\u615D8;\u615El;\u6044wn;\u6322cr;\uC000\u{1D4BB}\u0880Eabcdefgijlnorstv\u2082\u2089\u209F\u20A5\u20B0\u20B4\u20F0\u20F5\u20FA\u20FF\u2103\u2112\u2138\u0317\u213E\u2152\u219E\u0100;l\u064D\u2087;\u6A8C\u0180cmp\u2090\u2095\u209Dute;\u41F5ma\u0100;d\u209C\u1CDA\u43B3;\u6A86reve;\u411F\u0100iy\u20AA\u20AErc;\u411D;\u4433ot;\u4121\u0200;lqs\u063E\u0642\u20BD\u20C9\u0180;qs\u063E\u064C\u20C4lan\xF4\u0665\u0200;cdl\u0665\u20D2\u20D5\u20E5c;\u6AA9ot\u0100;o\u20DC\u20DD\u6A80\u0100;l\u20E2\u20E3\u6A82;\u6A84\u0100;e\u20EA\u20ED\uC000\u22DB\uFE00s;\u6A94r;\uC000\u{1D524}\u0100;g\u0673\u061Bmel;\u6137cy;\u4453\u0200;Eaj\u065A\u210C\u210E\u2110;\u6A92;\u6AA5;\u6AA4\u0200Eaes\u211B\u211D\u2129\u2134;\u6269p\u0100;p\u2123\u2124\u6A8Arox\xBB\u2124\u0100;q\u212E\u212F\u6A88\u0100;q\u212E\u211Bim;\u62E7pf;\uC000\u{1D558}\u0100ci\u2143\u2146r;\u610Am\u0180;el\u066B\u214E\u2150;\u6A8E;\u6A90\u8300>;cdlqr\u05EE\u2160\u216A\u216E\u2173\u2179\u0100ci\u2165\u2167;\u6AA7r;\u6A7Aot;\u62D7Par;\u6995uest;\u6A7C\u0280adels\u2184\u216A\u2190\u0656\u219B\u01F0\u2189\0\u218Epro\xF8\u209Er;\u6978q\u0100lq\u063F\u2196les\xF3\u2088i\xED\u066B\u0100en\u21A3\u21ADrtneqq;\uC000\u2269\uFE00\xC5\u21AA\u0500Aabcefkosy\u21C4\u21C7\u21F1\u21F5\u21FA\u2218\u221D\u222F\u2268\u227Dr\xF2\u03A0\u0200ilmr\u21D0\u21D4\u21D7\u21DBrs\xF0\u1484f\xBB\u2024il\xF4\u06A9\u0100dr\u21E0\u21E4cy;\u444A\u0180;cw\u08F4\u21EB\u21EFir;\u6948;\u61ADar;\u610Firc;\u4125\u0180alr\u2201\u220E\u2213rts\u0100;u\u2209\u220A\u6665it\xBB\u220Alip;\u6026con;\u62B9r;\uC000\u{1D525}s\u0100ew\u2223\u2229arow;\u6925arow;\u6926\u0280amopr\u223A\u223E\u2243\u225E\u2263rr;\u61FFtht;\u623Bk\u0100lr\u2249\u2253eftarrow;\u61A9ightarrow;\u61AAf;\uC000\u{1D559}bar;\u6015\u0180clt\u226F\u2274\u2278r;\uC000\u{1D4BD}as\xE8\u21F4rok;\u4127\u0100bp\u2282\u2287ull;\u6043hen\xBB\u1C5B\u0AE1\u22A3\0\u22AA\0\u22B8\u22C5\u22CE\0\u22D5\u22F3\0\0\u22F8\u2322\u2367\u2362\u237F\0\u2386\u23AA\u23B4cute\u803B\xED\u40ED\u0180;iy\u0771\u22B0\u22B5rc\u803B\xEE\u40EE;\u4438\u0100cx\u22BC\u22BFy;\u4435cl\u803B\xA1\u40A1\u0100fr\u039F\u22C9;\uC000\u{1D526}rave\u803B\xEC\u40EC\u0200;ino\u073E\u22DD\u22E9\u22EE\u0100in\u22E2\u22E6nt;\u6A0Ct;\u622Dfin;\u69DCta;\u6129lig;\u4133\u0180aop\u22FE\u231A\u231D\u0180cgt\u2305\u2308\u2317r;\u412B\u0180elp\u071F\u230F\u2313in\xE5\u078Ear\xF4\u0720h;\u4131f;\u62B7ed;\u41B5\u0280;cfot\u04F4\u232C\u2331\u233D\u2341are;\u6105in\u0100;t\u2338\u2339\u621Eie;\u69DDdo\xF4\u2319\u0280;celp\u0757\u234C\u2350\u235B\u2361al;\u62BA\u0100gr\u2355\u2359er\xF3\u1563\xE3\u234Darhk;\u6A17rod;\u6A3C\u0200cgpt\u236F\u2372\u2376\u237By;\u4451on;\u412Ff;\uC000\u{1D55A}a;\u43B9uest\u803B\xBF\u40BF\u0100ci\u238A\u238Fr;\uC000\u{1D4BE}n\u0280;Edsv\u04F4\u239B\u239D\u23A1\u04F3;\u62F9ot;\u62F5\u0100;v\u23A6\u23A7\u62F4;\u62F3\u0100;i\u0777\u23AElde;\u4129\u01EB\u23B8\0\u23BCcy;\u4456l\u803B\xEF\u40EF\u0300cfmosu\u23CC\u23D7\u23DC\u23E1\u23E7\u23F5\u0100iy\u23D1\u23D5rc;\u4135;\u4439r;\uC000\u{1D527}ath;\u4237pf;\uC000\u{1D55B}\u01E3\u23EC\0\u23F1r;\uC000\u{1D4BF}rcy;\u4458kcy;\u4454\u0400acfghjos\u240B\u2416\u2422\u2427\u242D\u2431\u2435\u243Bppa\u0100;v\u2413\u2414\u43BA;\u43F0\u0100ey\u241B\u2420dil;\u4137;\u443Ar;\uC000\u{1D528}reen;\u4138cy;\u4445cy;\u445Cpf;\uC000\u{1D55C}cr;\uC000\u{1D4C0}\u0B80ABEHabcdefghjlmnoprstuv\u2470\u2481\u2486\u248D\u2491\u250E\u253D\u255A\u2580\u264E\u265E\u2665\u2679\u267D\u269A\u26B2\u26D8\u275D\u2768\u278B\u27C0\u2801\u2812\u0180art\u2477\u247A\u247Cr\xF2\u09C6\xF2\u0395ail;\u691Barr;\u690E\u0100;g\u0994\u248B;\u6A8Bar;\u6962\u0963\u24A5\0\u24AA\0\u24B1\0\0\0\0\0\u24B5\u24BA\0\u24C6\u24C8\u24CD\0\u24F9ute;\u413Amptyv;\u69B4ra\xEE\u084Cbda;\u43BBg\u0180;dl\u088E\u24C1\u24C3;\u6991\xE5\u088E;\u6A85uo\u803B\xAB\u40ABr\u0400;bfhlpst\u0899\u24DE\u24E6\u24E9\u24EB\u24EE\u24F1\u24F5\u0100;f\u089D\u24E3s;\u691Fs;\u691D\xEB\u2252p;\u61ABl;\u6939im;\u6973l;\u61A2\u0180;ae\u24FF\u2500\u2504\u6AABil;\u6919\u0100;s\u2509\u250A\u6AAD;\uC000\u2AAD\uFE00\u0180abr\u2515\u2519\u251Drr;\u690Crk;\u6772\u0100ak\u2522\u252Cc\u0100ek\u2528\u252A;\u407B;\u405B\u0100es\u2531\u2533;\u698Bl\u0100du\u2539\u253B;\u698F;\u698D\u0200aeuy\u2546\u254B\u2556\u2558ron;\u413E\u0100di\u2550\u2554il;\u413C\xEC\u08B0\xE2\u2529;\u443B\u0200cqrs\u2563\u2566\u256D\u257Da;\u6936uo\u0100;r\u0E19\u1746\u0100du\u2572\u2577har;\u6967shar;\u694Bh;\u61B2\u0280;fgqs\u258B\u258C\u0989\u25F3\u25FF\u6264t\u0280ahlrt\u2598\u25A4\u25B7\u25C2\u25E8rrow\u0100;t\u0899\u25A1a\xE9\u24F6arpoon\u0100du\u25AF\u25B4own\xBB\u045Ap\xBB\u0966eftarrows;\u61C7ight\u0180ahs\u25CD\u25D6\u25DErrow\u0100;s\u08F4\u08A7arpoon\xF3\u0F98quigarro\xF7\u21F0hreetimes;\u62CB\u0180;qs\u258B\u0993\u25FAlan\xF4\u09AC\u0280;cdgs\u09AC\u260A\u260D\u261D\u2628c;\u6AA8ot\u0100;o\u2614\u2615\u6A7F\u0100;r\u261A\u261B\u6A81;\u6A83\u0100;e\u2622\u2625\uC000\u22DA\uFE00s;\u6A93\u0280adegs\u2633\u2639\u263D\u2649\u264Bppro\xF8\u24C6ot;\u62D6q\u0100gq\u2643\u2645\xF4\u0989gt\xF2\u248C\xF4\u099Bi\xED\u09B2\u0180ilr\u2655\u08E1\u265Asht;\u697C;\uC000\u{1D529}\u0100;E\u099C\u2663;\u6A91\u0161\u2669\u2676r\u0100du\u25B2\u266E\u0100;l\u0965\u2673;\u696Alk;\u6584cy;\u4459\u0280;acht\u0A48\u2688\u268B\u2691\u2696r\xF2\u25C1orne\xF2\u1D08ard;\u696Bri;\u65FA\u0100io\u269F\u26A4dot;\u4140ust\u0100;a\u26AC\u26AD\u63B0che\xBB\u26AD\u0200Eaes\u26BB\u26BD\u26C9\u26D4;\u6268p\u0100;p\u26C3\u26C4\u6A89rox\xBB\u26C4\u0100;q\u26CE\u26CF\u6A87\u0100;q\u26CE\u26BBim;\u62E6\u0400abnoptwz\u26E9\u26F4\u26F7\u271A\u272F\u2741\u2747\u2750\u0100nr\u26EE\u26F1g;\u67ECr;\u61FDr\xEB\u08C1g\u0180lmr\u26FF\u270D\u2714eft\u0100ar\u09E6\u2707ight\xE1\u09F2apsto;\u67FCight\xE1\u09FDparrow\u0100lr\u2725\u2729ef\xF4\u24EDight;\u61AC\u0180afl\u2736\u2739\u273Dr;\u6985;\uC000\u{1D55D}us;\u6A2Dimes;\u6A34\u0161\u274B\u274Fst;\u6217\xE1\u134E\u0180;ef\u2757\u2758\u1800\u65CAnge\xBB\u2758ar\u0100;l\u2764\u2765\u4028t;\u6993\u0280achmt\u2773\u2776\u277C\u2785\u2787r\xF2\u08A8orne\xF2\u1D8Car\u0100;d\u0F98\u2783;\u696D;\u600Eri;\u62BF\u0300achiqt\u2798\u279D\u0A40\u27A2\u27AE\u27BBquo;\u6039r;\uC000\u{1D4C1}m\u0180;eg\u09B2\u27AA\u27AC;\u6A8D;\u6A8F\u0100bu\u252A\u27B3o\u0100;r\u0E1F\u27B9;\u601Arok;\u4142\u8400<;cdhilqr\u082B\u27D2\u2639\u27DC\u27E0\u27E5\u27EA\u27F0\u0100ci\u27D7\u27D9;\u6AA6r;\u6A79re\xE5\u25F2mes;\u62C9arr;\u6976uest;\u6A7B\u0100Pi\u27F5\u27F9ar;\u6996\u0180;ef\u2800\u092D\u181B\u65C3r\u0100du\u2807\u280Dshar;\u694Ahar;\u6966\u0100en\u2817\u2821rtneqq;\uC000\u2268\uFE00\xC5\u281E\u0700Dacdefhilnopsu\u2840\u2845\u2882\u288E\u2893\u28A0\u28A5\u28A8\u28DA\u28E2\u28E4\u0A83\u28F3\u2902Dot;\u623A\u0200clpr\u284E\u2852\u2863\u287Dr\u803B\xAF\u40AF\u0100et\u2857\u2859;\u6642\u0100;e\u285E\u285F\u6720se\xBB\u285F\u0100;s\u103B\u2868to\u0200;dlu\u103B\u2873\u2877\u287Bow\xEE\u048Cef\xF4\u090F\xF0\u13D1ker;\u65AE\u0100oy\u2887\u288Cmma;\u6A29;\u443Cash;\u6014asuredangle\xBB\u1626r;\uC000\u{1D52A}o;\u6127\u0180cdn\u28AF\u28B4\u28C9ro\u803B\xB5\u40B5\u0200;acd\u1464\u28BD\u28C0\u28C4s\xF4\u16A7ir;\u6AF0ot\u80BB\xB7\u01B5us\u0180;bd\u28D2\u1903\u28D3\u6212\u0100;u\u1D3C\u28D8;\u6A2A\u0163\u28DE\u28E1p;\u6ADB\xF2\u2212\xF0\u0A81\u0100dp\u28E9\u28EEels;\u62A7f;\uC000\u{1D55E}\u0100ct\u28F8\u28FDr;\uC000\u{1D4C2}pos\xBB\u159D\u0180;lm\u2909\u290A\u290D\u43BCtimap;\u62B8\u0C00GLRVabcdefghijlmoprstuvw\u2942\u2953\u297E\u2989\u2998\u29DA\u29E9\u2A15\u2A1A\u2A58\u2A5D\u2A83\u2A95\u2AA4\u2AA8\u2B04\u2B07\u2B44\u2B7F\u2BAE\u2C34\u2C67\u2C7C\u2CE9\u0100gt\u2947\u294B;\uC000\u22D9\u0338\u0100;v\u2950\u0BCF\uC000\u226B\u20D2\u0180elt\u295A\u2972\u2976ft\u0100ar\u2961\u2967rrow;\u61CDightarrow;\u61CE;\uC000\u22D8\u0338\u0100;v\u297B\u0C47\uC000\u226A\u20D2ightarrow;\u61CF\u0100Dd\u298E\u2993ash;\u62AFash;\u62AE\u0280bcnpt\u29A3\u29A7\u29AC\u29B1\u29CCla\xBB\u02DEute;\u4144g;\uC000\u2220\u20D2\u0280;Eiop\u0D84\u29BC\u29C0\u29C5\u29C8;\uC000\u2A70\u0338d;\uC000\u224B\u0338s;\u4149ro\xF8\u0D84ur\u0100;a\u29D3\u29D4\u666El\u0100;s\u29D3\u0B38\u01F3\u29DF\0\u29E3p\u80BB\xA0\u0B37mp\u0100;e\u0BF9\u0C00\u0280aeouy\u29F4\u29FE\u2A03\u2A10\u2A13\u01F0\u29F9\0\u29FB;\u6A43on;\u4148dil;\u4146ng\u0100;d\u0D7E\u2A0Aot;\uC000\u2A6D\u0338p;\u6A42;\u443Dash;\u6013\u0380;Aadqsx\u0B92\u2A29\u2A2D\u2A3B\u2A41\u2A45\u2A50rr;\u61D7r\u0100hr\u2A33\u2A36k;\u6924\u0100;o\u13F2\u13F0ot;\uC000\u2250\u0338ui\xF6\u0B63\u0100ei\u2A4A\u2A4Ear;\u6928\xED\u0B98ist\u0100;s\u0BA0\u0B9Fr;\uC000\u{1D52B}\u0200Eest\u0BC5\u2A66\u2A79\u2A7C\u0180;qs\u0BBC\u2A6D\u0BE1\u0180;qs\u0BBC\u0BC5\u2A74lan\xF4\u0BE2i\xED\u0BEA\u0100;r\u0BB6\u2A81\xBB\u0BB7\u0180Aap\u2A8A\u2A8D\u2A91r\xF2\u2971rr;\u61AEar;\u6AF2\u0180;sv\u0F8D\u2A9C\u0F8C\u0100;d\u2AA1\u2AA2\u62FC;\u62FAcy;\u445A\u0380AEadest\u2AB7\u2ABA\u2ABE\u2AC2\u2AC5\u2AF6\u2AF9r\xF2\u2966;\uC000\u2266\u0338rr;\u619Ar;\u6025\u0200;fqs\u0C3B\u2ACE\u2AE3\u2AEFt\u0100ar\u2AD4\u2AD9rro\xF7\u2AC1ightarro\xF7\u2A90\u0180;qs\u0C3B\u2ABA\u2AEAlan\xF4\u0C55\u0100;s\u0C55\u2AF4\xBB\u0C36i\xED\u0C5D\u0100;r\u0C35\u2AFEi\u0100;e\u0C1A\u0C25i\xE4\u0D90\u0100pt\u2B0C\u2B11f;\uC000\u{1D55F}\u8180\xAC;in\u2B19\u2B1A\u2B36\u40ACn\u0200;Edv\u0B89\u2B24\u2B28\u2B2E;\uC000\u22F9\u0338ot;\uC000\u22F5\u0338\u01E1\u0B89\u2B33\u2B35;\u62F7;\u62F6i\u0100;v\u0CB8\u2B3C\u01E1\u0CB8\u2B41\u2B43;\u62FE;\u62FD\u0180aor\u2B4B\u2B63\u2B69r\u0200;ast\u0B7B\u2B55\u2B5A\u2B5Flle\xEC\u0B7Bl;\uC000\u2AFD\u20E5;\uC000\u2202\u0338lint;\u6A14\u0180;ce\u0C92\u2B70\u2B73u\xE5\u0CA5\u0100;c\u0C98\u2B78\u0100;e\u0C92\u2B7D\xF1\u0C98\u0200Aait\u2B88\u2B8B\u2B9D\u2BA7r\xF2\u2988rr\u0180;cw\u2B94\u2B95\u2B99\u619B;\uC000\u2933\u0338;\uC000\u219D\u0338ghtarrow\xBB\u2B95ri\u0100;e\u0CCB\u0CD6\u0380chimpqu\u2BBD\u2BCD\u2BD9\u2B04\u0B78\u2BE4\u2BEF\u0200;cer\u0D32\u2BC6\u0D37\u2BC9u\xE5\u0D45;\uC000\u{1D4C3}ort\u026D\u2B05\0\0\u2BD6ar\xE1\u2B56m\u0100;e\u0D6E\u2BDF\u0100;q\u0D74\u0D73su\u0100bp\u2BEB\u2BED\xE5\u0CF8\xE5\u0D0B\u0180bcp\u2BF6\u2C11\u2C19\u0200;Ees\u2BFF\u2C00\u0D22\u2C04\u6284;\uC000\u2AC5\u0338et\u0100;e\u0D1B\u2C0Bq\u0100;q\u0D23\u2C00c\u0100;e\u0D32\u2C17\xF1\u0D38\u0200;Ees\u2C22\u2C23\u0D5F\u2C27\u6285;\uC000\u2AC6\u0338et\u0100;e\u0D58\u2C2Eq\u0100;q\u0D60\u2C23\u0200gilr\u2C3D\u2C3F\u2C45\u2C47\xEC\u0BD7lde\u803B\xF1\u40F1\xE7\u0C43iangle\u0100lr\u2C52\u2C5Ceft\u0100;e\u0C1A\u2C5A\xF1\u0C26ight\u0100;e\u0CCB\u2C65\xF1\u0CD7\u0100;m\u2C6C\u2C6D\u43BD\u0180;es\u2C74\u2C75\u2C79\u4023ro;\u6116p;\u6007\u0480DHadgilrs\u2C8F\u2C94\u2C99\u2C9E\u2CA3\u2CB0\u2CB6\u2CD3\u2CE3ash;\u62ADarr;\u6904p;\uC000\u224D\u20D2ash;\u62AC\u0100et\u2CA8\u2CAC;\uC000\u2265\u20D2;\uC000>\u20D2nfin;\u69DE\u0180Aet\u2CBD\u2CC1\u2CC5rr;\u6902;\uC000\u2264\u20D2\u0100;r\u2CCA\u2CCD\uC000<\u20D2ie;\uC000\u22B4\u20D2\u0100At\u2CD8\u2CDCrr;\u6903rie;\uC000\u22B5\u20D2im;\uC000\u223C\u20D2\u0180Aan\u2CF0\u2CF4\u2D02rr;\u61D6r\u0100hr\u2CFA\u2CFDk;\u6923\u0100;o\u13E7\u13E5ear;\u6927\u1253\u1A95\0\0\0\0\0\0\0\0\0\0\0\0\0\u2D2D\0\u2D38\u2D48\u2D60\u2D65\u2D72\u2D84\u1B07\0\0\u2D8D\u2DAB\0\u2DC8\u2DCE\0\u2DDC\u2E19\u2E2B\u2E3E\u2E43\u0100cs\u2D31\u1A97ute\u803B\xF3\u40F3\u0100iy\u2D3C\u2D45r\u0100;c\u1A9E\u2D42\u803B\xF4\u40F4;\u443E\u0280abios\u1AA0\u2D52\u2D57\u01C8\u2D5Alac;\u4151v;\u6A38old;\u69BClig;\u4153\u0100cr\u2D69\u2D6Dir;\u69BF;\uC000\u{1D52C}\u036F\u2D79\0\0\u2D7C\0\u2D82n;\u42DBave\u803B\xF2\u40F2;\u69C1\u0100bm\u2D88\u0DF4ar;\u69B5\u0200acit\u2D95\u2D98\u2DA5\u2DA8r\xF2\u1A80\u0100ir\u2D9D\u2DA0r;\u69BEoss;\u69BBn\xE5\u0E52;\u69C0\u0180aei\u2DB1\u2DB5\u2DB9cr;\u414Dga;\u43C9\u0180cdn\u2DC0\u2DC5\u01CDron;\u43BF;\u69B6pf;\uC000\u{1D560}\u0180ael\u2DD4\u2DD7\u01D2r;\u69B7rp;\u69B9\u0380;adiosv\u2DEA\u2DEB\u2DEE\u2E08\u2E0D\u2E10\u2E16\u6228r\xF2\u1A86\u0200;efm\u2DF7\u2DF8\u2E02\u2E05\u6A5Dr\u0100;o\u2DFE\u2DFF\u6134f\xBB\u2DFF\u803B\xAA\u40AA\u803B\xBA\u40BAgof;\u62B6r;\u6A56lope;\u6A57;\u6A5B\u0180clo\u2E1F\u2E21\u2E27\xF2\u2E01ash\u803B\xF8\u40F8l;\u6298i\u016C\u2E2F\u2E34de\u803B\xF5\u40F5es\u0100;a\u01DB\u2E3As;\u6A36ml\u803B\xF6\u40F6bar;\u633D\u0AE1\u2E5E\0\u2E7D\0\u2E80\u2E9D\0\u2EA2\u2EB9\0\0\u2ECB\u0E9C\0\u2F13\0\0\u2F2B\u2FBC\0\u2FC8r\u0200;ast\u0403\u2E67\u2E72\u0E85\u8100\xB6;l\u2E6D\u2E6E\u40B6le\xEC\u0403\u0269\u2E78\0\0\u2E7Bm;\u6AF3;\u6AFDy;\u443Fr\u0280cimpt\u2E8B\u2E8F\u2E93\u1865\u2E97nt;\u4025od;\u402Eil;\u6030enk;\u6031r;\uC000\u{1D52D}\u0180imo\u2EA8\u2EB0\u2EB4\u0100;v\u2EAD\u2EAE\u43C6;\u43D5ma\xF4\u0A76ne;\u660E\u0180;tv\u2EBF\u2EC0\u2EC8\u43C0chfork\xBB\u1FFD;\u43D6\u0100au\u2ECF\u2EDFn\u0100ck\u2ED5\u2EDDk\u0100;h\u21F4\u2EDB;\u610E\xF6\u21F4s\u0480;abcdemst\u2EF3\u2EF4\u1908\u2EF9\u2EFD\u2F04\u2F06\u2F0A\u2F0E\u402Bcir;\u6A23ir;\u6A22\u0100ou\u1D40\u2F02;\u6A25;\u6A72n\u80BB\xB1\u0E9Dim;\u6A26wo;\u6A27\u0180ipu\u2F19\u2F20\u2F25ntint;\u6A15f;\uC000\u{1D561}nd\u803B\xA3\u40A3\u0500;Eaceinosu\u0EC8\u2F3F\u2F41\u2F44\u2F47\u2F81\u2F89\u2F92\u2F7E\u2FB6;\u6AB3p;\u6AB7u\xE5\u0ED9\u0100;c\u0ECE\u2F4C\u0300;acens\u0EC8\u2F59\u2F5F\u2F66\u2F68\u2F7Eppro\xF8\u2F43urlye\xF1\u0ED9\xF1\u0ECE\u0180aes\u2F6F\u2F76\u2F7Approx;\u6AB9qq;\u6AB5im;\u62E8i\xED\u0EDFme\u0100;s\u2F88\u0EAE\u6032\u0180Eas\u2F78\u2F90\u2F7A\xF0\u2F75\u0180dfp\u0EEC\u2F99\u2FAF\u0180als\u2FA0\u2FA5\u2FAAlar;\u632Eine;\u6312urf;\u6313\u0100;t\u0EFB\u2FB4\xEF\u0EFBrel;\u62B0\u0100ci\u2FC0\u2FC5r;\uC000\u{1D4C5};\u43C8ncsp;\u6008\u0300fiopsu\u2FDA\u22E2\u2FDF\u2FE5\u2FEB\u2FF1r;\uC000\u{1D52E}pf;\uC000\u{1D562}rime;\u6057cr;\uC000\u{1D4C6}\u0180aeo\u2FF8\u3009\u3013t\u0100ei\u2FFE\u3005rnion\xF3\u06B0nt;\u6A16st\u0100;e\u3010\u3011\u403F\xF1\u1F19\xF4\u0F14\u0A80ABHabcdefhilmnoprstux\u3040\u3051\u3055\u3059\u30E0\u310E\u312B\u3147\u3162\u3172\u318E\u3206\u3215\u3224\u3229\u3258\u326E\u3272\u3290\u32B0\u32B7\u0180art\u3047\u304A\u304Cr\xF2\u10B3\xF2\u03DDail;\u691Car\xF2\u1C65ar;\u6964\u0380cdenqrt\u3068\u3075\u3078\u307F\u308F\u3094\u30CC\u0100eu\u306D\u3071;\uC000\u223D\u0331te;\u4155i\xE3\u116Emptyv;\u69B3g\u0200;del\u0FD1\u3089\u308B\u308D;\u6992;\u69A5\xE5\u0FD1uo\u803B\xBB\u40BBr\u0580;abcfhlpstw\u0FDC\u30AC\u30AF\u30B7\u30B9\u30BC\u30BE\u30C0\u30C3\u30C7\u30CAp;\u6975\u0100;f\u0FE0\u30B4s;\u6920;\u6933s;\u691E\xEB\u225D\xF0\u272El;\u6945im;\u6974l;\u61A3;\u619D\u0100ai\u30D1\u30D5il;\u691Ao\u0100;n\u30DB\u30DC\u6236al\xF3\u0F1E\u0180abr\u30E7\u30EA\u30EEr\xF2\u17E5rk;\u6773\u0100ak\u30F3\u30FDc\u0100ek\u30F9\u30FB;\u407D;\u405D\u0100es\u3102\u3104;\u698Cl\u0100du\u310A\u310C;\u698E;\u6990\u0200aeuy\u3117\u311C\u3127\u3129ron;\u4159\u0100di\u3121\u3125il;\u4157\xEC\u0FF2\xE2\u30FA;\u4440\u0200clqs\u3134\u3137\u313D\u3144a;\u6937dhar;\u6969uo\u0100;r\u020E\u020Dh;\u61B3\u0180acg\u314E\u315F\u0F44l\u0200;ips\u0F78\u3158\u315B\u109Cn\xE5\u10BBar\xF4\u0FA9t;\u65AD\u0180ilr\u3169\u1023\u316Esht;\u697D;\uC000\u{1D52F}\u0100ao\u3177\u3186r\u0100du\u317D\u317F\xBB\u047B\u0100;l\u1091\u3184;\u696C\u0100;v\u318B\u318C\u43C1;\u43F1\u0180gns\u3195\u31F9\u31FCht\u0300ahlrst\u31A4\u31B0\u31C2\u31D8\u31E4\u31EErrow\u0100;t\u0FDC\u31ADa\xE9\u30C8arpoon\u0100du\u31BB\u31BFow\xEE\u317Ep\xBB\u1092eft\u0100ah\u31CA\u31D0rrow\xF3\u0FEAarpoon\xF3\u0551ightarrows;\u61C9quigarro\xF7\u30CBhreetimes;\u62CCg;\u42DAingdotse\xF1\u1F32\u0180ahm\u320D\u3210\u3213r\xF2\u0FEAa\xF2\u0551;\u600Foust\u0100;a\u321E\u321F\u63B1che\xBB\u321Fmid;\u6AEE\u0200abpt\u3232\u323D\u3240\u3252\u0100nr\u3237\u323Ag;\u67EDr;\u61FEr\xEB\u1003\u0180afl\u3247\u324A\u324Er;\u6986;\uC000\u{1D563}us;\u6A2Eimes;\u6A35\u0100ap\u325D\u3267r\u0100;g\u3263\u3264\u4029t;\u6994olint;\u6A12ar\xF2\u31E3\u0200achq\u327B\u3280\u10BC\u3285quo;\u603Ar;\uC000\u{1D4C7}\u0100bu\u30FB\u328Ao\u0100;r\u0214\u0213\u0180hir\u3297\u329B\u32A0re\xE5\u31F8mes;\u62CAi\u0200;efl\u32AA\u1059\u1821\u32AB\u65B9tri;\u69CEluhar;\u6968;\u611E\u0D61\u32D5\u32DB\u32DF\u332C\u3338\u3371\0\u337A\u33A4\0\0\u33EC\u33F0\0\u3428\u3448\u345A\u34AD\u34B1\u34CA\u34F1\0\u3616\0\0\u3633cute;\u415Bqu\xEF\u27BA\u0500;Eaceinpsy\u11ED\u32F3\u32F5\u32FF\u3302\u330B\u330F\u331F\u3326\u3329;\u6AB4\u01F0\u32FA\0\u32FC;\u6AB8on;\u4161u\xE5\u11FE\u0100;d\u11F3\u3307il;\u415Frc;\u415D\u0180Eas\u3316\u3318\u331B;\u6AB6p;\u6ABAim;\u62E9olint;\u6A13i\xED\u1204;\u4441ot\u0180;be\u3334\u1D47\u3335\u62C5;\u6A66\u0380Aacmstx\u3346\u334A\u3357\u335B\u335E\u3363\u336Drr;\u61D8r\u0100hr\u3350\u3352\xEB\u2228\u0100;o\u0A36\u0A34t\u803B\xA7\u40A7i;\u403Bwar;\u6929m\u0100in\u3369\xF0nu\xF3\xF1t;\u6736r\u0100;o\u3376\u2055\uC000\u{1D530}\u0200acoy\u3382\u3386\u3391\u33A0rp;\u666F\u0100hy\u338B\u338Fcy;\u4449;\u4448rt\u026D\u3399\0\0\u339Ci\xE4\u1464ara\xEC\u2E6F\u803B\xAD\u40AD\u0100gm\u33A8\u33B4ma\u0180;fv\u33B1\u33B2\u33B2\u43C3;\u43C2\u0400;deglnpr\u12AB\u33C5\u33C9\u33CE\u33D6\u33DE\u33E1\u33E6ot;\u6A6A\u0100;q\u12B1\u12B0\u0100;E\u33D3\u33D4\u6A9E;\u6AA0\u0100;E\u33DB\u33DC\u6A9D;\u6A9Fe;\u6246lus;\u6A24arr;\u6972ar\xF2\u113D\u0200aeit\u33F8\u3408\u340F\u3417\u0100ls\u33FD\u3404lsetm\xE9\u336Ahp;\u6A33parsl;\u69E4\u0100dl\u1463\u3414e;\u6323\u0100;e\u341C\u341D\u6AAA\u0100;s\u3422\u3423\u6AAC;\uC000\u2AAC\uFE00\u0180flp\u342E\u3433\u3442tcy;\u444C\u0100;b\u3438\u3439\u402F\u0100;a\u343E\u343F\u69C4r;\u633Ff;\uC000\u{1D564}a\u0100dr\u344D\u0402es\u0100;u\u3454\u3455\u6660it\xBB\u3455\u0180csu\u3460\u3479\u349F\u0100au\u3465\u346Fp\u0100;s\u1188\u346B;\uC000\u2293\uFE00p\u0100;s\u11B4\u3475;\uC000\u2294\uFE00u\u0100bp\u347F\u348F\u0180;es\u1197\u119C\u3486et\u0100;e\u1197\u348D\xF1\u119D\u0180;es\u11A8\u11AD\u3496et\u0100;e\u11A8\u349D\xF1\u11AE\u0180;af\u117B\u34A6\u05B0r\u0165\u34AB\u05B1\xBB\u117Car\xF2\u1148\u0200cemt\u34B9\u34BE\u34C2\u34C5r;\uC000\u{1D4C8}tm\xEE\xF1i\xEC\u3415ar\xE6\u11BE\u0100ar\u34CE\u34D5r\u0100;f\u34D4\u17BF\u6606\u0100an\u34DA\u34EDight\u0100ep\u34E3\u34EApsilo\xEE\u1EE0h\xE9\u2EAFs\xBB\u2852\u0280bcmnp\u34FB\u355E\u1209\u358B\u358E\u0480;Edemnprs\u350E\u350F\u3511\u3515\u351E\u3523\u352C\u3531\u3536\u6282;\u6AC5ot;\u6ABD\u0100;d\u11DA\u351Aot;\u6AC3ult;\u6AC1\u0100Ee\u3528\u352A;\u6ACB;\u628Alus;\u6ABFarr;\u6979\u0180eiu\u353D\u3552\u3555t\u0180;en\u350E\u3545\u354Bq\u0100;q\u11DA\u350Feq\u0100;q\u352B\u3528m;\u6AC7\u0100bp\u355A\u355C;\u6AD5;\u6AD3c\u0300;acens\u11ED\u356C\u3572\u3579\u357B\u3326ppro\xF8\u32FAurlye\xF1\u11FE\xF1\u11F3\u0180aes\u3582\u3588\u331Bppro\xF8\u331Aq\xF1\u3317g;\u666A\u0680123;Edehlmnps\u35A9\u35AC\u35AF\u121C\u35B2\u35B4\u35C0\u35C9\u35D5\u35DA\u35DF\u35E8\u35ED\u803B\xB9\u40B9\u803B\xB2\u40B2\u803B\xB3\u40B3;\u6AC6\u0100os\u35B9\u35BCt;\u6ABEub;\u6AD8\u0100;d\u1222\u35C5ot;\u6AC4s\u0100ou\u35CF\u35D2l;\u67C9b;\u6AD7arr;\u697Bult;\u6AC2\u0100Ee\u35E4\u35E6;\u6ACC;\u628Blus;\u6AC0\u0180eiu\u35F4\u3609\u360Ct\u0180;en\u121C\u35FC\u3602q\u0100;q\u1222\u35B2eq\u0100;q\u35E7\u35E4m;\u6AC8\u0100bp\u3611\u3613;\u6AD4;\u6AD6\u0180Aan\u361C\u3620\u362Drr;\u61D9r\u0100hr\u3626\u3628\xEB\u222E\u0100;o\u0A2B\u0A29war;\u692Alig\u803B\xDF\u40DF\u0BE1\u3651\u365D\u3660\u12CE\u3673\u3679\0\u367E\u36C2\0\0\0\0\0\u36DB\u3703\0\u3709\u376C\0\0\0\u3787\u0272\u3656\0\0\u365Bget;\u6316;\u43C4r\xEB\u0E5F\u0180aey\u3666\u366B\u3670ron;\u4165dil;\u4163;\u4442lrec;\u6315r;\uC000\u{1D531}\u0200eiko\u3686\u369D\u36B5\u36BC\u01F2\u368B\0\u3691e\u01004f\u1284\u1281a\u0180;sv\u3698\u3699\u369B\u43B8ym;\u43D1\u0100cn\u36A2\u36B2k\u0100as\u36A8\u36AEppro\xF8\u12C1im\xBB\u12ACs\xF0\u129E\u0100as\u36BA\u36AE\xF0\u12C1rn\u803B\xFE\u40FE\u01EC\u031F\u36C6\u22E7es\u8180\xD7;bd\u36CF\u36D0\u36D8\u40D7\u0100;a\u190F\u36D5r;\u6A31;\u6A30\u0180eps\u36E1\u36E3\u3700\xE1\u2A4D\u0200;bcf\u0486\u36EC\u36F0\u36F4ot;\u6336ir;\u6AF1\u0100;o\u36F9\u36FC\uC000\u{1D565}rk;\u6ADA\xE1\u3362rime;\u6034\u0180aip\u370F\u3712\u3764d\xE5\u1248\u0380adempst\u3721\u374D\u3740\u3751\u3757\u375C\u375Fngle\u0280;dlqr\u3730\u3731\u3736\u3740\u3742\u65B5own\xBB\u1DBBeft\u0100;e\u2800\u373E\xF1\u092E;\u625Cight\u0100;e\u32AA\u374B\xF1\u105Aot;\u65ECinus;\u6A3Alus;\u6A39b;\u69CDime;\u6A3Bezium;\u63E2\u0180cht\u3772\u377D\u3781\u0100ry\u3777\u377B;\uC000\u{1D4C9};\u4446cy;\u445Brok;\u4167\u0100io\u378B\u378Ex\xF4\u1777head\u0100lr\u3797\u37A0eftarro\xF7\u084Fightarrow\xBB\u0F5D\u0900AHabcdfghlmoprstuw\u37D0\u37D3\u37D7\u37E4\u37F0\u37FC\u380E\u381C\u3823\u3834\u3851\u385D\u386B\u38A9\u38CC\u38D2\u38EA\u38F6r\xF2\u03EDar;\u6963\u0100cr\u37DC\u37E2ute\u803B\xFA\u40FA\xF2\u1150r\u01E3\u37EA\0\u37EDy;\u445Eve;\u416D\u0100iy\u37F5\u37FArc\u803B\xFB\u40FB;\u4443\u0180abh\u3803\u3806\u380Br\xF2\u13ADlac;\u4171a\xF2\u13C3\u0100ir\u3813\u3818sht;\u697E;\uC000\u{1D532}rave\u803B\xF9\u40F9\u0161\u3827\u3831r\u0100lr\u382C\u382E\xBB\u0957\xBB\u1083lk;\u6580\u0100ct\u3839\u384D\u026F\u383F\0\0\u384Arn\u0100;e\u3845\u3846\u631Cr\xBB\u3846op;\u630Fri;\u65F8\u0100al\u3856\u385Acr;\u416B\u80BB\xA8\u0349\u0100gp\u3862\u3866on;\u4173f;\uC000\u{1D566}\u0300adhlsu\u114B\u3878\u387D\u1372\u3891\u38A0own\xE1\u13B3arpoon\u0100lr\u3888\u388Cef\xF4\u382Digh\xF4\u382Fi\u0180;hl\u3899\u389A\u389C\u43C5\xBB\u13FAon\xBB\u389Aparrows;\u61C8\u0180cit\u38B0\u38C4\u38C8\u026F\u38B6\0\0\u38C1rn\u0100;e\u38BC\u38BD\u631Dr\xBB\u38BDop;\u630Eng;\u416Fri;\u65F9cr;\uC000\u{1D4CA}\u0180dir\u38D9\u38DD\u38E2ot;\u62F0lde;\u4169i\u0100;f\u3730\u38E8\xBB\u1813\u0100am\u38EF\u38F2r\xF2\u38A8l\u803B\xFC\u40FCangle;\u69A7\u0780ABDacdeflnoprsz\u391C\u391F\u3929\u392D\u39B5\u39B8\u39BD\u39DF\u39E4\u39E8\u39F3\u39F9\u39FD\u3A01\u3A20r\xF2\u03F7ar\u0100;v\u3926\u3927\u6AE8;\u6AE9as\xE8\u03E1\u0100nr\u3932\u3937grt;\u699C\u0380eknprst\u34E3\u3946\u394B\u3952\u395D\u3964\u3996app\xE1\u2415othin\xE7\u1E96\u0180hir\u34EB\u2EC8\u3959op\xF4\u2FB5\u0100;h\u13B7\u3962\xEF\u318D\u0100iu\u3969\u396Dgm\xE1\u33B3\u0100bp\u3972\u3984setneq\u0100;q\u397D\u3980\uC000\u228A\uFE00;\uC000\u2ACB\uFE00setneq\u0100;q\u398F\u3992\uC000\u228B\uFE00;\uC000\u2ACC\uFE00\u0100hr\u399B\u399Fet\xE1\u369Ciangle\u0100lr\u39AA\u39AFeft\xBB\u0925ight\xBB\u1051y;\u4432ash\xBB\u1036\u0180elr\u39C4\u39D2\u39D7\u0180;be\u2DEA\u39CB\u39CFar;\u62BBq;\u625Alip;\u62EE\u0100bt\u39DC\u1468a\xF2\u1469r;\uC000\u{1D533}tr\xE9\u39AEsu\u0100bp\u39EF\u39F1\xBB\u0D1C\xBB\u0D59pf;\uC000\u{1D567}ro\xF0\u0EFBtr\xE9\u39B4\u0100cu\u3A06\u3A0Br;\uC000\u{1D4CB}\u0100bp\u3A10\u3A18n\u0100Ee\u3980\u3A16\xBB\u397En\u0100Ee\u3992\u3A1E\xBB\u3990igzag;\u699A\u0380cefoprs\u3A36\u3A3B\u3A56\u3A5B\u3A54\u3A61\u3A6Airc;\u4175\u0100di\u3A40\u3A51\u0100bg\u3A45\u3A49ar;\u6A5Fe\u0100;q\u15FA\u3A4F;\u6259erp;\u6118r;\uC000\u{1D534}pf;\uC000\u{1D568}\u0100;e\u1479\u3A66at\xE8\u1479cr;\uC000\u{1D4CC}\u0AE3\u178E\u3A87\0\u3A8B\0\u3A90\u3A9B\0\0\u3A9D\u3AA8\u3AAB\u3AAF\0\0\u3AC3\u3ACE\0\u3AD8\u17DC\u17DFtr\xE9\u17D1r;\uC000\u{1D535}\u0100Aa\u3A94\u3A97r\xF2\u03C3r\xF2\u09F6;\u43BE\u0100Aa\u3AA1\u3AA4r\xF2\u03B8r\xF2\u09EBa\xF0\u2713is;\u62FB\u0180dpt\u17A4\u3AB5\u3ABE\u0100fl\u3ABA\u17A9;\uC000\u{1D569}im\xE5\u17B2\u0100Aa\u3AC7\u3ACAr\xF2\u03CEr\xF2\u0A01\u0100cq\u3AD2\u17B8r;\uC000\u{1D4CD}\u0100pt\u17D6\u3ADCr\xE9\u17D4\u0400acefiosu\u3AF0\u3AFD\u3B08\u3B0C\u3B11\u3B15\u3B1B\u3B21c\u0100uy\u3AF6\u3AFBte\u803B\xFD\u40FD;\u444F\u0100iy\u3B02\u3B06rc;\u4177;\u444Bn\u803B\xA5\u40A5r;\uC000\u{1D536}cy;\u4457pf;\uC000\u{1D56A}cr;\uC000\u{1D4CE}\u0100cm\u3B26\u3B29y;\u444El\u803B\xFF\u40FF\u0500acdefhiosw\u3B42\u3B48\u3B54\u3B58\u3B64\u3B69\u3B6D\u3B74\u3B7A\u3B80cute;\u417A\u0100ay\u3B4D\u3B52ron;\u417E;\u4437ot;\u417C\u0100et\u3B5D\u3B61tr\xE6\u155Fa;\u43B6r;\uC000\u{1D537}cy;\u4436grarr;\u61DDpf;\uC000\u{1D56B}cr;\uC000\u{1D4CF}\u0100jn\u3B85\u3B87;\u600Dj;\u600C'.split("").map(function(n){return n.charCodeAt(0)})),Rr={};Object.defineProperty(Rr,"__esModule",{value:!0});var Pb=Rr.default=new Uint16Array("\u0200aglq	\x1B\u026D\0\0p;\u4026os;\u4027t;\u403Et;\u403Cuot;\u4022".split("").map(function(n){return n.charCodeAt(0)})),Br={};(function(n){"use strict";var e;Object.defineProperty(n,"__esModule",{value:!0}),n.replaceCodePoint=n.fromCodePoint=void 0;var t=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);n.fromCodePoint=(e=String.fromCodePoint)!==null&&e!==void 0?e:function(r){var s="";return r>65535&&(r-=65536,s+=String.fromCharCode(r>>>10&1023|55296),r=56320|r&1023),s+=String.fromCharCode(r),s};function i(r){var s;return r>=55296&&r<=57343||r>1114111?65533:(s=t.get(r))!==null&&s!==void 0?s:r}n.replaceCodePoint=i;function o(r){return(0,n.fromCodePoint)(i(r))}n.default=o})(Br),function(n){"use strict";var e=Z&&Z.__createBinding||(Object.create?function(x,D,A,I){I===void 0&&(I=A);var O=Object.getOwnPropertyDescriptor(D,A);(!O||("get"in O?!D.__esModule:O.writable||O.configurable))&&(O={enumerable:!0,get:function(){return D[A]}}),Object.defineProperty(x,I,O)}:function(x,D,A,I){I===void 0&&(I=A),x[I]=D[A]}),t=Z&&Z.__setModuleDefault||(Object.create?function(x,D){Object.defineProperty(x,"default",{enumerable:!0,value:D})}:function(x,D){x.default=D}),i=Z&&Z.__importStar||function(x){if(x&&x.__esModule)return x;var D={};if(x!=null)for(var A in x)A!=="default"&&Object.prototype.hasOwnProperty.call(x,A)&&e(D,x,A);return t(D,x),D},o=Z&&Z.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(n,"__esModule",{value:!0}),n.decodeXML=n.decodeHTMLStrict=n.decodeHTMLAttribute=n.decodeHTML=n.determineBranch=n.EntityDecoder=n.DecodingMode=n.BinTrieFlags=n.fromCodePoint=n.replaceCodePoint=n.decodeCodePoint=n.xmlDecodeTree=n.htmlDecodeTree=void 0;var r=o(Ir);n.htmlDecodeTree=r.default;var s=o(Rr);n.xmlDecodeTree=s.default;var a=i(Br);n.decodeCodePoint=a.default;var c=Br;Object.defineProperty(n,"replaceCodePoint",{enumerable:!0,get:function(){return c.replaceCodePoint}}),Object.defineProperty(n,"fromCodePoint",{enumerable:!0,get:function(){return c.fromCodePoint}});var u;(function(x){x[x.NUM=35]="NUM",x[x.SEMI=59]="SEMI",x[x.EQUALS=61]="EQUALS",x[x.ZERO=48]="ZERO",x[x.NINE=57]="NINE",x[x.LOWER_A=97]="LOWER_A",x[x.LOWER_F=102]="LOWER_F",x[x.LOWER_X=120]="LOWER_X",x[x.LOWER_Z=122]="LOWER_Z",x[x.UPPER_A=65]="UPPER_A",x[x.UPPER_F=70]="UPPER_F",x[x.UPPER_Z=90]="UPPER_Z"})(u||(u={}));var d=32,f;(function(x){x[x.VALUE_LENGTH=49152]="VALUE_LENGTH",x[x.BRANCH_LENGTH=16256]="BRANCH_LENGTH",x[x.JUMP_TABLE=127]="JUMP_TABLE"})(f=n.BinTrieFlags||(n.BinTrieFlags={}));function p(x){return x>=u.ZERO&&x<=u.NINE}function l(x){return x>=u.UPPER_A&&x<=u.UPPER_F||x>=u.LOWER_A&&x<=u.LOWER_F}function m(x){return x>=u.UPPER_A&&x<=u.UPPER_Z||x>=u.LOWER_A&&x<=u.LOWER_Z||p(x)}function h(x){return x===u.EQUALS||m(x)}var g;(function(x){x[x.EntityStart=0]="EntityStart",x[x.NumericStart=1]="NumericStart",x[x.NumericDecimal=2]="NumericDecimal",x[x.NumericHex=3]="NumericHex",x[x.NamedEntity=4]="NamedEntity"})(g||(g={}));var v;(function(x){x[x.Legacy=0]="Legacy",x[x.Strict=1]="Strict",x[x.Attribute=2]="Attribute"})(v=n.DecodingMode||(n.DecodingMode={}));var b=function(){function x(D,A,I){this.decodeTree=D,this.emitCodePoint=A,this.errors=I,this.state=g.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=v.Strict}return x.prototype.startEntity=function(D){this.decodeMode=D,this.state=g.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},x.prototype.write=function(D,A){switch(this.state){case g.EntityStart:return D.charCodeAt(A)===u.NUM?(this.state=g.NumericStart,this.consumed+=1,this.stateNumericStart(D,A+1)):(this.state=g.NamedEntity,this.stateNamedEntity(D,A));case g.NumericStart:return this.stateNumericStart(D,A);case g.NumericDecimal:return this.stateNumericDecimal(D,A);case g.NumericHex:return this.stateNumericHex(D,A);case g.NamedEntity:return this.stateNamedEntity(D,A)}},x.prototype.stateNumericStart=function(D,A){return A>=D.length?-1:(D.charCodeAt(A)|d)===u.LOWER_X?(this.state=g.NumericHex,this.consumed+=1,this.stateNumericHex(D,A+1)):(this.state=g.NumericDecimal,this.stateNumericDecimal(D,A))},x.prototype.addToNumericResult=function(D,A,I,O){if(A!==I){var P=I-A;this.result=this.result*Math.pow(O,P)+parseInt(D.substr(A,P),O),this.consumed+=P}},x.prototype.stateNumericHex=function(D,A){for(var I=A;A<D.length;){var O=D.charCodeAt(A);if(p(O)||l(O))A+=1;else return this.addToNumericResult(D,I,A,16),this.emitNumericEntity(O,3)}return this.addToNumericResult(D,I,A,16),-1},x.prototype.stateNumericDecimal=function(D,A){for(var I=A;A<D.length;){var O=D.charCodeAt(A);if(p(O))A+=1;else return this.addToNumericResult(D,I,A,10),this.emitNumericEntity(O,2)}return this.addToNumericResult(D,I,A,10),-1},x.prototype.emitNumericEntity=function(D,A){var I;if(this.consumed<=A)return(I=this.errors)===null||I===void 0||I.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(D===u.SEMI)this.consumed+=1;else if(this.decodeMode===v.Strict)return 0;return this.emitCodePoint((0,a.replaceCodePoint)(this.result),this.consumed),this.errors&&(D!==u.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},x.prototype.stateNamedEntity=function(D,A){for(var I=this.decodeTree,O=I[this.treeIndex],P=(O&f.VALUE_LENGTH)>>14;A<D.length;A++,this.excess++){var k=D.charCodeAt(A);if(this.treeIndex=E(I,O,this.treeIndex+Math.max(1,P),k),this.treeIndex<0)return this.result===0||this.decodeMode===v.Attribute&&(P===0||h(k))?0:this.emitNotTerminatedNamedEntity();if(O=I[this.treeIndex],P=(O&f.VALUE_LENGTH)>>14,P!==0){if(k===u.SEMI)return this.emitNamedEntityData(this.treeIndex,P,this.consumed+this.excess);this.decodeMode!==v.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},x.prototype.emitNotTerminatedNamedEntity=function(){var D,A=this,I=A.result,O=A.decodeTree,P=(O[I]&f.VALUE_LENGTH)>>14;return this.emitNamedEntityData(I,P,this.consumed),(D=this.errors)===null||D===void 0||D.missingSemicolonAfterCharacterReference(),this.consumed},x.prototype.emitNamedEntityData=function(D,A,I){var O=this.decodeTree;return this.emitCodePoint(A===1?O[D]&~f.VALUE_LENGTH:O[D+1],I),A===3&&this.emitCodePoint(O[D+2],I),I},x.prototype.end=function(){var D;switch(this.state){case g.NamedEntity:return this.result!==0&&(this.decodeMode!==v.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case g.NumericDecimal:return this.emitNumericEntity(0,2);case g.NumericHex:return this.emitNumericEntity(0,3);case g.NumericStart:return(D=this.errors)===null||D===void 0||D.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case g.EntityStart:return 0}},x}();n.EntityDecoder=b;function _(x){var D="",A=new b(x,function(I){return D+=(0,a.fromCodePoint)(I)});return function(I,O){for(var P=0,k=0;(k=I.indexOf("&",k))>=0;){D+=I.slice(P,k),A.startEntity(O);var R=A.write(I,k+1);if(R<0){P=k+A.end();break}P=k+R,k=R===0?P+1:P}var V=D+I.slice(P);return D="",V}}function E(x,D,A,I){var O=(D&f.BRANCH_LENGTH)>>7,P=D&f.JUMP_TABLE;if(O===0)return P!==0&&I===P?A:-1;if(P){var k=I-P;return k<0||k>=O?-1:x[A+k]-1}for(var R=A,V=R+O-1;R<=V;){var X=R+V>>>1,G=x[X];if(G<I)R=X+1;else if(G>I)V=X-1;else return x[X+O]}return-1}n.determineBranch=E;var y=_(r.default),w=_(s.default);function T(x,D){return D===void 0&&(D=v.Legacy),y(x,D)}n.decodeHTML=T;function C(x){return y(x,v.Attribute)}n.decodeHTMLAttribute=C;function M(x){return y(x,v.Strict)}n.decodeHTMLStrict=M;function L(x){return w(x,v.Strict)}n.decodeXML=L}(oi),function(n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.QuoteType=void 0;var e=oi,t;(function(p){p[p.Tab=9]="Tab",p[p.NewLine=10]="NewLine",p[p.FormFeed=12]="FormFeed",p[p.CarriageReturn=13]="CarriageReturn",p[p.Space=32]="Space",p[p.ExclamationMark=33]="ExclamationMark",p[p.Number=35]="Number",p[p.Amp=38]="Amp",p[p.SingleQuote=39]="SingleQuote",p[p.DoubleQuote=34]="DoubleQuote",p[p.Dash=45]="Dash",p[p.Slash=47]="Slash",p[p.Zero=48]="Zero",p[p.Nine=57]="Nine",p[p.Semi=59]="Semi",p[p.Lt=60]="Lt",p[p.Eq=61]="Eq",p[p.Gt=62]="Gt",p[p.Questionmark=63]="Questionmark",p[p.UpperA=65]="UpperA",p[p.LowerA=97]="LowerA",p[p.UpperF=70]="UpperF",p[p.LowerF=102]="LowerF",p[p.UpperZ=90]="UpperZ",p[p.LowerZ=122]="LowerZ",p[p.LowerX=120]="LowerX",p[p.OpeningSquareBracket=91]="OpeningSquareBracket"})(t||(t={}));var i;(function(p){p[p.Text=1]="Text",p[p.BeforeTagName=2]="BeforeTagName",p[p.InTagName=3]="InTagName",p[p.InSelfClosingTag=4]="InSelfClosingTag",p[p.BeforeClosingTagName=5]="BeforeClosingTagName",p[p.InClosingTagName=6]="InClosingTagName",p[p.AfterClosingTagName=7]="AfterClosingTagName",p[p.BeforeAttributeName=8]="BeforeAttributeName",p[p.InAttributeName=9]="InAttributeName",p[p.AfterAttributeName=10]="AfterAttributeName",p[p.BeforeAttributeValue=11]="BeforeAttributeValue",p[p.InAttributeValueDq=12]="InAttributeValueDq",p[p.InAttributeValueSq=13]="InAttributeValueSq",p[p.InAttributeValueNq=14]="InAttributeValueNq",p[p.BeforeDeclaration=15]="BeforeDeclaration",p[p.InDeclaration=16]="InDeclaration",p[p.InProcessingInstruction=17]="InProcessingInstruction",p[p.BeforeComment=18]="BeforeComment",p[p.CDATASequence=19]="CDATASequence",p[p.InSpecialComment=20]="InSpecialComment",p[p.InCommentLike=21]="InCommentLike",p[p.BeforeSpecialS=22]="BeforeSpecialS",p[p.SpecialStartSequence=23]="SpecialStartSequence",p[p.InSpecialTag=24]="InSpecialTag",p[p.BeforeEntity=25]="BeforeEntity",p[p.BeforeNumericEntity=26]="BeforeNumericEntity",p[p.InNamedEntity=27]="InNamedEntity",p[p.InNumericEntity=28]="InNumericEntity",p[p.InHexEntity=29]="InHexEntity"})(i||(i={}));function o(p){return p===t.Space||p===t.NewLine||p===t.Tab||p===t.FormFeed||p===t.CarriageReturn}function r(p){return p===t.Slash||p===t.Gt||o(p)}function s(p){return p>=t.Zero&&p<=t.Nine}function a(p){return p>=t.LowerA&&p<=t.LowerZ||p>=t.UpperA&&p<=t.UpperZ}function c(p){return p>=t.UpperA&&p<=t.UpperF||p>=t.LowerA&&p<=t.LowerF}var u;(function(p){p[p.NoValue=0]="NoValue",p[p.Unquoted=1]="Unquoted",p[p.Single=2]="Single",p[p.Double=3]="Double"})(u=n.QuoteType||(n.QuoteType={}));var d={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},f=function(){function p(l,m){var h=l.xmlMode,g=h===void 0?!1:h,v=l.decodeEntities,b=v===void 0?!0:v;this.cbs=m,this.state=i.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=i.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=g,this.decodeEntities=b,this.entityTrie=g?e.xmlDecodeTree:e.htmlDecodeTree}return p.prototype.reset=function(){this.state=i.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=i.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},p.prototype.write=function(l){this.offset+=this.buffer.length,this.buffer=l,this.parse()},p.prototype.end=function(){this.running&&this.finish()},p.prototype.pause=function(){this.running=!1},p.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},p.prototype.getIndex=function(){return this.index},p.prototype.getSectionStart=function(){return this.sectionStart},p.prototype.stateText=function(l){l===t.Lt||!this.decodeEntities&&this.fastForwardTo(t.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=i.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&l===t.Amp&&(this.state=i.BeforeEntity)},p.prototype.stateSpecialStartSequence=function(l){var m=this.sequenceIndex===this.currentSequence.length,h=m?r(l):(l|32)===this.currentSequence[this.sequenceIndex];if(!h)this.isSpecial=!1;else if(!m){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=i.InTagName,this.stateInTagName(l)},p.prototype.stateInSpecialTag=function(l){if(this.sequenceIndex===this.currentSequence.length){if(l===t.Gt||o(l)){var m=this.index-this.currentSequence.length;if(this.sectionStart<m){var h=this.index;this.index=m,this.cbs.ontext(this.sectionStart,m),this.index=h}this.isSpecial=!1,this.sectionStart=m+2,this.stateInClosingTagName(l);return}this.sequenceIndex=0}(l|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===d.TitleEnd?this.decodeEntities&&l===t.Amp&&(this.state=i.BeforeEntity):this.fastForwardTo(t.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(l===t.Lt)},p.prototype.stateCDATASequence=function(l){l===d.Cdata[this.sequenceIndex]?++this.sequenceIndex===d.Cdata.length&&(this.state=i.InCommentLike,this.currentSequence=d.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=i.InDeclaration,this.stateInDeclaration(l))},p.prototype.fastForwardTo=function(l){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===l)return!0;return this.index=this.buffer.length+this.offset-1,!1},p.prototype.stateInCommentLike=function(l){l===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===d.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=i.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):l!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},p.prototype.isTagStartChar=function(l){return this.xmlMode?!r(l):a(l)},p.prototype.startSpecial=function(l,m){this.isSpecial=!0,this.currentSequence=l,this.sequenceIndex=m,this.state=i.SpecialStartSequence},p.prototype.stateBeforeTagName=function(l){if(l===t.ExclamationMark)this.state=i.BeforeDeclaration,this.sectionStart=this.index+1;else if(l===t.Questionmark)this.state=i.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(l)){var m=l|32;this.sectionStart=this.index,!this.xmlMode&&m===d.TitleEnd[2]?this.startSpecial(d.TitleEnd,3):this.state=!this.xmlMode&&m===d.ScriptEnd[2]?i.BeforeSpecialS:i.InTagName}else l===t.Slash?this.state=i.BeforeClosingTagName:(this.state=i.Text,this.stateText(l))},p.prototype.stateInTagName=function(l){r(l)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(l))},p.prototype.stateBeforeClosingTagName=function(l){o(l)||(l===t.Gt?this.state=i.Text:(this.state=this.isTagStartChar(l)?i.InClosingTagName:i.InSpecialComment,this.sectionStart=this.index))},p.prototype.stateInClosingTagName=function(l){(l===t.Gt||o(l))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=i.AfterClosingTagName,this.stateAfterClosingTagName(l))},p.prototype.stateAfterClosingTagName=function(l){(l===t.Gt||this.fastForwardTo(t.Gt))&&(this.state=i.Text,this.baseState=i.Text,this.sectionStart=this.index+1)},p.prototype.stateBeforeAttributeName=function(l){l===t.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=i.InSpecialTag,this.sequenceIndex=0):this.state=i.Text,this.baseState=this.state,this.sectionStart=this.index+1):l===t.Slash?this.state=i.InSelfClosingTag:o(l)||(this.state=i.InAttributeName,this.sectionStart=this.index)},p.prototype.stateInSelfClosingTag=function(l){l===t.Gt?(this.cbs.onselfclosingtag(this.index),this.state=i.Text,this.baseState=i.Text,this.sectionStart=this.index+1,this.isSpecial=!1):o(l)||(this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(l))},p.prototype.stateInAttributeName=function(l){(l===t.Eq||r(l))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=i.AfterAttributeName,this.stateAfterAttributeName(l))},p.prototype.stateAfterAttributeName=function(l){l===t.Eq?this.state=i.BeforeAttributeValue:l===t.Slash||l===t.Gt?(this.cbs.onattribend(u.NoValue,this.index),this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(l)):o(l)||(this.cbs.onattribend(u.NoValue,this.index),this.state=i.InAttributeName,this.sectionStart=this.index)},p.prototype.stateBeforeAttributeValue=function(l){l===t.DoubleQuote?(this.state=i.InAttributeValueDq,this.sectionStart=this.index+1):l===t.SingleQuote?(this.state=i.InAttributeValueSq,this.sectionStart=this.index+1):o(l)||(this.sectionStart=this.index,this.state=i.InAttributeValueNq,this.stateInAttributeValueNoQuotes(l))},p.prototype.handleInAttributeValue=function(l,m){l===m||!this.decodeEntities&&this.fastForwardTo(m)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(m===t.DoubleQuote?u.Double:u.Single,this.index),this.state=i.BeforeAttributeName):this.decodeEntities&&l===t.Amp&&(this.baseState=this.state,this.state=i.BeforeEntity)},p.prototype.stateInAttributeValueDoubleQuotes=function(l){this.handleInAttributeValue(l,t.DoubleQuote)},p.prototype.stateInAttributeValueSingleQuotes=function(l){this.handleInAttributeValue(l,t.SingleQuote)},p.prototype.stateInAttributeValueNoQuotes=function(l){o(l)||l===t.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(u.Unquoted,this.index),this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(l)):this.decodeEntities&&l===t.Amp&&(this.baseState=this.state,this.state=i.BeforeEntity)},p.prototype.stateBeforeDeclaration=function(l){l===t.OpeningSquareBracket?(this.state=i.CDATASequence,this.sequenceIndex=0):this.state=l===t.Dash?i.BeforeComment:i.InDeclaration},p.prototype.stateInDeclaration=function(l){(l===t.Gt||this.fastForwardTo(t.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=i.Text,this.sectionStart=this.index+1)},p.prototype.stateInProcessingInstruction=function(l){(l===t.Gt||this.fastForwardTo(t.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=i.Text,this.sectionStart=this.index+1)},p.prototype.stateBeforeComment=function(l){l===t.Dash?(this.state=i.InCommentLike,this.currentSequence=d.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=i.InDeclaration},p.prototype.stateInSpecialComment=function(l){(l===t.Gt||this.fastForwardTo(t.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=i.Text,this.sectionStart=this.index+1)},p.prototype.stateBeforeSpecialS=function(l){var m=l|32;m===d.ScriptEnd[3]?this.startSpecial(d.ScriptEnd,4):m===d.StyleEnd[3]?this.startSpecial(d.StyleEnd,4):(this.state=i.InTagName,this.stateInTagName(l))},p.prototype.stateBeforeEntity=function(l){this.entityExcess=1,this.entityResult=0,l===t.Number?this.state=i.BeforeNumericEntity:l===t.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=i.InNamedEntity,this.stateInNamedEntity(l))},p.prototype.stateInNamedEntity=function(l){if(this.entityExcess+=1,this.trieIndex=(0,e.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,l),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];var m=this.trieCurrent&e.BinTrieFlags.VALUE_LENGTH;if(m){var h=(m>>14)-1;if(!this.allowLegacyEntity()&&l!==t.Semi)this.trieIndex+=h;else{var g=this.index-this.entityExcess+1;g>this.sectionStart&&this.emitPartial(this.sectionStart,g),this.entityResult=this.trieIndex,this.trieIndex+=h,this.entityExcess=0,this.sectionStart=this.index+1,h===0&&this.emitNamedEntity()}}},p.prototype.emitNamedEntity=function(){if(this.state=this.baseState,this.entityResult!==0){var l=(this.entityTrie[this.entityResult]&e.BinTrieFlags.VALUE_LENGTH)>>14;switch(l){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~e.BinTrieFlags.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}},p.prototype.stateBeforeNumericEntity=function(l){(l|32)===t.LowerX?(this.entityExcess++,this.state=i.InHexEntity):(this.state=i.InNumericEntity,this.stateInNumericEntity(l))},p.prototype.emitNumericEntity=function(l){var m=this.index-this.entityExcess-1,h=m+2+ +(this.state===i.InHexEntity);h!==this.index&&(m>this.sectionStart&&this.emitPartial(this.sectionStart,m),this.sectionStart=this.index+Number(l),this.emitCodePoint((0,e.replaceCodePoint)(this.entityResult))),this.state=this.baseState},p.prototype.stateInNumericEntity=function(l){l===t.Semi?this.emitNumericEntity(!0):s(l)?(this.entityResult=this.entityResult*10+(l-t.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},p.prototype.stateInHexEntity=function(l){l===t.Semi?this.emitNumericEntity(!0):s(l)?(this.entityResult=this.entityResult*16+(l-t.Zero),this.entityExcess++):c(l)?(this.entityResult=this.entityResult*16+((l|32)-t.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},p.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===i.Text||this.baseState===i.InSpecialTag)},p.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===i.Text||this.state===i.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===i.InAttributeValueDq||this.state===i.InAttributeValueSq||this.state===i.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},p.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},p.prototype.parse=function(){for(;this.shouldContinue();){var l=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case i.Text:{this.stateText(l);break}case i.SpecialStartSequence:{this.stateSpecialStartSequence(l);break}case i.InSpecialTag:{this.stateInSpecialTag(l);break}case i.CDATASequence:{this.stateCDATASequence(l);break}case i.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(l);break}case i.InAttributeName:{this.stateInAttributeName(l);break}case i.InCommentLike:{this.stateInCommentLike(l);break}case i.InSpecialComment:{this.stateInSpecialComment(l);break}case i.BeforeAttributeName:{this.stateBeforeAttributeName(l);break}case i.InTagName:{this.stateInTagName(l);break}case i.InClosingTagName:{this.stateInClosingTagName(l);break}case i.BeforeTagName:{this.stateBeforeTagName(l);break}case i.AfterAttributeName:{this.stateAfterAttributeName(l);break}case i.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(l);break}case i.BeforeAttributeValue:{this.stateBeforeAttributeValue(l);break}case i.BeforeClosingTagName:{this.stateBeforeClosingTagName(l);break}case i.AfterClosingTagName:{this.stateAfterClosingTagName(l);break}case i.BeforeSpecialS:{this.stateBeforeSpecialS(l);break}case i.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(l);break}case i.InSelfClosingTag:{this.stateInSelfClosingTag(l);break}case i.InDeclaration:{this.stateInDeclaration(l);break}case i.BeforeDeclaration:{this.stateBeforeDeclaration(l);break}case i.BeforeComment:{this.stateBeforeComment(l);break}case i.InProcessingInstruction:{this.stateInProcessingInstruction(l);break}case i.InNamedEntity:{this.stateInNamedEntity(l);break}case i.BeforeEntity:{this.stateBeforeEntity(l);break}case i.InHexEntity:{this.stateInHexEntity(l);break}case i.InNumericEntity:{this.stateInNumericEntity(l);break}default:this.stateBeforeNumericEntity(l)}this.index++}this.cleanup()},p.prototype.finish=function(){this.state===i.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},p.prototype.handleTrailingData=function(){var l=this.buffer.length+this.offset;this.state===i.InCommentLike?this.currentSequence===d.CdataEnd?this.cbs.oncdata(this.sectionStart,l,0):this.cbs.oncomment(this.sectionStart,l,0):this.state===i.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===i.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===i.InTagName||this.state===i.BeforeAttributeName||this.state===i.BeforeAttributeValue||this.state===i.AfterAttributeName||this.state===i.InAttributeName||this.state===i.InAttributeValueSq||this.state===i.InAttributeValueDq||this.state===i.InAttributeValueNq||this.state===i.InClosingTagName||this.cbs.ontext(this.sectionStart,l)},p.prototype.emitPartial=function(l,m){this.baseState!==i.Text&&this.baseState!==i.InSpecialTag?this.cbs.onattribdata(l,m):this.cbs.ontext(l,m)},p.prototype.emitCodePoint=function(l){this.baseState!==i.Text&&this.baseState!==i.InSpecialTag?this.cbs.onattribentity(l):this.cbs.ontextentity(l)},p}();n.default=f}(Lr);var xf=Z&&Z.__createBinding||(Object.create?function(n,e,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(e,t);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,i,o)}:function(n,e,t,i){i===void 0&&(i=t),n[i]=e[t]}),Sf=Z&&Z.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),kf=Z&&Z.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&xf(e,n,t);return Sf(e,n),e};Object.defineProperty(ri,"__esModule",{value:!0});var Cf=ri.Parser=void 0,an=kf(Lr),ka=oi,Dt=new Set(["input","option","optgroup","select","button","datalist","textarea"]),ne=new Set(["p"]),Ca=new Set(["thead","tbody"]),_a=new Set(["dd","dt"]),Ea=new Set(["rt","rp"]),_f=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",ne],["h1",ne],["h2",ne],["h3",ne],["h4",ne],["h5",ne],["h6",ne],["select",Dt],["input",Dt],["output",Dt],["button",Dt],["datalist",Dt],["textarea",Dt],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",_a],["dt",_a],["address",ne],["article",ne],["aside",ne],["blockquote",ne],["details",ne],["div",ne],["dl",ne],["fieldset",ne],["figcaption",ne],["figure",ne],["footer",ne],["form",ne],["header",ne],["hr",ne],["main",ne],["nav",ne],["ol",ne],["pre",ne],["section",ne],["table",ne],["ul",ne],["rt",Ea],["rp",Ea],["tbody",Ca],["tfoot",Ca]]),Ef=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),Ta=new Set(["math","svg"]),Pa=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),Tf=/\s|\//,Pf=function(){function n(e,t){t===void 0&&(t={});var i,o,r,s,a;this.options=t,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=e??{},this.lowerCaseTagNames=(i=t.lowerCaseTags)!==null&&i!==void 0?i:!t.xmlMode,this.lowerCaseAttributeNames=(o=t.lowerCaseAttributeNames)!==null&&o!==void 0?o:!t.xmlMode,this.tokenizer=new((r=t.Tokenizer)!==null&&r!==void 0?r:an.default)(this.options,this),(a=(s=this.cbs).onparserinit)===null||a===void 0||a.call(s,this)}return n.prototype.ontext=function(e,t){var i,o,r=this.getSlice(e,t);this.endIndex=t-1,(o=(i=this.cbs).ontext)===null||o===void 0||o.call(i,r),this.startIndex=t},n.prototype.ontextentity=function(e){var t,i,o=this.tokenizer.getSectionStart();this.endIndex=o-1,(i=(t=this.cbs).ontext)===null||i===void 0||i.call(t,(0,ka.fromCodePoint)(e)),this.startIndex=o},n.prototype.isVoidElement=function(e){return!this.options.xmlMode&&Ef.has(e)},n.prototype.onopentagname=function(e,t){this.endIndex=t;var i=this.getSlice(e,t);this.lowerCaseTagNames&&(i=i.toLowerCase()),this.emitOpenTag(i)},n.prototype.emitOpenTag=function(e){var t,i,o,r;this.openTagStart=this.startIndex,this.tagname=e;var s=!this.options.xmlMode&&_f.get(e);if(s)for(;this.stack.length>0&&s.has(this.stack[this.stack.length-1]);){var a=this.stack.pop();(i=(t=this.cbs).onclosetag)===null||i===void 0||i.call(t,a,!0)}this.isVoidElement(e)||(this.stack.push(e),Ta.has(e)?this.foreignContext.push(!0):Pa.has(e)&&this.foreignContext.push(!1)),(r=(o=this.cbs).onopentagname)===null||r===void 0||r.call(o,e),this.cbs.onopentag&&(this.attribs={})},n.prototype.endOpenTag=function(e){var t,i;this.startIndex=this.openTagStart,this.attribs&&((i=(t=this.cbs).onopentag)===null||i===void 0||i.call(t,this.tagname,this.attribs,e),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},n.prototype.onopentagend=function(e){this.endIndex=e,this.endOpenTag(!1),this.startIndex=e+1},n.prototype.onclosetag=function(e,t){var i,o,r,s,a,c;this.endIndex=t;var u=this.getSlice(e,t);if(this.lowerCaseTagNames&&(u=u.toLowerCase()),(Ta.has(u)||Pa.has(u))&&this.foreignContext.pop(),this.isVoidElement(u))!this.options.xmlMode&&u==="br"&&((o=(i=this.cbs).onopentagname)===null||o===void 0||o.call(i,"br"),(s=(r=this.cbs).onopentag)===null||s===void 0||s.call(r,"br",{},!0),(c=(a=this.cbs).onclosetag)===null||c===void 0||c.call(a,"br",!1));else{var d=this.stack.lastIndexOf(u);if(d!==-1)if(this.cbs.onclosetag)for(var f=this.stack.length-d;f--;)this.cbs.onclosetag(this.stack.pop(),f!==0);else this.stack.length=d;else!this.options.xmlMode&&u==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=t+1},n.prototype.onselfclosingtag=function(e){this.endIndex=e,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=e+1):this.onopentagend(e)},n.prototype.closeCurrentTag=function(e){var t,i,o=this.tagname;this.endOpenTag(e),this.stack[this.stack.length-1]===o&&((i=(t=this.cbs).onclosetag)===null||i===void 0||i.call(t,o,!e),this.stack.pop())},n.prototype.onattribname=function(e,t){this.startIndex=e;var i=this.getSlice(e,t);this.attribname=this.lowerCaseAttributeNames?i.toLowerCase():i},n.prototype.onattribdata=function(e,t){this.attribvalue+=this.getSlice(e,t)},n.prototype.onattribentity=function(e){this.attribvalue+=(0,ka.fromCodePoint)(e)},n.prototype.onattribend=function(e,t){var i,o;this.endIndex=t,(o=(i=this.cbs).onattribute)===null||o===void 0||o.call(i,this.attribname,this.attribvalue,e===an.QuoteType.Double?'"':e===an.QuoteType.Single?"'":e===an.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},n.prototype.getInstructionName=function(e){var t=e.search(Tf),i=t<0?e:e.substr(0,t);return this.lowerCaseTagNames&&(i=i.toLowerCase()),i},n.prototype.ondeclaration=function(e,t){this.endIndex=t;var i=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){var o=this.getInstructionName(i);this.cbs.onprocessinginstruction("!".concat(o),"!".concat(i))}this.startIndex=t+1},n.prototype.onprocessinginstruction=function(e,t){this.endIndex=t;var i=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){var o=this.getInstructionName(i);this.cbs.onprocessinginstruction("?".concat(o),"?".concat(i))}this.startIndex=t+1},n.prototype.oncomment=function(e,t,i){var o,r,s,a;this.endIndex=t,(r=(o=this.cbs).oncomment)===null||r===void 0||r.call(o,this.getSlice(e,t-i)),(a=(s=this.cbs).oncommentend)===null||a===void 0||a.call(s),this.startIndex=t+1},n.prototype.oncdata=function(e,t,i){var o,r,s,a,c,u,d,f,p,l;this.endIndex=t;var m=this.getSlice(e,t-i);this.options.xmlMode||this.options.recognizeCDATA?((r=(o=this.cbs).oncdatastart)===null||r===void 0||r.call(o),(a=(s=this.cbs).ontext)===null||a===void 0||a.call(s,m),(u=(c=this.cbs).oncdataend)===null||u===void 0||u.call(c)):((f=(d=this.cbs).oncomment)===null||f===void 0||f.call(d,"[CDATA[".concat(m,"]]")),(l=(p=this.cbs).oncommentend)===null||l===void 0||l.call(p)),this.startIndex=t+1},n.prototype.onend=function(){var e,t;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var i=this.stack.length;i>0;this.cbs.onclosetag(this.stack[--i],!0));}(t=(e=this.cbs).onend)===null||t===void 0||t.call(e)},n.prototype.reset=function(){var e,t,i,o;(t=(e=this.cbs).onreset)===null||t===void 0||t.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(o=(i=this.cbs).onparserinit)===null||o===void 0||o.call(i,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},n.prototype.parseComplete=function(e){this.reset(),this.end(e)},n.prototype.getSlice=function(e,t){for(;e-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var i=this.buffers[0].slice(e-this.bufferOffset,t-this.bufferOffset);t-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),i+=this.buffers[0].slice(0,t-this.bufferOffset);return i},n.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},n.prototype.write=function(e){var t,i;if(this.ended){(i=(t=this.cbs).onerror)===null||i===void 0||i.call(t,new Error(".write() after done!"));return}this.buffers.push(e),this.tokenizer.running&&(this.tokenizer.write(e),this.writeIndex++)},n.prototype.end=function(e){var t,i;if(this.ended){(i=(t=this.cbs).onerror)===null||i===void 0||i.call(t,new Error(".end() after done!"));return}e&&this.write(e),this.ended=!0,this.tokenizer.end()},n.prototype.pause=function(){this.tokenizer.pause()},n.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},n.prototype.parseChunk=function(e){this.write(e)},n.prototype.done=function(e){this.end(e)},n}();Cf=ri.Parser=Pf;var $e={},Lt={};(function(n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Doctype=n.CDATA=n.Tag=n.Style=n.Script=n.Comment=n.Directive=n.Text=n.Root=n.isTag=n.ElementType=void 0;var e;(function(i){i.Root="root",i.Text="text",i.Directive="directive",i.Comment="comment",i.Script="script",i.Style="style",i.Tag="tag",i.CDATA="cdata",i.Doctype="doctype"})(e=n.ElementType||(n.ElementType={}));function t(i){return i.type===e.Tag||i.type===e.Script||i.type===e.Style}n.isTag=t,n.Root=e.Root,n.Text=e.Text,n.Directive=e.Directive,n.Comment=e.Comment,n.Script=e.Script,n.Style=e.Style,n.Tag=e.Tag,n.CDATA=e.CDATA,n.Doctype=e.Doctype})(Lt);var ee={},st=Z&&Z.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(i[r]=o[r])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),si=Z&&Z.__assign||function(){return si=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},si.apply(this,arguments)};Object.defineProperty(ee,"__esModule",{value:!0});var Af=ee.cloneNode=Wf=ee.hasChildren=Vf=ee.isDocument=Hf=ee.isDirective=qf=ee.isComment=Ff=ee.isText=zf=ee.isCDATA=Uf=ee.isTag=Nf=ee.Element=jf=ee.Document=Bf=ee.CDATA=Rf=ee.NodeWithChildren=If=ee.ProcessingInstruction=Lf=ee.Comment=Df=ee.Text=Of=ee.DataNode=Mf=ee.Node=void 0,Le=Lt,jr=function(){function n(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(n.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),n.prototype.cloneNode=function(e){return e===void 0&&(e=!1),Nr(this,e)},n}(),Mf=ee.Node=jr,ln=function(n){st(e,n);function e(t){var i=n.call(this)||this;return i.data=t,i}return Object.defineProperty(e.prototype,"nodeValue",{get:function(){return this.data},set:function(t){this.data=t},enumerable:!1,configurable:!0}),e}(jr),Of=ee.DataNode=ln,Aa=function(n){st(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=Le.ElementType.Text,t}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),e}(ln),Df=ee.Text=Aa,Ma=function(n){st(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=Le.ElementType.Comment,t}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),e}(ln),Lf=ee.Comment=Ma,Oa=function(n){st(e,n);function e(t,i){var o=n.call(this,i)||this;return o.name=t,o.type=Le.ElementType.Directive,o}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),e}(ln),If=ee.ProcessingInstruction=Oa,cn=function(n){st(e,n);function e(t){var i=n.call(this)||this;return i.children=t,i}return Object.defineProperty(e.prototype,"firstChild",{get:function(){var t;return(t=this.children[0])!==null&&t!==void 0?t:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.children},set:function(t){this.children=t},enumerable:!1,configurable:!0}),e}(jr),Rf=ee.NodeWithChildren=cn,Da=function(n){st(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=Le.ElementType.CDATA,t}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),e}(cn),Bf=ee.CDATA=Da,La=function(n){st(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=Le.ElementType.Root,t}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),e}(cn),jf=ee.Document=La,Ia=function(n){st(e,n);function e(t,i,o,r){o===void 0&&(o=[]),r===void 0&&(r=t==="script"?Le.ElementType.Script:t==="style"?Le.ElementType.Style:Le.ElementType.Tag);var s=n.call(this,o)||this;return s.name=t,s.attribs=i,s.type=r,s}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tagName",{get:function(){return this.name},set:function(t){this.name=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attributes",{get:function(){var t=this;return Object.keys(this.attribs).map(function(i){var o,r;return{name:i,value:t.attribs[i],namespace:(o=t["x-attribsNamespace"])===null||o===void 0?void 0:o[i],prefix:(r=t["x-attribsPrefix"])===null||r===void 0?void 0:r[i]}})},enumerable:!1,configurable:!0}),e}(cn),Nf=ee.Element=Ia;function Ra(n){return(0,Le.isTag)(n)}var Uf=ee.isTag=Ra;function Ba(n){return n.type===Le.ElementType.CDATA}var zf=ee.isCDATA=Ba;function ja(n){return n.type===Le.ElementType.Text}var Ff=ee.isText=ja;function Na(n){return n.type===Le.ElementType.Comment}var qf=ee.isComment=Na;function Ua(n){return n.type===Le.ElementType.Directive}var Hf=ee.isDirective=Ua;function za(n){return n.type===Le.ElementType.Root}var Vf=ee.isDocument=za;function Xf(n){return Object.prototype.hasOwnProperty.call(n,"children")}var Wf=ee.hasChildren=Xf;function Nr(n,e){e===void 0&&(e=!1);var t;if(ja(n))t=new Aa(n.data);else if(Na(n))t=new Ma(n.data);else if(Ra(n)){var i=e?Ur(n.children):[],o=new Ia(n.name,si({},n.attribs),i);i.forEach(function(c){return c.parent=o}),n.namespace!=null&&(o.namespace=n.namespace),n["x-attribsNamespace"]&&(o["x-attribsNamespace"]=si({},n["x-attribsNamespace"])),n["x-attribsPrefix"]&&(o["x-attribsPrefix"]=si({},n["x-attribsPrefix"])),t=o}else if(Ba(n)){var i=e?Ur(n.children):[],r=new Da(i);i.forEach(function(u){return u.parent=r}),t=r}else if(za(n)){var i=e?Ur(n.children):[],s=new La(i);i.forEach(function(u){return u.parent=s}),n["x-mode"]&&(s["x-mode"]=n["x-mode"]),t=s}else if(Ua(n)){var a=new Oa(n.name,n.data);n["x-name"]!=null&&(a["x-name"]=n["x-name"],a["x-publicId"]=n["x-publicId"],a["x-systemId"]=n["x-systemId"]),t=a}else throw new Error("Not implemented yet: ".concat(n.type));return t.startIndex=n.startIndex,t.endIndex=n.endIndex,n.sourceCodeLocation!=null&&(t.sourceCodeLocation=n.sourceCodeLocation),t}Af=ee.cloneNode=Nr;function Ur(n){for(var e=n.map(function(i){return Nr(i,!0)}),t=1;t<e.length;t++)e[t].prev=e[t-1],e[t-1].next=e[t];return e}(function(n){"use strict";var e=Z&&Z.__createBinding||(Object.create?function(a,c,u,d){d===void 0&&(d=u);var f=Object.getOwnPropertyDescriptor(c,u);(!f||("get"in f?!c.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(a,d,f)}:function(a,c,u,d){d===void 0&&(d=u),a[d]=c[u]}),t=Z&&Z.__exportStar||function(a,c){for(var u in a)u!=="default"&&!Object.prototype.hasOwnProperty.call(c,u)&&e(c,a,u)};Object.defineProperty(n,"__esModule",{value:!0}),n.DomHandler=void 0;var i=Lt,o=ee;t(ee,n);var r={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},s=function(){function a(c,u,d){this.dom=[],this.root=new o.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof u=="function"&&(d=u,u=r),typeof c=="object"&&(u=c,c=void 0),this.callback=c??null,this.options=u??r,this.elementCB=d??null}return a.prototype.onparserinit=function(c){this.parser=c},a.prototype.onreset=function(){this.dom=[],this.root=new o.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},a.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},a.prototype.onerror=function(c){this.handleCallback(c)},a.prototype.onclosetag=function(){this.lastNode=null;var c=this.tagStack.pop();this.options.withEndIndices&&(c.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(c)},a.prototype.onopentag=function(c,u){var d=this.options.xmlMode?i.ElementType.Tag:void 0,f=new o.Element(c,u,void 0,d);this.addNode(f),this.tagStack.push(f)},a.prototype.ontext=function(c){var u=this.lastNode;if(u&&u.type===i.ElementType.Text)u.data+=c,this.options.withEndIndices&&(u.endIndex=this.parser.endIndex);else{var d=new o.Text(c);this.addNode(d),this.lastNode=d}},a.prototype.oncomment=function(c){if(this.lastNode&&this.lastNode.type===i.ElementType.Comment){this.lastNode.data+=c;return}var u=new o.Comment(c);this.addNode(u),this.lastNode=u},a.prototype.oncommentend=function(){this.lastNode=null},a.prototype.oncdatastart=function(){var c=new o.Text(""),u=new o.CDATA([c]);this.addNode(u),c.parent=u,this.lastNode=c},a.prototype.oncdataend=function(){this.lastNode=null},a.prototype.onprocessinginstruction=function(c,u){var d=new o.ProcessingInstruction(c,u);this.addNode(d)},a.prototype.handleCallback=function(c){if(typeof this.callback=="function")this.callback(c,this.dom);else if(c)throw c},a.prototype.addNode=function(c){var u=this.tagStack[this.tagStack.length-1],d=u.children[u.children.length-1];this.options.withStartIndices&&(c.startIndex=this.parser.startIndex),this.options.withEndIndices&&(c.endIndex=this.parser.endIndex),u.children.push(c),d&&(c.prev=d,d.next=c),c.parent=u,this.lastNode=null},a}();n.DomHandler=s,n.default=s})($e);var pn={},je={},ai={},Fa={},yt={},zr={};Object.defineProperty(zr,"__esModule",{value:!0});function dn(n){for(var e=1;e<n.length;e++)n[e][0]+=n[e-1][0]+1;return n}var Ab=zr.default=new Map(dn([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(dn([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(dn([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(dn([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]])),un={};(function(n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.escapeText=n.escapeAttribute=n.escapeUTF8=n.escape=n.encodeXML=n.getCodePoint=n.xmlReplacer=void 0,n.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var e=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);n.getCodePoint=String.prototype.codePointAt!=null?function(o,r){return o.codePointAt(r)}:function(o,r){return(o.charCodeAt(r)&64512)===55296?(o.charCodeAt(r)-55296)*1024+o.charCodeAt(r+1)-56320+65536:o.charCodeAt(r)};function t(o){for(var r="",s=0,a;(a=n.xmlReplacer.exec(o))!==null;){var c=a.index,u=o.charCodeAt(c),d=e.get(u);d!==void 0?(r+=o.substring(s,c)+d,s=c+1):(r+="".concat(o.substring(s,c),"&#x").concat((0,n.getCodePoint)(o,c).toString(16),";"),s=n.xmlReplacer.lastIndex+=+((u&64512)===55296))}return r+o.substr(s)}n.encodeXML=t,n.escape=t;function i(o,r){return function(s){for(var a,c=0,u="";a=o.exec(s);)c!==a.index&&(u+=s.substring(c,a.index)),u+=r.get(a[0].charCodeAt(0)),c=a.index+1;return u+s.substring(c)}}n.escapeUTF8=i(/[&<>'"]/g,e),n.escapeAttribute=i(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),n.escapeText=i(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))})(un);var Zf=Z&&Z.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(yt,"__esModule",{value:!0});var Gf=yt.encodeNonAsciiHTML=Jf=yt.encodeHTML=void 0,Yf=Zf(zr),qa=un,Kf=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function Qf(n){return Ha(Kf,n)}var Jf=yt.encodeHTML=Qf;function $f(n){return Ha(qa.xmlReplacer,n)}Gf=yt.encodeNonAsciiHTML=$f;function Ha(n,e){for(var t="",i=0,o;(o=n.exec(e))!==null;){var r=o.index;t+=e.substring(i,r);var s=e.charCodeAt(r),a=Yf.default.get(s);if(typeof a=="object"){if(r+1<e.length){var c=e.charCodeAt(r+1),u=typeof a.n=="number"?a.n===c?a.o:void 0:a.n.get(c);if(u!==void 0){t+=u,i=n.lastIndex+=1;continue}}a=a.v}if(a!==void 0)t+=a,i=r+1;else{var d=(0,qa.getCodePoint)(e,r);t+="&#x".concat(d.toString(16),";"),i=n.lastIndex+=+(d!==s)}}return t+e.substr(i)}(function(n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.decodeXMLStrict=n.decodeHTML5Strict=n.decodeHTML4Strict=n.decodeHTML5=n.decodeHTML4=n.decodeHTMLAttribute=n.decodeHTMLStrict=n.decodeHTML=n.decodeXML=n.DecodingMode=n.EntityDecoder=n.encodeHTML5=n.encodeHTML4=n.encodeNonAsciiHTML=n.encodeHTML=n.escapeText=n.escapeAttribute=n.escapeUTF8=n.escape=n.encodeXML=n.encode=n.decodeStrict=n.decode=n.EncodingMode=n.EntityLevel=void 0;var e=oi,t=yt,i=un,o;(function(p){p[p.XML=0]="XML",p[p.HTML=1]="HTML"})(o=n.EntityLevel||(n.EntityLevel={}));var r;(function(p){p[p.UTF8=0]="UTF8",p[p.ASCII=1]="ASCII",p[p.Extensive=2]="Extensive",p[p.Attribute=3]="Attribute",p[p.Text=4]="Text"})(r=n.EncodingMode||(n.EncodingMode={}));function s(p,l){l===void 0&&(l=o.XML);var m=typeof l=="number"?l:l.level;if(m===o.HTML){var h=typeof l=="object"?l.mode:void 0;return(0,e.decodeHTML)(p,h)}return(0,e.decodeXML)(p)}n.decode=s;function a(p,l){var m;l===void 0&&(l=o.XML);var h=typeof l=="number"?{level:l}:l;return(m=h.mode)!==null&&m!==void 0||(h.mode=e.DecodingMode.Strict),s(p,h)}n.decodeStrict=a;function c(p,l){l===void 0&&(l=o.XML);var m=typeof l=="number"?{level:l}:l;return m.mode===r.UTF8?(0,i.escapeUTF8)(p):m.mode===r.Attribute?(0,i.escapeAttribute)(p):m.mode===r.Text?(0,i.escapeText)(p):m.level===o.HTML?m.mode===r.ASCII?(0,t.encodeNonAsciiHTML)(p):(0,t.encodeHTML)(p):(0,i.encodeXML)(p)}n.encode=c;var u=un;Object.defineProperty(n,"encodeXML",{enumerable:!0,get:function(){return u.encodeXML}}),Object.defineProperty(n,"escape",{enumerable:!0,get:function(){return u.escape}}),Object.defineProperty(n,"escapeUTF8",{enumerable:!0,get:function(){return u.escapeUTF8}}),Object.defineProperty(n,"escapeAttribute",{enumerable:!0,get:function(){return u.escapeAttribute}}),Object.defineProperty(n,"escapeText",{enumerable:!0,get:function(){return u.escapeText}});var d=yt;Object.defineProperty(n,"encodeHTML",{enumerable:!0,get:function(){return d.encodeHTML}}),Object.defineProperty(n,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return d.encodeNonAsciiHTML}}),Object.defineProperty(n,"encodeHTML4",{enumerable:!0,get:function(){return d.encodeHTML}}),Object.defineProperty(n,"encodeHTML5",{enumerable:!0,get:function(){return d.encodeHTML}});var f=oi;Object.defineProperty(n,"EntityDecoder",{enumerable:!0,get:function(){return f.EntityDecoder}}),Object.defineProperty(n,"DecodingMode",{enumerable:!0,get:function(){return f.DecodingMode}}),Object.defineProperty(n,"decodeXML",{enumerable:!0,get:function(){return f.decodeXML}}),Object.defineProperty(n,"decodeHTML",{enumerable:!0,get:function(){return f.decodeHTML}}),Object.defineProperty(n,"decodeHTMLStrict",{enumerable:!0,get:function(){return f.decodeHTMLStrict}}),Object.defineProperty(n,"decodeHTMLAttribute",{enumerable:!0,get:function(){return f.decodeHTMLAttribute}}),Object.defineProperty(n,"decodeHTML4",{enumerable:!0,get:function(){return f.decodeHTML}}),Object.defineProperty(n,"decodeHTML5",{enumerable:!0,get:function(){return f.decodeHTML}}),Object.defineProperty(n,"decodeHTML4Strict",{enumerable:!0,get:function(){return f.decodeHTMLStrict}}),Object.defineProperty(n,"decodeHTML5Strict",{enumerable:!0,get:function(){return f.decodeHTMLStrict}}),Object.defineProperty(n,"decodeXMLStrict",{enumerable:!0,get:function(){return f.decodeXML}})})(Fa);var It={};Object.defineProperty(It,"__esModule",{value:!0});var em=It.attributeNames=tm=It.elementNames=void 0,tm=It.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(function(n){return[n.toLowerCase(),n]}));em=It.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(function(n){return[n.toLowerCase(),n]}));var Rt=Z&&Z.__assign||function(){return Rt=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Rt.apply(this,arguments)},im=Z&&Z.__createBinding||(Object.create?function(n,e,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(e,t);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,i,o)}:function(n,e,t,i){i===void 0&&(i=t),n[i]=e[t]}),nm=Z&&Z.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),rm=Z&&Z.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&im(e,n,t);return nm(e,n),e};Object.defineProperty(ai,"__esModule",{value:!0});var om=ai.render=void 0,et=rm(Lt),hn=Fa,Va=It,sm=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function am(n){return n.replace(/"/g,"&quot;")}function lm(n,e){var t;if(n){var i=((t=e.encodeEntities)!==null&&t!==void 0?t:e.decodeEntities)===!1?am:e.xmlMode||e.encodeEntities!=="utf8"?hn.encodeXML:hn.escapeAttribute;return Object.keys(n).map(function(o){var r,s,a=(r=n[o])!==null&&r!==void 0?r:"";return e.xmlMode==="foreign"&&(o=(s=Va.attributeNames.get(o))!==null&&s!==void 0?s:o),!e.emptyAttrs&&!e.xmlMode&&a===""?o:"".concat(o,'="').concat(i(a),'"')}).join(" ")}}var Xa=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function fn(n,e){e===void 0&&(e={});for(var t=("length"in n)?n:[n],i="",o=0;o<t.length;o++)i+=cm(t[o],e);return i}om=ai.render=fn;var Mb=ai.default=fn;function cm(n,e){switch(n.type){case et.Root:return fn(n.children,e);case et.Doctype:case et.Directive:return hm(n);case et.Comment:return gm(n);case et.CDATA:return mm(n);case et.Script:case et.Style:case et.Tag:return um(n,e);case et.Text:return fm(n,e)}}var pm=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),dm=new Set(["svg","math"]);function um(n,e){var t;e.xmlMode==="foreign"&&(n.name=(t=Va.elementNames.get(n.name))!==null&&t!==void 0?t:n.name,n.parent&&pm.has(n.parent.name)&&(e=Rt(Rt({},e),{xmlMode:!1}))),!e.xmlMode&&dm.has(n.name)&&(e=Rt(Rt({},e),{xmlMode:"foreign"}));var i="<".concat(n.name),o=lm(n.attribs,e);return o&&(i+=" ".concat(o)),n.children.length===0&&(e.xmlMode?e.selfClosingTags!==!1:e.selfClosingTags&&Xa.has(n.name))?(e.xmlMode||(i+=" "),i+="/>"):(i+=">",n.children.length>0&&(i+=fn(n.children,e)),(e.xmlMode||!Xa.has(n.name))&&(i+="</".concat(n.name,">"))),i}function hm(n){return"<".concat(n.data,">")}function fm(n,e){var t,i=n.data||"";return((t=e.encodeEntities)!==null&&t!==void 0?t:e.decodeEntities)!==!1&&!(!e.xmlMode&&n.parent&&sm.has(n.parent.name))&&(i=e.xmlMode||e.encodeEntities!=="utf8"?(0,hn.encodeXML)(i):(0,hn.escapeText)(i)),i}function mm(n){return"<![CDATA[".concat(n.children[0].data,"]]>")}function gm(n){return"<!--".concat(n.data,"-->")}var vm=Z&&Z.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(je,"__esModule",{value:!0});var ym=je.innerText=_m=je.textContent=Cm=je.getText=km=je.getInnerHTML=xm=je.getOuterHTML=void 0,Ke=$e,bm=vm(ai),wm=Lt;function Wa(n,e){return(0,bm.default)(n,e)}var xm=je.getOuterHTML=Wa;function Sm(n,e){return(0,Ke.hasChildren)(n)?n.children.map(function(t){return Wa(t,e)}).join(""):""}var km=je.getInnerHTML=Sm;function mn(n){return Array.isArray(n)?n.map(mn).join(""):(0,Ke.isTag)(n)?n.name==="br"?`
`:mn(n.children):(0,Ke.isCDATA)(n)?mn(n.children):(0,Ke.isText)(n)?n.data:""}var Cm=je.getText=mn;function Fr(n){return Array.isArray(n)?n.map(Fr).join(""):(0,Ke.hasChildren)(n)&&!(0,Ke.isComment)(n)?Fr(n.children):(0,Ke.isText)(n)?n.data:""}var _m=je.textContent=Fr;function qr(n){return Array.isArray(n)?n.map(qr).join(""):(0,Ke.hasChildren)(n)&&(n.type===wm.ElementType.Tag||(0,Ke.isCDATA)(n))?qr(n.children):(0,Ke.isText)(n)?n.data:""}ym=je.innerText=qr;var be={};Object.defineProperty(be,"__esModule",{value:!0});var Em=be.prevElementSibling=Nm=be.nextElementSibling=Bm=be.getName=Im=be.hasAttrib=Dm=be.getAttributeValue=Mm=be.getSiblings=Pm=be.getParent=Tm=be.getChildren=void 0,Hr=$e;function Za(n){return(0,Hr.hasChildren)(n)?n.children:[]}var Tm=be.getChildren=Za;function Ga(n){return n.parent||null}var Pm=be.getParent=Ga;function Am(n){var e,t,i=Ga(n);if(i!=null)return Za(i);for(var o=[n],r=n.prev,s=n.next;r!=null;)o.unshift(r),e=r,r=e.prev;for(;s!=null;)o.push(s),t=s,s=t.next;return o}var Mm=be.getSiblings=Am;function Om(n,e){var t;return(t=n.attribs)===null||t===void 0?void 0:t[e]}var Dm=be.getAttributeValue=Om;function Lm(n,e){return n.attribs!=null&&Object.prototype.hasOwnProperty.call(n.attribs,e)&&n.attribs[e]!=null}var Im=be.hasAttrib=Lm;function Rm(n){return n.name}var Bm=be.getName=Rm;function jm(n){for(var e,t=n.next;t!==null&&!(0,Hr.isTag)(t);)e=t,t=e.next;return t}var Nm=be.nextElementSibling=jm;function Um(n){for(var e,t=n.prev;t!==null&&!(0,Hr.isTag)(t);)e=t,t=e.prev;return t}Em=be.prevElementSibling=Um;var Ie={};Object.defineProperty(Ie,"__esModule",{value:!0});var zm=Ie.prepend=Ym=Ie.prependChild=Zm=Ie.append=Xm=Ie.appendChild=Hm=Ie.replaceElement=Fm=Ie.removeElement=void 0;function li(n){if(n.prev&&(n.prev.next=n.next),n.next&&(n.next.prev=n.prev),n.parent){var e=n.parent.children,t=e.lastIndexOf(n);t>=0&&e.splice(t,1)}n.next=null,n.prev=null,n.parent=null}var Fm=Ie.removeElement=li;function qm(n,e){var t=e.prev=n.prev;t&&(t.next=e);var i=e.next=n.next;i&&(i.prev=e);var o=e.parent=n.parent;if(o){var r=o.children;r[r.lastIndexOf(n)]=e,n.parent=null}}var Hm=Ie.replaceElement=qm;function Vm(n,e){if(li(e),e.next=null,e.parent=n,n.children.push(e)>1){var t=n.children[n.children.length-2];t.next=e,e.prev=t}else e.prev=null}var Xm=Ie.appendChild=Vm;function Wm(n,e){li(e);var t=n.parent,i=n.next;if(e.next=i,e.prev=n,n.next=e,e.parent=t,i){if(i.prev=e,t){var o=t.children;o.splice(o.lastIndexOf(i),0,e)}}else t&&t.children.push(e)}var Zm=Ie.append=Wm;function Gm(n,e){if(li(e),e.parent=n,e.prev=null,n.children.unshift(e)!==1){var t=n.children[1];t.prev=e,e.next=t}else e.next=null}var Ym=Ie.prependChild=Gm;function Km(n,e){li(e);var t=n.parent;if(t){var i=t.children;i.splice(i.indexOf(n),0,e)}n.prev&&(n.prev.next=e),e.parent=t,e.prev=n.prev,e.next=n,n.prev=e}zm=Ie.prepend=Km;var Ae={};Object.defineProperty(Ae,"__esModule",{value:!0});var Qm=Ae.findAll=rg=Ae.existsOne=ng=Ae.findOne=ig=Ae.findOneChild=eg=Ae.find=$m=Ae.filter=void 0,gn=$e;function Jm(n,e,t,i){return t===void 0&&(t=!0),i===void 0&&(i=1/0),Ya(n,Array.isArray(e)?e:[e],t,i)}var $m=Ae.filter=Jm;function Ya(n,e,t,i){for(var o=[],r=[e],s=[0];;){if(s[0]>=r[0].length){if(s.length===1)return o;r.shift(),s.shift();continue}var a=r[0][s[0]++];if(n(a)&&(o.push(a),--i<=0))return o;t&&(0,gn.hasChildren)(a)&&a.children.length>0&&(s.unshift(0),r.unshift(a.children))}}var eg=Ae.find=Ya;function tg(n,e){return e.find(n)}var ig=Ae.findOneChild=tg;function Ka(n,e,t){t===void 0&&(t=!0);for(var i=null,o=0;o<e.length&&!i;o++){var r=e[o];if((0,gn.isTag)(r))n(r)?i=r:t&&r.children.length>0&&(i=Ka(n,r.children,!0));else continue}return i}var ng=Ae.findOne=Ka;function Qa(n,e){return e.some(function(t){return(0,gn.isTag)(t)&&(n(t)||Qa(n,t.children))})}var rg=Ae.existsOne=Qa;function og(n,e){for(var t=[],i=[e],o=[0];;){if(o[0]>=i[0].length){if(i.length===1)return t;i.shift(),o.shift();continue}var r=i[0][o[0]++];(0,gn.isTag)(r)&&(n(r)&&t.push(r),r.children.length>0&&(o.unshift(0),i.unshift(r.children)))}}Qm=Ae.findAll=og;var Ne={};Object.defineProperty(Ne,"__esModule",{value:!0});var sg=Ne.getElementsByTagType=mg=Ne.getElementsByTagName=hg=Ne.getElementById=dg=Ne.getElements=cg=Ne.testElement=void 0,bt=$e,vn=Ae,yn={tag_name:function(n){return typeof n=="function"?function(e){return(0,bt.isTag)(e)&&n(e.name)}:n==="*"?bt.isTag:function(e){return(0,bt.isTag)(e)&&e.name===n}},tag_type:function(n){return typeof n=="function"?function(e){return n(e.type)}:function(e){return e.type===n}},tag_contains:function(n){return typeof n=="function"?function(e){return(0,bt.isText)(e)&&n(e.data)}:function(e){return(0,bt.isText)(e)&&e.data===n}}};function Ja(n,e){return typeof e=="function"?function(t){return(0,bt.isTag)(t)&&e(t.attribs[n])}:function(t){return(0,bt.isTag)(t)&&t.attribs[n]===e}}function ag(n,e){return function(t){return n(t)||e(t)}}function $a(n){var e=Object.keys(n).map(function(t){var i=n[t];return Object.prototype.hasOwnProperty.call(yn,t)?yn[t](i):Ja(t,i)});return e.length===0?null:e.reduce(ag)}function lg(n,e){var t=$a(n);return t?t(e):!0}var cg=Ne.testElement=lg;function pg(n,e,t,i){i===void 0&&(i=1/0);var o=$a(n);return o?(0,vn.filter)(o,e,t,i):[]}var dg=Ne.getElements=pg;function ug(n,e,t){return t===void 0&&(t=!0),Array.isArray(e)||(e=[e]),(0,vn.findOne)(Ja("id",n),e,t)}var hg=Ne.getElementById=ug;function fg(n,e,t,i){return t===void 0&&(t=!0),i===void 0&&(i=1/0),(0,vn.filter)(yn.tag_name(n),e,t,i)}var mg=Ne.getElementsByTagName=fg;function gg(n,e,t,i){return t===void 0&&(t=!0),i===void 0&&(i=1/0),(0,vn.filter)(yn.tag_type(n),e,t,i)}sg=Ne.getElementsByTagType=gg;var el={};(function(n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.uniqueSort=n.compareDocumentPosition=n.DocumentPosition=n.removeSubsets=void 0;var e=$e;function t(s){for(var a=s.length;--a>=0;){var c=s[a];if(a>0&&s.lastIndexOf(c,a-1)>=0){s.splice(a,1);continue}for(var u=c.parent;u;u=u.parent)if(s.includes(u)){s.splice(a,1);break}}return s}n.removeSubsets=t;var i;(function(s){s[s.DISCONNECTED=1]="DISCONNECTED",s[s.PRECEDING=2]="PRECEDING",s[s.FOLLOWING=4]="FOLLOWING",s[s.CONTAINS=8]="CONTAINS",s[s.CONTAINED_BY=16]="CONTAINED_BY"})(i=n.DocumentPosition||(n.DocumentPosition={}));function o(s,a){var c=[],u=[];if(s===a)return 0;for(var d=(0,e.hasChildren)(s)?s:s.parent;d;)c.unshift(d),d=d.parent;for(d=(0,e.hasChildren)(a)?a:a.parent;d;)u.unshift(d),d=d.parent;for(var f=Math.min(c.length,u.length),p=0;p<f&&c[p]===u[p];)p++;if(p===0)return i.DISCONNECTED;var l=c[p-1],m=l.children,h=c[p],g=u[p];return m.indexOf(h)>m.indexOf(g)?l===a?i.FOLLOWING|i.CONTAINED_BY:i.FOLLOWING:l===s?i.PRECEDING|i.CONTAINS:i.PRECEDING}n.compareDocumentPosition=o;function r(s){return s=s.filter(function(a,c,u){return!u.includes(a,c+1)}),s.sort(function(a,c){var u=o(a,c);return u&i.PRECEDING?-1:u&i.FOLLOWING?1:0}),s}n.uniqueSort=r})(el);var bn={};Object.defineProperty(bn,"__esModule",{value:!0});var vg=bn.getFeed=void 0,yg=je,ci=Ne;function bg(n){var e=wn(Cg,n);return e?e.name==="feed"?wg(e):xg(e):null}vg=bn.getFeed=bg;function wg(n){var e,t=n.children,i={type:"atom",items:(0,ci.getElementsByTagName)("entry",t).map(function(s){var a,c=s.children,u={media:tl(c)};Re(u,"id","id",c),Re(u,"title","title",c);var d=(a=wn("link",c))===null||a===void 0?void 0:a.attribs.href;d&&(u.link=d);var f=at("summary",c)||at("content",c);f&&(u.description=f);var p=at("updated",c);return p&&(u.pubDate=new Date(p)),u})};Re(i,"id","id",t),Re(i,"title","title",t);var o=(e=wn("link",t))===null||e===void 0?void 0:e.attribs.href;o&&(i.link=o),Re(i,"description","subtitle",t);var r=at("updated",t);return r&&(i.updated=new Date(r)),Re(i,"author","email",t,!0),i}function xg(n){var e,t,i=(t=(e=wn("channel",n.children))===null||e===void 0?void 0:e.children)!==null&&t!==void 0?t:[],o={type:n.name.substr(0,3),id:"",items:(0,ci.getElementsByTagName)("item",n.children).map(function(s){var a=s.children,c={media:tl(a)};Re(c,"id","guid",a),Re(c,"title","title",a),Re(c,"link","link",a),Re(c,"description","description",a);var u=at("pubDate",a)||at("dc:date",a);return u&&(c.pubDate=new Date(u)),c})};Re(o,"title","title",i),Re(o,"link","link",i),Re(o,"description","description",i);var r=at("lastBuildDate",i);return r&&(o.updated=new Date(r)),Re(o,"author","managingEditor",i,!0),o}var Sg=["url","type","lang"],kg=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function tl(n){return(0,ci.getElementsByTagName)("media:content",n).map(function(e){for(var t=e.attribs,i={medium:t.medium,isDefault:!!t.isDefault},o=0,r=Sg;o<r.length;o++){var s=r[o];t[s]&&(i[s]=t[s])}for(var a=0,c=kg;a<c.length;a++){var s=c[a];t[s]&&(i[s]=parseInt(t[s],10))}return t.expression&&(i.expression=t.expression),i})}function wn(n,e){return(0,ci.getElementsByTagName)(n,e,!0,1)[0]}function at(n,e,t){return t===void 0&&(t=!1),(0,yg.textContent)((0,ci.getElementsByTagName)(n,e,t,1)).trim()}function Re(n,e,t,i,o){o===void 0&&(o=!1);var r=at(t,i,o);r&&(n[e]=r)}function Cg(n){return n==="rss"||n==="feed"||n==="rdf:RDF"}(function(n){"use strict";var e=Z&&Z.__createBinding||(Object.create?function(o,r,s,a){a===void 0&&(a=s);var c=Object.getOwnPropertyDescriptor(r,s);(!c||("get"in c?!r.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return r[s]}}),Object.defineProperty(o,a,c)}:function(o,r,s,a){a===void 0&&(a=s),o[a]=r[s]}),t=Z&&Z.__exportStar||function(o,r){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(r,s)&&e(r,o,s)};Object.defineProperty(n,"__esModule",{value:!0}),n.hasChildren=n.isDocument=n.isComment=n.isText=n.isCDATA=n.isTag=void 0,t(je,n),t(be,n),t(Ie,n),t(Ae,n),t(Ne,n),t(el,n),t(bn,n);var i=$e;Object.defineProperty(n,"isTag",{enumerable:!0,get:function(){return i.isTag}}),Object.defineProperty(n,"isCDATA",{enumerable:!0,get:function(){return i.isCDATA}}),Object.defineProperty(n,"isText",{enumerable:!0,get:function(){return i.isText}}),Object.defineProperty(n,"isComment",{enumerable:!0,get:function(){return i.isComment}}),Object.defineProperty(n,"isDocument",{enumerable:!0,get:function(){return i.isDocument}}),Object.defineProperty(n,"hasChildren",{enumerable:!0,get:function(){return i.hasChildren}})})(pn),function(n){"use strict";var e=Z&&Z.__createBinding||(Object.create?function(v,b,_,E){E===void 0&&(E=_);var y=Object.getOwnPropertyDescriptor(b,_);(!y||("get"in y?!b.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return b[_]}}),Object.defineProperty(v,E,y)}:function(v,b,_,E){E===void 0&&(E=_),v[E]=b[_]}),t=Z&&Z.__setModuleDefault||(Object.create?function(v,b){Object.defineProperty(v,"default",{enumerable:!0,value:b})}:function(v,b){v.default=b}),i=Z&&Z.__importStar||function(v){if(v&&v.__esModule)return v;var b={};if(v!=null)for(var _ in v)_!=="default"&&Object.prototype.hasOwnProperty.call(v,_)&&e(b,v,_);return t(b,v),b},o=Z&&Z.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(n,"__esModule",{value:!0}),n.DomUtils=n.parseFeed=n.getFeed=n.ElementType=n.Tokenizer=n.createDomStream=n.parseDOM=n.parseDocument=n.DefaultHandler=n.DomHandler=n.Parser=void 0;var r=ri,s=ri;Object.defineProperty(n,"Parser",{enumerable:!0,get:function(){return s.Parser}});var a=$e,c=$e;Object.defineProperty(n,"DomHandler",{enumerable:!0,get:function(){return c.DomHandler}}),Object.defineProperty(n,"DefaultHandler",{enumerable:!0,get:function(){return c.DomHandler}});function u(v,b){var _=new a.DomHandler(void 0,b);return new r.Parser(_,b).end(v),_.root}n.parseDocument=u;function d(v,b){return u(v,b).children}n.parseDOM=d;function f(v,b,_){var E=new a.DomHandler(v,b,_);return new r.Parser(E,b)}n.createDomStream=f;var p=Lr;Object.defineProperty(n,"Tokenizer",{enumerable:!0,get:function(){return o(p).default}}),n.ElementType=i(Lt);var l=pn,m=pn;Object.defineProperty(n,"getFeed",{enumerable:!0,get:function(){return m.getFeed}});var h={xmlMode:!0};function g(v,b){return b===void 0&&(b=h),(0,l.getFeed)(d(v,b))}n.parseFeed=g,n.DomUtils=i(pn)}(Sa);var _g=n=>{if(typeof n!="string")throw new TypeError("Expected a string");return n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")},Vr={};Object.defineProperty(Vr,"__esModule",{value:!0});/*!
* is-plain-object <https://github.com/jonschlinkert/is-plain-object>
*
* Copyright (c) 2014-2017, Jon Schlinkert.
* Released under the MIT License.
*/function il(n){return Object.prototype.toString.call(n)==="[object Object]"}function Eg(n){var e,t;return il(n)===!1?!1:(e=n.constructor,e===void 0?!0:(t=e.prototype,!(il(t)===!1||t.hasOwnProperty("isPrototypeOf")===!1)))}var Ob=Vr.isPlainObject=Eg,Tg=function(n){return Pg(n)&&!Ag(n)};function Pg(n){return!!n&&typeof n=="object"}function Ag(n){var e=Object.prototype.toString.call(n);return e==="[object RegExp]"||e==="[object Date]"||Dg(n)}var Mg=typeof Symbol=="function"&&Symbol.for,Og=Mg?Symbol.for("react.element"):60103;function Dg(n){return n.$$typeof===Og}function Lg(n){return Array.isArray(n)?[]:{}}function pi(n,e){return e.clone!==!1&&e.isMergeableObject(n)?Bt(Lg(n),n,e):n}function Ig(n,e,t){return n.concat(e).map(function(i){return pi(i,t)})}function Rg(n,e){if(!e.customMerge)return Bt;var t=e.customMerge(n);return typeof t=="function"?t:Bt}function Bg(n){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(n).filter(function(e){return Object.propertyIsEnumerable.call(n,e)}):[]}function nl(n){return Object.keys(n).concat(Bg(n))}function rl(n,e){try{return e in n}catch{return!1}}function jg(n,e){return rl(n,e)&&!(Object.hasOwnProperty.call(n,e)&&Object.propertyIsEnumerable.call(n,e))}function Ng(n,e,t){var i={};return t.isMergeableObject(n)&&nl(n).forEach(function(o){i[o]=pi(n[o],t)}),nl(e).forEach(function(o){jg(n,o)||(rl(n,o)&&t.isMergeableObject(e[o])?i[o]=Rg(o,t)(n[o],e[o],t):i[o]=pi(e[o],t))}),i}function Bt(n,e,t){t=t||{},t.arrayMerge=t.arrayMerge||Ig,t.isMergeableObject=t.isMergeableObject||Tg,t.cloneUnlessOtherwiseSpecified=pi;var i=Array.isArray(e),o=Array.isArray(n),r=i===o;return r?i?t.arrayMerge(n,e,t):Ng(n,e,t):pi(e,t)}Bt.all=function(n,e){if(!Array.isArray(n))throw new Error("first argument should be an array");return n.reduce(function(t,i){return Bt(t,i,e)},{})};var Ug=Bt,zg=Ug,Xr={exports:{}},Db=Xr.exports;(function(n){(function(e,t){n.exports?n.exports=t():e.parseSrcset=t()})(Z,function(){return function(e){function t(E){return E===" "||E==="	"||E===`
`||E==="\f"||E==="\r"}function i(E){var y,w=E.exec(e.substring(g));if(w)return y=w[0],g+=y.length,y}for(var o=e.length,r=/^[ \t\n\r\u000c]+/,s=/^[, \t\n\r\u000c]+/,a=/^[^ \t\n\r\u000c]+/,c=/[,]+$/,u=/^\d+$/,d=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,f,p,l,m,h,g=0,v=[];;){if(i(s),g>=o)return v;f=i(a),p=[],f.slice(-1)===","?(f=f.replace(c,""),_()):b()}function b(){for(i(r),l="",m="in descriptor";;){if(h=e.charAt(g),m==="in descriptor")if(t(h))l&&(p.push(l),l="",m="after descriptor");else if(h===","){g+=1,l&&p.push(l),_();return}else if(h==="(")l=l+h,m="in parens";else if(h===""){l&&p.push(l),_();return}else l=l+h;else if(m==="in parens")if(h===")")l=l+h,m="in descriptor";else if(h===""){p.push(l),_();return}else l=l+h;else if(m==="after descriptor"&&!t(h))if(h===""){_();return}else m="in descriptor",g-=1;g+=1}}function _(){var E=!1,y,w,T,C,M={},L,x,D,A,I;for(C=0;C<p.length;C++)L=p[C],x=L[L.length-1],D=L.substring(0,L.length-1),A=parseInt(D,10),I=parseFloat(D),u.test(D)&&x==="w"?((y||w)&&(E=!0),A===0?E=!0:y=A):d.test(D)&&x==="x"?((y||w||T)&&(E=!0),I<0?E=!0:w=I):u.test(D)&&x==="h"?((T||w)&&(E=!0),A===0?E=!0:T=A):E=!0;E?console&&console.log&&console.log("Invalid srcset descriptor found in '"+e+"' at '"+L+"'."):(M.url=f,y&&(M.w=y),w&&(M.d=w),T&&(M.h=T),v.push(M))}}})})(Xr);var Fg=Xr.exports,xn={exports:{}},Lb=xn.exports,Q=String,ol=function(){return{isColorSupported:!1,reset:Q,bold:Q,dim:Q,italic:Q,underline:Q,inverse:Q,hidden:Q,strikethrough:Q,black:Q,red:Q,green:Q,yellow:Q,blue:Q,magenta:Q,cyan:Q,white:Q,gray:Q,bgBlack:Q,bgRed:Q,bgGreen:Q,bgYellow:Q,bgBlue:Q,bgMagenta:Q,bgCyan:Q,bgWhite:Q,blackBright:Q,redBright:Q,greenBright:Q,yellowBright:Q,blueBright:Q,magentaBright:Q,cyanBright:Q,whiteBright:Q,bgBlackBright:Q,bgRedBright:Q,bgGreenBright:Q,bgYellowBright:Q,bgBlueBright:Q,bgMagentaBright:Q,bgCyanBright:Q,bgWhiteBright:Q}};xn.exports=ol();var Ib=xn.exports.createColors=ol,qg=xn.exports;const Hg={},Vg=Object.freeze(Object.defineProperty({__proto__:null,default:Hg},Symbol.toStringTag,{value:"Module"})),sl=tp(Vg);let al=qg,ll=sl,Wr=class oc extends Error{constructor(e,t,i,o,r,s){super(e),this.name="CssSyntaxError",this.reason=e,r&&(this.file=r),o&&(this.source=o),s&&(this.plugin=s),typeof t<"u"&&typeof i<"u"&&(typeof t=="number"?(this.line=t,this.column=i):(this.line=t.line,this.column=t.column,this.endLine=i.line,this.endColumn=i.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,oc)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;e==null&&(e=al.isColorSupported);let i=d=>d,o=d=>d,r=d=>d;if(e){let{bold:d,gray:f,red:p}=al.createColors(!0);o=l=>d(p(l)),i=l=>f(l),ll&&(r=l=>ll(l))}let s=t.split(/\r?\n/),a=Math.max(this.line-3,0),c=Math.min(this.line+2,s.length),u=String(c).length;return s.slice(a,c).map((d,f)=>{let p=a+1+f,l=" "+(" "+p).slice(-u)+" | ";if(p===this.line){if(d.length>160){let h=20,g=Math.max(0,this.column-h),v=Math.max(this.column+h,this.endColumn+h),b=d.slice(g,v),_=i(l.replace(/\d/g," "))+d.slice(0,Math.min(this.column-1,h-1)).replace(/[^\t]/g," ");return o(">")+i(l)+r(b)+`
 `+_+o("^")}let m=i(l.replace(/\d/g," "))+d.slice(0,this.column-1).replace(/[^\t]/g," ");return o(">")+i(l)+r(d)+`
 `+m+o("^")}return" "+i(l)+r(d)}).join(`
`)}toString(){let e=this.showSourceCode();return e&&(e=`

`+e+`
`),this.name+": "+this.message+e}};var Zr=Wr;Wr.default=Wr;const cl={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function Xg(n){return n[0].toUpperCase()+n.slice(1)}let Gr=class{constructor(n){this.builder=n}atrule(n,e){let t="@"+n.name,i=n.params?this.rawValue(n,"params"):"";if(typeof n.raws.afterName<"u"?t+=n.raws.afterName:i&&(t+=" "),n.nodes)this.block(n,t+i);else{let o=(n.raws.between||"")+(e?";":"");this.builder(t+i+o,n)}}beforeAfter(n,e){let t;n.type==="decl"?t=this.raw(n,null,"beforeDecl"):n.type==="comment"?t=this.raw(n,null,"beforeComment"):e==="before"?t=this.raw(n,null,"beforeRule"):t=this.raw(n,null,"beforeClose");let i=n.parent,o=0;for(;i&&i.type!=="root";)o+=1,i=i.parent;if(t.includes(`
`)){let r=this.raw(n,null,"indent");if(r.length)for(let s=0;s<o;s++)t+=r}return t}block(n,e){let t=this.raw(n,"between","beforeOpen");this.builder(e+t+"{",n,"start");let i;n.nodes&&n.nodes.length?(this.body(n),i=this.raw(n,"after")):i=this.raw(n,"after","emptyBody"),i&&this.builder(i),this.builder("}",n,"end")}body(n){let e=n.nodes.length-1;for(;e>0&&n.nodes[e].type==="comment";)e-=1;let t=this.raw(n,"semicolon");for(let i=0;i<n.nodes.length;i++){let o=n.nodes[i],r=this.raw(o,"before");r&&this.builder(r),this.stringify(o,e!==i||t)}}comment(n){let e=this.raw(n,"left","commentLeft"),t=this.raw(n,"right","commentRight");this.builder("/*"+e+n.text+t+"*/",n)}decl(n,e){let t=this.raw(n,"between","colon"),i=n.prop+t+this.rawValue(n,"value");n.important&&(i+=n.raws.important||" !important"),e&&(i+=";"),this.builder(i,n)}document(n){this.body(n)}raw(n,e,t){let i;if(t||(t=e),e&&(i=n.raws[e],typeof i<"u"))return i;let o=n.parent;if(t==="before"&&(!o||o.type==="root"&&o.first===n||o&&o.type==="document"))return"";if(!o)return cl[t];let r=n.root();if(r.rawCache||(r.rawCache={}),typeof r.rawCache[t]<"u")return r.rawCache[t];if(t==="before"||t==="after")return this.beforeAfter(n,t);{let s="raw"+Xg(t);this[s]?i=this[s](r,n):r.walk(a=>{if(i=a.raws[e],typeof i<"u")return!1})}return typeof i>"u"&&(i=cl[t]),r.rawCache[t]=i,i}rawBeforeClose(n){let e;return n.walk(t=>{if(t.nodes&&t.nodes.length>0&&typeof t.raws.after<"u")return e=t.raws.after,e.includes(`
`)&&(e=e.replace(/[^\n]+$/,"")),!1}),e&&(e=e.replace(/\S/g,"")),e}rawBeforeComment(n,e){let t;return n.walkComments(i=>{if(typeof i.raws.before<"u")return t=i.raws.before,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),typeof t>"u"?t=this.raw(e,null,"beforeDecl"):t&&(t=t.replace(/\S/g,"")),t}rawBeforeDecl(n,e){let t;return n.walkDecls(i=>{if(typeof i.raws.before<"u")return t=i.raws.before,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),typeof t>"u"?t=this.raw(e,null,"beforeRule"):t&&(t=t.replace(/\S/g,"")),t}rawBeforeOpen(n){let e;return n.walk(t=>{if(t.type!=="decl"&&(e=t.raws.between,typeof e<"u"))return!1}),e}rawBeforeRule(n){let e;return n.walk(t=>{if(t.nodes&&(t.parent!==n||n.first!==t)&&typeof t.raws.before<"u")return e=t.raws.before,e.includes(`
`)&&(e=e.replace(/[^\n]+$/,"")),!1}),e&&(e=e.replace(/\S/g,"")),e}rawColon(n){let e;return n.walkDecls(t=>{if(typeof t.raws.between<"u")return e=t.raws.between.replace(/[^\s:]/g,""),!1}),e}rawEmptyBody(n){let e;return n.walk(t=>{if(t.nodes&&t.nodes.length===0&&(e=t.raws.after,typeof e<"u"))return!1}),e}rawIndent(n){if(n.raws.indent)return n.raws.indent;let e;return n.walk(t=>{let i=t.parent;if(i&&i!==n&&i.parent&&i.parent===n&&typeof t.raws.before<"u"){let o=t.raws.before.split(`
`);return e=o[o.length-1],e=e.replace(/\S/g,""),!1}}),e}rawSemicolon(n){let e;return n.walk(t=>{if(t.nodes&&t.nodes.length&&t.last.type==="decl"&&(e=t.raws.semicolon,typeof e<"u"))return!1}),e}rawValue(n,e){let t=n[e],i=n.raws[e];return i&&i.value===t?i.raw:t}root(n){this.body(n),n.raws.after&&this.builder(n.raws.after)}rule(n){this.block(n,this.rawValue(n,"selector")),n.raws.ownSemicolon&&this.builder(n.raws.ownSemicolon,n,"end")}stringify(n,e){if(!this[n.type])throw new Error("Unknown AST node type "+n.type+". Maybe you need to change PostCSS stringifier.");this[n.type](n,e)}};var pl=Gr;Gr.default=Gr;let Wg=pl;function Yr(n,e){new Wg(e).stringify(n)}var Sn=Yr;Yr.default=Yr;var di={},Rb=di.isClean=Symbol("isClean"),Bb=di.my=Symbol("my");let Zg=Zr,Gg=pl,Yg=Sn,{isClean:ui,my:Kg}=di;function Kr(n,e){let t=new n.constructor;for(let i in n){if(!Object.prototype.hasOwnProperty.call(n,i)||i==="proxyCache")continue;let o=n[i],r=typeof o;i==="parent"&&r==="object"?e&&(t[i]=e):i==="source"?t[i]=o:Array.isArray(o)?t[i]=o.map(s=>Kr(s,t)):(r==="object"&&o!==null&&(o=Kr(o)),t[i]=o)}return t}let Qr=class{constructor(n={}){this.raws={},this[ui]=!1,this[Kg]=!0;for(let e in n)if(e==="nodes"){this.nodes=[];for(let t of n[e])typeof t.clone=="function"?this.append(t.clone()):this.append(t)}else this[e]=n[e]}addToError(n){if(n.postcssNode=this,n.stack&&this.source&&/\n\s{4}at /.test(n.stack)){let e=this.source;n.stack=n.stack.replace(/\n\s{4}at /,`$&${e.input.from}:${e.start.line}:${e.start.column}$&`)}return n}after(n){return this.parent.insertAfter(this,n),this}assign(n={}){for(let e in n)this[e]=n[e];return this}before(n){return this.parent.insertBefore(this,n),this}cleanRaws(n){delete this.raws.before,delete this.raws.after,n||delete this.raws.between}clone(n={}){let e=Kr(this);for(let t in n)e[t]=n[t];return e}cloneAfter(n={}){let e=this.clone(n);return this.parent.insertAfter(this,e),e}cloneBefore(n={}){let e=this.clone(n);return this.parent.insertBefore(this,e),e}error(n,e={}){if(this.source){let{end:t,start:i}=this.rangeBy(e);return this.source.input.error(n,{column:i.column,line:i.line},{column:t.column,line:t.line},e)}return new Zg(n)}getProxyProcessor(){return{get(n,e){return e==="proxyOf"?n:e==="root"?()=>n.root().toProxy():n[e]},set(n,e,t){return n[e]===t||(n[e]=t,(e==="prop"||e==="value"||e==="name"||e==="params"||e==="important"||e==="text")&&n.markDirty()),!0}}}markClean(){this[ui]=!0}markDirty(){if(this[ui]){this[ui]=!1;let n=this;for(;n=n.parent;)n[ui]=!1}}next(){if(!this.parent)return;let n=this.parent.index(this);return this.parent.nodes[n+1]}positionBy(n,e){let t=this.source.start;if(n.index)t=this.positionInside(n.index,e);else if(n.word){e=this.toString();let i=e.indexOf(n.word);i!==-1&&(t=this.positionInside(i,e))}return t}positionInside(n,e){let t=e||this.toString(),i=this.source.start.column,o=this.source.start.line;for(let r=0;r<n;r++)t[r]===`
`?(i=1,o+=1):i+=1;return{column:i,line:o}}prev(){if(!this.parent)return;let n=this.parent.index(this);return this.parent.nodes[n-1]}rangeBy(n){let e={column:this.source.start.column,line:this.source.start.line},t=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:e.column+1,line:e.line};if(n.word){let i=this.toString(),o=i.indexOf(n.word);o!==-1&&(e=this.positionInside(o,i),t=this.positionInside(o+n.word.length,i))}else n.start?e={column:n.start.column,line:n.start.line}:n.index&&(e=this.positionInside(n.index)),n.end?t={column:n.end.column,line:n.end.line}:typeof n.endIndex=="number"?t=this.positionInside(n.endIndex):n.index&&(t=this.positionInside(n.index+1));return(t.line<e.line||t.line===e.line&&t.column<=e.column)&&(t={column:e.column+1,line:e.line}),{end:t,start:e}}raw(n,e){return new Gg().raw(this,n,e)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...n){if(this.parent){let e=this,t=!1;for(let i of n)i===this?t=!0:t?(this.parent.insertAfter(e,i),e=i):this.parent.insertBefore(e,i);t||this.remove()}return this}root(){let n=this;for(;n.parent&&n.parent.type!=="document";)n=n.parent;return n}toJSON(n,e){let t={},i=e==null;e=e||new Map;let o=0;for(let r in this){if(!Object.prototype.hasOwnProperty.call(this,r)||r==="parent"||r==="proxyCache")continue;let s=this[r];if(Array.isArray(s))t[r]=s.map(a=>typeof a=="object"&&a.toJSON?a.toJSON(null,e):a);else if(typeof s=="object"&&s.toJSON)t[r]=s.toJSON(null,e);else if(r==="source"){let a=e.get(s.input);a==null&&(a=o,e.set(s.input,o),o++),t[r]={end:s.end,inputId:a,start:s.start}}else t[r]=s}return i&&(t.inputs=[...e.keys()].map(r=>r.toJSON())),t}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(n=Yg){n.stringify&&(n=n.stringify);let e="";return n(this,t=>{e+=t}),e}warn(n,e,t){let i={node:this};for(let o in t)i[o]=t[o];return n.warn(e,i)}get proxyOf(){return this}};var kn=Qr;Qr.default=Qr;let Qg=kn,Jr=class extends Qg{constructor(n){super(n),this.type="comment"}};var Cn=Jr;Jr.default=Jr;let Jg=kn,$r=class extends Jg{constructor(n){n&&typeof n.value<"u"&&typeof n.value!="string"&&(n={...n,value:String(n.value)}),super(n),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}};var _n=$r;$r.default=$r;let dl=Cn,ul=_n,$g=kn,{isClean:hl,my:fl}=di,eo,ml,gl,to;function vl(n){return n.map(e=>(e.nodes&&(e.nodes=vl(e.nodes)),delete e.source,e))}function yl(n){if(n[hl]=!1,n.proxyOf.nodes)for(let e of n.proxyOf.nodes)yl(e)}let tt=class sc extends $g{append(...e){for(let t of e){let i=this.normalize(t,this.last);for(let o of i)this.proxyOf.nodes.push(o)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t=this.getIterator(),i,o;for(;this.indexes[t]<this.proxyOf.nodes.length&&(i=this.indexes[t],o=e(this.proxyOf.nodes[i],i),o!==!1);)this.indexes[t]+=1;return delete this.indexes[t],o}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:e[t]?t==="each"||typeof t=="string"&&t.startsWith("walk")?(...i)=>e[t](...i.map(o=>typeof o=="function"?(r,s)=>o(r.toProxy(),s):o)):t==="every"||t==="some"?i=>e[t]((o,...r)=>i(o.toProxy(),...r)):t==="root"?()=>e.root().toProxy():t==="nodes"?e.nodes.map(i=>i.toProxy()):t==="first"||t==="last"?e[t].toProxy():e[t]:e[t]},set(e,t,i){return e[t]===i||(e[t]=i,(t==="name"||t==="params"||t==="selector")&&e.markDirty()),!0}}}index(e){return typeof e=="number"?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let i=this.index(e),o=this.normalize(t,this.proxyOf.nodes[i]).reverse();i=this.index(e);for(let s of o)this.proxyOf.nodes.splice(i+1,0,s);let r;for(let s in this.indexes)r=this.indexes[s],i<r&&(this.indexes[s]=r+o.length);return this.markDirty(),this}insertBefore(e,t){let i=this.index(e),o=i===0?"prepend":!1,r=this.normalize(t,this.proxyOf.nodes[i],o).reverse();i=this.index(e);for(let a of r)this.proxyOf.nodes.splice(i,0,a);let s;for(let a in this.indexes)s=this.indexes[a],i<=s&&(this.indexes[a]=s+r.length);return this.markDirty(),this}normalize(e,t){if(typeof e=="string")e=vl(ml(e).nodes);else if(typeof e>"u")e=[];else if(Array.isArray(e)){e=e.slice(0);for(let i of e)i.parent&&i.parent.removeChild(i,"ignore")}else if(e.type==="root"&&this.type!=="document"){e=e.nodes.slice(0);for(let i of e)i.parent&&i.parent.removeChild(i,"ignore")}else if(e.type)e=[e];else if(e.prop){if(typeof e.value>"u")throw new Error("Value field is missed in node creation");typeof e.value!="string"&&(e.value=String(e.value)),e=[new ul(e)]}else if(e.selector||e.selectors)e=[new to(e)];else if(e.name)e=[new eo(e)];else if(e.text)e=[new dl(e)];else throw new Error("Unknown node type in node creation");return e.map(i=>(i[fl]||sc.rebuild(i),i=i.proxyOf,i.parent&&i.parent.removeChild(i),i[hl]&&yl(i),i.raws||(i.raws={}),typeof i.raws.before>"u"&&t&&typeof t.raws.before<"u"&&(i.raws.before=t.raws.before.replace(/\S/g,"")),i.parent=this.proxyOf,i))}prepend(...e){e=e.reverse();for(let t of e){let i=this.normalize(t,this.first,"prepend").reverse();for(let o of i)this.proxyOf.nodes.unshift(o);for(let o in this.indexes)this.indexes[o]=this.indexes[o]+i.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);let t;for(let i in this.indexes)t=this.indexes[i],t>=e&&(this.indexes[i]=t-1);return this.markDirty(),this}replaceValues(e,t,i){return i||(i=t,t={}),this.walkDecls(o=>{t.props&&!t.props.includes(o.prop)||t.fast&&!o.value.includes(t.fast)||(o.value=o.value.replace(e,i))}),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each((t,i)=>{let o;try{o=e(t,i)}catch(r){throw t.addToError(r)}return o!==!1&&t.walk&&(o=t.walk(e)),o})}walkAtRules(e,t){return t?e instanceof RegExp?this.walk((i,o)=>{if(i.type==="atrule"&&e.test(i.name))return t(i,o)}):this.walk((i,o)=>{if(i.type==="atrule"&&i.name===e)return t(i,o)}):(t=e,this.walk((i,o)=>{if(i.type==="atrule")return t(i,o)}))}walkComments(e){return this.walk((t,i)=>{if(t.type==="comment")return e(t,i)})}walkDecls(e,t){return t?e instanceof RegExp?this.walk((i,o)=>{if(i.type==="decl"&&e.test(i.prop))return t(i,o)}):this.walk((i,o)=>{if(i.type==="decl"&&i.prop===e)return t(i,o)}):(t=e,this.walk((i,o)=>{if(i.type==="decl")return t(i,o)}))}walkRules(e,t){return t?e instanceof RegExp?this.walk((i,o)=>{if(i.type==="rule"&&e.test(i.selector))return t(i,o)}):this.walk((i,o)=>{if(i.type==="rule"&&i.selector===e)return t(i,o)}):(t=e,this.walk((i,o)=>{if(i.type==="rule")return t(i,o)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};tt.registerParse=n=>{ml=n},tt.registerRule=n=>{to=n},tt.registerAtRule=n=>{eo=n},tt.registerRoot=n=>{gl=n};var wt=tt;tt.default=tt,tt.rebuild=n=>{n.type==="atrule"?Object.setPrototypeOf(n,eo.prototype):n.type==="rule"?Object.setPrototypeOf(n,to.prototype):n.type==="decl"?Object.setPrototypeOf(n,ul.prototype):n.type==="comment"?Object.setPrototypeOf(n,dl.prototype):n.type==="root"&&Object.setPrototypeOf(n,gl.prototype),n[fl]=!0,n.nodes&&n.nodes.forEach(e=>{tt.rebuild(e)})};let bl=wt,En=class extends bl{constructor(n){super(n),this.type="atrule"}append(...n){return this.proxyOf.nodes||(this.nodes=[]),super.append(...n)}prepend(...n){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...n)}};var io=En;En.default=En,bl.registerAtRule(En);let ev=wt,wl,xl,hi=class extends ev{constructor(n){super({type:"document",...n}),this.nodes||(this.nodes=[])}toResult(n={}){return new wl(new xl,this,n).stringify()}};hi.registerLazyResult=n=>{wl=n},hi.registerProcessor=n=>{xl=n};var no=hi;hi.default=hi;let tv="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",iv=(n,e=21)=>(t=e)=>{let i="",o=t;for(;o--;)i+=n[Math.random()*n.length|0];return i},nv=(n=21)=>{let e="",t=n;for(;t--;)e+=tv[Math.random()*64|0];return e};var rv={nanoid:nv,customAlphabet:iv};const it={};let{existsSync:ov,readFileSync:sv}=it,{dirname:ro,join:av}=it,{SourceMapConsumer:Sl,SourceMapGenerator:kl}=it;function lv(n){return Buffer?Buffer.from(n,"base64").toString():window.atob(n)}let oo=class{constructor(n,e){if(e.map===!1)return;this.loadAnnotation(n),this.inline=this.startWith(this.annotation,"data:");let t=e.map?e.map.prev:void 0,i=this.loadMap(e.from,t);!this.mapFile&&e.from&&(this.mapFile=e.from),this.mapFile&&(this.root=ro(this.mapFile)),i&&(this.text=i)}consumer(){return this.consumerCache||(this.consumerCache=new Sl(this.text)),this.consumerCache}decodeInline(n){let e=/^data:application\/json;charset=utf-?8;base64,/,t=/^data:application\/json;base64,/,i=/^data:application\/json;charset=utf-?8,/,o=/^data:application\/json,/,r=n.match(i)||n.match(o);if(r)return decodeURIComponent(n.substr(r[0].length));let s=n.match(e)||n.match(t);if(s)return lv(n.substr(s[0].length));let a=n.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+a)}getAnnotationURL(n){return n.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(n){return typeof n!="object"?!1:typeof n.mappings=="string"||typeof n._mappings=="string"||Array.isArray(n.sections)}loadAnnotation(n){let e=n.match(/\/\*\s*# sourceMappingURL=/g);if(!e)return;let t=n.lastIndexOf(e.pop()),i=n.indexOf("*/",t);t>-1&&i>-1&&(this.annotation=this.getAnnotationURL(n.substring(t,i)))}loadFile(n){if(this.root=ro(n),ov(n))return this.mapFile=n,sv(n,"utf-8").toString().trim()}loadMap(n,e){if(e===!1)return!1;if(e){if(typeof e=="string")return e;if(typeof e=="function"){let t=e(n);if(t){let i=this.loadFile(t);if(!i)throw new Error("Unable to load previous source map: "+t.toString());return i}}else{if(e instanceof Sl)return kl.fromSourceMap(e).toString();if(e instanceof kl)return e.toString();if(this.isMap(e))return JSON.stringify(e);throw new Error("Unsupported previous source map format: "+e.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let t=this.annotation;return n&&(t=av(ro(n),t)),this.loadFile(t)}}}startWith(n,e){return n?n.substr(0,e.length)===e:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};var Cl=oo;oo.default=oo;let{nanoid:cv}=rv,{isAbsolute:so,resolve:ao}=it,{SourceMapConsumer:pv,SourceMapGenerator:dv}=it,{fileURLToPath:_l,pathToFileURL:Tn}=it,El=Zr,uv=Cl,lo=sl,co=Symbol("fromOffsetCache"),hv=!!(pv&&dv),Tl=!!(ao&&so),Pn=class{constructor(n,e={}){if(n===null||typeof n>"u"||typeof n=="object"&&!n.toString)throw new Error(`PostCSS received ${n} instead of CSS string`);if(this.css=n.toString(),this.css[0]==="\uFEFF"||this.css[0]==="\uFFFE"?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,e.from&&(!Tl||/^\w+:\/\//.test(e.from)||so(e.from)?this.file=e.from:this.file=ao(e.from)),Tl&&hv){let t=new uv(this.css,e);if(t.text){this.map=t;let i=t.consumer().file;!this.file&&i&&(this.file=this.mapResolve(i))}}this.file||(this.id="<input css "+cv(6)+">"),this.map&&(this.map.file=this.from)}error(n,e,t,i={}){let o,r,s;if(e&&typeof e=="object"){let c=e,u=t;if(typeof c.offset=="number"){let d=this.fromOffset(c.offset);e=d.line,t=d.col}else e=c.line,t=c.column;if(typeof u.offset=="number"){let d=this.fromOffset(u.offset);r=d.line,o=d.col}else r=u.line,o=u.column}else if(!t){let c=this.fromOffset(e);e=c.line,t=c.col}let a=this.origin(e,t,r,o);return a?s=new El(n,a.endLine===void 0?a.line:{column:a.column,line:a.line},a.endLine===void 0?a.column:{column:a.endColumn,line:a.endLine},a.source,a.file,i.plugin):s=new El(n,r===void 0?e:{column:t,line:e},r===void 0?t:{column:o,line:r},this.css,this.file,i.plugin),s.input={column:t,endColumn:o,endLine:r,line:e,source:this.css},this.file&&(Tn&&(s.input.url=Tn(this.file).toString()),s.input.file=this.file),s}fromOffset(n){let e,t;if(this[co])t=this[co];else{let o=this.css.split(`
`);t=new Array(o.length);let r=0;for(let s=0,a=o.length;s<a;s++)t[s]=r,r+=o[s].length+1;this[co]=t}e=t[t.length-1];let i=0;if(n>=e)i=t.length-1;else{let o=t.length-2,r;for(;i<o;)if(r=i+(o-i>>1),n<t[r])o=r-1;else if(n>=t[r+1])i=r+1;else{i=r;break}}return{col:n-t[i]+1,line:i+1}}mapResolve(n){return/^\w+:\/\//.test(n)?n:ao(this.map.consumer().sourceRoot||this.map.root||".",n)}origin(n,e,t,i){if(!this.map)return!1;let o=this.map.consumer(),r=o.originalPositionFor({column:e,line:n});if(!r.source)return!1;let s;typeof t=="number"&&(s=o.originalPositionFor({column:i,line:t}));let a;so(r.source)?a=Tn(r.source):a=new URL(r.source,this.map.consumer().sourceRoot||Tn(this.map.mapFile));let c={column:r.column,endColumn:s&&s.column,endLine:s&&s.line,line:r.line,url:a.toString()};if(a.protocol==="file:")if(_l)c.file=_l(a);else throw new Error("file: protocol is not available in this PostCSS build");let u=o.sourceContentFor(r.source);return u&&(c.source=u),c}toJSON(){let n={};for(let e of["hasBOM","css","file","id"])this[e]!=null&&(n[e]=this[e]);return this.map&&(n.map={...this.map},n.map.consumerCache&&(n.map.consumerCache=void 0)),n}get from(){return this.file||this.id}};var An=Pn;Pn.default=Pn,lo&&lo.registerInput&&lo.registerInput(Pn);let Pl=wt,Al,Ml,jt=class extends Pl{constructor(n){super(n),this.type="root",this.nodes||(this.nodes=[])}normalize(n,e,t){let i=super.normalize(n);if(e){if(t==="prepend")this.nodes.length>1?e.raws.before=this.nodes[1].raws.before:delete e.raws.before;else if(this.first!==e)for(let o of i)o.raws.before=e.raws.before}return i}removeChild(n,e){let t=this.index(n);return!e&&t===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[t].raws.before),super.removeChild(n)}toResult(n={}){return new Al(new Ml,this,n).stringify()}};jt.registerLazyResult=n=>{Al=n},jt.registerProcessor=n=>{Ml=n};var fi=jt;jt.default=jt,Pl.registerRoot(jt);let mi={comma(n){return mi.split(n,[","],!0)},space(n){let e=[" ",`
`,"	"];return mi.split(n,e)},split(n,e,t){let i=[],o="",r=!1,s=0,a=!1,c="",u=!1;for(let d of n)u?u=!1:d==="\\"?u=!0:a?d===c&&(a=!1):d==='"'||d==="'"?(a=!0,c=d):d==="("?s+=1:d===")"?s>0&&(s-=1):s===0&&e.includes(d)&&(r=!0),r?(o!==""&&i.push(o.trim()),o="",r=!1):o+=d;return(t||o!=="")&&i.push(o.trim()),i}};var Ol=mi;mi.default=mi;let Dl=wt,fv=Ol,Mn=class extends Dl{constructor(n){super(n),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return fv.comma(this.selector)}set selectors(n){let e=this.selector?this.selector.match(/,\s*/):null,t=e?e[0]:","+this.raw("between","beforeOpen");this.selector=n.join(t)}};var po=Mn;Mn.default=Mn,Dl.registerRule(Mn);let mv=io,gv=Cn,vv=_n,yv=An,bv=Cl,wv=fi,xv=po;function gi(n,e){if(Array.isArray(n))return n.map(o=>gi(o));let{inputs:t,...i}=n;if(t){e=[];for(let o of t){let r={...o,__proto__:yv.prototype};r.map&&(r.map={...r.map,__proto__:bv.prototype}),e.push(r)}}if(i.nodes&&(i.nodes=n.nodes.map(o=>gi(o,e))),i.source){let{inputId:o,...r}=i.source;i.source=r,o!=null&&(i.source.input=e[o])}if(i.type==="root")return new wv(i);if(i.type==="decl")return new vv(i);if(i.type==="rule")return new xv(i);if(i.type==="comment")return new gv(i);if(i.type==="atrule")return new mv(i);throw new Error("Unknown node type: "+n.type)}var Sv=gi;gi.default=gi;let{dirname:On,relative:Ll,resolve:Il,sep:Rl}=it,{SourceMapConsumer:Bl,SourceMapGenerator:Dn}=it,{pathToFileURL:jl}=it,kv=An,Cv=!!(Bl&&Dn),_v=!!(On&&Il&&Ll&&Rl),Ev=class{constructor(n,e,t,i){this.stringify=n,this.mapOpts=t.map||{},this.root=e,this.opts=t,this.css=i,this.originalCSS=i,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let n;this.isInline()?n="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?n=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?n=this.mapOpts.annotation(this.opts.to,this.root):n=this.outputFile()+".map";let e=`
`;this.css.includes(`\r
`)&&(e=`\r
`),this.css+=e+"/*# sourceMappingURL="+n+" */"}applyPrevMaps(){for(let n of this.previous()){let e=this.toUrl(this.path(n.file)),t=n.root||On(n.file),i;this.mapOpts.sourcesContent===!1?(i=new Bl(n.text),i.sourcesContent&&(i.sourcesContent=null)):i=n.consumer(),this.map.applySourceMap(i,e,this.toUrl(this.path(t)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let n;for(let e=this.root.nodes.length-1;e>=0;e--)n=this.root.nodes[e],n.type==="comment"&&n.text.startsWith("# sourceMappingURL=")&&this.root.removeChild(e)}else this.css&&(this.css=this.css.replace(/\n*\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),_v&&Cv&&this.isMap())return this.generateMap();{let n="";return this.stringify(this.root,e=>{n+=e}),[n]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let n=this.previous()[0].consumer();n.file=this.outputFile(),this.map=Dn.fromSourceMap(n,{ignoreInvalidMapping:!0})}else this.map=new Dn({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new Dn({file:this.outputFile(),ignoreInvalidMapping:!0});let n=1,e=1,t="<no source>",i={generated:{column:0,line:0},original:{column:0,line:0},source:""},o,r;this.stringify(this.root,(s,a,c)=>{if(this.css+=s,a&&c!=="end"&&(i.generated.line=n,i.generated.column=e-1,a.source&&a.source.start?(i.source=this.sourcePath(a),i.original.line=a.source.start.line,i.original.column=a.source.start.column-1,this.map.addMapping(i)):(i.source=t,i.original.line=1,i.original.column=0,this.map.addMapping(i))),r=s.match(/\n/g),r?(n+=r.length,o=s.lastIndexOf(`
`),e=s.length-o):e+=s.length,a&&c!=="start"){let u=a.parent||{raws:{}};(!(a.type==="decl"||a.type==="atrule"&&!a.nodes)||a!==u.last||u.raws.semicolon)&&(a.source&&a.source.end?(i.source=this.sourcePath(a),i.original.line=a.source.end.line,i.original.column=a.source.end.column-1,i.generated.line=n,i.generated.column=e-2,this.map.addMapping(i)):(i.source=t,i.original.line=1,i.original.column=0,i.generated.line=n,i.generated.column=e-1,this.map.addMapping(i)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(n=>n.annotation):!0}isInline(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;let n=this.mapOpts.annotation;return typeof n<"u"&&n!==!0?!1:this.previous().length?this.previous().some(e=>e.inline):!0}isMap(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(n=>n.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(n){if(this.mapOpts.absolute||n.charCodeAt(0)===60||/^\w+:\/\//.test(n))return n;let e=this.memoizedPaths.get(n);if(e)return e;let t=this.opts.to?On(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(t=On(Il(t,this.mapOpts.annotation)));let i=Ll(t,n);return this.memoizedPaths.set(n,i),i}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(n=>{if(n.source&&n.source.input.map){let e=n.source.input.map;this.previousMaps.includes(e)||this.previousMaps.push(e)}});else{let n=new kv(this.originalCSS,this.opts);n.map&&this.previousMaps.push(n.map)}return this.previousMaps}setSourcesContent(){let n={};if(this.root)this.root.walk(e=>{if(e.source){let t=e.source.input.from;if(t&&!n[t]){n[t]=!0;let i=this.usesFileUrls?this.toFileUrl(t):this.toUrl(this.path(t));this.map.setSourceContent(i,e.source.input.css)}}});else if(this.css){let e=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(e,this.css)}}sourcePath(n){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(n.source.input.from):this.toUrl(this.path(n.source.input.from))}toBase64(n){return Buffer?Buffer.from(n).toString("base64"):window.btoa(unescape(encodeURIComponent(n)))}toFileUrl(n){let e=this.memoizedFileURLs.get(n);if(e)return e;if(jl){let t=jl(n).toString();return this.memoizedFileURLs.set(n,t),t}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(n){let e=this.memoizedURLs.get(n);if(e)return e;Rl==="\\"&&(n=n.replace(/\\/g,"/"));let t=encodeURI(n).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(n,t),t}};var Nl=Ev;const uo=39,Ul=34,Ln=92,zl=47,In=10,vi=32,Rn=12,Bn=9,jn=13,Tv=91,Pv=93,Av=40,Mv=41,Ov=123,Dv=125,Lv=59,Iv=42,Rv=58,Bv=64,Nn=/[\t\n\f\r "#'()/;[\\\]{}]/g,Un=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,jv=/.[\r\n"'(/\\]/,Fl=/[\da-f]/i;var Nv=function(n,e={}){let t=n.css.valueOf(),i=e.ignoreErrors,o,r,s,a,c,u,d,f,p,l,m=t.length,h=0,g=[],v=[];function b(){return h}function _(T){throw n.error("Unclosed "+T,h)}function E(){return v.length===0&&h>=m}function y(T){if(v.length)return v.pop();if(h>=m)return;let C=T?T.ignoreUnclosed:!1;switch(o=t.charCodeAt(h),o){case In:case vi:case Bn:case jn:case Rn:{a=h;do a+=1,o=t.charCodeAt(a);while(o===vi||o===In||o===Bn||o===jn||o===Rn);u=["space",t.slice(h,a)],h=a-1;break}case Tv:case Pv:case Ov:case Dv:case Rv:case Lv:case Mv:{let M=String.fromCharCode(o);u=[M,M,h];break}case Av:{if(l=g.length?g.pop()[1]:"",p=t.charCodeAt(h+1),l==="url"&&p!==uo&&p!==Ul&&p!==vi&&p!==In&&p!==Bn&&p!==Rn&&p!==jn){a=h;do{if(d=!1,a=t.indexOf(")",a+1),a===-1)if(i||C){a=h;break}else _("bracket");for(f=a;t.charCodeAt(f-1)===Ln;)f-=1,d=!d}while(d);u=["brackets",t.slice(h,a+1),h,a],h=a}else a=t.indexOf(")",h+1),r=t.slice(h,a+1),a===-1||jv.test(r)?u=["(","(",h]:(u=["brackets",r,h,a],h=a);break}case uo:case Ul:{c=o===uo?"'":'"',a=h;do{if(d=!1,a=t.indexOf(c,a+1),a===-1)if(i||C){a=h+1;break}else _("string");for(f=a;t.charCodeAt(f-1)===Ln;)f-=1,d=!d}while(d);u=["string",t.slice(h,a+1),h,a],h=a;break}case Bv:{Nn.lastIndex=h+1,Nn.test(t),Nn.lastIndex===0?a=t.length-1:a=Nn.lastIndex-2,u=["at-word",t.slice(h,a+1),h,a],h=a;break}case Ln:{for(a=h,s=!0;t.charCodeAt(a+1)===Ln;)a+=1,s=!s;if(o=t.charCodeAt(a+1),s&&o!==zl&&o!==vi&&o!==In&&o!==Bn&&o!==jn&&o!==Rn&&(a+=1,Fl.test(t.charAt(a)))){for(;Fl.test(t.charAt(a+1));)a+=1;t.charCodeAt(a+1)===vi&&(a+=1)}u=["word",t.slice(h,a+1),h,a],h=a;break}default:{o===zl&&t.charCodeAt(h+1)===Iv?(a=t.indexOf("*/",h+2)+1,a===0&&(i||C?a=t.length:_("comment")),u=["comment",t.slice(h,a+1),h,a],h=a):(Un.lastIndex=h+1,Un.test(t),Un.lastIndex===0?a=t.length-1:a=Un.lastIndex-2,u=["word",t.slice(h,a+1),h,a],g.push(u),h=a);break}}return h++,u}function w(T){v.push(T)}return{back:w,endOfFile:E,nextToken:y,position:b}};let Uv=io,zv=Cn,Fv=_n,qv=fi,ql=po,Hv=Nv;const Hl={empty:!0,space:!0};function Vv(n){for(let e=n.length-1;e>=0;e--){let t=n[e],i=t[3]||t[2];if(i)return i}}let Xv=class{constructor(n){this.input=n,this.root=new qv,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:n,start:{column:1,line:1,offset:0}}}atrule(n){let e=new Uv;e.name=n[1].slice(1),e.name===""&&this.unnamedAtrule(e,n),this.init(e,n[2]);let t,i,o,r=!1,s=!1,a=[],c=[];for(;!this.tokenizer.endOfFile();){if(n=this.tokenizer.nextToken(),t=n[0],t==="("||t==="["?c.push(t==="("?")":"]"):t==="{"&&c.length>0?c.push("}"):t===c[c.length-1]&&c.pop(),c.length===0)if(t===";"){e.source.end=this.getPosition(n[2]),e.source.end.offset++,this.semicolon=!0;break}else if(t==="{"){s=!0;break}else if(t==="}"){if(a.length>0){for(o=a.length-1,i=a[o];i&&i[0]==="space";)i=a[--o];i&&(e.source.end=this.getPosition(i[3]||i[2]),e.source.end.offset++)}this.end(n);break}else a.push(n);else a.push(n);if(this.tokenizer.endOfFile()){r=!0;break}}e.raws.between=this.spacesAndCommentsFromEnd(a),a.length?(e.raws.afterName=this.spacesAndCommentsFromStart(a),this.raw(e,"params",a),r&&(n=a[a.length-1],e.source.end=this.getPosition(n[3]||n[2]),e.source.end.offset++,this.spaces=e.raws.between,e.raws.between="")):(e.raws.afterName="",e.params=""),s&&(e.nodes=[],this.current=e)}checkMissedSemicolon(n){let e=this.colon(n);if(e===!1)return;let t=0,i;for(let o=e-1;o>=0&&(i=n[o],!(i[0]!=="space"&&(t+=1,t===2)));o--);throw this.input.error("Missed semicolon",i[0]==="word"?i[3]+1:i[2])}colon(n){let e=0,t,i,o;for(let[r,s]of n.entries()){if(i=s,o=i[0],o==="("&&(e+=1),o===")"&&(e-=1),e===0&&o===":")if(!t)this.doubleColon(i);else{if(t[0]==="word"&&t[1]==="progid")continue;return r}t=i}return!1}comment(n){let e=new zv;this.init(e,n[2]),e.source.end=this.getPosition(n[3]||n[2]),e.source.end.offset++;let t=n[1].slice(2,-2);if(/^\s*$/.test(t))e.text="",e.raws.left=t,e.raws.right="";else{let i=t.match(/^(\s*)([^]*\S)(\s*)$/);e.text=i[2],e.raws.left=i[1],e.raws.right=i[3]}}createTokenizer(){this.tokenizer=Hv(this.input)}decl(n,e){let t=new Fv;this.init(t,n[0][2]);let i=n[n.length-1];for(i[0]===";"&&(this.semicolon=!0,n.pop()),t.source.end=this.getPosition(i[3]||i[2]||Vv(n)),t.source.end.offset++;n[0][0]!=="word";)n.length===1&&this.unknownWord(n),t.raws.before+=n.shift()[1];for(t.source.start=this.getPosition(n[0][2]),t.prop="";n.length;){let a=n[0][0];if(a===":"||a==="space"||a==="comment")break;t.prop+=n.shift()[1]}t.raws.between="";let o;for(;n.length;)if(o=n.shift(),o[0]===":"){t.raws.between+=o[1];break}else o[0]==="word"&&/\w/.test(o[1])&&this.unknownWord([o]),t.raws.between+=o[1];(t.prop[0]==="_"||t.prop[0]==="*")&&(t.raws.before+=t.prop[0],t.prop=t.prop.slice(1));let r=[],s;for(;n.length&&(s=n[0][0],!(s!=="space"&&s!=="comment"));)r.push(n.shift());this.precheckMissedSemicolon(n);for(let a=n.length-1;a>=0;a--){if(o=n[a],o[1].toLowerCase()==="!important"){t.important=!0;let c=this.stringFrom(n,a);c=this.spacesFromEnd(n)+c,c!==" !important"&&(t.raws.important=c);break}else if(o[1].toLowerCase()==="important"){let c=n.slice(0),u="";for(let d=a;d>0;d--){let f=c[d][0];if(u.trim().startsWith("!")&&f!=="space")break;u=c.pop()[1]+u}u.trim().startsWith("!")&&(t.important=!0,t.raws.important=u,n=c)}if(o[0]!=="space"&&o[0]!=="comment")break}n.some(a=>a[0]!=="space"&&a[0]!=="comment")&&(t.raws.between+=r.map(a=>a[1]).join(""),r=[]),this.raw(t,"value",r.concat(n),e),t.value.includes(":")&&!e&&this.checkMissedSemicolon(n)}doubleColon(n){throw this.input.error("Double colon",{offset:n[2]},{offset:n[2]+n[1].length})}emptyRule(n){let e=new ql;this.init(e,n[2]),e.selector="",e.raws.between="",this.current=e}end(n){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(n[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(n)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(n){if(this.spaces+=n[1],this.current.nodes){let e=this.current.nodes[this.current.nodes.length-1];e&&e.type==="rule"&&!e.raws.ownSemicolon&&(e.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(n){let e=this.input.fromOffset(n);return{column:e.col,line:e.line,offset:n}}init(n,e){this.current.push(n),n.source={input:this.input,start:this.getPosition(e)},n.raws.before=this.spaces,this.spaces="",n.type!=="comment"&&(this.semicolon=!1)}other(n){let e=!1,t=null,i=!1,o=null,r=[],s=n[1].startsWith("--"),a=[],c=n;for(;c;){if(t=c[0],a.push(c),t==="("||t==="[")o||(o=c),r.push(t==="("?")":"]");else if(s&&i&&t==="{")o||(o=c),r.push("}");else if(r.length===0)if(t===";")if(i){this.decl(a,s);return}else break;else if(t==="{"){this.rule(a);return}else if(t==="}"){this.tokenizer.back(a.pop()),e=!0;break}else t===":"&&(i=!0);else t===r[r.length-1]&&(r.pop(),r.length===0&&(o=null));c=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(e=!0),r.length>0&&this.unclosedBracket(o),e&&i){if(!s)for(;a.length&&(c=a[a.length-1][0],!(c!=="space"&&c!=="comment"));)this.tokenizer.back(a.pop());this.decl(a,s)}else this.unknownWord(a)}parse(){let n;for(;!this.tokenizer.endOfFile();)switch(n=this.tokenizer.nextToken(),n[0]){case"space":this.spaces+=n[1];break;case";":this.freeSemicolon(n);break;case"}":this.end(n);break;case"comment":this.comment(n);break;case"at-word":this.atrule(n);break;case"{":this.emptyRule(n);break;default:this.other(n);break}this.endFile()}precheckMissedSemicolon(){}raw(n,e,t,i){let o,r,s=t.length,a="",c=!0,u,d;for(let f=0;f<s;f+=1)o=t[f],r=o[0],r==="space"&&f===s-1&&!i?c=!1:r==="comment"?(d=t[f-1]?t[f-1][0]:"empty",u=t[f+1]?t[f+1][0]:"empty",!Hl[d]&&!Hl[u]?a.slice(-1)===","?c=!1:a+=o[1]:c=!1):a+=o[1];if(!c){let f=t.reduce((p,l)=>p+l[1],"");n.raws[e]={raw:f,value:a}}n[e]=a}rule(n){n.pop();let e=new ql;this.init(e,n[0][2]),e.raws.between=this.spacesAndCommentsFromEnd(n),this.raw(e,"selector",n),this.current=e}spacesAndCommentsFromEnd(n){let e,t="";for(;n.length&&(e=n[n.length-1][0],!(e!=="space"&&e!=="comment"));)t=n.pop()[1]+t;return t}spacesAndCommentsFromStart(n){let e,t="";for(;n.length&&(e=n[0][0],!(e!=="space"&&e!=="comment"));)t+=n.shift()[1];return t}spacesFromEnd(n){let e,t="";for(;n.length&&(e=n[n.length-1][0],e==="space");)t=n.pop()[1]+t;return t}stringFrom(n,e){let t="";for(let i=e;i<n.length;i++)t+=n[i][1];return n.splice(e,n.length-e),t}unclosedBlock(){let n=this.current.source.start;throw this.input.error("Unclosed block",n.line,n.column)}unclosedBracket(n){throw this.input.error("Unclosed bracket",{offset:n[2]},{offset:n[2]+1})}unexpectedClose(n){throw this.input.error("Unexpected }",{offset:n[2]},{offset:n[2]+1})}unknownWord(n){throw this.input.error("Unknown word",{offset:n[0][2]},{offset:n[0][2]+n[0][1].length})}unnamedAtrule(n,e){throw this.input.error("At-rule without name",{offset:e[2]},{offset:e[2]+e[1].length})}};var Wv=Xv;let Zv=wt,Gv=An,Yv=Wv;function zn(n,e){let t=new Gv(n,e),i=new Yv(t);try{i.parse()}catch(o){throw o}return i.root}var ho=zn;zn.default=zn,Zv.registerParse(zn);let fo=class{constructor(n,e={}){if(this.type="warning",this.text=n,e.node&&e.node.source){let t=e.node.rangeBy(e);this.line=t.start.line,this.column=t.start.column,this.endLine=t.end.line,this.endColumn=t.end.column}for(let t in e)this[t]=e[t]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var Vl=fo;fo.default=fo;let Kv=Vl,mo=class{constructor(n,e,t){this.processor=n,this.messages=[],this.root=e,this.opts=t,this.css=void 0,this.map=void 0}toString(){return this.css}warn(n,e={}){e.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(e.plugin=this.lastPlugin.postcssPlugin);let t=new Kv(n,e);return this.messages.push(t),t}warnings(){return this.messages.filter(n=>n.type==="warning")}get content(){return this.css}};var go=mo;mo.default=mo;let Qv=wt,Jv=no,$v=Nl,ey=ho,Xl=go,ty=fi,iy=Sn,{isClean:Qe,my:ny}=di;const ry={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},oy={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},sy={Once:!0,postcssPlugin:!0,prepare:!0},Nt=0;function yi(n){return typeof n=="object"&&typeof n.then=="function"}function Wl(n){let e=!1,t=ry[n.type];return n.type==="decl"?e=n.prop.toLowerCase():n.type==="atrule"&&(e=n.name.toLowerCase()),e&&n.append?[t,t+"-"+e,Nt,t+"Exit",t+"Exit-"+e]:e?[t,t+"-"+e,t+"Exit",t+"Exit-"+e]:n.append?[t,Nt,t+"Exit"]:[t,t+"Exit"]}function Zl(n){let e;return n.type==="document"?e=["Document",Nt,"DocumentExit"]:n.type==="root"?e=["Root",Nt,"RootExit"]:e=Wl(n),{eventIndex:0,events:e,iterator:0,node:n,visitorIndex:0,visitors:[]}}function vo(n){return n[Qe]=!1,n.nodes&&n.nodes.forEach(e=>vo(e)),n}let yo={},Ut=class ac{constructor(e,t,i){this.stringified=!1,this.processed=!1;let o;if(typeof t=="object"&&t!==null&&(t.type==="root"||t.type==="document"))o=vo(t);else if(t instanceof ac||t instanceof Xl)o=vo(t.root),t.map&&(typeof i.map>"u"&&(i.map={}),i.map.inline||(i.map.inline=!1),i.map.prev=t.map);else{let r=ey;i.syntax&&(r=i.syntax.parse),i.parser&&(r=i.parser),r.parse&&(r=r.parse);try{o=r(t,i)}catch(s){this.processed=!0,this.error=s}o&&!o[ny]&&Qv.rebuild(o)}this.result=new Xl(e,o,i),this.helpers={...yo,postcss:yo,result:this.result},this.plugins=this.processor.plugins.map(r=>typeof r=="object"&&r.prepare?{...r,...r.prepare(this.result)}:r)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let i=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,e.name==="CssSyntaxError"&&!e.plugin?(e.plugin=i.postcssPlugin,e.setMessage()):i.postcssVersion}catch(o){console&&console.error&&console.error(o)}return e}prepareVisitors(){this.listeners={};let e=(t,i,o)=>{this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push([t,o])};for(let t of this.plugins)if(typeof t=="object")for(let i in t){if(!oy[i]&&/^[A-Z]/.test(i))throw new Error(`Unknown event ${i} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!sy[i])if(typeof t[i]=="object")for(let o in t[i])o==="*"?e(t,i,t[i][o]):e(t,i+"-"+o.toLowerCase(),t[i][o]);else typeof t[i]=="function"&&e(t,i,t[i])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],i=this.runOnRoot(t);if(yi(i))try{await i}catch(o){throw this.handleError(o)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[Qe];){e[Qe]=!0;let t=[Zl(e)];for(;t.length>0;){let i=this.visitTick(t);if(yi(i))try{await i}catch(o){let r=t[t.length-1].node;throw this.handleError(o,r)}}}if(this.listeners.OnceExit)for(let[t,i]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if(e.type==="document"){let o=e.nodes.map(r=>i(r,this.helpers));await Promise.all(o)}else await i(e,this.helpers)}catch(o){throw this.handleError(o)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if(typeof e=="object"&&e.Once){if(this.result.root.type==="document"){let t=this.result.root.nodes.map(i=>e.Once(i,this.helpers));return yi(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}else if(typeof e=="function")return e(this.result.root,this.result)}catch(t){throw this.handleError(t)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=iy;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let i=new $v(t,this.result.root,this.result.opts).generate();return this.result.css=i[0],this.result.map=i[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){let t=this.runOnRoot(e);if(yi(t))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[Qe];)e[Qe]=!0,this.walkSync(e);if(this.listeners.OnceExit)if(e.type==="document")for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[i,o]of e){this.result.lastPlugin=i;let r;try{r=o(t,this.helpers)}catch(s){throw this.handleError(s,t.proxyOf)}if(t.type!=="root"&&t.type!=="document"&&!t.parent)return!0;if(yi(r))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:i,visitors:o}=t;if(i.type!=="root"&&i.type!=="document"&&!i.parent){e.pop();return}if(o.length>0&&t.visitorIndex<o.length){let[s,a]=o[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===o.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=s;try{return a(i.toProxy(),this.helpers)}catch(c){throw this.handleError(c,i)}}if(t.iterator!==0){let s=t.iterator,a;for(;a=i.nodes[i.indexes[s]];)if(i.indexes[s]+=1,!a[Qe]){a[Qe]=!0,e.push(Zl(a));return}t.iterator=0,delete i.indexes[s]}let r=t.events;for(;t.eventIndex<r.length;){let s=r[t.eventIndex];if(t.eventIndex+=1,s===Nt){i.nodes&&i.nodes.length&&(i[Qe]=!0,t.iterator=i.getIterator());return}else if(this.listeners[s]){t.visitors=this.listeners[s];return}}e.pop()}walkSync(e){e[Qe]=!0;let t=Wl(e);for(let i of t)if(i===Nt)e.nodes&&e.each(o=>{o[Qe]||this.walkSync(o)});else{let o=this.listeners[i];if(o&&this.visitSync(o,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};Ut.registerPostcss=n=>{yo=n};var Gl=Ut;Ut.default=Ut,ty.registerLazyResult(Ut),Jv.registerLazyResult(Ut);let ay=Nl,ly=ho;const cy=go;let py=Sn,bo=class{constructor(n,e,t){e=e.toString(),this.stringified=!1,this._processor=n,this._css=e,this._opts=t,this._map=void 0;let i,o=py;this.result=new cy(this._processor,i,this._opts),this.result.css=e;let r=this;Object.defineProperty(this.result,"root",{get(){return r.root}});let s=new ay(o,i,this._opts,e);if(s.isMap()){let[a,c]=s.generate();a&&(this.result.css=a),c&&(this.result.map=c)}else s.clearAnnotation(),this.result.css=s.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(n){return this.async().catch(n)}finally(n){return this.async().then(n,n)}sync(){if(this.error)throw this.error;return this.result}then(n,e){return this.async().then(n,e)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let n,e=ly;try{n=e(this._css,this._opts)}catch(t){this.error=t}if(this.error)throw this.error;return this._root=n,n}get[Symbol.toStringTag](){return"NoWorkResult"}};var dy=bo;bo.default=bo;let uy=no,hy=Gl,fy=dy,my=fi,bi=class{constructor(n=[]){this.version="8.4.47",this.plugins=this.normalize(n)}normalize(n){let e=[];for(let t of n)if(t.postcss===!0?t=t():t.postcss&&(t=t.postcss),typeof t=="object"&&Array.isArray(t.plugins))e=e.concat(t.plugins);else if(typeof t=="object"&&t.postcssPlugin)e.push(t);else if(typeof t=="function")e.push(t);else if(!(typeof t=="object"&&(t.parse||t.stringify)))throw new Error(t+" is not a PostCSS plugin");return e}process(n,e={}){return!this.plugins.length&&!e.parser&&!e.stringifier&&!e.syntax?new fy(this,n,e):new hy(this,n,e)}use(n){return this.plugins=this.plugins.concat(this.normalize([n])),this}};var gy=bi;bi.default=bi,my.registerProcessor(bi),uy.registerProcessor(bi);var Yl={};let Kl=io,Ql=Cn,vy=wt,yy=Zr,Jl=_n,$l=no,by=Sv,wy=An,xy=Gl,Sy=Ol,ky=kn,Cy=ho,wo=gy,_y=go,ec=fi,tc=po,Ey=Sn,Ty=Vl;function te(...n){return n.length===1&&Array.isArray(n[0])&&(n=n[0]),new wo(n)}te.plugin=function(n,e){let t=!1;function i(...r){console&&console.warn&&!t&&(t=!0,console.warn(n+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),Yl.LANG&&Yl.LANG.startsWith("cn")&&console.warn(n+`: \u91CC\u9762 postcss.plugin \u88AB\u5F03\u7528. \u8FC1\u79FB\u6307\u5357:
https://www.w3ctech.com/topic/2226`));let s=e(...r);return s.postcssPlugin=n,s.postcssVersion=new wo().version,s}let o;return Object.defineProperty(i,"postcss",{get(){return o||(o=i()),o}}),i.process=function(r,s,a){return te([i(a)]).process(r,s)},i},te.stringify=Ey,te.parse=Cy,te.fromJSON=by,te.list=Sy,te.comment=n=>new Ql(n),te.atRule=n=>new Kl(n),te.decl=n=>new Jl(n),te.rule=n=>new tc(n),te.root=n=>new ec(n),te.document=n=>new $l(n),te.CssSyntaxError=yy,te.Declaration=Jl,te.Container=vy,te.Processor=wo,te.Document=$l,te.Comment=Ql,te.Warning=Ty,te.AtRule=Kl,te.Result=_y,te.Input=wy,te.Rule=tc,te.Root=ec,te.Node=ky,xy.registerPostcss(te);var Py=te;te.default=te;const Ay=Sa,ic=_g,{isPlainObject:My}=Vr,nc=zg,Oy=Fg,{parse:Dy}=Py,Ly=["img","audio","video","picture","svg","object","map","iframe","embed"],Iy=["script","style"];function wi(n,e){n&&Object.keys(n).forEach(function(t){e(n[t],t)})}function nt(n,e){return{}.hasOwnProperty.call(n,e)}function rc(n,e){const t=[];return wi(n,function(i){e(i)&&t.push(i)}),t}function Ry(n){for(const e in n)if(nt(n,e))return!1;return!0}function By(n){return n.map(function(e){if(!e.url)throw new Error("URL missing");return e.url+(e.w?` ${e.w}w`:"")+(e.h?` ${e.h}h`:"")+(e.d?` ${e.d}x`:"")}).join(", ")}var jy=xi;const Ny=/^[^\0\t\n\f\r /<=>]+$/;function xi(n,e,t){if(n==null)return"";typeof n=="number"&&(n=n.toString());let i="",o="";function r(O,P){const k=this;this.tag=O,this.attribs=P||{},this.tagPosition=i.length,this.text="",this.mediaChildren=[],this.updateParentNodeText=function(){if(g.length){const R=g[g.length-1];R.text+=k.text}},this.updateParentNodeMediaChildren=function(){g.length&&Ly.includes(this.tag)&&g[g.length-1].mediaChildren.push(this.tag)}}e=Object.assign({},xi.defaults,e),e.parser=Object.assign({},Uy,e.parser);const s=function(O){return e.allowedTags===!1||(e.allowedTags||[]).indexOf(O)>-1};Iy.forEach(function(O){s(O)&&!e.allowVulnerableTags&&console.warn(`

\u26A0\uFE0F Your \`allowedTags\` option includes, \`${O}\`, which is inherently
vulnerable to XSS attacks. Please remove it from \`allowedTags\`.
Or, to disable this warning, add the \`allowVulnerableTags\` option
and ensure you are accounting for this risk.

`)});const a=e.nonTextTags||["script","style","textarea","option"];let c,u;e.allowedAttributes&&(c={},u={},wi(e.allowedAttributes,function(O,P){c[P]=[];const k=[];O.forEach(function(R){typeof R=="string"&&R.indexOf("*")>=0?k.push(ic(R).replace(/\\\*/g,".*")):c[P].push(R)}),k.length&&(u[P]=new RegExp("^("+k.join("|")+")$"))}));const d={},f={},p={};wi(e.allowedClasses,function(O,P){if(c&&(nt(c,P)||(c[P]=[]),c[P].push("class")),d[P]=O,Array.isArray(O)){const k=[];d[P]=[],p[P]=[],O.forEach(function(R){typeof R=="string"&&R.indexOf("*")>=0?k.push(ic(R).replace(/\\\*/g,".*")):R instanceof RegExp?p[P].push(R):d[P].push(R)}),k.length&&(f[P]=new RegExp("^("+k.join("|")+")$"))}});const l={};let m;wi(e.transformTags,function(O,P){let k;typeof O=="function"?k=O:typeof O=="string"&&(k=xi.simpleTransform(O)),P==="*"?m=k:l[P]=k});let h,g,v,b,_,E,y=!1;T();const w=new Ay.Parser({onopentag:function(O,P){if(e.enforceHtmlBoundary&&O==="html"&&T(),_){E++;return}const k=new r(O,P);g.push(k);let R=!1;const V=!!k.text;let X;if(nt(l,O)&&(X=l[O](O,P),k.attribs=P=X.attribs,X.text!==void 0&&(k.innerText=X.text),O!==X.tagName&&(k.name=O=X.tagName,b[h]=X.tagName)),m&&(X=m(O,P),k.attribs=P=X.attribs,O!==X.tagName&&(k.name=O=X.tagName,b[h]=X.tagName)),(!s(O)||e.disallowedTagsMode==="recursiveEscape"&&!Ry(v)||e.nestingLimit!=null&&h>=e.nestingLimit)&&(R=!0,v[h]=!0,(e.disallowedTagsMode==="discard"||e.disallowedTagsMode==="completelyDiscard")&&a.indexOf(O)!==-1&&(_=!0,E=1),v[h]=!0),h++,R){if(e.disallowedTagsMode==="discard"||e.disallowedTagsMode==="completelyDiscard")return;o=i,i=""}i+="<"+O,O==="script"&&(e.allowedScriptHostnames||e.allowedScriptDomains)&&(k.innerText=""),(!c||nt(c,O)||c["*"])&&wi(P,function(G,F){if(!Ny.test(F)){delete k.attribs[F];return}if(G===""&&!e.allowedEmptyAttributes.includes(F)&&(e.nonBooleanAttributes.includes(F)||e.nonBooleanAttributes.includes("*"))){delete k.attribs[F];return}let se=!1;if(!c||nt(c,O)&&c[O].indexOf(F)!==-1||c["*"]&&c["*"].indexOf(F)!==-1||nt(u,O)&&u[O].test(F)||u["*"]&&u["*"].test(F))se=!0;else if(c&&c[O]){for(const Y of c[O])if(My(Y)&&Y.name&&Y.name===F){se=!0;let J="";if(Y.multiple===!0){const re=G.split(" ");for(const ge of re)Y.values.indexOf(ge)!==-1&&(J===""?J=ge:J+=" "+ge)}else Y.values.indexOf(G)>=0&&(J=G);G=J}}if(se){if(e.allowedSchemesAppliedToAttributes.indexOf(F)!==-1&&M(O,G)){delete k.attribs[F];return}if(O==="script"&&F==="src"){let Y=!0;try{const J=L(G);if(e.allowedScriptHostnames||e.allowedScriptDomains){const re=(e.allowedScriptHostnames||[]).find(function(le){return le===J.url.hostname}),ge=(e.allowedScriptDomains||[]).find(function(le){return J.url.hostname===le||J.url.hostname.endsWith(`.${le}`)});Y=re||ge}}catch{Y=!1}if(!Y){delete k.attribs[F];return}}if(O==="iframe"&&F==="src"){let Y=!0;try{const J=L(G);if(J.isRelativeUrl)Y=nt(e,"allowIframeRelativeUrls")?e.allowIframeRelativeUrls:!e.allowedIframeHostnames&&!e.allowedIframeDomains;else if(e.allowedIframeHostnames||e.allowedIframeDomains){const re=(e.allowedIframeHostnames||[]).find(function(le){return le===J.url.hostname}),ge=(e.allowedIframeDomains||[]).find(function(le){return J.url.hostname===le||J.url.hostname.endsWith(`.${le}`)});Y=re||ge}}catch{Y=!1}if(!Y){delete k.attribs[F];return}}if(F==="srcset")try{let Y=Oy(G);if(Y.forEach(function(J){M("srcset",J.url)&&(J.evil=!0)}),Y=rc(Y,function(J){return!J.evil}),Y.length)G=By(rc(Y,function(J){return!J.evil})),k.attribs[F]=G;else{delete k.attribs[F];return}}catch{delete k.attribs[F];return}if(F==="class"){const Y=d[O],J=d["*"],re=f[O],ge=p[O],le=p["*"],Fn=f["*"],Ci=[re,Fn].concat(ge,le).filter(function(qn){return qn});if(Y&&J?G=I(G,nc(Y,J),Ci):G=I(G,Y||J,Ci),!G.length){delete k.attribs[F];return}}if(F==="style"){if(e.parseStyleAttributes)try{const Y=Dy(O+" {"+G+"}",{map:!1}),J=x(Y,e.allowedStyles);if(G=D(J),G.length===0){delete k.attribs[F];return}}catch{typeof window<"u"&&console.warn('Failed to parse "'+O+" {"+G+`}", If you're running this in a browser, we recommend to disable style parsing: options.parseStyleAttributes: false, since this only works in a node environment due to a postcss dependency, More info: https://github.com/apostrophecms/sanitize-html/issues/547`),delete k.attribs[F];return}else if(e.allowedStyles)throw new Error("allowedStyles option cannot be used together with parseStyleAttributes: false.")}i+=" "+F,G&&G.length?i+='="'+C(G,!0)+'"':e.allowedEmptyAttributes.includes(F)&&(i+='=""')}else delete k.attribs[F]}),e.selfClosing.indexOf(O)!==-1?i+=" />":(i+=">",k.innerText&&!V&&!e.textFilter&&(i+=C(k.innerText),y=!0)),R&&(i=o+C(i),o="")},ontext:function(O){if(_)return;const P=g[g.length-1];let k;if(P&&(k=P.tag,O=P.innerText!==void 0?P.innerText:O),e.disallowedTagsMode==="completelyDiscard"&&!s(k))O="";else if((e.disallowedTagsMode==="discard"||e.disallowedTagsMode==="completelyDiscard")&&(k==="script"||k==="style"))i+=O;else{const R=C(O,!1);e.textFilter&&!y?i+=e.textFilter(R,k):y||(i+=R)}if(g.length){const R=g[g.length-1];R.text+=O}},onclosetag:function(O,P){if(_)if(E--,!E)_=!1;else return;const k=g.pop();if(!k)return;if(k.tag!==O){g.push(k);return}_=e.enforceHtmlBoundary?O==="html":!1,h--;const R=v[h];if(R){if(delete v[h],e.disallowedTagsMode==="discard"||e.disallowedTagsMode==="completelyDiscard"){k.updateParentNodeText();return}o=i,i=""}if(b[h]&&(O=b[h],delete b[h]),e.exclusiveFilter&&e.exclusiveFilter(k)){i=i.substr(0,k.tagPosition);return}if(k.updateParentNodeMediaChildren(),k.updateParentNodeText(),e.selfClosing.indexOf(O)!==-1||P&&!s(O)&&["escape","recursiveEscape"].indexOf(e.disallowedTagsMode)>=0){R&&(i=o,o="");return}i+="</"+O+">",R&&(i=o+C(i),o=""),y=!1}},e.parser);return w.write(n),w.end(),i;function T(){i="",h=0,g=[],v={},b={},_=!1,E=0}function C(O,P){return typeof O!="string"&&(O=O+""),e.parser.decodeEntities&&(O=O.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),P&&(O=O.replace(/"/g,"&quot;"))),O=O.replace(/&(?![a-zA-Z0-9#]{1,20};)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),P&&(O=O.replace(/"/g,"&quot;")),O}function M(O,P){for(P=P.replace(/[\x00-\x20]+/g,"");;){const V=P.indexOf("<!--");if(V===-1)break;const X=P.indexOf("-->",V+4);if(X===-1)break;P=P.substring(0,V)+P.substring(X+3)}const k=P.match(/^([a-zA-Z][a-zA-Z0-9.\-+]*):/);if(!k)return P.match(/^[/\\]{2}/)?!e.allowProtocolRelative:!1;const R=k[1].toLowerCase();return nt(e.allowedSchemesByTag,O)?e.allowedSchemesByTag[O].indexOf(R)===-1:!e.allowedSchemes||e.allowedSchemes.indexOf(R)===-1}function L(O){if(O=O.replace(/^(\w+:)?\s*[\\/]\s*[\\/]/,"$1//"),O.startsWith("relative:"))throw new Error("relative: exploit attempt");let P="relative://relative-site";for(let R=0;R<100;R++)P+=`/${R}`;const k=new URL(O,P);return{isRelativeUrl:k&&k.hostname==="relative-site"&&k.protocol==="relative:",url:k}}function x(O,P){if(!P)return O;const k=O.nodes[0];let R;return P[k.selector]&&P["*"]?R=nc(P[k.selector],P["*"]):R=P[k.selector]||P["*"],R&&(O.nodes[0].nodes=k.nodes.reduce(A(R),[])),O}function D(O){return O.nodes[0].nodes.reduce(function(P,k){return P.push(`${k.prop}:${k.value}${k.important?" !important":""}`),P},[]).join(";")}function A(O){return function(P,k){return nt(O,k.prop)&&O[k.prop].some(function(R){return R.test(k.value)})&&P.push(k),P}}function I(O,P,k){return P?(O=O.split(/\s+/),O.filter(function(R){return P.indexOf(R)!==-1||k.some(function(V){return V.test(R)})}).join(" ")):O}}const Uy={decodeEntities:!0};xi.defaults={allowedTags:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","main","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","main","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr"],nonBooleanAttributes:["abbr","accept","accept-charset","accesskey","action","allow","alt","as","autocapitalize","autocomplete","blocking","charset","cite","class","color","cols","colspan","content","contenteditable","coords","crossorigin","data","datetime","decoding","dir","dirname","download","draggable","enctype","enterkeyhint","fetchpriority","for","form","formaction","formenctype","formmethod","formtarget","headers","height","hidden","high","href","hreflang","http-equiv","id","imagesizes","imagesrcset","inputmode","integrity","is","itemid","itemprop","itemref","itemtype","kind","label","lang","list","loading","low","max","maxlength","media","method","min","minlength","name","nonce","optimum","pattern","ping","placeholder","popover","popovertarget","popovertargetaction","poster","preload","referrerpolicy","rel","rows","rowspan","sandbox","scope","shape","size","sizes","slot","span","spellcheck","src","srcdoc","srclang","srcset","start","step","style","tabindex","target","title","translate","type","usemap","value","width","wrap","onauxclick","onafterprint","onbeforematch","onbeforeprint","onbeforeunload","onbeforetoggle","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextlost","oncontextmenu","oncontextrestored","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onformdata","onhashchange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onlanguagechange","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmessageerror","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onoffline","ononline","onpagehide","onpageshow","onpaste","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreset","onresize","onrejectionhandled","onscroll","onscrollend","onsecuritypolicyviolation","onseeked","onseeking","onselect","onslotchange","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","ontoggle","onunhandledrejection","onunload","onvolumechange","onwaiting","onwheel"],disallowedTagsMode:"discard",allowedAttributes:{a:["href","name","target"],img:["src","srcset","alt","title","width","height","loading"]},allowedEmptyAttributes:["alt"],selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto","tel"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","src","cite"],allowProtocolRelative:!0,enforceHtmlBoundary:!1,parseStyleAttributes:!0},xi.simpleTransform=function(n,e,t){return t=t===void 0?!0:t,e=e||{},function(i,o){let r;if(t)for(r in e)o[r]=e[r];else o=e;return{tagName:n,attribs:o}}};const zy=Go(jy),Fy={key:0,class:"multiplayer"},qy={class:"container"},Hy={class:"tabs"},Vy={key:0,class:"notifications"},Xy={class:"panel"},Wy=["title"],Zy=["innerHTML"],Gy={key:1,class:"text"},Yy={class:"message-input"},Ky={class:"panel"},Qy={class:"lobby"},Jy={class:"player"},$y={class:"name"},e0=["onDblclick","title"],t0=["onClick","title"],i0={__name:"BubbleMultiplayer",setup(n){var e=W("chat"),t=W(!1),i=W(!1),o=W(0),r=W(""),s=W([]),a=W(),c=W([]),u;function d(){app.network.on("peer_open",p),app.network.on("peer_close",l),app.network.on("peer_disconnected",m),app.network.on("connection_start",h),app.network.on("connection_open",g),app.network.on("connection_close",v),app.network.on("connection_data",b),window.addEventListener("levelStart",_),window.addEventListener("levelFinish",E)}function f(){app.network.off("peer_open",p),app.network.off("peer_close",l),app.network.off("peer_disconnected",m),app.network.off("connection_start",h),app.network.off("connection_open",g),app.network.off("connection_close",v),app.network.off("connection_data",b),window.removeEventListener("levelStart",_),window.removeEventListener("levelFinish",E)}function p(P){t.value=!0,C()&&w({name:"Server",text:"Server is ready! \u{1F60A}",time:I(),color:"#4ca9ff"})}function l(P){t.value=!1,C()&&w({name:"Server",text:"Server closed! \u{1F614}",time:I(),color:"#ff674c"})}function m(P){w({name:"Server",text:"Weak connection... \u{1F6DC}",time:I(),color:"#4ca9ff"})}function h(P){C()||(w({name:"Server",text:"Searching... \u{1F50D}",time:I(),color:"#4ca9ff"}),u=setTimeout(function(){w({name:"Error",text:"Host not found. Your connection may be blocked on this network. \u{1F614}",time:I(),color:"#ff674c"})},5e3))}function g(P){if(clearTimeout(u),C()){var k={type:"message",name:"Server",text:P.connection.metadata.name+" has connected! \u{1F44B}",time:I(),color:"#4ca9ff"};y(k)}}function v(P){var k={type:"message",name:"Server",text:P.connection.metadata.name+" has disconnected! \u{1F44B}",time:I(),color:"#4ca9ff"};C()?y(k):(k.name="Server",k.text="The host has disconnected! \u{1F614}",k.color="#4ca9ff",w(k)),c.value=app.multiplayer.players.children.slice(0)}function b(P){P.data.type=="message"?(w(P.data),C()&&(P.data.name=P.connection.metadata.name,app.network.connections.forEach(function(k){k.send(P.data)}))):P.data.type=="players"&&c.value.length!=app.multiplayer.players.children.length&&(c.value=app.multiplayer.players.children.slice(0))}function _(P){var k=app.storage.getSettings(),R=P.detail.title,V=P.detail.description,X={type:"message",name:k.name,text:'Is now playing <a href="'+R+'">'+V+"</a> \u25B6\uFE0F",time:I(),color:"#4cff64",raw:!0};app.network.isOnline()&&y(X)}function E(P){var k=P.detail.time,R=P.detail.level,V=app.level.getDescriptionByTitle(R),X=app.storage.getSettings(),G={type:"message",name:X.name,text:'Finished <a href="'+R+'">'+V+"</a> in \u{1F552}<strong>"+k+"s</strong>",time:I(),color:"#4cff64",raw:!0};app.network.isOnline()&&y(G)}function y(P){var k=app.storage.getSettings();if(P==null){if(r.value.value=="")return;P={type:"message",name:k.name+(C()?" [host]":""),text:r.value.value,time:I(),color:"#ffcc4d",raw:!0},r.value.value=""}C()?w(P):app.network.connections.size==0&&(P.name="Error",P.text="Host not found! \u{1F614}",P.color="#ff674c",w(P)),app.network.connections.forEach(function(R){R.send(P)})}function w(P){var k=zy(P.text,{allowedTags:["a","em","h1","h2","h3","h4","h5","h6","img"],allowedAttributes:{a:["href"],img:["src","width","height"]}});P.text=k,s.value.push(P),(e.value!="chat"||L())&&o.value++,T()}async function T(P=!1){if(a.value){var k=a.value,R=k.scrollTop+1>k.scrollHeight-k.clientHeight;await Yc(),(R||P==!0)&&(k.scrollTop=k.scrollHeight+1)}}function C(){return app.multiplayer.isHost()}function M(){return t.value}function L(){return i.value}function x(P){app.multiplayer.closeConnectionByUUID(P.uuid)}async function D(P){if(P.level!="My Level"){var k=await app.playLevelByTitle(P.level);if(k){window.dispatchEvent(new CustomEvent("setPage",{detail:"campaign"}));var R=app.multiplayer.getPlayer({uuid:P.uuid});R&&app.player.setPosition(R.position,!1)}else w({name:"Server",text:P.text+" is not playing an official level! \u{1F614}",time:I(),color:"#4ca9ff"})}else w({name:"Server",text:P.text+" is currently picking a level... \u23F3",time:I(),color:"#4ca9ff"})}function A(P){P==e.value?i.value=!i.value:i.value=!1,P=="chat"&&(o.value=0),e.value=P}function I(){return new Date().getTime()}async function O(P){P.preventDefault();var k=P.target;if(k.nodeName=="A"){var R=k.getAttribute("href"),V=await app.playLevelByTitle(R);V?window.dispatchEvent(new CustomEvent("setPage",{detail:"campaign"})):w({name:"Server",text:"Level does not exist! \u{1F614}",time:I(),color:"#4ca9ff"})}}return pe(function(){d()}),fe(function(){f()}),(P,k)=>(j(),ae(Xt,{name:"fade-multiplayer"},{default:Wt(()=>[M()?(j(),N("div",Fy,[S("div",qy,[S("div",Hy,[S("div",{class:$(["tab",{selected:B(e)=="chat"}]),onClick:k[0]||(k[0]=R=>A("chat")),title:"Chat"},[k[5]||(k[5]=S("span",{class:"material-symbols-rounded"},"chat",-1)),B(o)>0?(j(),N("span",Vy,me(B(o)),1)):K("",!0)],2),S("div",{class:$(["tab",{selected:B(e)=="lobby"}]),onClick:k[1]||(k[1]=R=>A("lobby")),title:"Lobby"},k[6]||(k[6]=[S("span",{class:"material-symbols-rounded"},"group",-1)]),2)]),S("div",{class:$(["content",{collapsed:L()}])},[Jn(S("div",Xy,[S("ul",{class:"messages",ref_key:"messageBox",ref:a,onClick:O},[(j(!0),N(Ce,null,Fe(B(s),R=>(j(),N("li",{class:"message",title:R.name},[S("span",{class:"name",style:Kn({color:R.color||"#ffffff"})},me(R.name),5),k[7]||(k[7]=S("span",null,": ",-1)),R.raw?(j(),N("span",{key:0,class:"text",innerHTML:R.text},null,8,Zy)):(j(),N("span",Gy,me(R.text),1))],8,Wy))),256))],512),S("div",Yy,[S("input",{type:"text",ref_key:"message",ref:r,placeholder:"Message",onKeydown:k[2]||(k[2]=Kc(R=>{y(null)},["enter"])),onFocus:k[3]||(k[3]=R=>{Xo(i)?i.value=!1:i=!1,Xo(o)?o.value=0:o=0}),maxlength:"128"},null,544),S("button",{onClick:k[4]||(k[4]=R=>y(null))},k[8]||(k[8]=[S("span",{class:"material-symbols-rounded"},"send",-1)]))])],512),[[$n,B(e)=="chat"]]),Jn(S("div",Ky,[S("ul",Qy,[(j(!0),N(Ce,null,Fe(B(c),R=>(j(),N("li",Jy,[S("span",$y,me(R.text),1),C()?(j(),N("span",{key:0,class:"action material-symbols-rounded",onDblclick:V=>x(R),title:"Double-click to kick "+R.text},"close",40,e0)):K("",!0),S("span",{class:"action material-symbols-rounded",onClick:V=>D(R),title:"Teleport to "+R.text},"play_arrow",8,t0)]))),256))])],512),[[$n,B(e)=="lobby"]])],2)])])):K("",!0)]),_:1}))}},n0={class:"tabs"},r0={__name:"BubbleSettingsTabs",props:["tab"],setup(n){var e=n;return(t,i)=>(j(),N("div",n0,[S("div",{class:$(["tab",{selected:n.tab=="graphics"}]),onClick:i[0]||(i[0]=o=>{t.$emit("changeTab","graphics")})},i[5]||(i[5]=[S("span",{class:"material-symbols-rounded"},"page_info",-1)]),2),S("div",{class:$(["tab",{selected:n.tab=="multiplayer"}]),onClick:i[1]||(i[1]=o=>{t.$emit("changeTab","multiplayer")})},i[6]||(i[6]=[S("span",{class:"material-symbols-rounded"},"group",-1)]),2),S("div",{class:$(["tab",{selected:n.tab=="gameplay"}]),onClick:i[2]||(i[2]=o=>{t.$emit("changeTab","gameplay")})},i[7]||(i[7]=[S("span",{class:"material-symbols-rounded"},"gamepad",-1)]),2),S("div",{class:$(["tab",{selected:n.tab=="audio"}]),onClick:i[3]||(i[3]=o=>{t.$emit("changeTab","audio")})},i[8]||(i[8]=[S("span",{class:"material-symbols-rounded"},"volume_up",-1)]),2),S("div",{class:$(["tab",{selected:n.tab=="data"}]),onClick:i[4]||(i[4]=o=>{t.$emit("changeTab","data")})},i[9]||(i[9]=[S("span",{class:"material-symbols-rounded"},"save",-1)]),2)]))}},o0={class:"panel"},s0={class:"group"},a0={class:"option"},l0=["value"],c0={for:"quality"},p0={class:"option"},d0=["checked"],u0={class:"group"},h0={class:"option"},f0=["checked"],m0={class:"option"},g0=["checked"],v0={__name:"BubbleSettingsPanelGraphics",props:["settings"],setup(n){var e=n;function t(){window.dispatchEvent(new CustomEvent("setTheme"))}function i(){app.level.showHelpers(e.settings.debug)}return(o,r)=>(j(),N("div",o0,[r[9]||(r[9]=S("p",null,"Graphics",-1)),S("div",s0,[r[5]||(r[5]=S("div",{class:"option"},[S("label",{for:"quality"},"Quality")],-1)),S("div",a0,[S("input",{type:"range",id:"quality",min:"1",max:"10",step:"1",value:n.settings.quality,onChange:r[0]||(r[0]=s=>o.$emit("updateSettings",s))},null,40,l0),S("label",c0,me(n.settings.quality*10)+"%",1)]),S("div",p0,[S("input",{type:"checkbox",id:"theme",checked:n.settings.theme=="origin",onChange:r[1]||(r[1]=s=>o.$emit("updateSettings",s,{true:"origin",false:"bubble"},t))},null,40,d0),r[4]||(r[4]=S("label",{for:"theme"},"Old UI",-1))])]),S("div",u0,[r[8]||(r[8]=S("div",{class:"option"},[S("label",null,"Developer Tools")],-1)),S("div",h0,[S("input",{type:"checkbox",id:"stats",checked:n.settings.stats==!0,onChange:r[2]||(r[2]=s=>o.$emit("updateSettings",s))},null,40,f0),r[6]||(r[6]=S("label",{for:"stats"},"Show FPS",-1))]),S("div",m0,[S("input",{type:"checkbox",id:"debug",checked:n.settings.debug==!0,onChange:r[3]||(r[3]=s=>o.$emit("updateSettings",s,null,i))},null,40,g0),r[7]||(r[7]=S("label",{for:"debug"},"Debug Mode",-1))])])]))}},y0={class:"panel"},b0={class:"group"},w0={class:"option"},x0=["value"],S0={class:"group"},k0={class:"option"},C0=["value"],_0={class:"option"},E0=["checked"],T0={class:"group"},P0={class:"option"},A0=["value"],M0={class:"option"},O0=["checked"],D0={__name:"BubbleSettingsPanelMultiplayer",props:["settings"],setup(n){var e=n;function t(a){if(app.network.off("peer_open",t),app.multiplayer.setHost(null),a.target.checked==!1){app.network.destroy();return}i()?app.network.connect(e.settings.connection,{metadata:{name:e.settings.name,uuid:app.player.uuid,time:app.multiplayer.getTime()}}):(app.network.on("peer_open",t),app.network.open(e.settings.peer))}function i(){return app.network.isOnline()}function o(){return app.multiplayer.isHost()}function r(){o()?(app.network.destroy(),app.multiplayer.setHost(null)):(app.network.open(e.settings.peer),app.multiplayer.setHost(e.settings.peer))}function s(a){var c=a.target,u=c.value;c.value="Copied!",c.disabled=!0,navigator.clipboard.writeText(u),setTimeout(function(){c.value=u,c.disabled=!1},1e3)}return(a,c)=>(j(),N("div",y0,[c[10]||(c[10]=S("p",null,"Multiplayer",-1)),S("div",b0,[S("div",w0,[c[5]||(c[5]=S("label",{for:"name"},"Your name",-1)),S("input",{type:"text",id:"name",value:n.settings.name,onChange:c[0]||(c[0]=u=>a.$emit("updateSettings",u))},null,40,x0)])]),S("div",S0,[S("div",k0,[c[6]||(c[6]=S("label",{for:"connection"},"Paste friend code",-1)),S("input",{type:"text",id:"connection",value:n.settings.connection,onChange:c[1]||(c[1]=u=>a.$emit("updateSettings",u)),placeholder:"ex: 4630cba6-b969-46f3-8d32-e77324054612"},null,40,C0)]),S("div",_0,[S("input",{type:"checkbox",id:"join-multiplayer",checked:i()&&o()==!1,onChange:c[2]||(c[2]=u=>t(u))},null,40,E0),c[7]||(c[7]=S("label",{for:"join-multiplayer"},"Join Server",-1))])]),S("div",T0,[S("div",P0,[c[8]||(c[8]=S("label",{for:"peer-id"},"Share friend code",-1)),S("input",{type:"text",id:"peer-id",value:n.settings.peer,onClick:c[3]||(c[3]=u=>s(u)),readonly:""},null,8,A0)]),S("div",M0,[S("input",{type:"checkbox",id:"host-multiplayer",checked:o(),onChange:c[4]||(c[4]=u=>r(u))},null,40,O0),c[9]||(c[9]=S("label",{for:"host-multiplayer"},"Host Server",-1))])])]))}},L0={class:"panel"},I0={class:"group"},R0={class:"option"},B0=["checked"],j0={class:"group"},N0={class:"option"},U0=["value"],z0={__name:"BubbleSettingsPanelGameplay",props:["settings"],setup(n){var e=n;function t(){var o=localStorage.getItem("mods");return(o==null||o=="")&&(o="app.loop.speed = 2;"),o}function i(o){var r=o.target.value;localStorage.setItem("mods",r)}return(o,r)=>(j(),N("div",L0,[r[3]||(r[3]=S("p",null,"Gameplay",-1)),S("div",I0,[S("div",R0,[S("input",{type:"checkbox",id:"motion",checked:n.settings.motion==!0,onChange:r[0]||(r[0]=s=>o.$emit("updateSettings",s))},null,40,B0),r[1]||(r[1]=S("label",{for:"motion"},"Camera Motion",-1))])]),r[4]||(r[4]=S("p",null,"Mods",-1)),S("div",j0,[S("div",N0,[r[2]||(r[2]=S("label",{for:"mods"},[S("span",{class:"material-symbols-rounded"},"assignment"),Be(" Clipboard")],-1)),S("textarea",{value:t(),id:"mods",onChange:i,spellcheck:"false"},null,40,U0)])]),r[5]||(r[5]=Qc('<div class="group"><div class="option"><label><span class="material-symbols-rounded">security</span> For your security, mods must be manually loaded each time the game is launched.</label></div></div><div class="group"><div class="option"><label><span class="material-symbols-rounded">content_copy</span> Copy mods from trusted websites and paste them in the clipboard for later.<br><br>Trusted mods: <a href="https://github.com/Charlieee1/Boxel-3d-Mods/" target="_blank">github.com/Charlieee1</a></label></div></div><div class="group"><div class="option"><label><span class="material-symbols-rounded">arrow_selector_tool</span> Right-click this game and select <em>Inspect</em>.</label></div></div><div class="group"><div class="option"><label><span class="material-symbols-rounded">slideshow</span> Select the <em>Console</em> tab, paste mods from the clipboard, then press the <em>enter</em> key to load mods.</label></div></div>',4))]))}},F0={class:"panel"},q0={class:"group"},H0={class:"option"},V0=["value"],X0={for:"volume"},W0={__name:"BubbleSettingsPanelAudio",props:["settings"],setup(n){var e=n;return(t,i)=>(j(),N("div",F0,[i[2]||(i[2]=S("p",null,"Audio",-1)),S("div",q0,[i[1]||(i[1]=S("div",{class:"option"},[S("label",{for:"volume"},"Volume")],-1)),S("div",H0,[S("input",{type:"range",id:"volume",min:"0",max:"1",step:"0.1",value:n.settings.volume,onChange:i[0]||(i[0]=o=>t.$emit("updateSettings",o))},null,40,V0),S("label",X0,me(n.settings.volume*100)+"%",1)])])]))}},Z0={class:"panel"},G0={class:"group"},Y0={class:"option"},K0={class:"group"},Q0={class:"option"},J0={__name:"BubbleSettingsPanelData",props:["settings"],setup(n){var e=n;function t(){return chrome.storage!=null}function i(){app.storage.backupToFile()}function o(){app.storage.backupToChrome()}function r(){app.storage.restoreFromFile()}function s(){app.storage.restoreFromChrome()}return(a,c)=>(j(),N("div",Z0,[c[2]||(c[2]=S("p",null,"Data",-1)),S("div",G0,[c[0]||(c[0]=S("div",{class:"option"},[S("label",null,"Backup to...")],-1)),S("div",Y0,[S("input",{type:"button",value:"File",onClick:i}),t()?(j(),N("input",{key:0,type:"button",value:"Google",onClick:o})):K("",!0)])]),S("div",K0,[c[1]||(c[1]=S("div",{class:"option"},[S("label",null,"Restore from...")],-1)),S("div",Q0,[S("input",{type:"button",value:"File",onClick:r}),t()?(j(),N("input",{key:0,type:"button",value:"Google",onClick:s})):K("",!0)])])]))}},$0={key:0,class:"popup settings"},eb={class:"container"},tb={class:"content compact"},ib={__name:"BubbleSettings",setup(n){var e=W("graphics"),t=W([]),i=W(!1),o=W();function r(){window.addEventListener("openSettings",a),window.addEventListener("closeSettings",c),window.addEventListener("keydown",p)}function s(){window.removeEventListener("openSettings",a),window.removeEventListener("closeSettings",c),window.removeEventListener("keydown",p)}function a(m){i.value=!0,o.value=app.storage.getSettings(),window.dispatchEvent(new CustomEvent("beforeSettingsOpened")),setTimeout(function(){window.dispatchEvent(new CustomEvent("settingsOpened"))},100)}function c(){i.value=!1,window.dispatchEvent(new CustomEvent("beforeSettingsClosed")),setTimeout(function(){window.dispatchEvent(new CustomEvent("settingsClosed"))},100)}function u(m){e.value=m}function d(m,h){m==null&&(m=c),m(h)}function f(m){var h=t.value[t.value.length-1];h?d(h.callback,m):c()}function p(m){if(i.value==!0){var h=["Escape"];h.indexOf(m.code)>-1&&(m.preventDefault(),f(m))}}function l(m,h,g=function(){}){var v=m.target,b=v.id,_=v.value,E=m.target.type;E=="range"&&(_=parseFloat(_)),E=="checkbox"&&(_=v.checked),h&&(_=h[_]),o.value[b]=_,app.updateSettings(o.value),g()}return pe(function(){r()}),fe(function(){s()}),(m,h)=>(j(),ae(Xt,{name:"fade-settings"},{default:Wt(()=>[B(i)==!0?(j(),N("div",$0,[S("div",{class:"background",onClick:f}),S("div",eb,[de(r0,{tab:B(e),onChangeTab:u},null,8,["tab"]),S("div",tb,[B(e)=="graphics"?(j(),ae(v0,{key:0,settings:B(o),onUpdateSettings:l},null,8,["settings"])):K("",!0),B(e)=="multiplayer"?(j(),ae(D0,{key:1,settings:B(o),onUpdateSettings:l},null,8,["settings"])):K("",!0),B(e)=="gameplay"?(j(),ae(z0,{key:2,settings:B(o),onUpdateSettings:l},null,8,["settings"])):K("",!0),B(e)=="audio"?(j(),ae(W0,{key:3,settings:B(o),onUpdateSettings:l},null,8,["settings"])):K("",!0),B(e)=="data"?(j(),ae(J0,{key:4,settings:B(o),onUpdateSettings:l},null,8,["settings"])):K("",!0),S("a",{class:"close",onClick:f},h[0]||(h[0]=[S("span",{class:"material-symbols-rounded"},"close",-1)]))])])])):K("",!0)]),_:1}))}},nb={key:0,class:"popup"},rb={class:"container"},ob={class:"content"},sb=["innerHTML"],ab={class:"inputs"},lb=["for"],cb=["id","type","value","min","max","step","accept"],pb={__name:"BubblePopup",setup(n){var e=W(""),t=W([]),i=W(!1);function o(){window.addEventListener("openPopup",s),window.addEventListener("closePopup",a),window.addEventListener("keydown",d)}function r(){window.removeEventListener("openPopup",s),window.removeEventListener("closePopup",a),window.removeEventListener("keydown",d)}function s(f){i.value=!0,f.detail&&(f.detail.text&&(e.value=f.detail.text),f.detail.inputs&&(t.value=f.detail.inputs,t.value.forEach(function(p){p.type=="file"||p.type=="range"||p.type=="text"?p.event="change":p.event="click"}))),setTimeout(function(){window.dispatchEvent(new CustomEvent("popupOpened"))},100)}function a(){i.value=!1,setTimeout(function(){window.dispatchEvent(new CustomEvent("popupClosed"))},100)}function c(f,p){f==null&&(f=a),f(p)}function u(f){var p=t.value[t.value.length-1];p&&c(p.callback,f)}function d(f){if(i.value==!0){var p=["Space","Enter","Escape"];p.indexOf(f.code)>-1&&(f.preventDefault(),u(f))}}return pe(function(){o()}),fe(function(){r()}),(f,p)=>(j(),ae(Xt,{name:"fade-bubble-popup"},{default:Wt(()=>[B(i)==!0?(j(),N("div",nb,[S("div",{class:"background",onClick:u}),S("div",rb,[S("div",ob,[S("p",{class:"text",innerHTML:B(e)},null,8,sb),S("div",ab,[(j(!0),N(Ce,null,Fe(B(t),(l,m)=>(j(),N(Ce,null,[l.label?(j(),N("label",{key:0,for:"popup-"+l.type+"-"+m},me(l.label),9,lb)):K("",!0),S("input",Ho({class:l.class,id:"popup-"+l.type+"-"+m,type:l.type,value:l.value,min:l.min,max:l.max,step:l.step,accept:l.accept,style:l.style},{[Vo(l.event)]:h=>c(l.callback,h)}),null,16,cb)],64))),256))]),S("a",{class:"close",onClick:u},p[0]||(p[0]=[S("span",{class:"material-symbols-rounded"},"close",-1)]))])])])):K("",!0)]),_:1}))}},db={class:"ui-bubble"},ub={__name:"Bubble",setup(n){var e=W("home");function t(){window.addEventListener("setPage",o)}function i(){window.removeEventListener("setPage",o)}function o(s){s.detail&&r(s.detail)}function r(s){e.value=s,app.state=s}return pe(function(){t()}),fe(function(){i()}),(s,a)=>(j(),N("div",db,[B(e)=="home"?(j(),ae(Kh,{key:0,onSetPage:r})):K("",!0),B(e)=="skins"?(j(),ae(ef,{key:1,onSetPage:r})):K("",!0),B(e)=="level-picker"?(j(),ae(sf,{key:2,onSetPage:r})):K("",!0),B(e)=="campaign"?(j(),ae(wf,{key:3,onSetPage:r})):K("",!0),de(i0),de(ib),de(pb)]))}},hb={class:"loading"},fb={class:"bar"},mb={__name:"Loading",setup(n){var e=W({urls:"",index:0,max:1,percent:0});function t(o){e.value=o}function i(){return e.value.percent==100}return window.addEventListener("updateLoading",function(o){t(o.detail)}),(o,r)=>(j(),ae(Xt,{name:"fade-loading"},{default:Wt(()=>[Jn(S("div",hb,[S("div",fb,[S("div",{class:"progress",style:Kn({width:B(e).percent+"%"})},null,4)]),S("label",null,"Loading: "+me(B(e).percent)+"%",1)],512),[[$n,i()==!1]])]),_:1}))}},gb={__name:"UI",setup(n){var e=W("bubble"),t=["origin","bubble"];function i(){window.addEventListener("setTheme",r)}function o(){window.removeEventListener("setTheme",r)}function r(a){if(a&&a.detail)s(a.detail);else{var c=JSON.parse(localStorage.getItem("settings"));c&&c.theme!=null&&(t.includes(c.theme)?s(c.theme):(c.theme=e.value,localStorage.setItem("settings",JSON.stringify(c))))}}function s(a){e.value=a}return pe(function(){r(),i()}),fe(function(){o()}),(a,c)=>(j(),N(Ce,null,[B(e)=="origin"?(j(),ae(Nh,{key:0})):K("",!0),B(e)=="bubble"?(j(),ae(ub,{key:1})):K("",!0),de(mb)],64))}},vb={__name:"App",setup(n){var e=W(),t=window.app=new Eu;return pe(function(){t.init(e.value)}),(i,o)=>(j(),N(Ce,null,[S("canvas",{ref_key:"canvas",ref:e},null,512),de(gb)],64))}};Jc(vb).mount("#app");
